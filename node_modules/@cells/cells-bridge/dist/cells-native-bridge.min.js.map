{"version":3,"sources":["webpack://cellsNative/webpack/universalModuleDefinition","webpack://cellsNative/cells-native-bridge.min.js","webpack://cellsNative/webpack/bootstrap","webpack://cellsNative/./node_modules/es5-dot-prop/index.js","webpack://cellsNative/./node_modules/node-libs-browser/node_modules/events/events.js","webpack://cellsNative/./node_modules/cells-semaas-adapter/dist/cells-semaas-adapter.js","webpack://cellsNative/./src/polyfills.js","webpack://cellsNative/(webpack)/buildin/module.js","webpack://cellsNative/./node_modules/is-obj/index.js","webpack://cellsNative/./node_modules/tslib/tslib.es6.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/isFunction.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/hostReportError.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/isObject.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/Subscription.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/canReportError.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/toSubscriber.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/noop.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/pipe.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/Observable.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/map.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/observable/fromEvent.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/filter.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/observable/empty.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/isScheduler.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/observable/fromArray.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/observable/of.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/observable/throwError.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/symbol/iterator.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/isPromise.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/subscribeToResult.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/isInteropObservable.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/isIterable.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduled/scheduled.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/observable/from.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/mergeMap.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/identity.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/mergeAll.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/observable/merge.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/concatAll.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/observable/concat.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/startWith.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/distinctUntilChanged.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/take.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/throwIfEmpty.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/first.js","webpack://cellsNative/./src/core/featureflag/feature-flag-component.js","webpack://cellsNative/./src/polymer/resolution-checker.js","webpack://cellsNative/./src/core/manager/events.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/Notification.js","webpack://cellsNative/./src/core/constants.js","webpack://cellsNative/./src/core/manager/dom.js","webpack://cellsNative/./src/core/manager/storage.js","webpack://cellsNative/./src/core/connector.js","webpack://cellsNative/./src/core/utils.js","webpack://cellsNative/./src/core/sanitizer.js","webpack://cellsNative/./src/core/manager/page.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/config.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/Observer.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/isArray.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/Subscriber.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/symbol/observable.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/SubjectSubscription.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/Subject.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduler/Action.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/Scheduler.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/scheduler/queue.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/operators/observeOn.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/ReplaySubject.js","webpack://cellsNative/./src/core/state/channel.js","webpack://cellsNative/./src/core/state/subscriptor.js","webpack://cellsNative/./src/core/featureflag/feature-flag-collection.js","webpack://cellsNative/./src/core/component-connector.js","webpack://cellsNative/./src/core/route.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/InnerSubscriber.js","webpack://cellsNative/./src/core/router.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/isArrayLike.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/subscribeTo.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/OuterSubscriber.js","webpack://cellsNative/./src/core/navigation-stack.js","webpack://cellsNative/./src/core/manager/import.js","webpack://cellsNative/./src/core/component.js","webpack://cellsNative/./src/core/template.js","webpack://cellsNative/./src/core/manager/template.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/EmptyError.js","webpack://cellsNative/./node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js","webpack://cellsNative/./src/core/manager/bridge-channels.js","webpack://cellsNative/./src/core/manager/action-channels.js","webpack://cellsNative/./src/core/composer/composer-engine-proxy.js","webpack://cellsNative/./src/core/monitoring.js","webpack://cellsNative/./src/core/manager/post-message.js","webpack://cellsNative/./src/core/bridge.js","webpack://cellsNative/./src/polymer/component-connector.js","webpack://cellsNative/./src/polymer/template.js","webpack://cellsNative/./src/polymer/manager/template.js","webpack://cellsNative/./src/polymer/component.js","webpack://cellsNative/./src/polymer/bridge.js","webpack://cellsNative/./src/native/constants.js","webpack://cellsNative/./src/native/component-connector.js","webpack://cellsNative/./src/native/manager/operation.js","webpack://cellsNative/./src/native/manager/plugin.js","webpack://cellsNative/./src/native/native-manager.js","webpack://cellsNative/./src/native/router.js","webpack://cellsNative/./src/native/manager/template.js","webpack://cellsNative/./src/native/manager/bridge-channels.js","webpack://cellsNative/./src/native/bridge.js","webpack://cellsNative/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getPathSegments","path","pathArr","split","parts","length","undefined","slice","push","isObj","require","obj","propertyIsEnumerable","set","delete","has","ProcessEmitWarning","warning","console","warn","EventEmitter","init","this","checkListener","listener","TypeError","_getMaxListeners","that","_maxListeners","defaultMaxListeners","_addListener","target","type","prepend","events","existing","_events","_eventsCount","newListener","emit","unshift","warned","w","Error","String","emitter","count","onceWrapper","fired","removeListener","wrapFn","arguments","apply","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","arr","copy","Array","spliceOne","list","index","pop","ret","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","position","originalListener","shift","off","removeAllListeners","keys","rawListeners","eventNames","global","request","method","_this","_ref","asyncToGenerator","regeneratorRuntime","mark","_callee","options","url","body","headers","configuration","response","result","wrap","_context","prev","next","JSON","stringify","content-type","forEach","header","headerValue","fetch","sent","ok","abrupt","json","t0","stop","_x","outerDecorator","duration","descriptor","configurable","debounce","debounceWrapper","_len","_key","clear","timeoutId","setTimeout","DEFAULT_DEBOUNCE_DURATION","clearTimeout","_applyDecoratedDescriptor","decorators","desc","initializer","writable","reverse","reduce","decorator","_typeof","iterator","constructor","fn","gen","Promise","resolve","reject","step","info","done","then","classCallCheck","instance","Constructor","createClass","defineProperties","props","protoProps","staticProps","_extends","assign","source","toConsumableArray","isArray","arr2","from","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","makeInvokeMethod","tryCatch","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","AsyncIterator","invoke","record","hasOwn","__await","unwrapped","enqueue","callInvokeWithMethodAndArg","previousPromise","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","_sent","dispatchException","GenStateSuspendedYield","return","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","values","iterable","iteratorMethod","iteratorSymbol","Op","$Symbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","inModule","runtime","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","displayName","isGeneratorFunction","genFun","ctor","setPrototypeOf","__proto__","awrap","async","iter","toString","skipTempReset","charAt","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","_dec","_class","SEMAAS_REQUIRED_FIELDS","SEMAAS","DEFAULT_ADAPTER_IDENTIFIER","DEFAULT_ADAPTER_VERSION","REQUIRED_FIELDS","ALLOWED_FIELDS","buildServiceUri","codename","region","dnsTld","version","filter","Boolean","join","RHO","HOST","OMEGA","DEFAULT_LOG_LEVEL","MAXIMUM_BULK_SIZE","Constants","dotify","SEPARATOR_KEY","res","recurse","current","newKey","sanitizeObj","allowedFields","prop","includes","properties","hasProperty","field","hasProperties","expectedFields","every","groupBy","items","itemsContainingKey","find","createUUID","hexDigits","substr","Math","floor","random","uuid","Utils","OMEGA$1","sanitizeObj$1","Omega","mrId","sanitizedData","DEFAULT_LOG","creationDate","Date","now","level","RHO$1","ALLOWED_FIELDS$1","sanitizeObj$2","_createUUID","Span","config","spanId","initialize","start","startDate","finishDate","Rho","rawData","childSpanPrefix","DEFAULT_MR_ID","_rawData$mrId","parentSpan","normalizedParentSpan","getParentSpan","data","span","iterableData","map","item","Adapters","METHODS","GET","POST","Connector","get$$1","_x2","_x3","_ref2","_callee2","_context2","post","_x4","_x5","_x6","_ref3","_callee3","_context3","decorate","Decorators","groupBy$1","Queue","identifier","endpoint","operation","any","queueGroupedByEndpoint","firstQueueGroup","bulk","newQueue","log","Omega$1","Rho$1","_Constants$SEMAAS","ALLOWED_FIELDS$2","OMEGA_HOST","RHO_HOST","hasProperties$1","outerDecorator$1","SEMaaS","nameSpace","consumerId","policy","tsec2JWTEndpoint","apiKey","omega","rho","queue","setup","validateConfig","createLog","omegaEndpoint","spans","buildSpans","rhoEndpoint","createSpan","prefixForChildSpan","UUID","send","add","flush","validApiKey","_this2","ensureValidApiKey","dump","buildApiHeaders","hasApiKey","hasCredentials","getApiKey","toLowerCase","_ref5","_callee4","host","accessToken","_context4","x-consumer-id","x-tsec-token","sessionStorage","getItem","x-validation-policy","tsec","getEndpoint","getOwnPropertyDescriptor","entries","ownProps","resArray","endsWith","searchString","subjectString","isFinite","lastIndex","indexOf","webpackPolyfill","deprecate","paths","children","x","__webpack_exports__","_classCallCheck","_defineProperties","_createClass","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","_getPrototypeOf","_inherits","subClass","superClass","_setPrototypeOf","dom_typeof","dom_classCallCheck","dom_defineProperties","dom_createClass","storage_extends","storage_classCallCheck","storage_defineProperties","storage_createClass","connector_classCallCheck","connector_defineProperties","connector_createClass","sanitizer_extends","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","sanitizer_classCallCheck","sanitizer_defineProperties","sanitizer_createClass","page_extends","page_classCallCheck","page_defineProperties","page_createClass","__extends","b","__","extendStatics","isFunction","hostReportError","isObject","flattenUnsubscriptionErrors","errors","errs","UnsubscriptionError","canReportError","observer","_a","closed_1","closed","destination","isStopped","Subscriber_Subscriber","toSubscriber","nextOrObserver","rxSubscriber","empty","noop","pipeFromArray","fns","input","getPromiseCtor","promiseCtor","config_config","project","thisArg","lift","MapOperator","fromEvent","eventName","resultSelector","pipe","Observable_Observable","subscriber","e","setupSubscription","sourceObj","unsubscribe","isEventTarget","source_1","addEventListener","removeEventListener","isJQueryStyleEventEmitter","source_2","isNodeStyleEventEmitter","source_3","predicate","FilterOperator","empty_empty","scheduler","emptyScheduled","EMPTY","schedule","isScheduler","scheduleArray","sub","Subscription_Subscription","fromArray","subscribeToArray","of","_i","throwError","dispatch","subscriptor_classCallCheck","subscriptor_defineProperties","subscriptor_createClass","_defineProperty","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arr","_n","_d","_e","_s","feature_flag_collection_extends","feature_flag_collection_classCallCheck","feature_flag_collection_defineProperties","feature_flag_collection_createClass","component_connector_extends","component_connector_classCallCheck","component_connector_defineProperties","component_connector_createClass","route_classCallCheck","route_defineProperties","route_createClass","getSymbolIterator","isPromise","subscribe","subscribeToResult","outerSubscriber","outerValue","outerIndex","innerSubscriber","InnerSubscriber_InnerSubscriber","subscribeTo","scheduleObservable","observable","observable_observable","schedulePromise","scheduleIterable","iterator_iterator","isInteropObservable","isIterable","scheduled","isArrayLike","mergeMap","concurrent","POSITIVE_INFINITY","a","ii","MergeMapOperator","identity","mergeAll","merge","observables","last","concatAll","startWith","array","distinctUntilChanged","compare","keySelector","DistinctUntilChangedOperator","navigation_stack_classCallCheck","navigation_stack_defineProperties","navigation_stack_createClass","router_slicedToArray","router_arrayWithHoles","router_iterableToArrayLimit","router_nonIterableRest","router_typeof","router_classCallCheck","router_defineProperties","router_createClass","router_possibleConstructorReturn","router_assertThisInitialized","_get","base","_superPropBase","router_getPrototypeOf","router_inherits","router_setPrototypeOf","import_classCallCheck","import_defineProperties","import_createClass","component_typeof","component_classCallCheck","component_defineProperties","component_createClass","component_possibleConstructorReturn","component_assertThisInitialized","component_getPrototypeOf","component_inherits","component_setPrototypeOf","template_typeof","template_classCallCheck","template_defineProperties","template_createClass","template_possibleConstructorReturn","template_assertThisInitialized","template_getPrototypeOf","template_inherits","template_setPrototypeOf","manager_template_classCallCheck","manager_template_defineProperties","manager_template_createClass","take","take_TakeOperator","defaultIfEmpty","defaultValue","DefaultIfEmptyOperator","throwIfEmpty","errorFactory","defaultErrorFactory","ThrowIfEmptyOperator","EmptyError","first","hasDefaultValue","v","bridge_channels_classCallCheck","bridge_channels_defineProperties","bridge_channels_createClass","action_channels_classCallCheck","action_channels_defineProperties","action_channels_createClass","composer_engine_proxy_classCallCheck","composer_engine_proxy_defineProperties","composer_engine_proxy_createClass","monitoring_extends","monitoring_classCallCheck","monitoring_defineProperties","monitoring_createClass","feature_flag_component_defineProperty","feature_flag_component_extends","defaultChangedCallback","_defaultCallbackElement","extend","cellsComponent","bridge","extraConnections","_defaultConnections","spec","nodeFFCallback","node","BRIDGE_BIND_KEY","_nodeFFCallbackWrap","connections","lastValue","in","BRIDGE_CHANNEL_KEY","_nodeFFCalback_toggleVisibility","fFValue","style","visibility","fFCallback","featureFlagCollection","ComponentConnector","_ffValue","featureFlag","_ffValueResult","_connections","_updateInConnections","subscriptors","inConnections","k","post_message_classCallCheck","post_message_defineProperties","post_message_createClass","asyncGeneratorStep","_next","_throw","_asyncToGenerator","bridge_extends","bridge_typeof","bridge_classCallCheck","bridge_defineProperties","bridge_createClass","polymer_component_connector_classCallCheck","polymer_component_connector_defineProperties","polymer_component_connector_createClass","component_connector_possibleConstructorReturn","component_connector_typeof","component_connector_assertThisInitialized","component_connector_get","component_connector_superPropBase","component_connector_getPrototypeOf","component_connector_inherits","component_connector_setPrototypeOf","isPolymerElementUnresolved","isCustomElement","tagName","isPolymer1","__isPolymerInstance__","isPolymer2","Polymer","Element","ElementMixin","LegacyElementMixin","is","ready","notifyPath","isLitElement","updateComplete","render","polymer_template_typeof","polymer_template_classCallCheck","polymer_template_defineProperties","polymer_template_createClass","polymer_template_possibleConstructorReturn","polymer_template_assertThisInitialized","polymer_template_getPrototypeOf","polymer_template_inherits","polymer_template_setPrototypeOf","manager_template_typeof","polymer_manager_template_classCallCheck","polymer_manager_template_defineProperties","polymer_manager_template_createClass","manager_template_possibleConstructorReturn","manager_template_assertThisInitialized","manager_template_getPrototypeOf","manager_template_inherits","manager_template_setPrototypeOf","polymer_component_typeof","polymer_component_classCallCheck","polymer_component_defineProperties","polymer_component_createClass","polymer_component_possibleConstructorReturn","polymer_component_assertThisInitialized","polymer_component_getPrototypeOf","polymer_component_inherits","polymer_component_setPrototypeOf","polymer_bridge_typeof","polymer_bridge_extends","polymer_bridge_classCallCheck","polymer_bridge_defineProperties","polymer_bridge_createClass","bridge_possibleConstructorReturn","bridge_assertThisInitialized","bridge_get","bridge_superPropBase","bridge_getPrototypeOf","bridge_inherits","bridge_setPrototypeOf","native_component_connector_typeof","native_component_connector_classCallCheck","native_component_connector_defineProperties","native_component_connector_createClass","native_component_connector_possibleConstructorReturn","native_component_connector_assertThisInitialized","native_component_connector_getPrototypeOf","native_component_connector_inherits","native_component_connector_setPrototypeOf","operation_classCallCheck","operation_defineProperties","operation_createClass","plugin_classCallCheck","plugin_defineProperties","plugin_createClass","native_manager_classCallCheck","native_manager_defineProperties","native_manager_createClass","native_router_typeof","router_extends","native_router_classCallCheck","native_router_defineProperties","native_router_createClass","native_router_possibleConstructorReturn","native_router_assertThisInitialized","router_get","router_superPropBase","native_router_getPrototypeOf","native_router_inherits","native_router_setPrototypeOf","native_manager_template_typeof","native_manager_template_classCallCheck","native_manager_template_defineProperties","native_manager_template_createClass","native_manager_template_possibleConstructorReturn","native_manager_template_assertThisInitialized","native_manager_template_getPrototypeOf","native_manager_template_inherits","native_manager_template_setPrototypeOf","bridge_channels_typeof","manager_bridge_channels_classCallCheck","manager_bridge_channels_defineProperties","manager_bridge_channels_createClass","bridge_channels_possibleConstructorReturn","bridge_channels_assertThisInitialized","bridge_channels_get","bridge_channels_superPropBase","bridge_channels_getPrototypeOf","bridge_channels_inherits","bridge_channels_setPrototypeOf","native_bridge_typeof","native_bridge_extends","native_bridge_classCallCheck","native_bridge_defineProperties","native_bridge_createClass","native_bridge_possibleConstructorReturn","native_bridge_assertThisInitialized","native_bridge_get","native_bridge_superPropBase","native_bridge_getPrototypeOf","native_bridge_inherits","native_bridge_setPrototypeOf","events_default","maxNumListeners","CustomEventEmitter","_EventEmitter","callback","eventManager","NotificationKind","bindingCodes","ALWAYS","DELAYED","UI","CURRENTVIEW","binding","DEFAULT","VALUES","externalEventsCodes","PAGE_READY","PARSE_ROUTE","AFTER_PUBLISH","NAV_REQUEST","BEFORE_SET_ATTR_TO_NODE","AFTER_SET_ATTR_TO_NODE","BEFORE_CREATE_NODE","AFTER_CREATE_NODE","BEFORE_IMPORT","AFTER_IMPORT","PAGE_REQUEST","PAGE_RESPONSE","DATA_LOAD","TEMPLATE_TRANSITION_END","TRACK_EVENT","TEMPLATE_REGISTERED","ROUTER_BACKSTEP","LOG_EVENT","externalEvents","componentsPath","composerEndpoint","deployEndpoint","initialTemplate","monitoring","pagesPath","prplCodes","NONE","DEFER","PROGRESSIVE","HERO","prpl","preRenderState","WORKING","REQUESTED","renderEngines","litElement","constants","CellsManagerDom","elements","element","createElement","__zone","zone","attrs","document","setAttrs","InMemmoryStorage","dictionary","CellsStorage","prefix","persistent","internalStorage","parse","storage","setItem","pattern","RegExp","test","removeItem","store","localStorage","CellsBridgeConnector","format","xhr","XMLHttpRequest","toUpperCase","status","responseText","statusText","open","setRequestHeader","dasherize","str","trim","replace","camelize","mathc","sep","utils","getPathFromComponent","componentDefinition","familyPath","tag","_tag","firstPath","CellsBridgeComposerSanitizer","component","componentType","fixed","priority","configType","_parseConnections","components","LTRIM_SLASH","_parseComponentsFromJson","jsonTemplate","template","_buildConfig","pages","jsonPages","page","currentPage","rawComponentDefinition","_normalizeComponentDefinition","cellsConnections","componentDefinitionWithConnections","params","_parseConnectionsParams","out","DEFAULT_PROPERTIES","paramDef","outBind","_createConnection","CC","DM","CellsManagerPage","_initCellsPageManager","_bridge$htmlPagesPath","htmlPagesPath","htmlPages","templatesPath","remoteTemplates","appId","getPlatform","cache","storagePrefix","composerEngine","TemplateManager","connector","CellsConnector","sanitizer","CellsSanitizer","replaced","hasTemplatePath","hasRemoteTemplates","oldWayOnlyCompopserEndpointDefined","_isLocalComposer","_localTemplate","_remoteTemplate","_renderComposerEndpoint","useComposerEngineForThisPage","removeTemplate","_getFromComposerEngine","_getFromConnector","getPage","_onResponse","generateRequestUrl","getJSON","_onResponseFail","getHTML","_onResponseHTML","html","onPageDefinitionNotFound","_enable_super_gross_mode_that_will_cause_bad_things","useDeprecatedSynchronousErrorHandling","stack","UnsubscriptionErrorImpl","Subscription","_parentOrParents","_subscriptions","_unsubscribe","remove","parent_1","teardown","subscription","tmp","subscriptions","subscriptionIndex","splice","_super","Subscriber","destinationOrNext","syncErrorValue","syncErrorThrown","syncErrorThrowable","Subscriber_SafeSubscriber","_error","_complete","_unsubscribeAndRecycle","SafeSubscriber","_parentSubscriber","observerOrNext","__tryOrSetError","__tryOrUnsub","wrappedComplete","parent","Observable","_isScalar","_subscribe","operator","sink","_trySubscribe","operations","toPromise","map_MapSubscriber","MapSubscriber","filter_FilterSubscriber","FilterSubscriber","ObjectUnsubscribedErrorImpl","ObjectUnsubscribedError","SubjectSubscription_SubjectSubscription","SubjectSubscription","subject","observers","subscriberIndex","Subject_SubjectSubscriber","SubjectSubscriber","Subject_Subject","Subject","hasError","thrownError","Subject_AnonymousSubject","asObservable","AnonymousSubject","Action_Action","Action","work","delay","AsyncAction_AsyncAction","AsyncAction","pending","id","recycleAsyncId","requestAsyncId","setInterval","clearInterval","execute","_execute","errored","errorValue","actions","QueueAction_QueueAction","QueueAction","Scheduler","SchedulerAction","AsyncScheduler_AsyncScheduler","AsyncScheduler","active","action","QueueScheduler_QueueScheduler","QueueScheduler","Notification_Notification","Notification","kind","hasValue","observe","do","accept","toObservable","createNext","undefinedValueNotification","createError","createComplete","completeNotification","observeOn_ObserveOnSubscriber","ObserveOnOperator","ObserveOnSubscriber","notification","scheduleMessage","ObserveOnMessage","ReplaySubject_ReplaySubject","ReplaySubject","bufferSize","windowTime","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","ReplayEvent","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","max","createChannel","channel","_nextFromSuperClass","generateUUID","getTime","hasObservers","onError","unsubscribeAll","clean","dispose","Subscriptor","publications","event","intervals","ids","getTimeFromNode","setTimeForNode","getTimeFromChannel","getIdFromNode","setIdForNode","getIdFromChannel","fnReplayOff","lastInterval","nodeInterval","lastId","nodeId","previousState","hasSubscription","makeCallbackWithNoReplay","pos","_firstInstanceOfObserver","subscriptionDetail","cleanPrivateChannels","match","Map","FeatureFlagCollection","_featureCollection","_conector","featureCollection","_publish","singleFeatureCollection","featureResponse","features","manager","getSubscriptor","CustomEvent","collection","ChannelManager","channels","getUnsafe","unregisterAllSubscriptors","cleanAllChannels","channelName","removeAllChannels","bridgeChannelsPrefix","subscriptor","_registerOutConnections","_registerInConnections","bindName","addSubscription","_wrapCallbackWithNode","updateSubscription","isActiveBridgeChannel","hasSubscriptions","cb","wrapCallback","hasPublisher","publication","outConnections","addPublication","outConnectionDefinition","isBridgeChannel","_hasPublisher","publish","wrapEvent","customEventName","detail","normalizedChannels","byChannelName","targetSubscriptions","findIndex","wrappedCb","AT_TARGET","Event","eventPhase","connection","FeatureFlagCollection_lastValue","wrappedListener","_isEventAtTarget","link","linkObject","backStep","analytics","wrapEventHandler","evt","Route","regexp","redirectPage","isAccessible","PARAM","TRAILING_SLASHES","exec","queryParams","param","encodeURIComponent","matchPath","_parseParam","query","queryParam","_404_PAGE_NAME","parseInt","parseFloat","_isNumber","_disposables","_currentRoute","_404Route","InnerSubscriber","notifyNext","notifyError","notifyComplete","subscribeToPromise","promise","subscribeToIterable","subscribeToObservable","obs","msg","OuterSubscriber_OuterSubscriber","OuterSubscriber","innerValue","innerIndex","innerSub","mergeMap_MergeMapSubscriber","MergeMapSubscriber","hasCompleted","buffer","_tryNext","_innerSub","ish","innerSubscription","distinctUntilChanged_DistinctUntilChangedSubscriber","DistinctUntilChangedSubscriber","hasKey","y","NavigationStack","navStack","skipNav","nav","skipHistory","to","navCount","createNavigation","routeFrom","routeTo","route","top","newNav","lastNav","lastNavigation","isBackwardNavigation","isSkipNavigation","_reverseNavigation","targetPage","currentRoute","_useHistory","_routes","SerialSubscription","_Subscription","_currentSubscription","Router","navigationStack","_createNavigationStack","isNavigationInProgress","routes","__routes","routeName","addRoute","skipNavs","addSkipNavigation","location","hash","HASH_PREFIX","_getHashPath","pathname","PATH_PREFIX","_getURLPath","fullPath","_fullPath$split","_fullPath$split2","_parseQuery","is404","parsePath","parseQuery","querystr","queries","_queries$i$split","_queries$i$split2","decodeURIComponent","route404","routeWithSamePattern","getRouteWithPattern","patternToMath","_this3","_setup404","useHistory","_observeStateChange","_observeHashChange","matchRoute","hashIsDirty","currentRouteName","currentRouteParams","createRoute","newRouteName","update","go","disposable","goReplacing","newNavigation","reverseNav","reverseNavigation","sanitizedName","getPath","updatePathInBrowser","navigation","fromRoute","auxFromRoute","backRoute","getLastRoute","historyReplaceState","historyPushState","locationReplace","locationHash","history","replaceState","pushState","_clearStack","clearUntil","SUPPORTS_HISTORY_API","_after","times","func","CellsManagerImport","endPoint","componentPath","rel","href","onload","onerror","setAttribute","head","appendChild","_importElement","baseUri","pageName","finishComponentLoading","iCb","_this4","priorityLists","_createPriorityLists","_chainElementLoading","sort","priorityA","priorityB","elem","sortedList","_createSortedArratByPriorityAndUniqueElements","currentPriority","pivote","elementPriorityLists","_this5","currentPromises","j","_importElementPromise","all","CellsBridgeComponent","_CellsBridgeManagerDo","ignoreAttr","HTMLElement","CellsBridgeManagerDom","CellsBridgeTemplate","_CellsComponent","_getPrototypeOf2","_temp","fixedChildren","zoneId","curTemplate","$","querySelector","_setAttribute","_getTemplate","_nextNavigation","isPage","_getCellsTemplateFromShadowRootChildNodes","shadowRoot","childNodes","el","newContentComponents","newFixedChildren","zoneCache","getZone","cellsTemplateConfig","_cellsTemplateConfig$","templateId","templateName","setProps","CellsComponent","CellsManagerTemplate","templates","selected","locations","size","fixedTemplates","persistentPages","viewLimit","maxSize","isPrerendering","_createFromJSON","_storeTemplate","componentName","_createCellsTemplate","_createFromHTMLElement","templateIsNotInFixedTemplates","cacheRanOutOfSpaceForNotFixedTemplates","olderTemplateToDeallocate","_getOlderRemovableTemplate","olderRemovableTemplate","found","isNotPersistantPage","CellsTemplate","oldPageName","bridgeChannelManager","tplName","deactivate","activate","updateAppContext","initPrivateChannel","parentNode","removeChild","crossContainerId","EmptyErrorImpl","ArgumentOutOfRangeErrorImpl","ArgumentOutOfRangeError","TakeOperator","total","take_TakeSubscriber","TakeSubscriber","defaultIfEmpty_DefaultIfEmptySubscriber","DefaultIfEmptySubscriber","isEmpty","throwIfEmpty_ThrowIfEmptySubscriber","ThrowIfEmptySubscriber","BridgeChannelManager","componentConnector","privateChannels","Set","getBridgeChannelPrefix","iddleChannel$","getAppContextChannelName","getCancelledBackNavigationChannelName","newName","getPrivateChannelPrefix","getPostMessageChannelPrefix","getAppContextChannel","getCancelledBackNavigationChannel","newPageName","publishPrivatePageStatus","getPrivate","createEvent","oldPage","newPage","fromPage","mainNode","bridgeChannels","chnlName","chnl","unregister","getEventChannelPrefix","ActionChannelManager","PageManager","getBridgeChannel","_configSubscriptor","_localesSubscriptor","_logoutSubscriptor","_isAllowedProperty","app","removeTemplates","I18nMsg","lang","logout","subscribeAll","ComposerEngineProxy","segments","customGroups","normalizedCustomGroups","initialParams","addParams","getComposerEngineChannelName","handleFeatureFlags","addSegments","addCustomGroups","segmentList","segmentId","customGroupList","aCustomGroup","existingGroup","isConstant","normalizeCustomGroups","group","customGroup","getPageForAll","cells_semaas_adapter","cells_semaas_adapter_default","es5_dot_prop","es5_dot_prop_default","dotProp","_Constants$monitoring","Monitoring","application","_bridge$semaas","semaas","logs","monitorArchitecture","applicationSemaasConfiguration","getApplicationConfiguration","initilizeSEMaaSAdapter","bridgeSemaasConfiguration","getBridgeConfiguration","semaasConfiguration","ingest","eventDetail","unflattenData","LOGGABLE_EVENTS","valuePath","feature_flag_component","PostMessageManager","postMessageTargetOrigin","enabled","getPostMessageChannel","_sendPostMessage","postMessage","DEFAULT_INITIAL_TEMPLATE","DEFAULT_PAGES_PATH","coreInstances","globalChannel","CellsBridge","DomManager","ImportManager","Sanitizer","prplLevel","debug","preCache","preRender","__mainNodeElement","useComposerEngine","appJson","navRequestListener","_normalizePrplLevel","preRenderingPages","dependencies","_initDependencies","_initComposerEngine","_plugExternalEvents","FeatureFlagComponent","defaultFeatures","src","_initCrossComponents","assert","$core","printDebugInfo","subscribeToEvent","registerInConnection","registerOutConnection","navigate","trackEvent","navigateToNative","cells","initAppContextChannel","_executePendingBridgeQueue","_logBridgeReady","routeHandler","addRoutes","_initSkipNavigations","navigationDetail","cleanUntil","paramPage","clearStackUntil","handleBack","setupPostMessages","back","goBack","cellsBridgeQueue","queuedItem","command","parameters","queuedCommand","logBridge","skipNavigations","addSkipNavigations","prplLevelCode","normalizedCode","prplList","payload","getMainNode","dispatchEvent","_loop","_dispatchEvent","monitor","_initEventChannels","isApplicationLogEvent","isLoggable","isBridgeLoggableEvent","buildLog","hasApplicationLoggingEnabled","logApplication","hasBridgeLoggingEnabled","initEventChannels","_addInitialSubscribersToEvents","eventSubscriptions","_subscribeToEvents","crossContainerTemplateId","parseTemplateId","crossContainer","crossContainerElement","getElementById","register","ManagerDom","ManagerPage","dependence","cmp","Component","container","_createCellsComponent","__parentTemplate","progressiveRegister","bindingType","itemsToInject","_createLocalComponent","isPreRendering","createComponentsByType","unresolvedComponents","templateParents","parentName","append","isUnresolved","loadComponent","selectTemplate","loadComponentByPriority","getNode","createFromComponent","loadPolymerWebComponent","isLocal","_isLocalTemplate","onlyLitElements","_createTemplateFromSpec","loadBundleForTemplate","_preRender","_this6","pageAlreadyLoaded","loadTemplate","templateResponse","doPreRender","_idleCallback","createTemplate","_this7","_createComponents","getColor","option","color","hexColor","_handleRouteLoading","eventData","fill","_this8","isRoutableComponent","createPageFromWebComponent","selectPage","currentTemplate","previousTemplate","unregisterChildren","registerChildren","_updateChannels","oldName","htmlElement","_this9","oldTemplateName","onRender","_waitRenderComplete","_handleParams","select","shouldBindParams","_this10","shouldRender","onTemplateAnimationFinishes","registerCurrentTemplate","animationCompleteEvent","listenToOnce","animateTemplate","getIdleCallbackChannel","resetBridgeChannels","_resetBridgeChannels","removeTemplateChildrens","_dashToCamelCase","group1","_getProperyChangedName","propertyName","EVENT_CHANGED","_parseActionInEvent","targetPath","CellsPolymerComponentConnector","_CellsComponentConnec","requestIdleCallback","checkDispatchActionType","mutations","observerObject","isPolymerElement","_isPolymerElement","_isLitElement","_dispatchActionFunction","_dispatchActionProperty","disconnect","MutationObserver","attributes","childList","characterData","_whichPolymerVersion","normalizedTagName","_window","customElements","atTarget","Settings","hasShadow","useShadow","normalizedEvent","dom","localTarget","currentTarget","rootTarget","parsePayload","_properties","_finalize","isProperty","_handleAttribute","getPropertyInfo","_getTargetProperties","defined","readOnly","computed","removeAttribute","__isCellsConnected","_action","attrName","polymerVersion","__data","_hasReadOnlyEffect","_hasComputedEffect","oldValue","__data__","CellsComponentConnector","PolymerTemplate","_CellsBridgeTemplate","PolymerTemplateManager","_CellsManagerTemplate","cellsTemplate","_createCellsTemplateConfig","parseTemplateName","PolymerComponent","_CellsBridgeComponent","CellsPolymerBridge","_CellsBridge","avoidPolymerEventCache","origGetEvent","Base","_getEvent","bubbles","cancelable","PolymerComponentConnector","OPERATIONS","SYNC_CHANNELS_DATA","RESET_CHANNELS_DATA","NATIVE","BACK_STEP","NAVIGATION","RESET_WEBVIEW","LOGOUT","UPDATE_SKIP_NAVIGATIONS","HTML","NAVIGATION_AND_REPLACE","BRIDGE_READY","PAGE_LOADED","PAGE_UNLOADED","EVENTS","NATIVE_CHANNEL_SYNC","NATIVE_BACKSTEP_REQUEST","NATIVE_NAVIGATION_REQUEST","INTERNAL_ROUTER_NAVIGATION","INTERNAL_ROUTER_BACKSTEP","INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE","ROUTER_NAVIGATION","NATIVE_LOGOUT","PRIVATE","KEYS","NATIVE_CHANNEL","NATIVE_PLUGIN_CHANNEL","PREFIX","NATIVE_ROUTE","PRIVATE_CHANNEL","PLUGIN_RESPONSE_STATUS","SUCCESS","ERROR","PLUGIN_RESPONSE_CALLBACKS","SUCCESS_ACCESSOR","FAIL_ACCESSOR","PRIVATE_EVENTS","CellsNativeComponentConnector","_CellsPolymerComponen","getNativeEventChannelPrefix","publicChannels","_getPublicChannels","_isValidChannel","_getChannel","_getChannels","channelNames","_isPublicChannel","startsWith","_getChannelPayload","_hasPayload","_hasForbiddenPayload","_hasContent","_isHTMLElement","FORBIDDEN_PAYLOAD_PROPERTIES","_syncChannel","getAllChannels","nativeLink","NativeOperationManager","_OPERATIONS$NATIVE","_executeSyncChannelsData","_executeBackStep","_executeNavigation","_executeResetWebview","_executeLogout","_executeUpdateSkipNavigations","_getChannelsFromPayload","channelsData","_mapChannel","channelPayload","CellsNativePluginManager","_callbacks","_prepareCellsNativeBridgeNameSpace","CellsNativePlugins","pluginManager","_executePlugin","pluginResponse","_processPluginResponse","success","fail","plugin","pluginPID","pluginMessage","_createPluginMessage","_storeCallback","_sendMessage","callbackId","_normalizePluginResponse","accessor","crypto","getRandomValues","Uint8Array","pluginId","actionId","CellsNativeManager","operationManager","_attachEventListeners","_processMessage","pageParams","navigationMessage","_createNavigationMessage","backStepMessage","_createBackStepMessage","syncChannelsDataMessage","_createSyncChannelsDataMessage","bridgeReadyMessage","_createBridgeReadyMessage","loaded","pageMessage","_createPageStatusMessage","resetChannelsMessage","_createResetChannelsMessage","op","_OPERATIONS$HTML","payloadChannel","rawMessage","_parseMessage","_this$_mapMessage","_mapMessage","parsedData","CellsNativeRouter","_CellsRouter","initialRoute","native","_route$options","lastRouteName","cleanNavigationStack","routeToAppend","replaceRoute","pauseInMiliseconds","startTime","elapsedTime","isCommingBackFromNativeRoute","isNativeRoute","isGoingBackToNativeRoute","_wait","CellsRouter","CellsNativeTemplateManager","_PolymerTemplateManag","resetNextNavigation","getAttribute","NativeBridgeChannelManager","_BridgeChannelManager","normalizedOldPageName","normalizedNewPageName","appState","CoreConstants","WAIT_UNTIL_NEXT_LOGOUT","CellsNativeBridge","_CellsPolymerBridge","_initialRouteHandled","_shouldInitPrivateEvents","_initEvents","_initComponentConnector","_doPreRender","_notifyBridgeReady","_lastLogoutTime","NativeManager","_this$_parsePublishOp","_parsePublishOptions","forwardToNative","_handleSyncDataToNative","_ref$forwardToNative","_this$Router$currentR","handleForward","cacheSelected","_cacheSelected","_removeTemplates","_resetEventSubscriptions","elapsedMillisecondsSinceLastTimeLogout","canDoLogout","invalidateLocationHash","preRenderConfig","resetRouter","initialPos","goToNative","substring","sendNavigationMessage","AppConfig","_handleNativeSyncChannelsData","_handleNavigationRequest","_handleBackRequest","resetWebView","logoutDueToNativeRequest","updateSkipNavigations","_handleNavigationStack","_handleBackRequestFromNative","_handleNativeNavRequest","_handleNativeBack","handleI18n","_onLocaleChange","handleConfig","_onConfigChange","handleAppContextChange","_onAppContextChanged","initialPreRender","contextInfo","sendPageStatusMessage","sendBridgeReadyMessage","willAppear","_isNewStateIsEqualToOldState","_prepareNavigationParams","composed","_unflattenRouteFromEvent","currentTemplateName","previousTemplateName","previousTemplateIsInitialPage","previousStatePageWasInitialPage","previousPage","isSameState","privateChannelsAlreadyInitialized","shouldInitPrivateEvents","oldRoute","newRoute","updatePrivateChannels","continue","backNavigation","onNativeBackStepRequest","handlePrivateChannelsForNavigation","backToPage","_doBeforeBack","cancelledNavigation","publishCancelledBackNavigation","manageStack","_detail$cleanNavigati","_detail$cleanUntil","_detail$replace","paramsValues","_unflattenRouteParams","swapParamsDefinition","targetProperty","valueProperty","getChannel","sendSyncChannelsDataMessage","_unflattenNavigationData","resetChannels","_syncChannelsToNative","eventPayload","_route$cleanNavigatio","_route$cleanUntil","routeParams","sendBackstepMessage","navigations","syncChannels","getChannels","TARGET_NAMESPACE","TARGETS","windowExport","Bridge"],"mappings":"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","file":"cells-native-bridge.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cellsNative\"] = factory();\n\telse\n\t\troot[\"cellsNative\"] = factory();\n})(window, function() {\nreturn ","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cellsNative\"] = factory();\n\telse\n\t\troot[\"cellsNative\"] = factory();\n})(window, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 8);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */,\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar isObj = __webpack_require__(7);\n\nfunction getPathSegments(path) {\n  var pathArr = path.split('.');\n  var parts = [];\n\n  for (var i = 0; i < pathArr.length; i++) {\n    var p = pathArr[i];\n\n    while (p[p.length - 1] === '\\\\' && pathArr[i + 1] !== undefined) {\n      p = p.slice(0, -1) + '.';\n      p += pathArr[++i];\n    }\n\n    parts.push(p);\n  }\n\n  return parts;\n}\n\nmodule.exports = {\n  get: function (obj, path, value) {\n    if (!isObj(obj) || typeof path !== 'string') {\n      return value === undefined ? obj : value;\n    }\n\n    var pathArr = getPathSegments(path);\n\n    for (var i = 0; i < pathArr.length; i++) {\n      if (!Object.prototype.propertyIsEnumerable.call(obj, pathArr[i])) {\n        return value;\n      }\n\n      obj = obj[pathArr[i]];\n\n      if (obj === undefined || obj === null) {\n        // `obj` is either `undefined` or `null` so we want to stop the loop, and\n        // if this is not the last bit of the path, and\n        // if it did't return `undefined`\n        // it would return `null` if `obj` is `null`\n        // but we want `get({foo: null}, 'foo.bar')` to equal `undefined`, or the supplied value, not `null`\n        if (i !== pathArr.length - 1) {\n          return value;\n        }\n\n        break;\n      }\n    }\n\n    return obj;\n  },\n  set: function (obj, path, value) {\n    if (!isObj(obj) || typeof path !== 'string') {\n      return;\n    }\n\n    var pathArr = getPathSegments(path);\n\n    for (var i = 0; i < pathArr.length; i++) {\n      var p = pathArr[i];\n\n      if (!isObj(obj[p])) {\n        obj[p] = {};\n      }\n\n      if (i === pathArr.length - 1) {\n        obj[p] = value;\n      }\n\n      obj = obj[p];\n    }\n  },\n  delete: function (obj, path) {\n    if (!isObj(obj) || typeof path !== 'string') {\n      return;\n    }\n\n    var pathArr = getPathSegments(path);\n\n    for (var i = 0; i < pathArr.length; i++) {\n      var p = pathArr[i];\n\n      if (i === pathArr.length - 1) {\n        delete obj[p];\n        return;\n      }\n\n      obj = obj[p];\n\n      if (!isObj(obj)) {\n        return;\n      }\n    }\n  },\n  has: function (obj, path) {\n    if (!isObj(obj) || typeof path !== 'string') {\n      return false;\n    }\n\n    var pathArr = getPathSegments(path);\n\n    for (var i = 0; i < pathArr.length; i++) {\n      if (isObj(obj)) {\n        if (!(pathArr[i] in obj)) {\n          return false;\n        }\n\n        obj = obj[pathArr[i]];\n      } else {\n        return false;\n      }\n    }\n\n    return true;\n  }\n};\n\n/***/ }),\n/* 2 */,\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(module) {(function (global, factory) {\n   true ? module.exports = factory() :\n  undefined;\n}(this, (function () { 'use strict';\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  };\n\n  var asyncToGenerator = function (fn) {\n    return function () {\n      var gen = fn.apply(this, arguments);\n      return new Promise(function (resolve, reject) {\n        function step(key, arg) {\n          try {\n            var info = gen[key](arg);\n            var value = info.value;\n          } catch (error) {\n            reject(error);\n            return;\n          }\n\n          if (info.done) {\n            resolve(value);\n          } else {\n            return Promise.resolve(value).then(function (value) {\n              step(\"next\", value);\n            }, function (err) {\n              step(\"throw\", err);\n            });\n          }\n        }\n\n        return step(\"next\");\n      });\n    };\n  };\n\n  var classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  var createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var defineProperty = function (obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  };\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  var toConsumableArray = function (arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n      return arr2;\n    } else {\n      return Array.from(arr);\n    }\n  };\n\n  /**\n   * Copyright (c) 2014-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n  !function (global) {\n\n    var Op = Object.prototype;\n    var hasOwn = Op.hasOwnProperty;\n    var undefined; // More compressible than void 0.\n    var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n    var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n    var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n    var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n    var inModule = ( false ? undefined : _typeof(module)) === \"object\";\n    var runtime = global.regeneratorRuntime;\n    if (runtime) {\n      if (inModule) {\n        // If regeneratorRuntime is defined globally and we're in a module,\n        // make the exports object identical to regeneratorRuntime.\n        module.exports = runtime;\n      }\n      // Don't bother evaluating the rest of this file if the runtime was\n      // already defined globally.\n      return;\n    }\n\n    // Define the runtime globally (as expected by generated code) as either\n    // module.exports (if we're in a module) or a new, empty object.\n    runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n    function wrap(innerFn, outerFn, self, tryLocsList) {\n      // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n      var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n      var generator = Object.create(protoGenerator.prototype);\n      var context = new Context(tryLocsList || []);\n\n      // The ._invoke method unifies the implementations of the .next,\n      // .throw, and .return methods.\n      generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n      return generator;\n    }\n    runtime.wrap = wrap;\n\n    // Try/catch helper to minimize deoptimizations. Returns a completion\n    // record like context.tryEntries[i].completion. This interface could\n    // have been (and was previously) designed to take a closure to be\n    // invoked without arguments, but in all the cases we care about we\n    // already have an existing method we want to call, so there's no need\n    // to create a new function object. We can even get away with assuming\n    // the method takes exactly one argument, since that happens to be true\n    // in every case, so we don't have to touch the arguments object. The\n    // only additional allocation required is the completion record, which\n    // has a stable shape and so hopefully should be cheap to allocate.\n    function tryCatch(fn, obj, arg) {\n      try {\n        return { type: \"normal\", arg: fn.call(obj, arg) };\n      } catch (err) {\n        return { type: \"throw\", arg: err };\n      }\n    }\n\n    var GenStateSuspendedStart = \"suspendedStart\";\n    var GenStateSuspendedYield = \"suspendedYield\";\n    var GenStateExecuting = \"executing\";\n    var GenStateCompleted = \"completed\";\n\n    // Returning this object from the innerFn has the same effect as\n    // breaking out of the dispatch switch statement.\n    var ContinueSentinel = {};\n\n    // Dummy constructor functions that we use as the .constructor and\n    // .constructor.prototype properties for functions that return Generator\n    // objects. For full spec compliance, you may wish to configure your\n    // minifier not to mangle the names of these two functions.\n    function Generator() {}\n    function GeneratorFunction() {}\n    function GeneratorFunctionPrototype() {}\n\n    // This is a polyfill for %IteratorPrototype% for environments that\n    // don't natively support it.\n    var IteratorPrototype = {};\n    IteratorPrototype[iteratorSymbol] = function () {\n      return this;\n    };\n\n    var getProto = Object.getPrototypeOf;\n    var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n    if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n      // This environment has a native %IteratorPrototype%; use it instead\n      // of the polyfill.\n      IteratorPrototype = NativeIteratorPrototype;\n    }\n\n    var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n    GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n    GeneratorFunctionPrototype.constructor = GeneratorFunction;\n    GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\";\n\n    // Helper for defining the .next, .throw, and .return methods of the\n    // Iterator interface in terms of a single ._invoke method.\n    function defineIteratorMethods(prototype) {\n      [\"next\", \"throw\", \"return\"].forEach(function (method) {\n        prototype[method] = function (arg) {\n          return this._invoke(method, arg);\n        };\n      });\n    }\n\n    runtime.isGeneratorFunction = function (genFun) {\n      var ctor = typeof genFun === \"function\" && genFun.constructor;\n      return ctor ? ctor === GeneratorFunction ||\n      // For the native GeneratorFunction constructor, the best we can\n      // do is to check its .name property.\n      (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n    };\n\n    runtime.mark = function (genFun) {\n      if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n      } else {\n        genFun.__proto__ = GeneratorFunctionPrototype;\n        if (!(toStringTagSymbol in genFun)) {\n          genFun[toStringTagSymbol] = \"GeneratorFunction\";\n        }\n      }\n      genFun.prototype = Object.create(Gp);\n      return genFun;\n    };\n\n    // Within the body of any async function, `await x` is transformed to\n    // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n    // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n    // meant to be awaited.\n    runtime.awrap = function (arg) {\n      return { __await: arg };\n    };\n\n    function AsyncIterator(generator) {\n      function invoke(method, arg, resolve, reject) {\n        var record = tryCatch(generator[method], generator, arg);\n        if (record.type === \"throw\") {\n          reject(record.arg);\n        } else {\n          var result = record.arg;\n          var value = result.value;\n          if (value && (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\" && hasOwn.call(value, \"__await\")) {\n            return Promise.resolve(value.__await).then(function (value) {\n              invoke(\"next\", value, resolve, reject);\n            }, function (err) {\n              invoke(\"throw\", err, resolve, reject);\n            });\n          }\n\n          return Promise.resolve(value).then(function (unwrapped) {\n            // When a yielded Promise is resolved, its final value becomes\n            // the .value of the Promise<{value,done}> result for the\n            // current iteration. If the Promise is rejected, however, the\n            // result for this iteration will be rejected with the same\n            // reason. Note that rejections of yielded Promises are not\n            // thrown back into the generator function, as is the case\n            // when an awaited Promise is rejected. This difference in\n            // behavior between yield and await is important, because it\n            // allows the consumer to decide what to do with the yielded\n            // rejection (swallow it and continue, manually .throw it back\n            // into the generator, abandon iteration, whatever). With\n            // await, by contrast, there is no opportunity to examine the\n            // rejection reason outside the generator function, so the\n            // only option is to throw it from the await expression, and\n            // let the generator function handle the exception.\n            result.value = unwrapped;\n            resolve(result);\n          }, reject);\n        }\n      }\n\n      var previousPromise;\n\n      function enqueue(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new Promise(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n\n        return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(callInvokeWithMethodAndArg,\n        // Avoid propagating failures to Promises returned by later\n        // invocations of the iterator.\n        callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n\n      // Define the unified helper method that is used to implement .next,\n      // .throw, and .return (see defineIteratorMethods).\n      this._invoke = enqueue;\n    }\n\n    defineIteratorMethods(AsyncIterator.prototype);\n    AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n      return this;\n    };\n    runtime.AsyncIterator = AsyncIterator;\n\n    // Note that simple async functions are implemented on top of\n    // AsyncIterator objects; they just return a Promise for the value of\n    // the final result produced by the iterator.\n    runtime.async = function (innerFn, outerFn, self, tryLocsList) {\n      var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n\n      return runtime.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function (result) {\n        return result.done ? result.value : iter.next();\n      });\n    };\n\n    function makeInvokeMethod(innerFn, self, context) {\n      var state = GenStateSuspendedStart;\n\n      return function invoke(method, arg) {\n        if (state === GenStateExecuting) {\n          throw new Error(\"Generator is already running\");\n        }\n\n        if (state === GenStateCompleted) {\n          if (method === \"throw\") {\n            throw arg;\n          }\n\n          // Be forgiving, per 25.3.3.3.3 of the spec:\n          // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n          return doneResult();\n        }\n\n        context.method = method;\n        context.arg = arg;\n\n        while (true) {\n          var delegate = context.delegate;\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (context.method === \"next\") {\n            // Setting context._sent for legacy support of Babel's\n            // function.sent implementation.\n            context.sent = context._sent = context.arg;\n          } else if (context.method === \"throw\") {\n            if (state === GenStateSuspendedStart) {\n              state = GenStateCompleted;\n              throw context.arg;\n            }\n\n            context.dispatchException(context.arg);\n          } else if (context.method === \"return\") {\n            context.abrupt(\"return\", context.arg);\n          }\n\n          state = GenStateExecuting;\n\n          var record = tryCatch(innerFn, self, context);\n          if (record.type === \"normal\") {\n            // If an exception is thrown from innerFn, we leave state ===\n            // GenStateExecuting and loop back for another invocation.\n            state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n            if (record.arg === ContinueSentinel) {\n              continue;\n            }\n\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          } else if (record.type === \"throw\") {\n            state = GenStateCompleted;\n            // Dispatch the exception by looping back around to the\n            // context.dispatchException(context.arg) call above.\n            context.method = \"throw\";\n            context.arg = record.arg;\n          }\n        }\n      };\n    }\n\n    // Call delegate.iterator[context.method](context.arg) and handle the\n    // result, either by returning a { value, done } result from the\n    // delegate iterator, or by modifying context.method and context.arg,\n    // setting context.delegate to null, and returning the ContinueSentinel.\n    function maybeInvokeDelegate(delegate, context) {\n      var method = delegate.iterator[context.method];\n      if (method === undefined) {\n        // A .throw or .return when the delegate iterator has no .throw\n        // method always terminates the yield* loop.\n        context.delegate = null;\n\n        if (context.method === \"throw\") {\n          if (delegate.iterator.return) {\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            context.method = \"return\";\n            context.arg = undefined;\n            maybeInvokeDelegate(delegate, context);\n\n            if (context.method === \"throw\") {\n              // If maybeInvokeDelegate(context) changed context.method from\n              // \"return\" to \"throw\", let that override the TypeError below.\n              return ContinueSentinel;\n            }\n          }\n\n          context.method = \"throw\";\n          context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n        }\n\n        return ContinueSentinel;\n      }\n\n      var record = tryCatch(method, delegate.iterator, context.arg);\n\n      if (record.type === \"throw\") {\n        context.method = \"throw\";\n        context.arg = record.arg;\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n\n      var info = record.arg;\n\n      if (!info) {\n        context.method = \"throw\";\n        context.arg = new TypeError(\"iterator result is not an object\");\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n\n      if (info.done) {\n        // Assign the result of the finished delegate to the temporary\n        // variable specified by delegate.resultName (see delegateYield).\n        context[delegate.resultName] = info.value;\n\n        // Resume execution at the desired location (see delegateYield).\n        context.next = delegate.nextLoc;\n\n        // If context.method was \"throw\" but the delegate handled the\n        // exception, let the outer generator proceed normally. If\n        // context.method was \"next\", forget context.arg since it has been\n        // \"consumed\" by the delegate iterator. If context.method was\n        // \"return\", allow the original .return call to continue in the\n        // outer generator.\n        if (context.method !== \"return\") {\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n      } else {\n        // Re-yield the result returned by the delegate method.\n        return info;\n      }\n\n      // The delegate iterator is finished, so forget it and continue with\n      // the outer generator.\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    // Define Generator.prototype.{next,throw,return} in terms of the\n    // unified ._invoke helper method.\n    defineIteratorMethods(Gp);\n\n    Gp[toStringTagSymbol] = \"Generator\";\n\n    // A Generator should always return itself as the iterator object when the\n    // @@iterator function is called on it. Some browsers' implementations of the\n    // iterator prototype chain incorrectly implement this, causing the Generator\n    // object to not be returned from this call. This ensures that doesn't happen.\n    // See https://github.com/facebook/regenerator/issues/274 for more details.\n    Gp[iteratorSymbol] = function () {\n      return this;\n    };\n\n    Gp.toString = function () {\n      return \"[object Generator]\";\n    };\n\n    function pushTryEntry(locs) {\n      var entry = { tryLoc: locs[0] };\n\n      if (1 in locs) {\n        entry.catchLoc = locs[1];\n      }\n\n      if (2 in locs) {\n        entry.finallyLoc = locs[2];\n        entry.afterLoc = locs[3];\n      }\n\n      this.tryEntries.push(entry);\n    }\n\n    function resetTryEntry(entry) {\n      var record = entry.completion || {};\n      record.type = \"normal\";\n      delete record.arg;\n      entry.completion = record;\n    }\n\n    function Context(tryLocsList) {\n      // The root entry object (effectively a try statement without a catch\n      // or a finally block) gives us a place to store values thrown from\n      // locations where there is no enclosing try statement.\n      this.tryEntries = [{ tryLoc: \"root\" }];\n      tryLocsList.forEach(pushTryEntry, this);\n      this.reset(true);\n    }\n\n    runtime.keys = function (object) {\n      var keys = [];\n      for (var key in object) {\n        keys.push(key);\n      }\n      keys.reverse();\n\n      // Rather than returning an object with a next method, we keep\n      // things simple and return the next function itself.\n      return function next() {\n        while (keys.length) {\n          var key = keys.pop();\n          if (key in object) {\n            next.value = key;\n            next.done = false;\n            return next;\n          }\n        }\n\n        // To avoid creating an additional object, we just hang the .value\n        // and .done properties off the next function object itself. This\n        // also ensures that the minifier will not anonymize the function.\n        next.done = true;\n        return next;\n      };\n    };\n\n    function values(iterable) {\n      if (iterable) {\n        var iteratorMethod = iterable[iteratorSymbol];\n        if (iteratorMethod) {\n          return iteratorMethod.call(iterable);\n        }\n\n        if (typeof iterable.next === \"function\") {\n          return iterable;\n        }\n\n        if (!isNaN(iterable.length)) {\n          var i = -1,\n              next = function next() {\n            while (++i < iterable.length) {\n              if (hasOwn.call(iterable, i)) {\n                next.value = iterable[i];\n                next.done = false;\n                return next;\n              }\n            }\n\n            next.value = undefined;\n            next.done = true;\n\n            return next;\n          };\n\n          return next.next = next;\n        }\n      }\n\n      // Return an iterator with no values.\n      return { next: doneResult };\n    }\n    runtime.values = values;\n\n    function doneResult() {\n      return { value: undefined, done: true };\n    }\n\n    Context.prototype = {\n      constructor: Context,\n\n      reset: function reset(skipTempReset) {\n        this.prev = 0;\n        this.next = 0;\n        // Resetting context._sent for legacy support of Babel's\n        // function.sent implementation.\n        this.sent = this._sent = undefined;\n        this.done = false;\n        this.delegate = null;\n\n        this.method = \"next\";\n        this.arg = undefined;\n\n        this.tryEntries.forEach(resetTryEntry);\n\n        if (!skipTempReset) {\n          for (var name in this) {\n            // Not sure about the optimal order of these conditions:\n            if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n              this[name] = undefined;\n            }\n          }\n        }\n      },\n\n      stop: function stop() {\n        this.done = true;\n\n        var rootEntry = this.tryEntries[0];\n        var rootRecord = rootEntry.completion;\n        if (rootRecord.type === \"throw\") {\n          throw rootRecord.arg;\n        }\n\n        return this.rval;\n      },\n\n      dispatchException: function dispatchException(exception) {\n        if (this.done) {\n          throw exception;\n        }\n\n        var context = this;\n        function handle(loc, caught) {\n          record.type = \"throw\";\n          record.arg = exception;\n          context.next = loc;\n\n          if (caught) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            context.method = \"next\";\n            context.arg = undefined;\n          }\n\n          return !!caught;\n        }\n\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          var record = entry.completion;\n\n          if (entry.tryLoc === \"root\") {\n            // Exception thrown outside of any try block that could handle\n            // it, so set the completion value of the entire function to\n            // throw the exception.\n            return handle(\"end\");\n          }\n\n          if (entry.tryLoc <= this.prev) {\n            var hasCatch = hasOwn.call(entry, \"catchLoc\");\n            var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n            if (hasCatch && hasFinally) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              } else if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else if (hasCatch) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              }\n            } else if (hasFinally) {\n              if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else {\n              throw new Error(\"try statement without catch or finally\");\n            }\n          }\n        }\n      },\n\n      abrupt: function abrupt(type, arg) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n            var finallyEntry = entry;\n            break;\n          }\n        }\n\n        if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n          // Ignore the finally entry if control is not jumping to a\n          // location outside the try/catch block.\n          finallyEntry = null;\n        }\n\n        var record = finallyEntry ? finallyEntry.completion : {};\n        record.type = type;\n        record.arg = arg;\n\n        if (finallyEntry) {\n          this.method = \"next\";\n          this.next = finallyEntry.finallyLoc;\n          return ContinueSentinel;\n        }\n\n        return this.complete(record);\n      },\n\n      complete: function complete(record, afterLoc) {\n        if (record.type === \"throw\") {\n          throw record.arg;\n        }\n\n        if (record.type === \"break\" || record.type === \"continue\") {\n          this.next = record.arg;\n        } else if (record.type === \"return\") {\n          this.rval = this.arg = record.arg;\n          this.method = \"return\";\n          this.next = \"end\";\n        } else if (record.type === \"normal\" && afterLoc) {\n          this.next = afterLoc;\n        }\n\n        return ContinueSentinel;\n      },\n\n      finish: function finish(finallyLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.finallyLoc === finallyLoc) {\n            this.complete(entry.completion, entry.afterLoc);\n            resetTryEntry(entry);\n            return ContinueSentinel;\n          }\n        }\n      },\n\n      \"catch\": function _catch(tryLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.tryLoc === tryLoc) {\n            var record = entry.completion;\n            if (record.type === \"throw\") {\n              var thrown = record.arg;\n              resetTryEntry(entry);\n            }\n            return thrown;\n          }\n        }\n\n        // The context.catch method must only be called with a location\n        // argument that corresponds to a known catch block.\n        throw new Error(\"illegal catch attempt\");\n      },\n\n      delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n        this.delegate = {\n          iterator: values(iterable),\n          resultName: resultName,\n          nextLoc: nextLoc\n        };\n\n        if (this.method === \"next\") {\n          // Deliberately forget the last sent value so that we don't\n          // accidentally pass it on to the delegate.\n          this.arg = undefined;\n        }\n\n        return ContinueSentinel;\n      }\n    };\n  }(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  function () {\n    return this;\n  }() || Function(\"return this\")());\n\n  var SEMAAS_REQUIRED_FIELDS = ['consumerId', 'policy', 'mrId', 'nameSpace', 'region', 'dnsTld', 'tsec2JWTEndpoint'];\n\n  var SEMAAS = {\n    DEFAULT_ADAPTER_IDENTIFIER: 'application',\n    DEFAULT_ADAPTER_VERSION: 'v1',\n    REQUIRED_FIELDS: SEMAAS_REQUIRED_FIELDS,\n    ALLOWED_FIELDS: [].concat(SEMAAS_REQUIRED_FIELDS, ['identifier', 'version'])\n  };\n\n  var buildServiceUri = function buildServiceUri(codename) {\n    return function (region, dnsTld, version) {\n      return 'https://' + codename + '.' + [region, dnsTld].filter(Boolean).join('.') + '/' + version;\n    };\n  };\n\n  var RHO = {\n    HOST: buildServiceUri('rho'),\n    ALLOWED_FIELDS: ['mrId', 'spanId', 'startDate', 'finishDate', 'name', 'parentSpan', 'traceId', 'properties', 'duration', 'recordDate'],\n    REQUIRED_FIELDS: []\n  };\n\n  var OMEGA = {\n    HOST: buildServiceUri('omega'),\n    DEFAULT_LOG_LEVEL: 'DEBUG',\n    ALLOWED_FIELDS: ['mrId', 'spanId', 'traceId', 'creationDate', 'level', 'message', 'properties'],\n    MAXIMUM_BULK_SIZE: 1000,\n    REQUIRED_FIELDS: []\n  };\n\n  // const TSEC2JWT = {\n  //   HOST: environment => `https://tsec2jwt.smlb.${environment}.meigas.cloud/v1/Token`,\n  // };\n\n  var Constants = {\n    SEMAAS: SEMAAS,\n    RHO: RHO,\n    OMEGA: OMEGA\n    // TSEC2JWT,\n  };\n\n  // credits to GeenenTijd/dotify\n  // https://github.com/GeenenTijd/dotify/blob/master/dotify.js\n  var dotify = function dotify(obj) {\n    var SEPARATOR_KEY = '_';\n    var res = {};\n    var recurse = function recurse(obj, current) {\n      Object.keys(obj).forEach(function (key) {\n        var value = obj[key];\n        var newKey = current ? current + SEPARATOR_KEY + key : key; // joined key with dot\n        if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {\n          recurse(value, newKey); // it's a nested object, so do it again\n        } else {\n          res[newKey] = value; // it's not an object, so set the property\n        }\n      });\n    };\n\n    recurse(obj);\n    return res;\n  };\n  var sanitizeObj = function sanitizeObj(obj, allowedFields) {\n    var result = _extends({}, obj);\n\n    Object.keys(result).forEach(function (prop) {\n      if (!allowedFields.includes(prop)) {\n        delete result[prop];\n      }\n    });\n\n    if (result.properties) {\n      result.properties = dotify(result.properties);\n    }\n\n    return result;\n  };\n  var hasProperty = function hasProperty(obj) {\n    return function (field) {\n      return Object.prototype.hasOwnProperty.call(obj, field) && !!obj[field];\n    };\n  };\n  var hasProperties = function hasProperties(obj, expectedFields) {\n    return expectedFields.every(hasProperty(obj));\n  };\n  var groupBy = function groupBy(items, value) {\n    return items.reduce(function (prev, current) {\n      var key = value instanceof Function ? value(current) : current[value];\n      var itemsContainingKey = prev.find(function (r) {\n        return r && r.key === key;\n      });\n\n      if (itemsContainingKey) {\n        itemsContainingKey.values.push(current);\n      } else {\n        prev.push({ key: key, values: [current] });\n      }\n\n      return prev;\n    }, []);\n  };\n  var createUUID = function createUUID() {\n    var s = [];\n    var hexDigits = '0123456789abcdef';\n    for (var i = 0; i < 36; i++) {\n      s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n    }\n    s[14] = '4'; // bits 12-15 of the time_hi_and_version field to 0010\n    s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n    s[8] = s[13] = s[18] = s[23] = '-';\n\n    var uuid = s.join('');\n    return uuid;\n  };\n\n  var Utils = {\n    dotify: dotify,\n    sanitizeObj: sanitizeObj,\n    hasProperty: hasProperty,\n    hasProperties: hasProperties,\n    groupBy: groupBy,\n    createUUID: createUUID\n  };\n\n  var OMEGA$1 = Constants.OMEGA;\n  var DEFAULT_LOG_LEVEL = OMEGA$1.DEFAULT_LOG_LEVEL,\n      ALLOWED_FIELDS = OMEGA$1.ALLOWED_FIELDS;\n  var sanitizeObj$1 = Utils.sanitizeObj;\n\n  var Omega = function () {\n    function Omega(mrId) {\n      classCallCheck(this, Omega);\n      this.mrId = null;\n\n      this.mrId = mrId;\n    }\n\n    // @TODO renombrar a normalizeLog? buildLog?\n    /*static*/\n\n    createClass(Omega, [{\n      key: 'createLog',\n      value: function createLog(obj) {\n        var mrId = this.mrId;\n\n        var sanitizedData = sanitizeObj$1(obj, ALLOWED_FIELDS);\n        var DEFAULT_LOG = {\n          mrId: mrId,\n          creationDate: Date.now() * 1000000,\n          level: DEFAULT_LOG_LEVEL\n        };\n\n        return _extends({}, DEFAULT_LOG, sanitizedData);\n      }\n    }]);\n    return Omega;\n  }();\n\n  var RHO$1 = Constants.RHO;\n  var ALLOWED_FIELDS$1 = RHO$1.ALLOWED_FIELDS;\n  var sanitizeObj$2 = Utils.sanitizeObj,\n      _createUUID = Utils.createUUID;\n\n  var Span = function () {\n    function Span(config) {\n      classCallCheck(this, Span);\n      this.spanId = null;\n\n      this.initialize(config);\n    }\n\n    createClass(Span, [{\n      key: 'initialize',\n      value: function initialize(config) {\n        var _this = this;\n\n        ALLOWED_FIELDS$1.forEach(function (field) {\n          if (config[field]) {\n            _this[field] = config[field];\n          }\n        });\n\n        this.spanId = _createUUID();\n        this.start();\n      }\n    }, {\n      key: 'start',\n      value: function start() {\n        this.startDate = Date.now() * 1000000;\n      }\n    }, {\n      key: 'finish',\n      value: function finish() {\n        this.finishDate = Date.now() * 1000000;\n      }\n    }]);\n    return Span;\n  }();\n\n  var Rho = function () {\n    function Rho(mrId) {\n      classCallCheck(this, Rho);\n      this.mrId = null;\n\n      this.mrId = mrId;\n    }\n\n    createClass(Rho, [{\n      key: 'createUUID',\n      value: function createUUID() {\n        return _createUUID();\n      }\n    }, {\n      key: 'createSpan',\n      value: function createSpan(rawData, childSpanPrefix) {\n        var DEFAULT_MR_ID = this.mrId;\n        var _rawData$mrId = rawData.mrId,\n            mrId = _rawData$mrId === undefined ? DEFAULT_MR_ID : _rawData$mrId,\n            parentSpan = rawData.parentSpan;\n\n        var normalizedParentSpan = this.getParentSpan(parentSpan, mrId, childSpanPrefix);\n        var data = _extends({}, rawData, {\n          mrId: mrId,\n          parentSpan: normalizedParentSpan\n        });\n        var span = new Span(data);\n\n        return span;\n      }\n    }, {\n      key: 'buildSpans',\n      value: function buildSpans(data) {\n        var iterableData = Array.isArray(data) ? [].concat(toConsumableArray(data)) : [data];\n\n        return iterableData.map(function (item) {\n          return sanitizeObj$2(item, ALLOWED_FIELDS$1);\n        });\n      }\n    }, {\n      key: 'getParentSpan',\n      value: function getParentSpan(parentSpan, mrId, childSpanPrefix) {\n        if (!parentSpan) {\n          return null;\n        }\n\n        return [childSpanPrefix, mrId, 'spans', parentSpan].join('/');\n      }\n    }]);\n    return Rho;\n  }();\n\n  var Adapters = {\n    Omega: Omega,\n    Rho: Rho\n  };\n\n  function request(method) {\n    var _this = this;\n\n    return function () {\n      var _ref = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(options) {\n        var url, body, headers, configuration, response, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                url = options.url, body = options.body, headers = options.headers;\n                configuration = {\n                  method: method,\n                  body: JSON.stringify(body),\n                  headers: {\n                    'content-type': 'application/json'\n                  }\n                };\n\n\n                if (headers) {\n                  Object.keys(headers).forEach(function (header) {\n                    var headerValue = headers[header];\n\n                    configuration.headers[header] = headerValue;\n                  });\n                }\n\n                // OJO!!!\n                // Interceptar aqu errores\n                _context.next = 5;\n                return fetch(url, configuration);\n\n              case 5:\n                response = _context.sent;\n\n                if (response.ok) {\n                  _context.next = 8;\n                  break;\n                }\n\n                return _context.abrupt('return', null);\n\n              case 8:\n                result = {};\n                _context.prev = 9;\n                _context.next = 12;\n                return response.json();\n\n              case 12:\n                result = _context.sent;\n                _context.next = 17;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context['catch'](9);\n\n              case 17:\n                return _context.abrupt('return', result);\n\n              case 18:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this, [[9, 15]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  var METHODS = {\n    GET: request('get'),\n    POST: request('post')\n  };\n\n  var Connector = function () {\n    function Connector() {\n      classCallCheck(this, Connector);\n    }\n\n    createClass(Connector, null, [{\n      key: 'get',\n      value: function () {\n        var _ref2 = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(url, headers) {\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  return _context2.abrupt('return', METHODS.GET({ url: url, headers: headers }));\n\n                case 1:\n                case 'end':\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function get$$1(_x2, _x3) {\n          return _ref2.apply(this, arguments);\n        }\n\n        return get$$1;\n      }()\n    }, {\n      key: 'post',\n      value: function () {\n        var _ref3 = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(url, body, headers) {\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  return _context3.abrupt('return', METHODS.POST({ url: url, body: body, headers: headers }));\n\n                case 1:\n                case 'end':\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n\n        function post(_x4, _x5, _x6) {\n          return _ref3.apply(this, arguments);\n        }\n\n        return post;\n      }()\n    }]);\n    return Connector;\n  }();\n\n  /** Default debounce duration (in ms) */\n  var DEFAULT_DEBOUNCE_DURATION = 500;\n\n  /** Decorates a class method so that it is debounced by the specified duration */\n  function outerDecorator(duration) {\n    return function innerDecorator(target, key, descriptor) {\n      return {\n        configurable: true,\n        enumerable: descriptor.enumerable,\n        get: function getter() {\n          // Attach this function to the instance (not the class)\n          Object.defineProperty(this, key, {\n            configurable: true,\n            enumerable: descriptor.enumerable,\n            value: debounce(descriptor.value, duration)\n          });\n\n          return this[key];\n        }\n      };\n    };\n  }\n\n  /** Debounces the specified function and returns a wrapper function */\n  function debounce(method) {\n    var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_DEBOUNCE_DURATION;\n\n    var timeoutId = void 0;\n\n    function debounceWrapper() {\n      var _this = this;\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      debounceWrapper.clear();\n\n      timeoutId = setTimeout(function () {\n        timeoutId = null;\n        method.apply(_this, args);\n      }, duration);\n    }\n\n    debounceWrapper.clear = function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        timeoutId = null;\n      }\n    };\n\n    return debounceWrapper;\n  }\n\n  var decorate = function decorate(decorators) {\n    return function (obj, prop, descriptor) {\n      var fn = descriptor.value;\n\n      decorators.slice().reverse().forEach(function (decorator) {\n        return fn = decorator(fn);\n      });\n\n      return _extends({}, descriptor, {\n        value: fn\n      });\n    };\n  };\n\n  var Decorators = {\n    outerDecorator: outerDecorator,\n    decorate: decorate\n  };\n\n  var groupBy$1 = Utils.groupBy;\n\n\n  var MAXIMUM_BULK_SIZE = 1000;\n\n  var Queue = function () {\n\n    // maximumBulkSize = null;\n\n    function Queue(identifier) {\n      classCallCheck(this, Queue);\n      this.items = [];\n      this.identifier = null;\n\n      this.identifier = identifier;\n    }\n\n    createClass(Queue, [{\n      key: 'add',\n      value: function add(endpoint, data) {\n        var _this = this;\n\n        var iterableData = Array.isArray(data) ? [].concat(toConsumableArray(data)) : [data];\n\n        iterableData.forEach(function (item) {\n          var operation = {\n            data: item,\n            endpoint: endpoint\n          };\n\n          _this.items.push(operation);\n        });\n      }\n    }, {\n      key: 'dump',\n      value: function dump() /*maximumBulkSize*/{\n        if (!this.any()) {\n          return null;\n        }\n\n        var queueGroupedByEndpoint = groupBy$1(this.items, 'endpoint');\n        var firstQueueGroup = queueGroupedByEndpoint[0].values;\n\n        var bulk = firstQueueGroup.slice(0, MAXIMUM_BULK_SIZE);\n        var newQueue = this.items.filter(function (item) {\n          return !bulk.includes(item);\n        });\n\n        console.log('Dumping ' + bulk.length + ' items from ' + this.identifier + ' queue (' + this.items.length + ')...');\n\n        this.items = newQueue;\n\n        return bulk;\n      }\n    }, {\n      key: 'any',\n      value: function any() {\n        return this.items !== null && this.items.length > 0;\n      }\n    }]);\n    return Queue;\n  }();\n\n  var _dec, _class;\n\n  function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n    var desc = {};\n    Object['ke' + 'ys'](descriptor).forEach(function (key) {\n      desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n      desc.writable = true;\n    }\n\n    desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n      return decorator(target, property, desc) || desc;\n    }, desc);\n\n    if (context && desc.initializer !== void 0) {\n      desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n      desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n      Object['define' + 'Property'](target, property, desc);\n      desc = null;\n    }\n\n    return desc;\n  }\n\n  var Omega$1 = Adapters.Omega,\n      Rho$1 = Adapters.Rho;\n  var _Constants$SEMAAS = Constants.SEMAAS,\n      REQUIRED_FIELDS = _Constants$SEMAAS.REQUIRED_FIELDS,\n      ALLOWED_FIELDS$2 = _Constants$SEMAAS.ALLOWED_FIELDS,\n      DEFAULT_ADAPTER_IDENTIFIER = _Constants$SEMAAS.DEFAULT_ADAPTER_IDENTIFIER,\n      DEFAULT_ADAPTER_VERSION = _Constants$SEMAAS.DEFAULT_ADAPTER_VERSION,\n      OMEGA_HOST = Constants.OMEGA.HOST,\n      RHO_HOST = Constants.RHO.HOST;\n  var hasProperties$1 = Utils.hasProperties;\n  var outerDecorator$1 = Decorators.outerDecorator;\n  var SEMaaS = (_dec = outerDecorator$1(5000), (_class = function () {\n\n    // properties that belong to semaas life cycle and rely on configurable properties\n    function SEMaaS(config) {\n      classCallCheck(this, SEMaaS);\n      this.nameSpace = null;\n      this.identifier = DEFAULT_ADAPTER_IDENTIFIER;\n      this.mrId = null;\n      this.consumerId = null;\n      this.policy = null;\n      this.region = null;\n      this.dnsTld = null;\n      this.version = DEFAULT_ADAPTER_VERSION;\n      this.tsec2JWTEndpoint = null;\n      this.apiKey = null;\n      this.omega = null;\n      this.rho = null;\n      this.queue = null;\n\n      this.setup(config);\n    }\n\n    // composition entitys\n\n    // configurable properties by constructor\n\n\n    createClass(SEMaaS, [{\n      key: 'setup',\n      value: function setup(config) {\n        if (!config || !this.validateConfig(config, REQUIRED_FIELDS)) {\n          throw new Error('Invalid setup for SEMaaS adapter (' + this.identifier + '). Required fields: ' + REQUIRED_FIELDS.join(', ') + '.');\n        }\n\n        this.initialize(config);\n      }\n    }, {\n      key: 'validateConfig',\n      value: function validateConfig(config, expectedFields) {\n        return hasProperties$1(config, expectedFields);\n      }\n    }, {\n      key: 'initialize',\n      value: function initialize(config) {\n        var _this = this;\n\n        ALLOWED_FIELDS$2.forEach(function (field) {\n          if (config[field]) {\n            _this[field] = config[field];\n          }\n        });\n\n        var nameSpace = this.nameSpace,\n            identifier = this.identifier,\n            mrId = this.mrId,\n            tsec2JWTEndpoint = this.tsec2JWTEndpoint,\n            region = this.region,\n            dnsTld = this.dnsTld,\n            version = this.version;\n\n\n        this.omega = new Omega$1(mrId);\n        this.rho = new Rho$1(mrId);\n        this.queue = new Queue(identifier);\n\n        console.info('SEMaaS adapter for ' + region + ' (TSEC: ' + tsec2JWTEndpoint + ') [' + dnsTld + ' - ' + version + '] (' + identifier + ' - ns: ' + nameSpace + ', mrId: ' + mrId + ') successfully initialized.');\n      }\n    }, {\n      key: 'log',\n      value: function log(obj) {\n        var data = this.omega.createLog(obj);\n\n        this.enqueue(this.omegaEndpoint, data);\n      }\n    }, {\n      key: 'ingest',\n      value: function ingest(spans) {\n        var data = this.rho.buildSpans(spans);\n\n        this.enqueue(this.rhoEndpoint, data);\n      }\n    }, {\n      key: 'createSpan',\n      value: function createSpan(data) {\n        var span = this.rho.createSpan(data, this.prefixForChildSpan);\n\n        return span;\n      }\n    }, {\n      key: 'createUUID',\n      value: function createUUID() {\n        var UUID = this.rho.createUUID();\n\n        return UUID;\n      }\n    }, {\n      key: 'send',\n      value: function () {\n        var _ref = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(url, body, headers) {\n          var result;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  result = void 0;\n                  _context.prev = 1;\n                  _context.next = 4;\n                  return Connector.post(url, body, headers);\n\n                case 4:\n                  result = _context.sent;\n                  _context.next = 9;\n                  break;\n\n                case 7:\n                  _context.prev = 7;\n                  _context.t0 = _context['catch'](1);\n\n                case 9:\n\n                  if (!result) {\n                    console.log('There was a problem while sending data to SEMaaS - operation will be queued.');\n\n                    this.enqueue(url, body);\n                  }\n\n                  return _context.abrupt('return', result);\n\n                case 11:\n                case 'end':\n                  return _context.stop();\n              }\n            }\n          }, _callee, this, [[1, 7]]);\n        }));\n\n        function send(_x, _x2, _x3) {\n          return _ref.apply(this, arguments);\n        }\n\n        return send;\n      }()\n    }, {\n      key: 'enqueue',\n      value: function enqueue(url, body) {\n        this.queue.add(url, body);\n        this.flush();\n      }\n\n      // @decorate([tsec2jwt, outerDecorator(5000)])\n\n    }, {\n      key: 'flush',\n      value: function () {\n        var _ref2 = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n          var _this2 = this;\n\n          var validApiKey, bulk, endpoint, apiKey, body, headers;\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return this.ensureValidApiKey();\n\n                case 2:\n                  validApiKey = _context2.sent;\n\n                  if (validApiKey) {\n                    _context2.next = 6;\n                    break;\n                  }\n\n                  console.log('No valid API Key for SEMaaS adapter (' + this.identifier + ') - aborting operation');\n                  return _context2.abrupt('return');\n\n                case 6:\n                  bulk = this.queue.dump();\n\n                  if (bulk) {\n                    _context2.next = 10;\n                    break;\n                  }\n\n                  console.log('Empty queue for SEMaaS adapter (' + this.identifier + ')');\n                  return _context2.abrupt('return');\n\n                case 10:\n                  endpoint = bulk[0].endpoint;\n                  apiKey = this.apiKey;\n\n\n                  console.log('Sending queued batch ' + endpoint + ' - ' + apiKey);\n\n                  body = bulk.map(function (operation) {\n                    return operation.data;\n                  });\n                  headers = this.buildApiHeaders();\n\n                  // if bulk send is OK, and there are more items, we try to flush the buffer\n\n                  this.send(endpoint, body, headers).then(function () {\n                    return _this2.queue.any() && _this2.flush();\n                  });\n\n                case 16:\n                case 'end':\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function flush() {\n          return _ref2.apply(this, arguments);\n        }\n\n        return flush;\n      }()\n    }, {\n      key: 'ensureValidApiKey',\n      value: function () {\n        var _ref3 = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (!this.hasApiKey) {\n                    _context3.next = 5;\n                    break;\n                  }\n\n                  console.log('ApiKey OK -> next()');\n                  return _context3.abrupt('return', true);\n\n                case 5:\n                  if (!this.hasCredentials) {\n                    _context3.next = 8;\n                    break;\n                  }\n\n                  console.log('ApiKey KO, Credentials OK -> getApiKey()');\n                  return _context3.abrupt('return', this.getApiKey());\n\n                case 8:\n\n                  console.log('No ApiKey && No Credentials -> KO');\n                  return _context3.abrupt('return', false);\n\n                case 10:\n                case 'end':\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n\n        function ensureValidApiKey() {\n          return _ref3.apply(this, arguments);\n        }\n\n        return ensureValidApiKey;\n      }()\n    }, {\n      key: 'buildApiHeaders',\n      value: function buildApiHeaders() {\n        var key = void 0;\n        var value = void 0;\n\n        switch (this.version.toLowerCase()) {\n          case 'v1':\n            key = 'Authorization';\n            value = 'Bearer ' + this.apiKey;\n            break;\n          default:\n            key = 'Api-Key';\n            value = 'jwt ' + this.apiKey;\n            break;\n        }\n\n        return defineProperty({}, key, value);\n      }\n    }, {\n      key: 'getApiKey',\n      value: function () {\n        var _ref5 = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n          var consumerId, policy, tsec2JWTEndpoint, headers, host, result, accessToken;\n          return regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  consumerId = this.consumerId, policy = this.policy, tsec2JWTEndpoint = this.tsec2JWTEndpoint;\n                  headers = {\n                    'x-consumer-id': consumerId,\n                    'x-tsec-token': window.sessionStorage.getItem('tsec'),\n                    'x-validation-policy': policy\n                  };\n                  host = tsec2JWTEndpoint;\n                  _context4.next = 5;\n                  return Connector.get(host, headers);\n\n                case 5:\n                  result = _context4.sent;\n\n                  if (result) {\n                    _context4.next = 8;\n                    break;\n                  }\n\n                  return _context4.abrupt('return', null);\n\n                case 8:\n                  accessToken = result.accessToken;\n\n\n                  this.apiKey = accessToken;\n                  return _context4.abrupt('return', accessToken);\n\n                case 11:\n                case 'end':\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, this);\n        }));\n\n        function getApiKey() {\n          return _ref5.apply(this, arguments);\n        }\n\n        return getApiKey;\n      }()\n    }, {\n      key: 'getEndpoint',\n      value: function getEndpoint(host) {\n        var region = this.region,\n            dnsTld = this.dnsTld,\n            version = this.version;\n\n\n        return host(region, dnsTld, version);\n      }\n    }, {\n      key: 'hasApiKey',\n      get: function get$$1() {\n        // @TODO aadir lgica recuperacin + persistencia sessionStorage jwt\n        return !!this.apiKey;\n      }\n    }, {\n      key: 'hasCredentials',\n      get: function get$$1() {\n        return !!this.consumerId && !!this.policy && !!this.tsec;\n      }\n    }, {\n      key: 'initialized',\n      get: function get$$1() {\n        return !!this.omega && !!this.rho;\n      }\n    }, {\n      key: 'omegaEndpoint',\n      get: function get$$1() {\n        var nameSpace = this.nameSpace;\n\n        var host = this.getEndpoint(OMEGA_HOST);\n\n        return host + '/ns/' + nameSpace + '/logs';\n      }\n    }, {\n      key: 'rhoEndpoint',\n      get: function get$$1() {\n        var nameSpace = this.nameSpace;\n\n        var host = this.getEndpoint(RHO_HOST);\n\n        return host + '/ns/' + nameSpace + '/spans';\n      }\n    }, {\n      key: 'prefixForChildSpan',\n      get: function get$$1() {\n        return 'ns/' + this.nameSpace + '/mrs';\n      }\n    }, {\n      key: 'tsec',\n      get: function get$$1() {\n        return window.sessionStorage.getItem('tsec');\n      }\n    }]);\n    return SEMaaS;\n  }(), (_applyDecoratedDescriptor(_class.prototype, 'flush', [_dec], Object.getOwnPropertyDescriptor(_class.prototype, 'flush'), _class.prototype)), _class));\n\n  return SEMaaS;\n\n})));\n//# sourceMappingURL=cells-semaas-adapter.js.map\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(6)(module)))\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\nif (!Object.values) {\n  Object.values = function values(obj) {\n    return Object.keys(obj).map(function (key) {\n      return obj[key];\n    });\n  };\n}\n\nif (!Object.entries) {\n  Object.entries = function (obj) {\n    var ownProps = Object.keys(obj),\n        i = ownProps.length,\n        resArray = new Array(i); // preallocate the Array\n\n    while (i--) {\n      resArray[i] = [ownProps[i], obj[ownProps[i]]];\n    }\n\n    return resArray;\n  };\n}\n\nif (!String.prototype.endsWith) {\n  String.prototype.endsWith = function (searchString, position) {\n    var subjectString = this.toString();\n\n    if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n      position = subjectString.length;\n    }\n\n    position -= searchString.length;\n    var lastIndex = subjectString.indexOf(searchString, position);\n    return lastIndex !== -1 && lastIndex === position;\n  };\n}\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nmodule.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./src/polyfills.js\nvar polyfills = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/node-libs-browser/node_modules/events/events.js\nvar events = __webpack_require__(3);\nvar events_default = /*#__PURE__*/__webpack_require__.n(events);\n\n// CONCATENATED MODULE: ./src/core/manager/events.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\nvar maxNumListeners = 20;\n\nvar CustomEventEmitter = /*#__PURE__*/function (_EventEmitter) {\n  _inherits(CustomEventEmitter, _EventEmitter);\n\n  function CustomEventEmitter() {\n    _classCallCheck(this, CustomEventEmitter);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CustomEventEmitter).apply(this, arguments));\n  }\n\n  _createClass(CustomEventEmitter, [{\n    key: \"listenToOnce\",\n    value: function listenToOnce(node, name, callback) {\n      var fn = function () {\n        callback();\n        node.removeEventListener(name, fn);\n      }.bind(this);\n\n      node.addEventListener(name, fn);\n    }\n  }]);\n\n  return CustomEventEmitter;\n}(events_default.a);\n\nvar eventManager = new CustomEventEmitter();\neventManager.setMaxListeners(maxNumListeners);\n/* harmony default export */ var manager_events = (eventManager);\n// CONCATENATED MODULE: ./src/core/constants.js\n// binding\nvar bindingCodes = {\n  ALWAYS: \"always\",\n  DELAYED: \"delayed\",\n  UI: \"ui\",\n  CURRENTVIEW: \"currentview\"\n};\nvar constants_binding = {\n  DEFAULT: bindingCodes.ALWAYS,\n  VALUES: Object.values(bindingCodes)\n}; // external events\n\nvar externalEventsCodes = {\n  PAGE_READY: \"page-ready\",\n  PARSE_ROUTE: \"parse-route\",\n  AFTER_PUBLISH: \"after-publish\",\n  NAV_REQUEST: \"nav-request\",\n  BEFORE_SET_ATTR_TO_NODE: \"before-set-attr-to-node\",\n  AFTER_SET_ATTR_TO_NODE: \"after-set-attr-to-node\",\n  BEFORE_CREATE_NODE: \"before-create-node\",\n  AFTER_CREATE_NODE: \"after-create-node\",\n  BEFORE_IMPORT: \"before-import\",\n  AFTER_IMPORT: \"after-import\",\n  PAGE_REQUEST: \"page-request\",\n  PAGE_RESPONSE: \"page-response\",\n  DATA_LOAD: \"data-load\",\n  TEMPLATE_TRANSITION_END: \"template-transition-end\",\n  TRACK_EVENT: \"track-event\",\n  TEMPLATE_REGISTERED: \"template-registered\",\n  ROUTER_BACKSTEP: \"router-backstep\",\n  LOG_EVENT: \"log-event\"\n};\nvar constants_externalEvents = Object.values(externalEventsCodes); // componentsPath\n\nvar componentsPath = \"./bower_components/\"; // composerEndpoint\n\nvar constants_composerEndpoint = \"./composerMocks/\"; // deployEndpoint\n\nvar deployEndpoint = \"\"; // initialTemplate\n\nvar constants_initialTemplate = \"login\"; // monitoring config\n// const mrId = 'web';\n\nvar mrId = 'core'; // const nameSpace = 'com.bbva.es.channels';\n\nvar nameSpace = 'ether.cells';\nvar monitoring = {\n  SEMAAS: {\n    policy: 'ei_bbva_es',\n    mrId: mrId,\n    nameSpace: nameSpace,\n    identifier: 'bridge',\n    // consumerId: `${mrId}@${nameSpace}`,\n    consumerId: 'core@ether.cells'\n  }\n}; // pagesPath\n\nvar pagesPath = \"./pages/\"; // prpl\n\nvar prplCodes = {\n  NONE: \"none\",\n  DEFER: \"defer\",\n  PROGRESSIVE: \"progressive\",\n  HERO: \"hero\"\n};\nvar prpl = {\n  DEFAULT: prplCodes.DEFER,\n  VALUES: Object.values(prplCodes)\n};\nvar preRenderState = {\n  WORKING: 'working',\n  REQUESTED: 'requested'\n}; // render engines\n\nvar renderEngines = {\n  litElement: 'litElement'\n}; // default\n\n/* harmony default export */ var constants = ({\n  bindingCodes: bindingCodes,\n  binding: constants_binding,\n  componentsPath: componentsPath,\n  composerEndpoint: constants_composerEndpoint,\n  deployEndpoint: deployEndpoint,\n  externalEvents: constants_externalEvents,\n  externalEventsCodes: externalEventsCodes,\n  initialTemplate: constants_initialTemplate,\n  monitoring: monitoring,\n  pagesPath: pagesPath,\n  prplCodes: prplCodes,\n  prpl: prpl,\n  preRenderState: preRenderState,\n  renderEngines: renderEngines\n});\n// CONCATENATED MODULE: ./src/core/manager/dom.js\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction dom_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { dom_typeof = function _typeof(obj) { return typeof obj; }; } else { dom_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return dom_typeof(obj); }\n\nfunction dom_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction dom_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction dom_createClass(Constructor, protoProps, staticProps) { if (protoProps) dom_defineProperties(Constructor.prototype, protoProps); if (staticProps) dom_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar dom_externalEventsCodes = constants.externalEventsCodes;\n\nvar dom_CellsManagerDom = /*#__PURE__*/function () {\n  function CellsManagerDom() {\n    dom_classCallCheck(this, CellsManagerDom);\n  }\n\n  dom_createClass(CellsManagerDom, [{\n    key: \"createComponents\",\n    value: function createComponents(spec) {\n      /* istanbul ignore if */\n      if (!spec) {\n        return;\n      }\n\n      var elements = [];\n      var i = 0;\n\n      for (var index = 0; index < spec.length; index++) {\n        var element = spec[index];\n        elements[i] = this.createElement(element.tagName);\n        elements[i].__zone = element.zone;\n        i++;\n      }\n\n      return elements;\n    }\n  }, {\n    key: \"setAttrs\",\n    value: function setAttrs(node, attrs) {\n      var BEFORE_SET_ATTR_TO_NODE = dom_externalEventsCodes.BEFORE_SET_ATTR_TO_NODE,\n          AFTER_SET_ATTR_TO_NODE = dom_externalEventsCodes.AFTER_SET_ATTR_TO_NODE;\n\n      if (attrs && dom_typeof(attrs) === 'object') {\n        manager_events.emit(BEFORE_SET_ATTR_TO_NODE, node.tagName);\n\n        _extends(node, attrs);\n\n        manager_events.emit(AFTER_SET_ATTR_TO_NODE, node);\n      }\n    }\n  }, {\n    key: \"createElement\",\n    value: function createElement(tagName, properties) {\n      var BEFORE_CREATE_NODE = dom_externalEventsCodes.BEFORE_CREATE_NODE,\n          AFTER_CREATE_NODE = dom_externalEventsCodes.AFTER_CREATE_NODE;\n      manager_events.emit(BEFORE_CREATE_NODE, tagName);\n      var node = document.createElement(tagName);\n      manager_events.emit(AFTER_CREATE_NODE, node);\n      /* istanbul ignore else */\n\n      if (properties) {\n        this.setAttrs(node, properties);\n      }\n\n      return node;\n    }\n  }]);\n\n  return CellsManagerDom;\n}();\n\n/* harmony default export */ var dom = (dom_CellsManagerDom);\n// CONCATENATED MODULE: ./src/core/manager/storage.js\nfunction storage_extends() { storage_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return storage_extends.apply(this, arguments); }\n\nfunction storage_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction storage_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction storage_createClass(Constructor, protoProps, staticProps) { if (protoProps) storage_defineProperties(Constructor.prototype, protoProps); if (staticProps) storage_defineProperties(Constructor, staticProps); return Constructor; }\n\nvar InMemmoryStorage = /*#__PURE__*/function () {\n  function InMemmoryStorage() {\n    storage_classCallCheck(this, InMemmoryStorage);\n\n    this.dictionary = {};\n  }\n\n  storage_createClass(InMemmoryStorage, [{\n    key: \"getItem\",\n    value: function getItem(key) {\n      return this.dictionary[key] || null;\n    }\n  }, {\n    key: \"setItem\",\n    value: function setItem(key, value) {\n      this.dictionary[key] = value;\n    }\n  }]);\n\n  return InMemmoryStorage;\n}();\n\nvar CellsStorage = /*#__PURE__*/function () {\n  function CellsStorage(options) {\n    storage_classCallCheck(this, CellsStorage);\n\n    this.prefix = '';\n    this.persistent = false;\n    this.internalStorage = new InMemmoryStorage();\n\n    storage_extends(this, options);\n\n    if (this.persistent) {\n      this.clear();\n    }\n  }\n\n  storage_createClass(CellsStorage, [{\n    key: \"getItem\",\n    value: function getItem(key) {\n      return JSON.parse(this.storage.getItem(this.prefix + key));\n    }\n  }, {\n    key: \"setItem\",\n    value: function setItem(key, value) {\n      this.storage.setItem(this.prefix + key, JSON.stringify(value, '', true));\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var pattern = new RegExp('^(' + this.prefix + ')');\n\n      for (var key in this.storage) {\n        if (this.storage.hasOwnProperty(key)) {\n          if (pattern.test(key)) {\n            this.storage.removeItem(key);\n          }\n        }\n      }\n    }\n  }, {\n    key: \"storage\",\n    get: function get() {\n      var store;\n\n      if (this.persistent) {\n        store = window.localStorage;\n      } else {\n        store = window.sessionStorage;\n      }\n\n      try {\n        store.setItem('_$_', {});\n      } catch (error) {\n        store = this.internalStorage;\n      }\n\n      return store;\n    }\n  }]);\n\n  return CellsStorage;\n}();\n\n\n// CONCATENATED MODULE: ./src/core/connector.js\nfunction connector_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction connector_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction connector_createClass(Constructor, protoProps, staticProps) { if (protoProps) connector_defineProperties(Constructor.prototype, protoProps); if (staticProps) connector_defineProperties(Constructor, staticProps); return Constructor; }\n\nvar CellsBridgeConnector = /*#__PURE__*/function () {\n  function CellsBridgeConnector() {\n    connector_classCallCheck(this, CellsBridgeConnector);\n  }\n\n  connector_createClass(CellsBridgeConnector, [{\n    key: \"_get\",\n    value: function _get(options, format) {\n      return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n\n        if (!options || !options.url) {\n          reject(new Error('URL not defined'));\n          return;\n        }\n\n        var method = (options.method || '').toUpperCase() || 'GET';\n        xhr.addEventListener('load', function (e) {\n          var xhr = e.target;\n          var status = xhr.status;\n\n          if (status >= 200 && status < 300 || status == 0 && xhr.responseText.length > 0) {\n            if (format === 'json') {\n              resolve(JSON.parse(xhr.response));\n            } else {\n              resolve(xhr.responseText);\n            }\n          } else {\n            reject(new Error(xhr.statusText));\n          }\n        });\n        xhr.addEventListener('error', function () {\n          reject(new Error('Network Error'));\n        });\n        xhr.open(method, options.url); //\n\n        var headers = options.headers;\n\n        for (var header in headers) {\n          if (headers.hasOwnProperty(header)) {\n            xhr.setRequestHeader(header, headers[header]);\n          }\n        }\n\n        xhr.send(options.body);\n      });\n    }\n  }, {\n    key: \"getJSON\",\n    value: function getJSON(options) {\n      return this._get(options, 'json');\n    }\n  }, {\n    key: \"getHTML\",\n    value: function getHTML(options) {\n      return this._get(options, 'html');\n    }\n  }]);\n\n  return CellsBridgeConnector;\n}();\n\n\n// CONCATENATED MODULE: ./src/core/utils.js\n// Taken from string.js npm package\n// https://github.com/jprichardson/string.js\nvar dasherize = function dasherize(str) {\n  return str.trim().replace(/[_\\s]+/g, '-').replace(/([A-Z])/g, '-$1').replace(/-+/g, '-').toLowerCase();\n};\nvar camelize = function camelize(str) {\n  return str.trim().replace(/(-|_|\\s)+(.)?/g, function (mathc, sep, c) {\n    return c ? c.toUpperCase() : '';\n  });\n};\n/* harmony default export */ var utils = ({\n  dasherize: dasherize,\n  camelize: camelize\n});\n// CONCATENATED MODULE: ./src/core/sanitizer.js\nfunction sanitizer_extends() { sanitizer_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return sanitizer_extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction sanitizer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction sanitizer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction sanitizer_createClass(Constructor, protoProps, staticProps) { if (protoProps) sanitizer_defineProperties(Constructor.prototype, protoProps); if (staticProps) sanitizer_defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar sanitizer_dasherize = utils.dasherize;\n/**\n * Get path for component retrieval based on component definition properties.\n *\n * @param  {Object} componentDefinition Raw component definition.\n * @return {String}                     Path for component retrieval.\n */\n\nvar getPathFromComponent = function getPathFromComponent(componentDefinition) {\n  var familyPath = componentDefinition.familyPath,\n      tag = componentDefinition.tag,\n      tagName = componentDefinition.tagName;\n\n  var _tag = tag || tagName;\n\n  var firstPath = familyPath || _tag;\n  return \"\".concat(firstPath, \"/\").concat(_tag, \".html\");\n};\n\nvar CellsBridgeComposerSanitizer = /*#__PURE__*/function () {\n  function CellsBridgeComposerSanitizer() {\n    sanitizer_classCallCheck(this, CellsBridgeComposerSanitizer);\n  }\n\n  sanitizer_createClass(CellsBridgeComposerSanitizer, [{\n    key: \"_buildConfig\",\n    value: function _buildConfig(component) {\n      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'UI';\n      var componentType = component.type,\n          tag = component.tag,\n          tagName = component.tagName,\n          zone = component.zone,\n          fixed = component.fixed,\n          priority = component.priority,\n          properties = component.properties,\n          render = component.render,\n          featureFlag = component.featureFlag;\n      var path = getPathFromComponent(component);\n      var configType = componentType ? componentType.toUpperCase() : type;\n      var config = {\n        type: configType,\n        tagName: tag || tagName,\n        zone: zone,\n        fixed: fixed,\n        priority: priority,\n        properties: properties,\n        path: path,\n        render: render,\n        featureFlag: featureFlag\n      };\n      return this._parseConnections(config);\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(json) {\n      var components = [];\n      var LTRIM_SLASH = /^\\/(\\b)/;\n      components.push.apply(components, _toConsumableArray(this._parseComponentsFromJson(json, 'components', 'UI')));\n      var jsonTemplate = json.template;\n\n      if (jsonTemplate) {\n        jsonTemplate = this._buildConfig(jsonTemplate, 'TEMPLATE');\n      }\n\n      var pages = {};\n      var jsonPages = json.pages;\n      /* istanbul ignore if */\n\n      if (jsonPages) {\n        for (var index = 0; index < Object.keys(jsonPages).length; index++) {\n          var page = Object.keys(jsonPages)[index];\n          pages[page] = '/' + jsonPages[page].url.replace(LTRIM_SLASH, '');\n        }\n      }\n\n      return {\n        page: json.page,\n        currentPage: json.currentPage || {},\n        template: jsonTemplate,\n        components: components,\n        pages: pages\n      };\n    }\n  }, {\n    key: \"_parseComponentsFromJson\",\n    value: function _parseComponentsFromJson(json, key, type) {\n      var list = [];\n      var components = json[key];\n      /* istanbul ignore if */\n\n      if (Array.isArray(components)) {\n        for (var index = 0; index < components.length; index++) {\n          var component = components[index];\n          list.push(this._buildConfig(component, type));\n        }\n      }\n\n      return list;\n    }\n    /**\n     * Extend given component definition object with parsed component connections.\n     *\n     * @private\n     * @method _parseConnections\n     * @param  {Object} rawComponentDefinition  Raw component definition.\n     * @return {Object}                         Component definition including connections.\n     */\n\n  }, {\n    key: \"_parseConnections\",\n    value: function _parseConnections(rawComponentDefinition) {\n      var componentDefinition = this._normalizeComponentDefinition(rawComponentDefinition);\n\n      var cellsConnections = componentDefinition.properties.cellsConnections;\n\n      if (!cellsConnections || !Object.keys(cellsConnections).length > 0) {\n        return componentDefinition;\n      }\n\n      var componentDefinitionWithConnections = sanitizer_extends({}, componentDefinition);\n\n      if (cellsConnections.params) {\n        var params = this._parseConnectionsParams(cellsConnections.params);\n        /* istanbul ignore if */\n\n\n        if (!cellsConnections[\"in\"]) {\n          cellsConnections[\"in\"] = {};\n        }\n        /* istanbul ignore if */\n\n\n        if (!cellsConnections.out) {\n          cellsConnections.out = {};\n        }\n\n        sanitizer_extends(cellsConnections[\"in\"], params[\"in\"]);\n\n        sanitizer_extends(cellsConnections.out, params.out);\n      }\n\n      componentDefinitionWithConnections.connections = cellsConnections;\n      return componentDefinitionWithConnections;\n    }\n    /**\n     * Normalizes given raw component definition. Safe-guard method.\n     *\n     * @private\n     * @method _normalizeComponentDefinition\n     * @param  {Object} rawComponentDefinition Raw component definition object.\n     * @return {Object}                        Normalized component definition object.\n     */\n\n  }, {\n    key: \"_normalizeComponentDefinition\",\n    value: function _normalizeComponentDefinition(rawComponentDefinition) {\n      var DEFAULT_PROPERTIES = {\n        cellsConnections: {\n          \"in\": {},\n          out: {}\n        }\n      };\n\n      var componentDefinition = sanitizer_extends({}, rawComponentDefinition);\n\n      componentDefinition.properties = componentDefinition.properties || DEFAULT_PROPERTIES;\n      return componentDefinition;\n    }\n    /**\n     * Parse params to appropiate connections.\n     *\n     * @private\n     * @method _parseConnectionsParams\n     * @param  {Object} params Params to be parsed.\n     * @return {Object}        Parsed connections.\n     */\n\n  }, {\n    key: \"_parseConnectionsParams\",\n    value: function _parseConnectionsParams(params) {\n      var connections = {\n        \"in\": {},\n        out: {}\n      };\n\n      for (var prop in params) {\n        if (params.hasOwnProperty(prop)) {\n          var paramDef = params[prop];\n          var outBind = sanitizer_dasherize(prop) + '-changed';\n          connections[\"in\"][paramDef] = this._createConnection(prop);\n          connections.out[paramDef] = this._createConnection(outBind);\n        }\n      }\n\n      return connections;\n    }\n    /**\n     * Create connection object based on given parameters.\n     *\n     * @private\n     * @method _createConnection\n     * @param  {String}  bind          Property to bind to.\n     * @param  {Boolean} [global=true] Global flag.\n     * @return {Object}                Connection object.\n     */\n\n  }, {\n    key: \"_createConnection\",\n    value: function _createConnection(bind) {\n      var global = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      return {\n        bind: bind,\n        global: global\n      };\n    }\n  }, {\n    key: \"split\",\n    value: function split(data) {\n      var response;\n      /* istanbul ignore if */\n\n      if (data) {\n        response = {\n          CC: [],\n          UI: [],\n          DM: []\n        };\n\n        for (var index = 0; index < data.length; index++) {\n          var item = data[index];\n          response[item.type].push(item);\n        }\n      }\n\n      return response;\n    }\n  }]);\n\n  return CellsBridgeComposerSanitizer;\n}();\n\n\n// CONCATENATED MODULE: ./src/core/manager/page.js\nfunction page_extends() { page_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return page_extends.apply(this, arguments); }\n\nfunction page_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction page_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction page_createClass(Constructor, protoProps, staticProps) { if (protoProps) page_defineProperties(Constructor.prototype, protoProps); if (staticProps) page_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\nvar page_externalEventsCodes = constants.externalEventsCodes;\n/**\n * Class that retrieves pages either from the cache or by fetching them using http requests.\n * This class can handle:\n *  - dynamic pages: the one that are defined in json files.\n *  Also, dynamic pages can be localy located o remotely located.\n *  - static pages: the one that are defined in html files\n *\n * @param {CellsBridge} bridge\n *\n * The constructor receives a CellsBridge that has all the needed configuration:\n *\n * The property 'templatesPath' indicates the path where the local pages are located.\n * It must be defined only if there are local pages.\n *\n * The property 'composerEndpoint' indicates the url where the local pages are located.\n * This url must have the literals '{id}' and '{platform}'. It must be defined only if there are remote pages.\n *\n * The property 'remoteTemplates' is an array that contains the name of the remote templates\n * (just the name, not the extension).\n * It must be defined only if there are remote pages.\n *\n  * The property 'htmlPagesPath' is the path to the folder that contains the html pages.\n *\n * The property 'htmlPages' is an array that contains the name of the static html pages\n * (just the name, not the extension).\n *\n * The property 'appId' is the application's id.\n *\n * The property 'getPlatform' is a function, usually defined in the app.js file, that returns\n * a string indicating the platform that runs the application (for instance: destkop, ios or android).\n */\n\nvar page_CellsManagerPage = /*#__PURE__*/function () {\n  function CellsManagerPage(bridge) {\n    page_classCallCheck(this, CellsManagerPage);\n\n    this._initCellsPageManager(bridge);\n  }\n\n  page_createClass(CellsManagerPage, [{\n    key: \"_initCellsPageManager\",\n    value: function _initCellsPageManager(bridge) {\n      var _bridge$htmlPagesPath = bridge.htmlPagesPath,\n          htmlPagesPath = _bridge$htmlPagesPath === void 0 ? './pages/' : _bridge$htmlPagesPath,\n          htmlPages = bridge.htmlPages,\n          templatesPath = bridge.templatesPath,\n          composerEndpoint = bridge.composerEndpoint,\n          remoteTemplates = bridge.remoteTemplates,\n          appId = bridge.appId,\n          getPlatform = bridge.getPlatform,\n          cache = bridge.cache,\n          prefix = bridge.storagePrefix,\n          composerEngine = bridge.composerEngine,\n          TemplateManager = bridge.TemplateManager;\n      var storage = new CellsStorage({\n        prefix: prefix,\n        persistent: cache\n      });\n      var connector = new CellsBridgeConnector();\n      var sanitizer = new CellsBridgeComposerSanitizer();\n\n      page_extends(this, {\n        storage: storage,\n        htmlPagesPath: htmlPagesPath,\n        htmlPages: htmlPages,\n        templatesPath: templatesPath,\n        composerEndpoint: composerEndpoint,\n        remoteTemplates: remoteTemplates,\n        appId: appId,\n        getPlatform: getPlatform,\n        cache: cache,\n        connector: connector,\n        sanitizer: sanitizer,\n        composerEngine: composerEngine,\n        TemplateManager: TemplateManager\n      });\n    }\n  }, {\n    key: \"_remoteTemplate\",\n    value: function _remoteTemplate(page) {\n      var replaced = this.composerEndpoint.replace(/{appId}/, this.appId);\n\n      if (this.getPlatform) {\n        replaced = replaced.replace(/{platform}/, this.getPlatform());\n      }\n\n      replaced = replaced.replace(/{page}/, page);\n      return replaced;\n    }\n  }, {\n    key: \"_localTemplate\",\n    value: function _localTemplate(page) {\n      var endpoint = !this.templatesPath ? this.composerEndpoint : this.templatesPath;\n      return \"\".concat(endpoint).concat(page, \".json\");\n    }\n  }, {\n    key: \"_isLocalComposer\",\n    value: function _isLocalComposer(page) {\n      var result = true;\n      var hasTemplatePath = this.templatesPath && this.templatesPath.length > 0;\n      var hasRemoteTemplates = this.remoteTemplates && this.remoteTemplates.length > 0; // legacy case when there was just composerEndpoint and\n      // it could be a directory or an url\n\n      var oldWayOnlyCompopserEndpointDefined = this.composerEndpoint && !hasTemplatePath && !hasRemoteTemplates;\n\n      if (oldWayOnlyCompopserEndpointDefined) {\n        result = this.composerEndpoint.indexOf('http') !== 0;\n      } else {\n        if (this.composerEndpoint && this.remoteTemplates) {\n          result = this.remoteTemplates.indexOf(page) < 0;\n        } else {\n          result = true;\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_renderComposerEndpoint\",\n    value: function _renderComposerEndpoint(page) {\n      if (this._isLocalComposer(page)) {\n        return this._localTemplate(page);\n      } else {\n        return this._remoteTemplate(page);\n      }\n    }\n    /**\n     * Returns the url needed to retrieve a page. It handles theese cases:\n     *  - page is dynamic (json file) and remote\n     *  - page is dynamic (json file) and local\n     *  - page is static (html file)\n     *\n     * @param {String} page is the name of the page to retrieve\n     */\n\n  }, {\n    key: \"generateRequestUrl\",\n    value: function generateRequestUrl(page) {\n      if (this.htmlPages && this.htmlPages.indexOf(page) >= 0) {\n        return this.htmlPagesPath + page + '.html';\n      } else {\n        return this._renderComposerEndpoint(page);\n      }\n    }\n    /**\n     * @param {Object} page\n     */\n    // eslint-disable-next-line no-unused-vars\n\n  }, {\n    key: \"onPageDefinitionNotFound\",\n    value: function onPageDefinitionNotFound(page) {// Overwrite to make something when page definition is not found.\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.storage.clear();\n    }\n    /**\n     * Returns a promise that retrieves a dynamic page (json file).\n     * The page may come from the cache or from a http request.\n     *\n     * @param {String} page name\n     * @param {Object} options for http request\n     * @param {Object} configuration\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(page, options, config) {\n      var useComposerEngineForThisPage = this.composerEngine && !this._isLocalComposer(page);\n      var spec;\n\n      if (useComposerEngineForThisPage) {\n        this.TemplateManager.removeTemplate(page);\n        return this._getFromComposerEngine(page, options);\n      } else {\n        spec = this.storage.getItem(page);\n\n        if (this.cache && spec) {\n          return Promise.resolve(spec);\n        } else {\n          return this._getFromConnector(page, options, config);\n        }\n      }\n    }\n  }, {\n    key: \"_getFromComposerEngine\",\n    value: function _getFromComposerEngine(page, options) {\n      var response = JSON.parse(this.composerEngine.getPage(page));\n      return Promise.resolve(this._onResponse(page, options, response));\n    }\n  }, {\n    key: \"_getFromConnector\",\n    value: function _getFromConnector(page, options, config) {\n      var _this = this;\n\n      var PAGE_REQUEST = page_externalEventsCodes.PAGE_REQUEST;\n      options = options || {};\n      options.url = this.generateRequestUrl(page, options, config);\n      manager_events.emit(PAGE_REQUEST, options);\n      return this.connector.getJSON(options).then(function (response) {\n        return _this._onResponse(page, options, response);\n      })[\"catch\"](function (error) {\n        _this._onResponseFail(page);\n\n        console.error(error);\n        return error.message;\n      });\n    }\n    /**\n     * Returns a promise that retrieves a static page (html file).\n     * The page comes from a http request.\n     *\n     * @param {String} page name\n     * @param {Object} options for http request\n     */\n\n  }, {\n    key: \"getPage\",\n    value: function getPage(page, options) {\n      var _this2 = this;\n\n      var PAGE_REQUEST = page_externalEventsCodes.PAGE_REQUEST;\n      options = options || {};\n      options.url = this.generateRequestUrl(page);\n      manager_events.emit(PAGE_REQUEST, options);\n      return this.connector.getHTML(options).then(function (response) {\n        return _this2._onResponseHTML(page, options, response);\n      })[\"catch\"](function (error) {\n        _this2._onResponseFail(page);\n\n        console.error(error);\n        return error.message;\n      });\n    } //getComponentPage(...)\n\n  }, {\n    key: \"_onResponse\",\n    value: function _onResponse(page, options, response) {\n      var PAGE_RESPONSE = page_externalEventsCodes.PAGE_RESPONSE,\n          DATA_LOAD = page_externalEventsCodes.DATA_LOAD;\n      response.page = page;\n      manager_events.emit(PAGE_RESPONSE, response);\n      var sanitizedData = this.sanitizer.parse(response); // sanitizedData = this.bridge.parse('data', sanitizedData);\n\n      this.storage.setItem(page, sanitizedData);\n      manager_events.emit(DATA_LOAD, sanitizedData);\n      return sanitizedData;\n    }\n  }, {\n    key: \"_onResponseHTML\",\n    value: function _onResponseHTML(page, options, responseText) {\n      var PAGE_RESPONSE = page_externalEventsCodes.PAGE_RESPONSE,\n          DATA_LOAD = page_externalEventsCodes.DATA_LOAD;\n      var response = {\n        page: page,\n        html: responseText\n      };\n      manager_events.emit(PAGE_RESPONSE, response);\n      var sanitizedData = {\n        page: page,\n        currentPage: {},\n        template: {},\n        components: [],\n        pages: [],\n        html: responseText\n      };\n      this.storage.setItem(page, sanitizedData);\n      manager_events.emit(DATA_LOAD, sanitizedData);\n      return sanitizedData;\n    }\n  }, {\n    key: \"_onResponseFail\",\n    value: function _onResponseFail(page) {\n      if (this.onPageDefinitionNotFound) {\n        this.onPageDefinitionNotFound(page);\n      }\n\n      return Promise.reject(new Error(\"Definition file for page '\".concat(page, \"' not found.\")));\n    }\n  }]);\n\n  return CellsManagerPage;\n}();\n\n/* harmony default export */ var manager_page = (page_CellsManagerPage);\n// CONCATENATED MODULE: ./node_modules/tslib/tslib.es6.js\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nfunction __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nfunction __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nfunction __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/isFunction.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/config.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nvar config_config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/hostReportError.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/Observer.js\n/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\n\n\nvar empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config_config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/isArray.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/isObject.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nvar UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/Subscription.js\n/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\n\n\n\n\nvar Subscription_Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\n\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nvar $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/Subscriber.js\n/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\n\n\n\n\n\n\n\nvar Subscriber_Subscriber = /*@__PURE__*/ (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = empty;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = empty;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new Subscriber_SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new Subscriber_SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriber] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription_Subscription));\n\nvar Subscriber_SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== empty) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config_config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config_config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config_config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config_config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config_config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config_config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber_Subscriber));\n\n//# sourceMappingURL=Subscriber.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/canReportError.js\n/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */\n\nfunction canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber_Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=canReportError.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/toSubscriber.js\n/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\n\n\n\nfunction toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber_Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriber]) {\n            return nextOrObserver[rxSubscriber]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber_Subscriber(empty);\n    }\n    return new Subscriber_Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/symbol/observable.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar observable_observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/noop.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction noop() { }\n//# sourceMappingURL=noop.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/pipe.js\n/** PURE_IMPORTS_START _noop PURE_IMPORTS_END */\n\nfunction pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nfunction pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/Observable.js\n/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\n\n\n\n\n\nvar Observable_Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config_config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config_config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config_config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[observable_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\n\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config_config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/map.js\n/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\n\n\nfunction map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new map_MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\n\nvar map_MapSubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber_Subscriber));\n//# sourceMappingURL=map.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/observable/fromEvent.js\n/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\n\n\n\n\nvar fromEvent_toString = /*@__PURE__*/ (function () { return Object.prototype.toString; })();\nfunction fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n    }\n    return new Observable_Observable(function (subscriber) {\n        function handler(e) {\n            if (arguments.length > 1) {\n                subscriber.next(Array.prototype.slice.call(arguments));\n            }\n            else {\n                subscriber.next(e);\n            }\n        }\n        setupSubscription(target, eventName, handler, subscriber, options);\n    });\n}\nfunction setupSubscription(sourceObj, eventName, handler, subscriber, options) {\n    var unsubscribe;\n    if (isEventTarget(sourceObj)) {\n        var source_1 = sourceObj;\n        sourceObj.addEventListener(eventName, handler, options);\n        unsubscribe = function () { return source_1.removeEventListener(eventName, handler, options); };\n    }\n    else if (isJQueryStyleEventEmitter(sourceObj)) {\n        var source_2 = sourceObj;\n        sourceObj.on(eventName, handler);\n        unsubscribe = function () { return source_2.off(eventName, handler); };\n    }\n    else if (isNodeStyleEventEmitter(sourceObj)) {\n        var source_3 = sourceObj;\n        sourceObj.addListener(eventName, handler);\n        unsubscribe = function () { return source_3.removeListener(eventName, handler); };\n    }\n    else if (sourceObj && sourceObj.length) {\n        for (var i = 0, len = sourceObj.length; i < len; i++) {\n            setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n        }\n    }\n    else {\n        throw new TypeError('Invalid event target');\n    }\n    subscriber.add(unsubscribe);\n}\nfunction isNodeStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.addListener === 'function' && typeof sourceObj.removeListener === 'function';\n}\nfunction isJQueryStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.on === 'function' && typeof sourceObj.off === 'function';\n}\nfunction isEventTarget(sourceObj) {\n    return sourceObj && typeof sourceObj.addEventListener === 'function' && typeof sourceObj.removeEventListener === 'function';\n}\n//# sourceMappingURL=fromEvent.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/filter.js\n/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\n\n\nfunction filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new filter_FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar filter_FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber_Subscriber));\n//# sourceMappingURL=filter.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {\n    function ObjectUnsubscribedErrorImpl() {\n        Error.call(this);\n        this.message = 'object unsubscribed';\n        this.name = 'ObjectUnsubscribedError';\n        return this;\n    }\n    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ObjectUnsubscribedErrorImpl;\n})();\nvar ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/SubjectSubscription.js\n/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\n\n\nvar SubjectSubscription_SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    __extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription_Subscription));\n\n//# sourceMappingURL=SubjectSubscription.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/Subject.js\n/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\n\n\n\n\n\n\n\nvar Subject_SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber_Subscriber));\n\nvar Subject_Subject = /*@__PURE__*/ (function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriber] = function () {\n        return new Subject_SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new Subject_AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription_Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription_Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription_SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable_Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new Subject_AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable_Observable));\n\nvar Subject_AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription_Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject_Subject));\n\n//# sourceMappingURL=Subject.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduler/Action.js\n/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\n\n\nvar Action_Action = /*@__PURE__*/ (function (_super) {\n    __extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return this;\n    };\n    return Action;\n}(Subscription_Subscription));\n\n//# sourceMappingURL=Action.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js\n/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */\n\n\nvar AsyncAction_AsyncAction = /*@__PURE__*/ (function (_super) {\n    __extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action_Action));\n\n//# sourceMappingURL=AsyncAction.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js\n/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\n\n\nvar QueueAction_QueueAction = /*@__PURE__*/ (function (_super) {\n    __extends(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction_AsyncAction));\n\n//# sourceMappingURL=QueueAction.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/Scheduler.js\nvar Scheduler = /*@__PURE__*/ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    Scheduler.now = function () { return Date.now(); };\n    return Scheduler;\n}());\n\n//# sourceMappingURL=Scheduler.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js\n/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */\n\n\nvar AsyncScheduler_AsyncScheduler = /*@__PURE__*/ (function (_super) {\n    __extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        _this.active = false;\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\n\n//# sourceMappingURL=AsyncScheduler.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js\n/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\n\n\nvar QueueScheduler_QueueScheduler = /*@__PURE__*/ (function (_super) {\n    __extends(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler_AsyncScheduler));\n\n//# sourceMappingURL=QueueScheduler.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduler/queue.js\n/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */\n\n\nvar queue = /*@__PURE__*/ new QueueScheduler_QueueScheduler(QueueAction_QueueAction);\n//# sourceMappingURL=queue.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/observable/empty.js\n/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\n\nvar EMPTY = /*@__PURE__*/ new Observable_Observable(function (subscriber) { return subscriber.complete(); });\nfunction empty_empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable_Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/isScheduler.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n//# sourceMappingURL=isScheduler.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js\n/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\n\n\nfunction scheduleArray(input, scheduler) {\n    return new Observable_Observable(function (subscriber) {\n        var sub = new Subscription_Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/observable/fromArray.js\n/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */\n\n\n\nfunction fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable_Observable(subscribeToArray(input));\n    }\n    else {\n        return scheduleArray(input, scheduler);\n    }\n}\n//# sourceMappingURL=fromArray.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/observable/of.js\n/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_scheduled_scheduleArray PURE_IMPORTS_END */\n\n\n\nfunction of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n        return scheduleArray(args, scheduler);\n    }\n    else {\n        return fromArray(args);\n    }\n}\n//# sourceMappingURL=of.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/observable/throwError.js\n/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\n\nfunction throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable_Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable_Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n//# sourceMappingURL=throwError.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/Notification.js\n/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */\n\n\n\nvar NotificationKind;\n/*@__PURE__*/ (function (NotificationKind) {\n    NotificationKind[\"NEXT\"] = \"N\";\n    NotificationKind[\"ERROR\"] = \"E\";\n    NotificationKind[\"COMPLETE\"] = \"C\";\n})(NotificationKind || (NotificationKind = {}));\nvar Notification_Notification = /*@__PURE__*/ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty_empty();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\n\n//# sourceMappingURL=Notification.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/observeOn.js\n/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */\n\n\n\nfunction observeOn(scheduler, delay) {\n    if (delay === void 0) {\n        delay = 0;\n    }\n    return function observeOnOperatorFunction(source) {\n        return source.lift(new ObserveOnOperator(scheduler, delay));\n    };\n}\nvar ObserveOnOperator = /*@__PURE__*/ (function () {\n    function ObserveOnOperator(scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.scheduler = scheduler;\n        this.delay = delay;\n    }\n    ObserveOnOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new observeOn_ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n    };\n    return ObserveOnOperator;\n}());\n\nvar observeOn_ObserveOnSubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        var destination = this.destination;\n        destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification_Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification_Notification.createError(err));\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification_Notification.createComplete());\n        this.unsubscribe();\n    };\n    return ObserveOnSubscriber;\n}(Subscriber_Subscriber));\n\nvar ObserveOnMessage = /*@__PURE__*/ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\n\n//# sourceMappingURL=observeOn.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/ReplaySubject.js\n/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */\n\n\n\n\n\n\n\nvar ReplaySubject_ReplaySubject = /*@__PURE__*/ (function (_super) {\n    __extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) {\n            bufferSize = Number.POSITIVE_INFINITY;\n        }\n        if (windowTime === void 0) {\n            windowTime = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription_Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription_SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new observeOn_ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject_Subject));\n\nvar ReplayEvent = /*@__PURE__*/ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n//# sourceMappingURL=ReplaySubject.js.map\n\n// CONCATENATED MODULE: ./src/core/state/channel.js\n\n\nvar channel_createChannel = function createChannel() {\n  var channel = new ReplaySubject_ReplaySubject(1);\n\n  var _nextFromSuperClass = channel.next.bind(channel);\n\n  channel.next = function (value) {\n    var generateUUID = function generateUUID() {\n      var d = new Date().getTime();\n      var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        return (c == 'x' ? r : r & 0x3 | 0x8).toString(16);\n      });\n      return uuid;\n    };\n\n    if (!value.uuid) {\n      value.uuid = generateUUID();\n    }\n\n    if (!value.time) {\n      value.time = new Date().getTime();\n    }\n\n    _nextFromSuperClass(value);\n  };\n\n  channel.hasObservers = function () {\n    if (this.closed) {\n      throw new Error();\n    }\n\n    return this.observers.length > 0;\n  };\n\n  channel.complete = function () {};\n\n  channel.error = function (error) {\n    this.observers.forEach(function (o) {\n      o.isStopped = false;\n      o.onError(error);\n    });\n  };\n\n  channel.unsubscribe = function (index) {\n    this.observers.splice(index, 1);\n  };\n\n  channel.unsubscribeAll = function () {\n    this.observers.splice(0, this.observers.length);\n  };\n\n  channel.clean = function () {\n    this._events = [];\n    this.observers = [];\n  };\n\n  channel.dispose = function () {\n    this.unsubscribe();\n  };\n\n  return channel;\n};\n\n/* harmony default export */ var state_channel = (channel_createChannel);\n// CONCATENATED MODULE: ./src/core/state/subscriptor.js\nfunction subscriptor_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction subscriptor_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction subscriptor_createClass(Constructor, protoProps, staticProps) { if (protoProps) subscriptor_defineProperties(Constructor.prototype, protoProps); if (staticProps) subscriptor_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar subscriptor_Subscriptor = /*#__PURE__*/function () {\n  function Subscriptor(node) {\n    subscriptor_classCallCheck(this, Subscriptor);\n\n    this.node = node;\n    this.subscriptions = [];\n    this.publications = new Subscription_Subscription();\n  }\n\n  subscriptor_createClass(Subscriptor, [{\n    key: \"hasSubscription\",\n    value: function hasSubscription(channel) {\n      return this.subscriptions.filter(function (d) {\n        return d.channel === channel;\n      }).length > 0;\n    }\n    /**\n     * Publish an event.sss\n     *\n     * @param  {Event} event\n     */\n\n  }, {\n    key: \"publish\",\n    value: function publish(event) {\n      this.publications.add(event);\n    }\n  }, {\n    key: \"makeCallbackWithNoReplay\",\n    value: function makeCallbackWithNoReplay(channel, fn) {\n      if (!fn.node.intervals) {\n        fn.node.intervals = [];\n      }\n\n      if (!fn.node.ids) {\n        fn.node.ids = [];\n      }\n\n      var getTimeFromNode = function getTimeFromNode(node) {\n        return node.intervals[channel.name];\n      };\n\n      var setTimeForNode = function setTimeForNode(node, time) {\n        node.intervals[channel.name] = time;\n      };\n\n      var getTimeFromChannel = function getTimeFromChannel(channel) {\n        return channel._events.length > 0 ? channel._events[0].time : 1;\n      };\n\n      var getIdFromNode = function getIdFromNode(node) {\n        return node.ids[channel.name];\n      };\n\n      var setIdForNode = function setIdForNode(node, id) {\n        node.ids[channel.name] = id;\n      };\n\n      var getIdFromChannel = function getIdFromChannel(channel) {\n        return channel._events.length > 0 ? channel._events[0].uuid : null;\n      };\n\n      var fnReplayOff = function () {\n        var lastInterval = getTimeFromChannel(channel);\n        var nodeInterval = getTimeFromNode(fn.node);\n        var lastId = getIdFromChannel(channel);\n        var nodeId = getIdFromNode(fn.node);\n\n        if (!nodeInterval || nodeInterval < lastInterval || nodeInterval === lastInterval && nodeId != lastId) {\n          setTimeForNode(fn.node, lastInterval);\n          setIdForNode(fn.node, lastId);\n          return fn.apply(this, arguments);\n        }\n\n        setTimeForNode(fn.node, lastInterval);\n      }.bind(this);\n\n      fnReplayOff.node = fn.node;\n      return fnReplayOff;\n    }\n    /**\n     * Subscribe to a channel.\n     *\n     * @param  {Channel}   channel  Channel to subscribe\n     * @param  {Function}  fn       Callback function to run when a value from a channel changed\n     */\n\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(channel, fn, previousState) {\n      if (!this.hasSubscription(channel)) {\n        var callback = fn;\n        var subscription;\n\n        if (previousState === false) {\n          callback = this.makeCallbackWithNoReplay(channel, fn);\n        }\n\n        var pos = this._firstInstanceOfObserver(callback.node, channel);\n\n        if (pos === -1) {\n          subscription = channel.subscribe(callback);\n          pos = channel.observers.length - 1;\n        } else {\n          subscription = channel.observers[pos];\n        }\n\n        subscription.node = callback.node;\n        var subscriptionDetail = {\n          channel: channel,\n          observer: subscription,\n          subscription: subscription\n        };\n        this.subscriptions.push(subscriptionDetail);\n      }\n    }\n    /**\n     * Remove all active subscriptions.\n     */\n\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(cleanPrivateChannels) {\n      for (var i = this.subscriptions.length - 1; i >= 0; i--) {\n        var subscription = this.subscriptions[i];\n        var channel = subscription.channel;\n        var observer = subscription.observer;\n        var index = channel.observers.indexOf(observer); //if(index >= 0 && !channel.name.match(/\\b__bridge_/)) {\n\n        if (index >= 0) {\n          if (cleanPrivateChannels === true || !channel.name.match(/\\b__bridge_/)) {\n            channel.unsubscribe(index);\n          }\n        } // if(!channel.hasObservers()) {\n        //   channel.clean();\n        // }\n\n      }\n\n      this.publications.unsubscribe();\n    }\n    /**\n     * Returns the position of the first occurrence of the observer's node in the channel.\n     * If the node has none observer registered to the channel, it returns -1.\n     *\n     * @param {node}\n     * @param {channel}\n     */\n\n  }, {\n    key: \"_firstInstanceOfObserver\",\n    value: function _firstInstanceOfObserver(node, channel) {\n      var pos = -1;\n\n      for (var index = 0; index < channel.observers.length; index++) {\n        if (channel.observers[index].node === node) {\n          pos = index;\n          break;\n        }\n      }\n\n      return pos;\n    }\n  }]);\n\n  return Subscriptor;\n}();\n\n\n// CONCATENATED MODULE: ./src/core/state/index.js\n\n\n// CONCATENATED MODULE: ./src/core/featureflag/feature-flag-collection.js\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction feature_flag_collection_extends() { feature_flag_collection_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return feature_flag_collection_extends.apply(this, arguments); }\n\nfunction feature_flag_collection_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction feature_flag_collection_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction feature_flag_collection_createClass(Constructor, protoProps, staticProps) { if (protoProps) feature_flag_collection_defineProperties(Constructor.prototype, protoProps); if (staticProps) feature_flag_collection_defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Feature Identifier\n * @typedef {String} CellsFeatureKey\n */\n\n/**\n  * Feature black list\n  * @typedef {Array<CellsFeatureKey>} CellsFeatureBlackList\n  */\n\n/**\n * Feature object\n * @typedef {Object} CellsFeature\n * @property {*} defaultValue  Default value of feature\n * @property {*} value         Current value of feature\n * @property {CellsFeatureKey} key      Feature identifier\n * \n */\n\n/**\n * Feature Collection\n * @typedef {Object.<CellsFeatureKey, CellsFeature>} CellsFeatureCollection\n */\n\n/**\n * Cells Feature Response\n * @typedef {Object} CellsFeatureResponse\n * @property {CellsFeatureCollection} features\n */\n\n/**\n * Channel name of FeatureFlagCollection. Emit data in this channel when collection of FeatureFlag is updated\n * @constant\n * @type {string}\n */\nvar BRIDGE_CHANNEL_KEY = '__bridge_ch_featureflag';\n/**\n * Name of CustomElement method use to evaluate value of FeatureFlag\n * @constant\n * @type {string}\n */\n\nvar BRIDGE_BIND_KEY = 'featureFlagChangedCallback';\n/**\n * FeatureFlag last value collection by node\n */\n\nvar lastValue = new Map();\n\nvar FeatureFlagCollection = /*#__PURE__*/function () {\n  function FeatureFlagCollection(bridge) {\n    feature_flag_collection_classCallCheck(this, FeatureFlagCollection);\n\n    this._featureCollection = {};\n    this._conector = bridge.ComponentConnector;\n  }\n  /**\n   * Deep copy of collection of features flags\n   * @property\n   */\n\n\n  feature_flag_collection_createClass(FeatureFlagCollection, [{\n    key: \"value\",\n\n    /**\n     * Get value of feature if is enabled or null is disabled\n     * @method\n     * @param {CellsFeature} feature   Feature with identifier\n     * @returns {*}               Feature value or null if the feature is disabled\n     */\n    value: function value(_ref) {\n      var key = _ref.key,\n          defaultValue = _ref.defaultValue,\n          _value = _ref.value;\n      var _featureCollection = this._featureCollection;\n\n      if (_featureCollection.hasOwnProperty(key) && _featureCollection[key].hasOwnProperty('value')) {\n        return _featureCollection[key].value;\n      } else if (_featureCollection.hasOwnProperty(key) && _featureCollection[key].hasOwnProperty('defaultValue')) {\n        return _featureCollection[key].defaultValue;\n      } else if (_value !== undefined) {\n        return _value;\n      } else {\n        return defaultValue;\n      }\n    }\n    /**\n     * Extend collection; if feature is registered, overwrite values\n     * @method\n     * @param {CellsFeatureCollection} featureCollection \n     * @returns {FeatureFlagCollection} this\n     */\n\n  }, {\n    key: \"extend\",\n    value: function extend(featureCollection) {\n      feature_flag_collection_extends(this._featureCollection, featureCollection);\n\n      return this._publish();\n    }\n    /**\n     * Register collection of features and add default value of each feature\n     * @method\n     * @param {CellsFeatureCollection} featureCollection \n     * @returns {FeatureFlagCollection} this\n     */\n\n  }, {\n    key: \"register\",\n    value: function register(featureCollection) {\n      var _this = this;\n\n      Object.entries(featureCollection).map(function (_ref2) {\n        var _ref3 = _slicedToArray(_ref2, 2),\n            key = _ref3[0],\n            defaultValue = _ref3[1].defaultValue;\n\n        return _defineProperty({}, key, defaultValue);\n      }).forEach(function (singleFeatureCollection) {\n        return feature_flag_collection_extends(_this._featureCollection, singleFeatureCollection);\n      });\n      return this._publish();\n    }\n    /**\n     * @method\n     * @param {CellsFeatureResponse} featureResponse Response of feature service\n     * @returns {FeatureFlagCollection} this\n     */\n\n  }, {\n    key: \"update\",\n    value: function update(featureResponse) {\n      return this.extend(featureResponse.features);\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(callback) {\n      var _this2 = this;\n\n      if (typeof callback === 'function') {\n        var channel = this._conector.manager.get(BRIDGE_CHANNEL_KEY);\n\n        this._conector.getSubscriptor(this).subscribe(channel, function () {\n          return callback(_this2);\n        });\n      }\n\n      return this;\n    }\n    /**\n     * @private\n     * @returns {FeatureFlagCollection} this\n     */\n\n  }, {\n    key: \"_publish\",\n    value: function _publish() {\n      var channel = this._conector.manager.get(BRIDGE_CHANNEL_KEY);\n\n      channel.next(new CustomEvent(BRIDGE_CHANNEL_KEY, {\n        data: this.collection\n      }));\n      return this;\n    }\n  }, {\n    key: \"collection\",\n    get: function get() {\n      return JSON.parse(JSON.stringify(this._featureCollection));\n    }\n  }]);\n\n  return FeatureFlagCollection;\n}();\n\n\n// CONCATENATED MODULE: ./src/core/component-connector.js\nfunction component_connector_extends() { component_connector_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return component_connector_extends.apply(this, arguments); }\n\nfunction component_connector_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction component_connector_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction component_connector_createClass(Constructor, protoProps, staticProps) { if (protoProps) component_connector_defineProperties(Constructor.prototype, protoProps); if (staticProps) component_connector_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\nvar component_connector_externalEventsCodes = constants.externalEventsCodes;\n/**\n * Collection of channels.\n */\n\nvar ChannelManager = function ChannelManager() {\n  this.channels = {}; //*1prototype mixin clone problem\n};\n\nChannelManager.prototype = {\n  channels: null,\n  //{} //*1prototype mixin clone problem\n\n  /**\n   * Gets a channel by name.\n   *\n   * @param  {String} name\n   *\n   * @return {Channel}\n   */\n  get: function get(name) {\n    var channel = this.channels[name];\n\n    if (channel == null) {\n      channel = this.create(name);\n    }\n\n    return channel;\n  },\n\n  /**\n   * Gets a channel by name.\n   *\n   * @param  {String} name\n   *\n   * @return {Channel}\n   */\n  getUnsafe: function getUnsafe(name) {\n    return this.channels[name];\n  },\n\n  /**\n   * Creates a channel.\n   *\n   * @param  {String} name Channel name\n   *\n   * @return {Channel}\n   */\n  create: function create(name) {\n    var channel = state_channel();\n    channel.name = name;\n    this.channels[name] = channel;\n    return channel;\n  },\n\n  /**\n   * Removes a channel from the collection.\n   *\n   * @param  {String} name Name of the channel to remove.\n   */\n  remove: function remove(name) {\n    delete this.channels[name];\n  },\n  unregisterAllSubscriptors: function unregisterAllSubscriptors() {\n    this.ComponentConnector.subscriptors.forEach(function (v) {\n      v.subscriptions.forEach(function (s) {\n        return s.subscription.unsubscribe();\n      });\n    });\n  },\n  cleanAllChannels: function cleanAllChannels() {\n    for (var channelName in this.channels) {\n      if (this.channels.hasOwnProperty(channelName)) {\n        this.channels[channelName].clean();\n      }\n    }\n  },\n  removeAllChannels: function removeAllChannels() {\n    for (var channelName in this.channels) {\n      if (this.channels.hasOwnProperty(channelName)) {\n        delete this.channels[channelName];\n      }\n    }\n  },\n\n  /**\n   * Returns true if there is a channel registered with the given name,\n   *\n   * @param {String} name Channel name,\n   *\n   * @return {Boolean}\n   */\n  has: function has(name) {\n    return this.channels[name] != null;\n  }\n};\n\nvar component_connector_ComponentConnector = /*#__PURE__*/function () {\n  function ComponentConnector() {\n    component_connector_classCallCheck(this, ComponentConnector);\n\n    this.manager = null;\n    this.subscriptors = null;\n    this.bridgeChannelsPrefix = null;\n    this.manager = new ChannelManager();\n    this.subscriptors = new Map();\n    this.bridgeChannelsPrefix = /__bridge_(?!ch)/;\n  }\n\n  component_connector_createClass(ComponentConnector, [{\n    key: \"getSubscriptor\",\n    value: function getSubscriptor(node) {\n      var subscriptor = this.subscriptors.get(node);\n\n      if (!subscriptor) {\n        subscriptor = new subscriptor_Subscriptor(node);\n        this.subscriptors.set(node, subscriptor);\n      }\n\n      return subscriptor;\n    }\n    /**\n     * Register a node in pubsub\n     *\n     * @param  {HTMLElement}  node\n     * @param  {Object}       connections\n     */\n\n  }, {\n    key: \"register\",\n    value: function register(node, connections) {\n      if (node && connections) {\n        this._registerOutConnections(node, connections.out);\n\n        this._registerInConnections(node, connections[\"in\"]);\n      }\n    }\n    /**\n     * Registesr new connections of a node that may have other connections registered previously.\n     *\n     * @param  {HTMLElement}  node\n     * @param  {Object}       connections\n     */\n\n  }, {\n    key: \"progressiveRegister\",\n    value: function progressiveRegister(node, connections) {\n      if (node && connections) {\n        this._registerOutConnections(node, connections.out);\n\n        this._updateInConnections(node, connections[\"in\"]);\n      }\n    }\n  }, {\n    key: \"_registerInConnections\",\n    value: function _registerInConnections(node, inConnections) {\n      var channelName;\n      var bindName;\n      var previousState;\n\n      if (inConnections) {\n        for (channelName in inConnections) {\n          bindName = inConnections[channelName].bind;\n          previousState = inConnections[channelName].previousState || false;\n          this.addSubscription(channelName, node, bindName, previousState);\n        }\n      }\n    }\n  }, {\n    key: \"addSubscription\",\n    value: function addSubscription(channelName, node, bind) {\n      var previousState = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var callback = this._wrapCallbackWithNode(node, bind);\n\n      var channel = this.manager.get(channelName); // @TODO ojo!!! CC this.isBridgeChannel(channelName) ? this.manager.getUnsafe(channelName) : this.manager.get(channelName);\n\n      if (channel) {\n        var subscriptor = this.getSubscriptor(node);\n        subscriptor.subscribe(channel, callback, previousState);\n      }\n    }\n  }, {\n    key: \"_updateInConnections\",\n    value: function _updateInConnections(node, inConnections) {\n      var channelName;\n      var bindName;\n      var previousState;\n\n      if (inConnections) {\n        for (channelName in inConnections) {\n          bindName = inConnections[channelName].bind;\n          previousState = inConnections[channelName].previousState || false;\n          this.updateSubscription(channelName, node, bindName, previousState);\n        }\n      }\n    }\n  }, {\n    key: \"updateSubscription\",\n    value: function updateSubscription(channelName, node, bind) {\n      var previousState = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      var subscriptor = this.getSubscriptor(node);\n\n      if (this.isActiveBridgeChannel(channelName) || !this.isActiveBridgeChannel(channelName) && !this.hasSubscriptions(subscriptor, channelName)) {\n        var channel = this.manager.get(channelName);\n\n        var callback = this._wrapCallbackWithNode(node, bind);\n\n        subscriptor.subscribe(channel, callback, previousState);\n      }\n    }\n  }, {\n    key: \"_wrapCallbackWithNode\",\n    value: function _wrapCallbackWithNode(node, bindName) {\n      var cb = this.wrapCallback(node, bindName);\n      cb.node = node;\n      return cb;\n    }\n  }, {\n    key: \"_hasPublisher\",\n    value: function _hasPublisher(subscriptor, node, channelName, bindName) {\n      var hasPublisher = false;\n\n      if (subscriptor.publications._subscriptions) {\n        subscriptor.publications._subscriptions.forEach(function (publication) {\n          if (publication.node === node && publication.channelName === channelName && publication.eventName === bindName) {\n            hasPublisher = true;\n          }\n        });\n      }\n\n      return hasPublisher;\n    }\n  }, {\n    key: \"_registerOutConnections\",\n    value: function _registerOutConnections(node, outConnections) {\n      var channelName;\n      var bindName;\n\n      if (outConnections) {\n        for (channelName in outConnections) {\n          bindName = outConnections[channelName].bind;\n          this.addPublication(channelName, node, bindName, outConnections[channelName]);\n        }\n      }\n    }\n  }, {\n    key: \"addPublication\",\n    value: function addPublication(channelName, node, bindName, outConnectionDefinition) {\n      if (this.isBridgeChannel(channelName)) {\n        console.warn(\"Forbidden operation. You are trying to write to a private channel (\".concat(channelName, \").\"));\n      } else {\n        var subscriptor = this.getSubscriptor(node);\n        var channel = this.manager.get(channelName);\n\n        var hasPublisher = this._hasPublisher(subscriptor, node, channelName, bindName);\n\n        if (!hasPublisher) {\n          subscriptor.publish(this.wrapEvent(node, bindName, channel, outConnectionDefinition));\n        }\n      }\n    }\n  }, {\n    key: \"publish\",\n    value: function publish(channelName, value) {\n      if (this.isBridgeChannel(channelName)) {\n        console.warn(\"Forbidden operation. You are trying to write to a private channel (\".concat(channelName, \").\"));\n      } else {\n        var channel = this.manager.get(channelName);\n        var customEventName = \"\".concat(channelName, \"-publish\");\n        channel.next(new CustomEvent(customEventName, {\n          detail: value\n        }));\n      }\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(channels, node) {\n      if (!channels || !node) {\n        return;\n      }\n\n      var normalizedChannels = Array.isArray(channels) ? channels : [channels];\n      var subscriptor = this.subscriptors.get(node);\n      var subscriptions = subscriptor.subscriptions;\n\n      var byChannelName = function byChannelName(subscription) {\n        return normalizedChannels.includes(subscription.channel.name);\n      };\n\n      var targetSubscriptions = subscriptions.filter(byChannelName);\n      targetSubscriptions.forEach(function (subscription) {\n        // @TODO rename\n        // DO NOT LOOK AT ME!!!\n        subscription.subscription.unsubscribe();\n        var index = subscriptor.subscriptions.findIndex(function (e) {\n          return e === subscription;\n        });\n        subscriptor.subscriptions.splice(index, 1);\n      });\n    }\n    /**\n     * Unregister a node from pubsub\n     *\n     * @param  {HTMLElement} node\n     */\n\n  }, {\n    key: \"unregister\",\n    value: function unregister(node, cleanPrivateChannels) {\n      if (!node) {\n        return;\n      }\n\n      var subscriptor = this.subscriptors.get(node);\n\n      if (subscriptor) {\n        subscriptor.unsubscribe(cleanPrivateChannels);\n        this.subscriptors[\"delete\"](node);\n      }\n    }\n  }, {\n    key: \"unregisterAllSubscriptors\",\n    value: function unregisterAllSubscriptors(cleanPrivateChannels) {\n      this.subscriptors.forEach(function (v) {\n        v.subscriptions.forEach(function (s) {\n          return s.subscription.unsubscribe(cleanPrivateChannels);\n        });\n      });\n    } // @TODO unificar con unregister\n\n  }, {\n    key: \"sleep\",\n    value: function sleep(node) {\n      if (!node) {\n        return;\n      }\n\n      var subscriptor = this.subscriptors.get(node);\n\n      if (subscriptor) {//subscriptor.unsubscribe();\n      }\n    }\n    /**\n     * Wrap a callback.\n     *\n     * @param  {HTMLElement/Object} node\n     * @param  {String} bindName Method or property name\n     *\n     * @return {Function}\n     */\n\n  }, {\n    key: \"wrapCallback\",\n    value: function wrapCallback(node, bindName) {\n      var wrappedCb = function wrappedCb(event) {\n        if (typeof bindName === 'function') {\n          bindName(event.detail);\n        } else {\n          if (typeof node[bindName] === 'function') {\n            node[bindName](event.detail);\n          } else {\n            node[bindName] = event.detail;\n          }\n        }\n      };\n\n      return wrappedCb;\n    }\n    /**\n     * Returns true if the event has reached the node that is listening the event\n     *\n     * @param {Event} event\n     */\n\n  }, {\n    key: \"_isEventAtTarget\",\n    value: function _isEventAtTarget(event) {\n      var AT_TARGET = Event.AT_TARGET || Event.prototype.AT_TARGET;\n      return event.eventPhase === AT_TARGET;\n    }\n    /**\n     * Wrap an event.\n     *\n     * @param  {HTMLElement} node\n     * @param  {String} eventName\n     * @param  {Channel} channel\n     *\n     * @return {Function}\n     */\n\n  }, {\n    key: \"wrapEvent\",\n    value: function wrapEvent(node, eventName, channel, connection) {\n      var AFTER_PUBLISH = component_connector_externalEventsCodes.AFTER_PUBLISH,\n          NAV_REQUEST = component_connector_externalEventsCodes.NAV_REQUEST,\n          ROUTER_BACKSTEP = component_connector_externalEventsCodes.ROUTER_BACKSTEP,\n          TRACK_EVENT = component_connector_externalEventsCodes.TRACK_EVENT,\n          LOG_EVENT = component_connector_externalEventsCodes.LOG_EVENT;\n      var source = fromEvent(node, eventName); // this checking is for components with FeatureFlag configuration\n\n      if (lastValue.has(node)) {\n        source = source.pipe(filter(function () {\n          return lastValue.get(node);\n        }));\n      }\n\n      var wrappedListener = source.subscribe(function (event) {\n        if (!this._isEventAtTarget(event)) {\n          // If the event bubbles up from a child element:\n          return;\n        }\n\n        channel.next(event);\n        manager_events.emit(AFTER_PUBLISH, event);\n\n        if (connection && connection.link) {\n          var linkObject = component_connector_extends({}, connection.link);\n\n          if (connection.link.page) {\n            if (connection.link.page.hasOwnProperty('bind')) {\n              linkObject.page = event.detail[connection.link.page.bind];\n            }\n          }\n\n          manager_events.emit(NAV_REQUEST, {\n            event: event,\n            detail: linkObject\n          });\n        }\n\n        if (connection && connection.backStep) {\n          manager_events.emit(ROUTER_BACKSTEP, {\n            event: event,\n            detail: {}\n          });\n        }\n\n        if (connection && connection.analytics) {\n          manager_events.emit(TRACK_EVENT, {\n            event: event,\n            detail: connection.analytics\n          });\n        }\n\n        if (connection && connection.log) {\n          manager_events.emit(LOG_EVENT, {\n            event: event,\n            detail: connection.log\n          });\n        }\n\n        if (this.wrapEventHandler) {\n          this.wrapEventHandler(event, connection, channel);\n        }\n      }.bind(this));\n      wrappedListener.node = node;\n      wrappedListener.eventName = eventName;\n      wrappedListener.channelName = channel.name;\n      return wrappedListener;\n    }\n    /**\n     * receive a channel name and change old private values.\n     *\n     * @param  {string} name\n     *\n     */\n\n  }, {\n    key: \"createEvent\",\n    value: function createEvent(name, value) {\n      var evt = new Event(name);\n      evt.detail = {\n        value: value\n      };\n      return evt;\n    }\n    /**\n     * returns true if there's a private channel with the given name\n     *\n     * @param {String} name\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"isActiveBridgeChannel\",\n    value: function isActiveBridgeChannel(name) {\n      return this.isBridgeChannel(name) && this.manager.getUnsafe(name);\n    }\n    /**\n     * returns true if the given name matches a private channel's name\n     *\n     * @param {String} name\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"isBridgeChannel\",\n    value: function isBridgeChannel(name) {\n      return this.bridgeChannelsPrefix.test(name);\n    }\n    /**\n     * returns true if the subscriptor has been subscribed to the given channel.\n     *\n     * @param {Subscriptor} subscriptor\n     * @param {String} channelName\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"hasSubscriptions\",\n    value: function hasSubscriptions(subscriptor, channelName) {\n      return subscriptor.subscriptions.filter(function (d) {\n        return d.channel.name === channelName;\n      }).length > 0;\n    }\n  }]);\n\n  return ComponentConnector;\n}();\n/**\n * ComponentConnector definition\n */\n\n\n/* harmony default export */ var component_connector = (component_connector_ComponentConnector);\n// CONCATENATED MODULE: ./src/core/route.js\nfunction route_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction route_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction route_createClass(Constructor, protoProps, staticProps) { if (protoProps) route_defineProperties(Constructor.prototype, protoProps); if (staticProps) route_defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Route = /*#__PURE__*/function () {\n  // needed to discriminate between 404 and rest of pages with same pattern\n\n  /**\n   * @private\n   * @param {String} routeName\n   * * @param {String} pattern\n   * @return {Object}\n   */\n  function Route(name, pattern) {\n    route_classCallCheck(this, Route);\n\n    this.name = '';\n    this.pattern = '';\n    this.regexp = null;\n    this.redirectPage = null;\n    this.isAccessible = true;\n    this.name = name;\n    this.pattern = pattern;\n    var regexp = pattern.replace(Route.PARAM, '([^/]+)').replace(Route.TRAILING_SLASHES, '/*');\n    this.regexp = new RegExp('^' + regexp + '$');\n    var parts;\n    var keys = [];\n\n    while ((parts = Route.PARAM.exec(pattern)) !== null) {\n      keys.push(parts[1]);\n    }\n\n    this.keys = keys;\n  }\n\n  route_createClass(Route, [{\n    key: \"path\",\n    value: function path(params) {\n      params = params || {};\n      this.params = {};\n      var parts;\n      var path = this.pattern;\n\n      while ((parts = Route.PARAM.exec(this.pattern)) !== null) {\n        path = path.replace(parts[0], params[parts[1]]);\n        this.params[parts[1]] = params[parts[1]];\n      }\n\n      var queryParams = [];\n\n      for (var param in params) {\n        if (!this.params.hasOwnProperty(param)) {\n          queryParams.push(param + '=' + encodeURIComponent(params[param]));\n        }\n      }\n\n      if (queryParams.length) {\n        path += '?' + queryParams.join('&');\n      }\n\n      return path;\n    }\n  }, {\n    key: \"matchPath\",\n    value: function matchPath(path) {\n      return path.match(this.regexp);\n    }\n  }, {\n    key: \"parsePath\",\n    value: function parsePath(path) {\n      var match = this.matchPath(path);\n      this.params = {};\n\n      if (match) {\n        var i = 1;\n        var parts;\n\n        while ((parts = Route.PARAM.exec(this.pattern)) !== null) {\n          this.params[parts[1]] = this._parseParam(match[i]);\n          i++;\n        }\n      }\n    }\n  }, {\n    key: \"parseQuery\",\n    value: function parseQuery(query) {\n      this.query = query;\n\n      for (var queryParam in this.query) {\n        if (this.query.hasOwnProperty(queryParam)) {\n          this.params[queryParam] = this.query[queryParam];\n        }\n      }\n    }\n    /**\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"is404\",\n    value: function is404() {\n      return this.name === Route._404_PAGE_NAME;\n    }\n    /**\n     * @private\n     * @param {String} value\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"_isNumber\",\n    value: function _isNumber(value) {\n      return parseInt(value) + '' === value || parseFloat(value) + '' === value;\n    }\n    /**\n     * @private\n     * @param {String} param\n     * @return {String|Number}\n     */\n\n  }, {\n    key: \"_parseParam\",\n    value: function _parseParam(param) {\n      if (this._isNumber(param)) {\n        param = +param;\n      }\n\n      return param;\n    }\n  }, {\n    key: \"handler\",\n    value: function handler() {// Overwrite to make something with the current route\n    }\n  }]);\n\n  return Route;\n}();\n\nRoute.PARAM = /(?::([^/]+))/g;\nRoute.TRAILING_SLASHES = /\\/*$/;\nRoute._404_PAGE_NAME = '404';\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/InnerSubscriber.js\n/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\n\n\nvar InnerSubscriber_InnerSubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber_Subscriber));\n\n//# sourceMappingURL=InnerSubscriber.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js\n/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */\n\nvar subscribeToPromise = function (promise) {\n    return function (subscriber) {\n        promise.then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, hostReportError);\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToPromise.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/symbol/iterator.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nvar iterator_iterator = /*@__PURE__*/ getSymbolIterator();\nvar $$iterator = iterator_iterator;\n//# sourceMappingURL=iterator.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js\n/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\n\nvar subscribeToIterable = function (iterable) {\n    return function (subscriber) {\n        var iterator = iterable[iterator_iterator]();\n        do {\n            var item = iterator.next();\n            if (item.done) {\n                subscriber.complete();\n                break;\n            }\n            subscriber.next(item.value);\n            if (subscriber.closed) {\n                break;\n            }\n        } while (true);\n        if (typeof iterator.return === 'function') {\n            subscriber.add(function () {\n                if (iterator.return) {\n                    iterator.return();\n                }\n            });\n        }\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToIterable.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js\n/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\n\nvar subscribeToObservable = function (obj) {\n    return function (subscriber) {\n        var obs = obj[observable_observable]();\n        if (typeof obs.subscribe !== 'function') {\n            throw new TypeError('Provided object does not correctly implement Symbol.observable');\n        }\n        else {\n            return obs.subscribe(subscriber);\n        }\n    };\n};\n//# sourceMappingURL=subscribeToObservable.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/isArrayLike.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/isPromise.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction isPromise(value) {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n//# sourceMappingURL=isPromise.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/subscribeTo.js\n/** PURE_IMPORTS_START _subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */\n\n\n\n\n\n\n\n\n\nvar subscribeTo = function (result) {\n    if (!!result && typeof result[observable_observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (!!result && typeof result[iterator_iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/subscribeToResult.js\n/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo,_Observable PURE_IMPORTS_END */\n\n\n\nfunction subscribeToResult(outerSubscriber, result, outerValue, outerIndex, innerSubscriber) {\n    if (innerSubscriber === void 0) {\n        innerSubscriber = new InnerSubscriber_InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    }\n    if (innerSubscriber.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable_Observable) {\n        return result.subscribe(innerSubscriber);\n    }\n    return subscribeTo(result)(innerSubscriber);\n}\n//# sourceMappingURL=subscribeToResult.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/OuterSubscriber.js\n/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\n\n\nvar OuterSubscriber_OuterSubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber_Subscriber));\n\n//# sourceMappingURL=OuterSubscriber.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js\n/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_observable PURE_IMPORTS_END */\n\n\n\nfunction scheduleObservable(input, scheduler) {\n    return new Observable_Observable(function (subscriber) {\n        var sub = new Subscription_Subscription();\n        sub.add(scheduler.schedule(function () {\n            var observable = input[observable_observable]();\n            sub.add(observable.subscribe({\n                next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleObservable.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js\n/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\n\n\nfunction schedulePromise(input, scheduler) {\n    return new Observable_Observable(function (subscriber) {\n        var sub = new Subscription_Subscription();\n        sub.add(scheduler.schedule(function () {\n            return input.then(function (value) {\n                sub.add(scheduler.schedule(function () {\n                    subscriber.next(value);\n                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                }));\n            }, function (err) {\n                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n            });\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=schedulePromise.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js\n/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_iterator PURE_IMPORTS_END */\n\n\n\nfunction scheduleIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable_Observable(function (subscriber) {\n        var sub = new Subscription_Subscription();\n        var iterator;\n        sub.add(function () {\n            if (iterator && typeof iterator.return === 'function') {\n                iterator.return();\n            }\n        });\n        sub.add(scheduler.schedule(function () {\n            iterator = input[iterator_iterator]();\n            sub.add(scheduler.schedule(function () {\n                if (subscriber.closed) {\n                    return;\n                }\n                var value;\n                var done;\n                try {\n                    var result = iterator.next();\n                    value = result.value;\n                    done = result.done;\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                    this.schedule();\n                }\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/isInteropObservable.js\n/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\n\nfunction isInteropObservable(input) {\n    return input && typeof input[observable_observable] === 'function';\n}\n//# sourceMappingURL=isInteropObservable.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/isIterable.js\n/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\n\nfunction isIterable(input) {\n    return input && typeof input[iterator_iterator] === 'function';\n}\n//# sourceMappingURL=isIterable.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/scheduled/scheduled.js\n/** PURE_IMPORTS_START _scheduleObservable,_schedulePromise,_scheduleArray,_scheduleIterable,_util_isInteropObservable,_util_isPromise,_util_isArrayLike,_util_isIterable PURE_IMPORTS_END */\n\n\n\n\n\n\n\n\nfunction scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        else if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return scheduleIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n//# sourceMappingURL=scheduled.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/observable/from.js\n/** PURE_IMPORTS_START _Observable,_util_subscribeTo,_scheduled_scheduled PURE_IMPORTS_END */\n\n\n\nfunction from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable_Observable) {\n            return input;\n        }\n        return new Observable_Observable(subscribeTo(input));\n    }\n    else {\n        return scheduled(input, scheduler);\n    }\n}\n//# sourceMappingURL=from.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/mergeMap.js\n/** PURE_IMPORTS_START tslib,_util_subscribeToResult,_OuterSubscriber,_InnerSubscriber,_map,_observable_from PURE_IMPORTS_END */\n\n\n\n\n\n\nfunction mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /*@__PURE__*/ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new mergeMap_MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\n\nvar mergeMap_MergeMapSubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result, value, index);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish, value, index) {\n        var innerSubscriber = new InnerSubscriber_InnerSubscriber(this, value, index);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        var innerSubscription = subscribeToResult(this, ish, undefined, undefined, innerSubscriber);\n        if (innerSubscription !== innerSubscriber) {\n            destination.add(innerSubscription);\n        }\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n        this.unsubscribe();\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(OuterSubscriber_OuterSubscriber));\n\n//# sourceMappingURL=mergeMap.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/identity.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nfunction identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/mergeAll.js\n/** PURE_IMPORTS_START _mergeMap,_util_identity PURE_IMPORTS_END */\n\n\nfunction mergeAll(concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/observable/merge.js\n/** PURE_IMPORTS_START _Observable,_util_isScheduler,_operators_mergeAll,_fromArray PURE_IMPORTS_END */\n\n\n\n\nfunction merge() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var concurrent = Number.POSITIVE_INFINITY;\n    var scheduler = null;\n    var last = observables[observables.length - 1];\n    if (isScheduler(last)) {\n        scheduler = observables.pop();\n        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n            concurrent = observables.pop();\n        }\n    }\n    else if (typeof last === 'number') {\n        concurrent = observables.pop();\n    }\n    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable_Observable) {\n        return observables[0];\n    }\n    return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\n//# sourceMappingURL=merge.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/concatAll.js\n/** PURE_IMPORTS_START _mergeAll PURE_IMPORTS_END */\n\nfunction concatAll() {\n    return mergeAll(1);\n}\n//# sourceMappingURL=concatAll.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/observable/concat.js\n/** PURE_IMPORTS_START _of,_operators_concatAll PURE_IMPORTS_END */\n\n\nfunction concat() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    return concatAll()(of.apply(void 0, observables));\n}\n//# sourceMappingURL=concat.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/startWith.js\n/** PURE_IMPORTS_START _observable_concat,_util_isScheduler PURE_IMPORTS_END */\n\n\nfunction startWith() {\n    var array = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        array[_i] = arguments[_i];\n    }\n    var scheduler = array[array.length - 1];\n    if (isScheduler(scheduler)) {\n        array.pop();\n        return function (source) { return concat(array, source, scheduler); };\n    }\n    else {\n        return function (source) { return concat(array, source); };\n    }\n}\n//# sourceMappingURL=startWith.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/distinctUntilChanged.js\n/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\n\n\nfunction distinctUntilChanged(compare, keySelector) {\n    return function (source) { return source.lift(new DistinctUntilChangedOperator(compare, keySelector)); };\n}\nvar DistinctUntilChangedOperator = /*@__PURE__*/ (function () {\n    function DistinctUntilChangedOperator(compare, keySelector) {\n        this.compare = compare;\n        this.keySelector = keySelector;\n    }\n    DistinctUntilChangedOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new distinctUntilChanged_DistinctUntilChangedSubscriber(subscriber, this.compare, this.keySelector));\n    };\n    return DistinctUntilChangedOperator;\n}());\nvar distinctUntilChanged_DistinctUntilChangedSubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(DistinctUntilChangedSubscriber, _super);\n    function DistinctUntilChangedSubscriber(destination, compare, keySelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.hasKey = false;\n        if (typeof compare === 'function') {\n            _this.compare = compare;\n        }\n        return _this;\n    }\n    DistinctUntilChangedSubscriber.prototype.compare = function (x, y) {\n        return x === y;\n    };\n    DistinctUntilChangedSubscriber.prototype._next = function (value) {\n        var key;\n        try {\n            var keySelector = this.keySelector;\n            key = keySelector ? keySelector(value) : value;\n        }\n        catch (err) {\n            return this.destination.error(err);\n        }\n        var result = false;\n        if (this.hasKey) {\n            try {\n                var compare = this.compare;\n                result = compare(this.key, key);\n            }\n            catch (err) {\n                return this.destination.error(err);\n            }\n        }\n        else {\n            this.hasKey = true;\n        }\n        if (!result) {\n            this.key = key;\n            this.destination.next(value);\n        }\n    };\n    return DistinctUntilChangedSubscriber;\n}(Subscriber_Subscriber));\n//# sourceMappingURL=distinctUntilChanged.js.map\n\n// CONCATENATED MODULE: ./src/core/navigation-stack.js\nfunction navigation_stack_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction navigation_stack_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction navigation_stack_createClass(Constructor, protoProps, staticProps) { if (protoProps) navigation_stack_defineProperties(Constructor.prototype, protoProps); if (staticProps) navigation_stack_defineProperties(Constructor, staticProps); return Constructor; }\n\nvar NavigationStack = /*#__PURE__*/function () {\n  function NavigationStack() {\n    navigation_stack_classCallCheck(this, NavigationStack);\n\n    this.navStack = [];\n    this.skipNav = {};\n  }\n\n  navigation_stack_createClass(NavigationStack, [{\n    key: \"addSkipNavigation\",\n    value: function addSkipNavigation(nav) {\n      if (nav.skipHistory === true || nav.skipHistory === false) {\n        this.skipNav[\"\".concat(nav.from, \":\").concat(nav.to)] = nav.skipHistory;\n      }\n    }\n  }, {\n    key: \"_reverseNavigation\",\n    value: function _reverseNavigation(nav) {\n      return {\n        from: nav.to,\n        to: nav.from\n      };\n    }\n  }, {\n    key: \"isSkipNavigation\",\n    value: function isSkipNavigation(nav) {\n      return this.skipNav[\"\".concat(nav.from, \":\").concat(nav.to)] === true;\n    }\n  }, {\n    key: \"lastNavigation\",\n    value: function lastNavigation() {\n      var navCount = this.navStack.length;\n      var from;\n      var to;\n\n      if (navCount === 1) {\n        to = this.navStack[0];\n      } else if (navCount > 1) {\n        to = this.navStack[navCount - 1];\n        from = this.navStack[navCount - 2];\n      }\n\n      return this.createNavigation(from, to);\n    }\n  }, {\n    key: \"createRoute\",\n    value: function createRoute(page) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return {\n        page: page,\n        params: params\n      };\n    }\n  }, {\n    key: \"createNavigation\",\n    value: function createNavigation(routeFrom, routeTo) {\n      return {\n        from: routeFrom ? routeFrom.page : undefined,\n        to: routeTo ? routeTo.page : undefined\n      };\n    }\n  }, {\n    key: \"push\",\n    value: function push(route) {\n      if (!this.top() || this.top().page !== route.page) {\n        this.navStack.push(route);\n      }\n    }\n  }, {\n    key: \"replace\",\n    value: function replace(route) {\n      if (!this.top() || this.top().page !== route.page) {\n        this.navStack[this.navStack.length - 1] = route;\n      }\n    }\n  }, {\n    key: \"pop\",\n    value: function pop() {\n      return this.navStack.pop();\n    }\n  }, {\n    key: \"top\",\n    value: function top() {\n      return this.navStack.length > 0 ? this.navStack[this.navStack.length - 1] : undefined;\n    }\n  }, {\n    key: \"isBackwardNavigation\",\n    value: function isBackwardNavigation(newNav) {\n      var lastNav = this.lastNavigation();\n      return lastNav && newNav.from === lastNav.to && newNav.to === lastNav.from;\n    }\n  }, {\n    key: \"update\",\n    value: function update(routeFrom, routeTo) {\n      var nav = this.createNavigation(routeFrom, routeTo);\n\n      if (this.isBackwardNavigation(nav)) {\n        while (this.isSkipNavigation(this._reverseNavigation(this.lastNavigation()))) {\n          this.pop();\n        }\n\n        this.pop();\n      } else {\n        this.push(routeTo);\n      }\n\n      return this.top();\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.navStack = [];\n    }\n  }, {\n    key: \"replaceRoute\",\n    value: function replaceRoute(route) {\n      if (this.navStack.length > 0) {\n        this.navStack[this.navStack.length - 1] = route;\n      } else {\n        this.push(route);\n      }\n    }\n    /**\n     * Clear the router stack until given page is found on router stack.\n     */\n\n  }, {\n    key: \"clearUntil\",\n    value: function clearUntil(targetPage) {\n      if (this.navStack.find(function (route) {\n        return route.page === targetPage;\n      })) {\n        var currentRoute = null;\n\n        do {\n          currentRoute = this.navStack.pop();\n        } while (currentRoute && currentRoute.page != targetPage);\n      }\n    }\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this.navStack.length;\n    }\n  }]);\n\n  return NavigationStack;\n}();\n\n\n// CONCATENATED MODULE: ./src/core/router.js\nfunction router_slicedToArray(arr, i) { return router_arrayWithHoles(arr) || router_iterableToArrayLimit(arr, i) || router_nonIterableRest(); }\n\nfunction router_nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction router_iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction router_arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction router_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { router_typeof = function _typeof(obj) { return typeof obj; }; } else { router_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return router_typeof(obj); }\n\nfunction router_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction router_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction router_createClass(Constructor, protoProps, staticProps) { if (protoProps) router_defineProperties(Constructor.prototype, protoProps); if (staticProps) router_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction router_possibleConstructorReturn(self, call) { if (call && (router_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return router_assertThisInitialized(self); }\n\nfunction router_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = router_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction router_getPrototypeOf(o) { router_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return router_getPrototypeOf(o); }\n\nfunction router_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) router_setPrototypeOf(subClass, superClass); }\n\nfunction router_setPrototypeOf(o, p) { router_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return router_setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar router_EMPTY = Subscription_Subscription.EMPTY;\nvar router_externalEventsCodes = constants.externalEventsCodes;\nvar instance = null;\nvar _useHistory = false;\nvar _routes = {};\n\nvar _disposables;\n\nvar _currentRoute;\n\nvar _404Route;\n/**\n * @class SerialSubscription\n * Mimics behavior of SerialDisposable in RxJS v4,\n * allows to add only single subscription. If new subscription's added,\n * existing subscription will be unsubscribed.\n *\n * By design of RxJS v5 it is no longer recommended to manage subscription\n * imperatively vis various kind of subscription, reason it only have single\n * kind of composite subscription. This implementation is for interop between\n * existing codebases.\n * @extends {Subscription}\n */\n\n\nvar router_SerialSubscription = /*#__PURE__*/function (_Subscription) {\n  router_inherits(SerialSubscription, _Subscription);\n\n  function SerialSubscription() {\n    var _this;\n\n    router_classCallCheck(this, SerialSubscription);\n\n    _this = router_possibleConstructorReturn(this, router_getPrototypeOf(SerialSubscription).call(this));\n    _this._currentSubscription = router_EMPTY;\n    return _this;\n  }\n  /**\n   * Adds a tear down to be called during the unsubscribe() of this\n   * Subscription.\n   *\n   * If there's existing subscription, it'll be unsubscribed and\n   * removed.\n   *\n   * @param {TeardownLogic} teardown The additional logic to execute on\n   * teardown.\n   * @return {Subscription} Returns the Subscription used or created to be\n   * added to the inner subscriptions list. This Subscription can be used with\n   * `remove()` to remove the passed teardown logic from the inner subscriptions\n   * list.\n   */\n\n\n  router_createClass(SerialSubscription, [{\n    key: \"add\",\n    value: function add(teardown) {\n      if (this.closed) return;\n      if (typeof teardown === 'function') teardown = new Subscription_Subscription(teardown);\n\n      if (this._currentSubscription) {\n        this.remove(this._currentSubscription);\n\n        this._currentSubscription.unsubscribe();\n\n        this._currentSubscription = null;\n      }\n\n      _get(router_getPrototypeOf(SerialSubscription.prototype), \"add\", this).call(this, this._currentSubscription = teardown);\n    }\n  }]);\n\n  return SerialSubscription;\n}(Subscription_Subscription);\n\nvar router_Router = /*#__PURE__*/function () {\n  function Router() {\n    var _this2 = this;\n\n    router_classCallCheck(this, Router);\n\n    var TEMPLATE_TRANSITION_END = router_externalEventsCodes.TEMPLATE_TRANSITION_END;\n\n    if (!instance) {\n      instance = this;\n    }\n\n    this.navigationStack = this._createNavigationStack();\n    manager_events.on(TEMPLATE_TRANSITION_END, function () {\n      _this2.isNavigationInProgress = false;\n    });\n    return instance;\n  }\n\n  router_createClass(Router, [{\n    key: \"_createNavigationStack\",\n    value: function _createNavigationStack() {\n      return new NavigationStack();\n    }\n    /**\n     * @param {Boolean} value\n     */\n\n  }, {\n    key: \"handler\",\n\n    /**\n     * @param {Object} route\n     */\n    // eslint-disable-next-line no-unused-vars\n    value: function handler(route) {// Overwrite to make something after all matched routes\n    }\n  }, {\n    key: \"addRoute\",\n    value: function addRoute(name, pattern) {\n      this.routes[name] = new Route(name, pattern);\n      return this.routes[name];\n    }\n  }, {\n    key: \"addRoutes\",\n    value: function addRoutes(routes) {\n      var __routes = {};\n\n      for (var routeName in routes) {\n        if (routes.hasOwnProperty(routeName)) {\n          __routes[routeName] = this.addRoute(routeName, routes[routeName]);\n        }\n      }\n\n      return __routes;\n    }\n  }, {\n    key: \"addSkipNavigations\",\n    value: function addSkipNavigations(skipNavs) {\n      for (var i = 0; i < skipNavs.length; i++) {\n        this.navigationStack.addSkipNavigation(skipNavs[i]);\n      }\n    }\n    /**\n     * @private\n     * @return {String}\n     */\n\n  }, {\n    key: \"_getHashPath\",\n    value: function _getHashPath() {\n      return location.hash.replace(Router.HASH_PREFIX, '/').replace(Router.EMPTY, '/');\n    }\n    /**\n     * @private\n     * @return {Observable}\n     */\n\n  }, {\n    key: \"_observeHashChange\",\n    value: function _observeHashChange() {\n      return fromEvent(window, 'hashchange').pipe(map(this._getHashPath), startWith(this._getHashPath()));\n    }\n    /**\n     * @private\n     * @return {String}\n     */\n\n  }, {\n    key: \"_getURLPath\",\n    value: function _getURLPath() {\n      return location.pathname.replace(Router.PATH_PREFIX, '/');\n    }\n    /**\n     * @private\n     * @return {Observable}\n     */\n\n  }, {\n    key: \"_observeStateChange\",\n    value: function _observeStateChange() {\n      return merge(fromEvent(window, 'popstate'), fromEvent(window, 'pushstate')).pipe(map(this._getURLPath), startWith(this._getURLPath()));\n    }\n    /**\n     * @private\n     * @param {String}\n     * @return {Array}\n     */\n\n  }, {\n    key: \"matchRoute\",\n    value: function matchRoute(fullPath) {\n      var route;\n\n      var _fullPath$split = fullPath.split('?'),\n          _fullPath$split2 = router_slicedToArray(_fullPath$split, 2),\n          path = _fullPath$split2[0],\n          query = _fullPath$split2[1];\n\n      query = this._parseQuery(query);\n\n      for (var routeName in this.routes) {\n        if (this.routes.hasOwnProperty(routeName)) {\n          route = this.routes[routeName];\n\n          if ((!route.is404() || route.isAccessible) && route.matchPath(path)) {\n            route.parsePath(path);\n            route.parseQuery(query);\n            return route;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_parseQuery\",\n    value: function _parseQuery(querystr) {\n      var params = {};\n\n      if (querystr) {\n        // Split into key/value pairs\n        var queries = querystr.split('&');\n\n        if (queries) {\n          // Convert the array of strings into an object\n          var key,\n              value,\n              i,\n              len = queries.length;\n\n          for (i = 0; i < len; i++) {\n            var _queries$i$split = queries[i].split('=');\n\n            var _queries$i$split2 = router_slicedToArray(_queries$i$split, 2);\n\n            key = _queries$i$split2[0];\n            value = _queries$i$split2[1];\n            params[key] = decodeURIComponent(value);\n          }\n        }\n      }\n\n      return params;\n    }\n  }, {\n    key: \"_setup404\",\n    value: function _setup404() {\n      var route404 = this.routes[Route._404_PAGE_NAME]; // We check if 404 route have a pattern...\n\n      if (route404 && route404.pattern !== '') {\n        var routeWithSamePattern = this.getRouteWithPattern(route404.pattern); // We set redirect page based on, if it's a repeated URL pattern or a unique one.\n        // If it's unique, we set it accesible from the router.\n        // Otherwise, it's going to NOT be accesible from the router (multiple router with same pattern)\n\n        route404.redirectPage = routeWithSamePattern ? routeWithSamePattern.name : route404.name;\n        route404.isAccessible = !routeWithSamePattern;\n      }\n\n      return route404;\n    }\n  }, {\n    key: \"getRouteWithPattern\",\n    value: function getRouteWithPattern(patternToMath) {\n      for (var routeName in this.routes) {\n        if (this.routes.hasOwnProperty(routeName)) {\n          var route = this.routes[routeName]; // we only take care about routes with same patterns that aren't the same\n\n          if (!route.is404() && route.pattern === patternToMath) {\n            return route;\n          }\n        }\n      }\n\n      return null;\n    }\n    /**\n     *\n     * @return {Subscription}\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      var _this3 = this;\n\n      /* istanbul ignore else */\n      if (!_disposables) {\n        var active = new router_SerialSubscription();\n        _404Route = this._setup404();\n        var source = this.useHistory ? this._observeStateChange() : this._observeHashChange();\n        var subscription = source.pipe(distinctUntilChanged(), map(this.matchRoute.bind(this)));\n        subscription.forEach(function (route) {\n          if (!_this3.hashIsDirty) {\n            if (route) {\n              var currentRouteName = _this3.currentRoute ? _this3.currentRoute.name : undefined;\n              var currentRouteParams = _this3.currentRoute ? _this3.currentRoute.params : undefined;\n\n              var routeFrom = _this3.navigationStack.createRoute(currentRouteName, currentRouteParams);\n\n              var routeTo = _this3.navigationStack.createRoute(route.name, route.params);\n\n              var newRouteName = _this3.navigationStack.update(routeFrom, routeTo).page;\n\n              if (newRouteName !== routeTo.page) {\n                _this3.go(newRouteName, undefined, false);\n\n                return;\n              }\n\n              _currentRoute = route;\n              var disposable = new Subscription_Subscription(function () {\n                return _this3.currentRoute;\n              });\n              active.add(disposable);\n\n              _this3.currentRoute.handler();\n\n              _this3.handler(_this3.currentRoute);\n            } else if (_404Route && _404Route.redirectPage) {\n              _this3.goReplacing(_404Route.redirectPage);\n            }\n          } else {\n            _this3.hashIsDirty = false;\n          }\n        });\n        _disposables = new Subscription_Subscription(subscription, active);\n      }\n\n      return _disposables;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (_disposables) {\n        _disposables.unsubscribe();\n\n        _disposables = null;\n      }\n\n      this.isNavigationInProgress = false;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.stop();\n      this.routes = {};\n    }\n  }, {\n    key: \"getPath\",\n    value: function getPath(routeName, params) {\n      var route = this.routes[routeName];\n\n      if (route) {\n        return route.path(params);\n      } else {\n        console.error('Wrong route name: %s, valid route names: %s', routeName, Object.keys(this.routes).join(', '));\n      }\n    }\n  }, {\n    key: \"newNavigation\",\n    value: function newNavigation(name) {\n      return {\n        'from': this.currentRoute ? this.currentRoute.name : undefined,\n        'to': name\n      };\n    }\n  }, {\n    key: \"reverseNavigation\",\n    value: function reverseNavigation(nav) {\n      return {\n        from: nav.to,\n        to: nav.from\n      };\n    }\n  }, {\n    key: \"go\",\n    value: function go(name, params, replace, skipHistory) {\n      if (this.isNavigationInProgress) {\n        return;\n      }\n\n      if (skipHistory !== undefined) {\n        var newNav = this.newNavigation(name);\n        var reverseNav = this.reverseNavigation(newNav);\n        reverseNav.skipHistory = skipHistory;\n        this.navigationStack.addSkipNavigation(reverseNav);\n      }\n\n      var sanitizedName = name.replace(Router.LTRIM_SLASH, '');\n      var path = this.getPath(sanitizedName, params);\n\n      if (path !== this._getHashPath()) {\n        this.isNavigationInProgress = true;\n        this.updatePathInBrowser(path, replace);\n      }\n    }\n  }, {\n    key: \"back\",\n    value: function back() {\n      var navigation = {};\n\n      if (this.navigationStack.length > 1) {\n        var fromRoute = this.navigationStack.pop();\n        var auxFromRoute = fromRoute;\n        var backRoute = this.getLastRoute();\n\n        while (this.navigationStack.isSkipNavigation({\n          from: auxFromRoute.page,\n          to: backRoute.page\n        }) && this.navigationStack.length > 1) {\n          auxFromRoute = this.navigationStack.pop();\n\n          if (this.navigationStack.length > 0) {\n            backRoute = this.getLastRoute();\n          }\n        }\n\n        var page = backRoute.page;\n        var params = backRoute.params;\n        navigation.from = fromRoute;\n        navigation.to = backRoute;\n        this.go(page, params);\n      } else {\n        navigation.from = this.getLastRoute();\n        navigation.to = this.getLastRoute();\n      }\n\n      return navigation;\n    }\n  }, {\n    key: \"updatePathInBrowser\",\n    value: function updatePathInBrowser(path, replace) {\n      if (this.useHistory) {\n        if (replace) {\n          this.historyReplaceState(path);\n        } else {\n          this.historyPushState(path);\n        }\n      } else {\n        if (replace) {\n          this.locationReplace(path);\n        } else {\n          this.locationHash(path);\n        }\n      }\n    }\n  }, {\n    key: \"goReplacing\",\n    value: function goReplacing(name, params) {\n      this.go(name, params, true);\n    }\n  }, {\n    key: \"historyReplaceState\",\n    value: function historyReplaceState(path) {\n      history.replaceState(null, null, path);\n    }\n  }, {\n    key: \"historyPushState\",\n    value: function historyPushState(path) {\n      history.pushState(null, null, path);\n    }\n  }, {\n    key: \"locationReplace\",\n    value: function locationReplace(path) {\n      location.replace('#!' + path);\n    }\n  }, {\n    key: \"locationHash\",\n    value: function locationHash(path) {\n      location.hash = '#!' + path;\n    }\n    /**\n     * Get last route from stack.\n     *\n     * @returns {Object} Last route from stack.\n     */\n\n  }, {\n    key: \"getLastRoute\",\n    value: function getLastRoute() {\n      return this.navigationStack.top();\n    }\n    /**\n     * Initialize router stack.\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      this._clearStack();\n    }\n    /**\n     * Clear the router stack.\n     */\n\n  }, {\n    key: \"_clearStack\",\n    value: function _clearStack() {\n      this.navigationStack.clear();\n    }\n    /**\n     * Clear the router stack until given page is found on router stack.\n     */\n\n  }, {\n    key: \"clearStackUntil\",\n    value: function clearStackUntil(targetPage) {\n      this.navigationStack.clearUntil(targetPage);\n    }\n  }, {\n    key: \"useHistory\",\n    set: function set(value) {\n      /* istanbul ignore else */\n      if (Router.SUPPORTS_HISTORY_API) {\n        _useHistory = value;\n      }\n    },\n    get: function get() {\n      return _useHistory;\n    }\n  }, {\n    key: \"routes\",\n    set: function set(routes) {\n      _routes = routes;\n    },\n    get: function get() {\n      return _routes;\n    }\n  }, {\n    key: \"currentRoute\",\n    get: function get() {\n      return _currentRoute;\n    },\n    set: function set(route) {\n      _currentRoute = route;\n    }\n  }]);\n\n  return Router;\n}();\n\nrouter_Router.SUPPORTS_HISTORY_API = window.history && 'pushState' in window.history;\nrouter_Router.PARAM = /(?::([^/]+))/g;\nrouter_Router.LTRIM_SLASH = /^\\/(\\b)/;\nrouter_Router.EMPTY = /^$/;\nrouter_Router.HASH_PREFIX = /^#!?\\/*/;\nrouter_Router.PATH_PREFIX = /^\\/*/;\nrouter_Router.isNavigationInProgress = false;\nrouter_Router.hashIsDirty = false;\n\n// CONCATENATED MODULE: ./src/core/manager/import.js\nfunction import_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction import_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction import_createClass(Constructor, protoProps, staticProps) { if (protoProps) import_defineProperties(Constructor.prototype, protoProps); if (staticProps) import_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar import_externalEventsCodes = constants.externalEventsCodes;\n\nvar _after = function _after(times, func) {\n  return function () {\n    if (--times < 1) {\n      return func();\n    }\n  };\n};\n\nvar import_CellsManagerImport = /*#__PURE__*/function () {\n  function CellsManagerImport() {\n    import_classCallCheck(this, CellsManagerImport);\n  }\n\n  import_createClass(CellsManagerImport, [{\n    key: \"_importElement\",\n    value: function _importElement(endPoint, componentPath, callback) {\n      var node = document.createElement('link');\n      node.rel = 'import';\n      node.href = endPoint + componentPath;\n      node.onload = callback;\n      node.onerror = callback;\n      node.setAttribute('async', '');\n      document.head.appendChild(node);\n    }\n  }, {\n    key: \"_importElementPromise\",\n    value: function _importElementPromise(endPoint, componentPath) {\n      var _this = this;\n\n      return new Promise(function (resolve) {\n        _this._importElement(endPoint, componentPath, resolve);\n      });\n    }\n  }, {\n    key: \"loadBundleForTemplate\",\n    value: function loadBundleForTemplate(baseUri, pageName, callback) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        var finishComponentLoading = function finishComponentLoading() {\n          if (callback) {\n            callback.call(_this2);\n          }\n\n          resolve();\n        };\n\n        _this2._importElement(baseUri, pageName + '.html', finishComponentLoading);\n      });\n    }\n  }, {\n    key: \"loadComponent\",\n    value: function loadComponent(component, baseUri, callback) {\n      var _this3 = this;\n\n      var BEFORE_IMPORT = import_externalEventsCodes.BEFORE_IMPORT,\n          AFTER_IMPORT = import_externalEventsCodes.AFTER_IMPORT;\n      return new Promise(function (resolve) {\n        var finishComponentLoading = function finishComponentLoading() {\n          if (callback) {\n            callback.call(_this3);\n          }\n\n          resolve();\n        };\n\n        var list = component;\n\n        if (!Array.isArray(list)) {\n          list = [component];\n        }\n\n        if (list.length === 0) {\n          finishComponentLoading();\n          return;\n        }\n\n        manager_events.emit(BEFORE_IMPORT);\n\n        var iCb = _after(list.length, function () {\n          manager_events.emit(AFTER_IMPORT);\n          finishComponentLoading();\n        });\n\n        for (var index = 0; index < list.length; index++) {\n          var item = list[index];\n\n          _this3._importElement(baseUri, item.spec.path, iCb);\n        }\n      });\n    }\n  }, {\n    key: \"loadComponentByPriority\",\n    value: function loadComponentByPriority(component, baseUri, callback) {\n      var _this4 = this;\n\n      var BEFORE_IMPORT = import_externalEventsCodes.BEFORE_IMPORT,\n          AFTER_IMPORT = import_externalEventsCodes.AFTER_IMPORT;\n      var list = component;\n\n      if (!Array.isArray(list)) {\n        list = [component];\n      }\n\n      if (list.length === 0) {\n        if (callback) {\n          callback.call(this);\n        }\n\n        return;\n      }\n\n      var priorityLists = this._createPriorityLists(list);\n\n      manager_events.emit(BEFORE_IMPORT);\n\n      this._chainElementLoading(baseUri, priorityLists, 0).then(function () {\n        manager_events.emit(AFTER_IMPORT);\n\n        if (callback) {\n          callback.call(_this4);\n        }\n      });\n    }\n  }, {\n    key: \"_createSortedArratByPriorityAndUniqueElements\",\n    value: function _createSortedArratByPriorityAndUniqueElements(list) {\n      list.sort(function (a, b) {\n        var priorityA = a.priority || 1000;\n        var priorityB = b.priority || 1000;\n\n        if (priorityA === priorityB) {\n          return a.spec.path <= b.spec.path ? -1 : 1;\n        } else {\n          return priorityA - priorityB;\n        }\n      });\n      return list.filter(function (elem, pos, arr) {\n        return pos === 0 || elem.spec.path !== arr[pos - 1].spec.path;\n      });\n    }\n  }, {\n    key: \"_createPriorityLists\",\n    value: function _createPriorityLists(list) {\n      var sortedList = this._createSortedArratByPriorityAndUniqueElements(list);\n\n      var currentPriority = sortedList[0].priority;\n      var priorityLists = [[]];\n      var pivote = 0;\n\n      for (var index = 0; index < sortedList.length; index++) {\n        var item = sortedList[index];\n\n        if (item.priority === currentPriority) {\n          priorityLists[pivote].push(item);\n        } else {\n          currentPriority = item.priority;\n          priorityLists.push([]);\n          pivote = priorityLists.length - 1;\n          priorityLists[pivote].push(item);\n        }\n      }\n\n      return priorityLists;\n    }\n  }, {\n    key: \"_chainElementLoading\",\n    value: function _chainElementLoading(baseUri, elementPriorityLists, index) {\n      var _this5 = this;\n\n      var currentPromises = [];\n\n      if (elementPriorityLists.length === index) {\n        return Promise.resolve();\n      }\n\n      for (var j = 0; j < elementPriorityLists[index].length; j++) {\n        currentPromises.push(this._importElementPromise(baseUri, elementPriorityLists[index][j].spec.path));\n      }\n\n      var count = index + 1; // OJO!!! Si no creamos variable intermedia / scoped, y hacemos count++, siempre coger el valor inicial.\n\n      return Promise.all(currentPromises).then(function () {\n        return _this5._chainElementLoading(baseUri, elementPriorityLists, count);\n      });\n    }\n  }]);\n\n  return CellsManagerImport;\n}();\n\n/* harmony default export */ var manager_import = (import_CellsManagerImport);\n// CONCATENATED MODULE: ./src/core/component.js\nfunction component_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { component_typeof = function _typeof(obj) { return typeof obj; }; } else { component_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return component_typeof(obj); }\n\nfunction component_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction component_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction component_createClass(Constructor, protoProps, staticProps) { if (protoProps) component_defineProperties(Constructor.prototype, protoProps); if (staticProps) component_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction component_possibleConstructorReturn(self, call) { if (call && (component_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return component_assertThisInitialized(self); }\n\nfunction component_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction component_getPrototypeOf(o) { component_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return component_getPrototypeOf(o); }\n\nfunction component_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) component_setPrototypeOf(subClass, superClass); }\n\nfunction component_setPrototypeOf(o, p) { component_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return component_setPrototypeOf(o, p); }\n\n\n\nvar component_renderEngines = constants.renderEngines;\n\nvar CellsBridgeComponent = /*#__PURE__*/function (_CellsBridgeManagerDo) {\n  component_inherits(CellsBridgeComponent, _CellsBridgeManagerDo);\n\n  /**\n   * Componen type. It could be TYPE_UI, TYPE_DM or TYPE_CC.\n   *\n   * @type {String}\n   */\n  function CellsBridgeComponent(spec) {\n    var _this;\n\n    component_classCallCheck(this, CellsBridgeComponent);\n\n    _this = component_possibleConstructorReturn(this, component_getPrototypeOf(CellsBridgeComponent).call(this)); // @TODO: Por qu almacenar spec en una propiedad y algunas de sus propiedades en otra.\n\n    _this.type = '';\n    _this.spec = null;\n    _this.zone = null;\n    _this.node = null;\n    _this.fixed = null;\n    _this.priority = null;\n    _this.connections = null;\n    _this.spec = spec;\n    _this.type = spec.type;\n    _this.zone = spec.zone;\n    _this.fixed = spec.fixed;\n    _this.priority = spec.priority;\n    _this.node = _this.spec.node ? _this.spec.node : _this.createElement(_this.spec.tagName); // NOT WORKING CellsBridgeComponent\n\n    _this.connections = spec.connections;\n    return _this;\n  }\n\n  component_createClass(CellsBridgeComponent, [{\n    key: \"setProps\",\n    value: function setProps() {\n      var spec = this.spec;\n\n      if (spec.connections && spec.connections.ignoreAttr) {\n        for (var index = 0; index < spec.connections.ignoreAttr.length; index++) {\n          var key = spec.connections.ignoreAttr[index];\n          delete spec.properties[key];\n        }\n      }\n\n      this.setAttrs(this.node, spec.properties);\n    }\n  }, {\n    key: \"isUnresolved\",\n    value: function isUnresolved() {\n      return this.node.tagName.indexOf('-') > -1 && this.node.constructor === HTMLElement;\n    }\n  }, {\n    key: \"isLitElement\",\n    value: function isLitElement() {\n      return this.spec.render && this.spec.render === component_renderEngines.litElement;\n    }\n  }]);\n\n  return CellsBridgeComponent;\n}(dom);\n\n\n// CONCATENATED MODULE: ./src/core/template.js\nfunction template_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { template_typeof = function _typeof(obj) { return typeof obj; }; } else { template_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return template_typeof(obj); }\n\nfunction template_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction template_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction template_createClass(Constructor, protoProps, staticProps) { if (protoProps) template_defineProperties(Constructor.prototype, protoProps); if (staticProps) template_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction template_possibleConstructorReturn(self, call) { if (call && (template_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return template_assertThisInitialized(self); }\n\nfunction template_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction template_getPrototypeOf(o) { template_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return template_getPrototypeOf(o); }\n\nfunction template_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) template_setPrototypeOf(subClass, superClass); }\n\nfunction template_setPrototypeOf(o, p) { template_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return template_setPrototypeOf(o, p); }\n\n\n/**\n * Class for managing templates\n *\n * A template is a component used in Cells apps for managing the components distribution\n *\n * A template has defined zones like app__header or app__main\n * where you can place your components.\n * The property zoneId (in the json page definition file) indicates the zone in wHich the\n * the component is appended.\n *\n * The components added to the template are the template's children. There are two kind of children:\n * the fixed children and the normal children. The normal ones are appended\n * to the asigned zone, the fixed ones are just stored in the fixedChildren property\n * and appended to an especial zone that is fixed.\n *\n * As the class extends from Component it has properties like node which refers to\n * the node the template is attached.\n *\n * The 'state' atributte in the node is used to know the actual state of the template\n * it can be active, cached or inactive.\n */\n\nvar CellsBridgeTemplate = /*#__PURE__*/function (_CellsComponent) {\n  template_inherits(CellsBridgeTemplate, _CellsComponent);\n\n  function CellsBridgeTemplate() {\n    var _getPrototypeOf2;\n\n    var _temp, _this;\n\n    template_classCallCheck(this, CellsBridgeTemplate);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return template_possibleConstructorReturn(_this, (_temp = _this = template_possibleConstructorReturn(this, (_getPrototypeOf2 = template_getPrototypeOf(CellsBridgeTemplate)).call.apply(_getPrototypeOf2, [this].concat(args))), _this.children = [], _this.fixedChildren = [], _this.type = 'TEMPLATE', _temp));\n  }\n\n  template_createClass(CellsBridgeTemplate, [{\n    key: \"getZone\",\n\n    /**\n     * returns the zone node in the template identified by the id.\n     *\n     * @param {String} zoneId\n     *\n     * @return {HTMLElement}\n     */\n    value: function getZone(zoneId) {\n      var curTemplate = this.node;\n      var node;\n\n      if (!zoneId) {\n        node = curTemplate;\n      } else if (curTemplate.$ && curTemplate.$[zoneId]) {\n        node = curTemplate.$[zoneId];\n      } else {\n        node = curTemplate.querySelector('#' + zoneId);\n      }\n\n      return node || curTemplate;\n    }\n    /**\n     * sets the attribute cache in the template node to 'cached'\n     * for not loading the template again the next time the template is used\n     */\n\n  }, {\n    key: \"cache\",\n    value: function cache() {\n      this._setAttribute('state', 'cached');\n    }\n    /**\n     * sets the attribute cache in the template node to 'active'\n     * so you can know which of the templates in html is the actual one\n     */\n\n  }, {\n    key: \"activate\",\n    value: function activate() {\n      this._setAttribute('state', 'active');\n    }\n    /**\n     * sets the attribute cache in the template node to 'inactive'\n     * so you can know which of the templates in html are not the actual one\n     */\n\n  }, {\n    key: \"deactivate\",\n    value: function deactivate() {\n      this._setAttribute('state', 'inactive');\n    }\n  }, {\n    key: \"native\",\n    value: function native() {\n      this._setAttribute('state', 'native');\n    }\n  }, {\n    key: \"resetNextNavigation\",\n    value: function resetNextNavigation() {\n      this._getTemplate(this.node)._nextNavigation = undefined;\n    }\n    /**\n     * Set given value to corresponding attribute name of current template.\n     *\n     * @private\n     * @method _setAttribute\n     * @param {String} name  Attribute name.\n     * @param {String} value Attribute value.\n     */\n\n  }, {\n    key: \"_setAttribute\",\n    value: function _setAttribute(name, value) {\n      var template = this._getTemplate(this.node);\n\n      template.setAttribute(name, value);\n    }\n    /**\n     * Returns current template based on node type.\n     * If it's a routable component (page), we retrieve the first child element that matchs with cells-template.\n     * Otherwise, we return directly the node (cells-template).\n     *\n     * @private\n     * @method _getTemplate\n     * @param  {HTMLElement} node Node for template retrieval.\n     * @return {HTMLElement}      Associate template from given node.\n     */\n\n  }, {\n    key: \"_getTemplate\",\n    value: function _getTemplate(node) {\n      var tagName = node.tagName;\n      var isPage = tagName.toLowerCase().endsWith('-page');\n      return isPage ? this._getCellsTemplateFromShadowRootChildNodes(node) : node;\n    }\n    /**\n     * Returns first element from shadowRoot child nodes that matchs 'cells-template'.\n     *\n     * @private\n     * @method _getCellsTemplateFromShadowRootChildNodes\n     * @param  {HTMLElement} node First level component that contains cells-template inside shadowRoot childNodes.\n     * @return {HTMLElement}      Cells template.\n     */\n\n  }, {\n    key: \"_getCellsTemplateFromShadowRootChildNodes\",\n    value: function _getCellsTemplateFromShadowRootChildNodes(node) {\n      return Array.from(node.shadowRoot.childNodes).find(function (el) {\n        return el && el.tagName && el.tagName.toLowerCase().indexOf('cells-template') !== -1;\n      });\n    }\n    /**\n     * recieves one component or a list of them, gets the new ones and append\n     * them as child in the selected zone of the template\n     *\n     * @param {Array}/{Object} components\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"append\",\n    value: function append(components) {\n      /* istanbul ignore else */\n      if (!components) {\n        return;\n      }\n      /* istanbul ignore else */\n\n\n      if (components.length === undefined) {\n        components = [components];\n      }\n\n      var newContentComponents = components.filter(function (component) {\n        return component.fixed !== true;\n      });\n      var newFixedChildren = components.filter(function (component) {\n        return component.fixed === true;\n      });\n      this.fixedChildren = this.fixedChildren.concat(newFixedChildren);\n      this.children = this.children.concat(components);\n      var zoneCache = [];\n\n      for (var index = 0; index < newContentComponents.length; index++) {\n        var component = newContentComponents[index]; // for backward compatibility with Polymer 1\n\n        component.node.setAttribute('data-select', component.zone); // for the use of slots required by Polymer 2\n\n        component.node.setAttribute('slot', component.zone);\n\n        if (template_typeof(zoneCache[component.zone]) !== 'object') {\n          zoneCache[component.zone] = this.getZone(component.zone);\n        }\n\n        zoneCache[component.zone].appendChild(component.node);\n      }\n    }\n  }, {\n    key: \"config\",\n    value: function config(cellsTemplateConfig) {\n      var name = cellsTemplateConfig.name,\n          _cellsTemplateConfig$ = cellsTemplateConfig.template,\n          templateId = _cellsTemplateConfig$.id,\n          templateName = _cellsTemplateConfig$.name;\n      this.name = name;\n      this.node.id = templateId;\n      this.node.name = templateName;\n      this.setProps();\n    }\n  }]);\n\n  return CellsBridgeTemplate;\n}(CellsBridgeComponent);\n\n\n// CONCATENATED MODULE: ./src/core/manager/template.js\nfunction manager_template_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction manager_template_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction manager_template_createClass(Constructor, protoProps, staticProps) { if (protoProps) manager_template_defineProperties(Constructor.prototype, protoProps); if (staticProps) manager_template_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar template_bindingCodes = constants.bindingCodes,\n    template_externalEventsCodes = constants.externalEventsCodes;\n\nvar template_CellsManagerTemplate = /*#__PURE__*/function () {\n  function CellsManagerTemplate(options) {\n    manager_template_classCallCheck(this, CellsManagerTemplate);\n\n    this.cache = {};\n    this.templates = {};\n    this.selected = '';\n    this.locations = [];\n    this.size = 0;\n    this.fixedTemplates = ['__cross'];\n    var config = options || {};\n    var persistentPages = config.persistentPages || [];\n    this.viewLimit = config.viewLimit && config.viewLimit >= 1 ? config.viewLimit : 3;\n    this.fixedTemplates = this.fixedTemplates.concat(persistentPages);\n    this.maxSize = this.viewLimit + this.fixedTemplates.length;\n  }\n\n  manager_template_createClass(CellsManagerTemplate, [{\n    key: \"create\",\n    value: function create(name, spec) {\n      var isPrerendering = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var template = this.get(name);\n\n      if (!template) {\n        template = this._createFromJSON(name, spec);\n\n        this._storeTemplate(name, template, isPrerendering);\n      }\n\n      return template;\n    }\n    /**\n     * Create Bridge Template based on Polymer component.\n     *\n     * @param  {String}       name    [description]\n     * @param  {HTMLElement}  element [description]\n     * @return {CellsBridgeTemplate}         [description]\n     */\n\n  }, {\n    key: \"createFromComponent\",\n    value: function createFromComponent(name, componentName) {\n      var template = this._createCellsTemplate(name, {\n        tagName: componentName\n      });\n\n      this._storeTemplate(name, template);\n\n      return template;\n    }\n    /**\n     * Register template from existing HTMLElement and stores it on memory.\n     *\n     * @param  {String}               name    Template name.\n     * @param  {HTMLElement}          element Template element (existing DOM element)\n     * @return {CellsBridgeTemplate}          Cells bridge template object.\n     */\n\n  }, {\n    key: \"register\",\n    value: function register(name, element) {\n      var template = this._createFromHTMLElement(name, element);\n\n      this._storeTemplate(name, template);\n\n      return template;\n    }\n    /**\n     * Store given template on memory.\n     *\n     * @param  {String}               name     Template name.\n     * @param  {CellsBridgeTemplate}  template Cells bridge template object.\n     * @paran  {Boolean}              isPrerendering indicate if the page is being pre-rendering\n     */\n\n  }, {\n    key: \"_storeTemplate\",\n    value: function _storeTemplate(name, template, isPrerendering) {\n      var node = template.node;\n\n      if (isPrerendering) {\n        var templateIsNotInFixedTemplates = this.fixedTemplates.indexOf(name) === -1;\n\n        if (templateIsNotInFixedTemplates) {\n          this.fixedTemplates.push(name);\n          this.maxSize++;\n          var cacheRanOutOfSpaceForNotFixedTemplates = this.maxSize === this.fixedTemplates.length;\n\n          if (cacheRanOutOfSpaceForNotFixedTemplates) {\n            this.maxSize += this.viewLimit;\n          }\n        }\n      }\n\n      if (this.size >= this.maxSize) {\n        var olderTemplateToDeallocate = this._getOlderRemovableTemplate();\n\n        if (olderTemplateToDeallocate) {\n          this.removeTemplate(olderTemplateToDeallocate);\n        } else {\n          console.warn('No space left in template cache for template ', name);\n        }\n      }\n\n      this.locations.push(name);\n      this.cache[name] = template;\n      this.templates[name] = node;\n      this.size++;\n    }\n  }, {\n    key: \"_getOlderRemovableTemplate\",\n    value: function _getOlderRemovableTemplate() {\n      var found = false;\n      var olderRemovableTemplate;\n\n      for (var i = 0; !found && i < this.locations.length; i++) {\n        var isNotPersistantPage = this.fixedTemplates.indexOf(this.locations[i]) == -1;\n\n        if (isNotPersistantPage) {\n          olderRemovableTemplate = this.locations[i];\n          found = true;\n        }\n      }\n\n      return olderRemovableTemplate;\n    }\n    /**\n     * Create Bridge Template based on existing HTML Element.\n     *\n     * @param  {String}       name    [description]\n     * @param  {HTMLElement}  element [description]\n     * @return {CellsBridgeTemplate}         [description]\n     */\n\n  }, {\n    key: \"_createFromHTMLElement\",\n    value: function _createFromHTMLElement(name, element) {\n      var template = this._createCellsTemplate(name, {\n        node: element\n      });\n\n      return template;\n    }\n  }, {\n    key: \"_createFromJSON\",\n    value: function _createFromJSON(name, spec) {\n      var template = this._createCellsTemplate(name, spec);\n\n      return template;\n    } // OJO!!!!\n    // Debido a a la jerarqua de clases, esto debera ser implementado por cada manager\n\n  }, {\n    key: \"_createCellsTemplate\",\n    value: function _createCellsTemplate(name, spec) {\n      return new CellsBridgeTemplate(name, spec);\n    }\n  }, {\n    key: \"get\",\n    value: function get(name) {\n      return this.cache[name];\n    }\n  }, {\n    key: \"getNode\",\n    value: function getNode(name) {\n      return this.templates[name];\n    }\n  }, {\n    key: \"parseTemplateName\",\n    value: function parseTemplateName(name) {\n      return name;\n    }\n  }, {\n    key: \"parseTemplateId\",\n    value: function parseTemplateId(name) {\n      return 'cells-template-' + name.replace(/\\./g, '-');\n    }\n  }, {\n    key: \"select\",\n    value: function select(name) {\n      var bridgeChannelManager = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n      var binding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'always';\n      var TEMPLATE_TRANSITION_END = template_externalEventsCodes.TEMPLATE_TRANSITION_END;\n      var CURRENTVIEW = template_bindingCodes.CURRENTVIEW,\n          UI = template_bindingCodes.UI;\n      var template = this.get(name);\n      var cache = this.cache;\n      var oldPageName;\n\n      for (var tplName in cache) {\n        if (cache.hasOwnProperty(tplName)) {\n          if (tplName === this.selected) {\n            oldPageName = tplName;\n            cache[tplName].deactivate();\n          } else if (name !== tplName) {\n            cache[tplName].cache();\n          }\n        }\n      }\n\n      this.selected = name;\n      template.activate();\n\n      if (bridgeChannelManager && binding !== CURRENTVIEW && binding !== UI) {\n        bridgeChannelManager.updateAppContext(oldPageName, name);\n        bridgeChannelManager.initPrivateChannel(oldPageName, name);\n      }\n\n      manager_events.emit(TEMPLATE_TRANSITION_END, template);\n    }\n    /**\n     *\n     * remove one template by name.\n     * it remove the template from html and from the templates and cache nodes\n     *\n     * @param String templateName the name of the  template to remove\n     */\n\n  }, {\n    key: \"removeTemplate\",\n    value: function removeTemplate(templateName) {\n      if (this.templates[templateName]) {\n        var node = document.querySelector('#' + this.templates[templateName].id);\n        var pos = this.locations.indexOf(templateName);\n        this.locations.splice(pos, 1);\n        node.parentNode.removeChild(node);\n        delete this.templates[templateName];\n        delete this.cache[templateName];\n        this.size--;\n      }\n    }\n    /**\n     *\n     * remove all templates except initial one and cross component one.\n     *\n     * @param String initialTemplate the name of the initial template\n     * @param String crossContainerId the name of the cross component template\n     */\n\n  }, {\n    key: \"removeTemplates\",\n    value: function removeTemplates(initialTemplate, crossContainerId) {\n      for (var templateName in this.templates) {\n        if (this.templates.hasOwnProperty(templateName)) {\n          if (templateName !== initialTemplate && templateName !== crossContainerId) {\n            this.removeTemplate(templateName);\n          }\n        }\n      }\n    }\n    /**\n     *\n     * remove all children of a template,\n     * it is used, for example, for clear cross component template.\n     *\n     * @param String templateName the name of the  template\n     */\n\n  }, {\n    key: \"removeTemplateChildrens\",\n    value: function removeTemplateChildrens(templateName) {\n      var template = this.templates[templateName];\n\n      if (template && template.children) {\n        for (var i = template.children.length - 1; i >= 0; i--) {\n          template.removeChild(template.children[i]);\n        }\n      }\n    }\n  }]);\n\n  return CellsManagerTemplate;\n}();\n\n/* harmony default export */ var manager_template = (template_CellsManagerTemplate);\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/EmptyError.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar EmptyErrorImpl = /*@__PURE__*/ (function () {\n    function EmptyErrorImpl() {\n        Error.call(this);\n        this.message = 'no elements in sequence';\n        this.name = 'EmptyError';\n        return this;\n    }\n    EmptyErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return EmptyErrorImpl;\n})();\nvar EmptyError = EmptyErrorImpl;\n//# sourceMappingURL=EmptyError.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ArgumentOutOfRangeErrorImpl = /*@__PURE__*/ (function () {\n    function ArgumentOutOfRangeErrorImpl() {\n        Error.call(this);\n        this.message = 'argument out of range';\n        this.name = 'ArgumentOutOfRangeError';\n        return this;\n    }\n    ArgumentOutOfRangeErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ArgumentOutOfRangeErrorImpl;\n})();\nvar ArgumentOutOfRangeError = ArgumentOutOfRangeErrorImpl;\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/take.js\n/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError,_observable_empty PURE_IMPORTS_END */\n\n\n\n\nfunction take(count) {\n    return function (source) {\n        if (count === 0) {\n            return empty_empty();\n        }\n        else {\n            return source.lift(new take_TakeOperator(count));\n        }\n    };\n}\nvar take_TakeOperator = /*@__PURE__*/ (function () {\n    function TakeOperator(total) {\n        this.total = total;\n        if (this.total < 0) {\n            throw new ArgumentOutOfRangeError;\n        }\n    }\n    TakeOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new take_TakeSubscriber(subscriber, this.total));\n    };\n    return TakeOperator;\n}());\nvar take_TakeSubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(TakeSubscriber, _super);\n    function TakeSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    TakeSubscriber.prototype._next = function (value) {\n        var total = this.total;\n        var count = ++this.count;\n        if (count <= total) {\n            this.destination.next(value);\n            if (count === total) {\n                this.destination.complete();\n                this.unsubscribe();\n            }\n        }\n    };\n    return TakeSubscriber;\n}(Subscriber_Subscriber));\n//# sourceMappingURL=take.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/defaultIfEmpty.js\n/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\n\n\nfunction defaultIfEmpty(defaultValue) {\n    if (defaultValue === void 0) {\n        defaultValue = null;\n    }\n    return function (source) { return source.lift(new DefaultIfEmptyOperator(defaultValue)); };\n}\nvar DefaultIfEmptyOperator = /*@__PURE__*/ (function () {\n    function DefaultIfEmptyOperator(defaultValue) {\n        this.defaultValue = defaultValue;\n    }\n    DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new defaultIfEmpty_DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n    };\n    return DefaultIfEmptyOperator;\n}());\nvar defaultIfEmpty_DefaultIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber_Subscriber));\n//# sourceMappingURL=defaultIfEmpty.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/throwIfEmpty.js\n/** PURE_IMPORTS_START tslib,_util_EmptyError,_Subscriber PURE_IMPORTS_END */\n\n\n\nfunction throwIfEmpty(errorFactory) {\n    if (errorFactory === void 0) {\n        errorFactory = defaultErrorFactory;\n    }\n    return function (source) {\n        return source.lift(new ThrowIfEmptyOperator(errorFactory));\n    };\n}\nvar ThrowIfEmptyOperator = /*@__PURE__*/ (function () {\n    function ThrowIfEmptyOperator(errorFactory) {\n        this.errorFactory = errorFactory;\n    }\n    ThrowIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new throwIfEmpty_ThrowIfEmptySubscriber(subscriber, this.errorFactory));\n    };\n    return ThrowIfEmptyOperator;\n}());\nvar throwIfEmpty_ThrowIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    __extends(ThrowIfEmptySubscriber, _super);\n    function ThrowIfEmptySubscriber(destination, errorFactory) {\n        var _this = _super.call(this, destination) || this;\n        _this.errorFactory = errorFactory;\n        _this.hasValue = false;\n        return _this;\n    }\n    ThrowIfEmptySubscriber.prototype._next = function (value) {\n        this.hasValue = true;\n        this.destination.next(value);\n    };\n    ThrowIfEmptySubscriber.prototype._complete = function () {\n        if (!this.hasValue) {\n            var err = void 0;\n            try {\n                err = this.errorFactory();\n            }\n            catch (e) {\n                err = e;\n            }\n            this.destination.error(err);\n        }\n        else {\n            return this.destination.complete();\n        }\n    };\n    return ThrowIfEmptySubscriber;\n}(Subscriber_Subscriber));\nfunction defaultErrorFactory() {\n    return new EmptyError();\n}\n//# sourceMappingURL=throwIfEmpty.js.map\n\n// CONCATENATED MODULE: ./node_modules/rxjs/_esm5/internal/operators/first.js\n/** PURE_IMPORTS_START _util_EmptyError,_filter,_take,_defaultIfEmpty,_throwIfEmpty,_util_identity PURE_IMPORTS_END */\n\n\n\n\n\n\nfunction first(predicate, defaultValue) {\n    var hasDefaultValue = arguments.length >= 2;\n    return function (source) { return source.pipe(predicate ? filter(function (v, i) { return predicate(v, i, source); }) : identity, take(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function () { return new EmptyError(); })); };\n}\n//# sourceMappingURL=first.js.map\n\n// CONCATENATED MODULE: ./src/core/manager/bridge-channels.js\nfunction bridge_channels_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction bridge_channels_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction bridge_channels_createClass(Constructor, protoProps, staticProps) { if (protoProps) bridge_channels_defineProperties(Constructor.prototype, protoProps); if (staticProps) bridge_channels_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar bridge_channels_BridgeChannelManager = /*#__PURE__*/function () {\n  function BridgeChannelManager(bridge) {\n    bridge_channels_classCallCheck(this, BridgeChannelManager);\n\n    this.componentConnector = bridge.ComponentConnector;\n    this.privateChannels = new Set();\n  }\n  /**\n   * Returns the name of the application context channel.\n   */\n\n\n  bridge_channels_createClass(BridgeChannelManager, [{\n    key: \"getAppContextChannelName\",\n    value: function getAppContextChannelName() {\n      return '__bridge_app';\n    }\n    /**\n     * Returns the name of the channels that has cancelations of back navigations.\n     */\n\n  }, {\n    key: \"getCancelledBackNavigationChannelName\",\n    value: function getCancelledBackNavigationChannelName() {\n      return '__bridge_cancelled_back_navigation';\n    }\n    /**\n     * Returns the prefix for private channels.\n     */\n\n  }, {\n    key: \"getPrivateChannelPrefix\",\n    value: function getPrivateChannelPrefix() {\n      return '__bridge_page_';\n    }\n    /**\n     * Returns the prefix for event channels.\n     */\n\n  }, {\n    key: \"getEventChannelPrefix\",\n    value: function getEventChannelPrefix() {\n      return '__bridge_evt_';\n    }\n    /**\n     * Returns the prefix for generic channels.\n     */\n\n  }, {\n    key: \"getBridgeChannelPrefix\",\n    value: function getBridgeChannelPrefix() {\n      return '__bridge_ch_';\n    }\n    /**\n     * Returns the prefix for generic channels.\n     */\n\n  }, {\n    key: \"getPostMessageChannelPrefix\",\n    value: function getPostMessageChannelPrefix() {\n      return '__bridge_post_message_';\n    }\n    /**\n     * Gets a channel that is for exclusive use of the bridge.\n     * If the channel doesn't exist, it creates one channel with.\n     *\n     * @param name of the channel to retrieve/create\n     *\n     * @return {Channel}\n     *\n     */\n\n  }, {\n    key: \"getBridgeChannel\",\n    value: function getBridgeChannel(channelName) {\n      return this.componentConnector.manager.get(this.getBridgeChannelPrefix() + channelName);\n    }\n  }, {\n    key: \"getIdleCallbackChannel\",\n    value: function getIdleCallbackChannel() {\n      var iddleChannel$ = Observable_Observable.create(function (observer) {\n        return observer.next(true);\n      });\n      return iddleChannel$.pipe(first());\n    }\n    /**\n     * Gets the application context channel.\n     *\n     * @return {Channel}\n     */\n\n  }, {\n    key: \"getAppContextChannel\",\n    value: function getAppContextChannel() {\n      return this.componentConnector.manager.get(this.getAppContextChannelName());\n    }\n    /**\n     * Gets the cancelled back navigations channel.\n     *\n     * @return {Channel}\n     */\n\n  }, {\n    key: \"getCancelledBackNavigationChannel\",\n    value: function getCancelledBackNavigationChannel() {\n      return this.componentConnector.manager.get(this.getCancelledBackNavigationChannelName());\n    }\n    /**\n     * Gets the private channel that corresponds to a page.\n     *\n     * @param  {String} pageName\n     *\n     * @return {Channel}\n     */\n\n  }, {\n    key: \"getPrivate\",\n    value: function getPrivate(pageName) {\n      var newName = this.getPrivateChannelPrefix() + pageName;\n      var channel = this.componentConnector.manager.get(newName);\n      this.privateChannels.add(newName);\n      return channel;\n    }\n  }, {\n    key: \"getPostMessageChannel\",\n    value: function getPostMessageChannel(eventName) {\n      var newName = this.getPostMessageChannelPrefix() + eventName;\n      return this.componentConnector.manager.get(newName);\n    }\n    /**\n     * Creates and initializes the application context channel.\n     *\n     */\n\n  }, {\n    key: \"initAppContextChannel\",\n    value: function initAppContextChannel() {\n      this.getAppContextChannel();\n    }\n    /**\n     * Creates and initializes the cancelled back navigation channel.\n     *\n     */\n\n  }, {\n    key: \"initCancelledBackNavigationChannel\",\n    value: function initCancelledBackNavigationChannel() {\n      this.getCancelledBackNavigationChannel();\n    }\n    /**\n     * Initializes the private chanel for the given page.\n     *\n     * @param {String} pageName\n     *\n     */\n\n  }, {\n    key: \"initPrivateChannel\",\n    value: function initPrivateChannel(oldPageName, newPageName) {\n      this.publishPrivatePageStatus(newPageName, true);\n\n      if (oldPageName) {\n        this.publishPrivatePageStatus(oldPageName, false);\n      }\n    }\n    /**\n     * Publish the status of a page in its private channel\n     *\n     * @param {String} pageName\n     * @param {Boolean} status is true if the page is active, and false if it is inactive\n     */\n\n  }, {\n    key: \"publishPrivatePageStatus\",\n    value: function publishPrivatePageStatus(pageName, status) {\n      var channel = this.getPrivate(pageName);\n      var evt = this.componentConnector.createEvent('page-load', status);\n      channel.next(evt);\n    }\n    /**\n     * Updates the application context.\n     * Puts in context the information of the current page and previous active page.\n     *\n     * @param {String} oldPage was the previous current page\n     * @param {String} newPage is the page that becomes the current page\n     *\n     */\n\n  }, {\n    key: \"updateAppContext\",\n    value: function updateAppContext(oldPage, newPage) {\n      var evt = this.componentConnector.createEvent('app-context', {\n        currentPage: newPage,\n        fromPage: oldPage\n      });\n      this.getAppContextChannel().next(evt);\n    }\n  }, {\n    key: \"publishCancelledBackNavigation\",\n    value: function publishCancelledBackNavigation(navigation) {\n      var evt = this.componentConnector.createEvent('back-nav-cancelled', navigation);\n      this.getCancelledBackNavigationChannel().next(evt);\n    }\n    /**\n     * returns true if the given name matches a private channel's name\n     *\n     * @param {String} name\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"isPrivateChannel\",\n    value: function isPrivateChannel(name) {\n      return name.indexOf(this.getPrivateChannelPrefix()) === 0;\n    }\n    /**\n     * returns true if there's a private channel with the given name\n     *\n     * @param {String} name\n     *\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"isActivePrivateChannel\",\n    value: function isActivePrivateChannel(name) {\n      return this.privateChannels.has(name);\n    }\n    /**\n     * resets all channels, including the private channels.\n     * It removes all observers and publications.\n     *\n     */\n\n  }, {\n    key: \"resetBridgeChannels\",\n    value: function resetBridgeChannels(mainNode, cleanPrivateChannels) {\n      var bridgeChannels = Object.keys(this.componentConnector.manager.channels);\n      bridgeChannels.forEach(function (chnlName) {\n        var chnl = this.componentConnector.manager.get(chnlName);\n        chnl.clean();\n        chnl.unsubscribeAll();\n      }.bind(this));\n      this.componentConnector.unregister(mainNode, cleanPrivateChannels);\n      this.componentConnector.unregisterAllSubscriptors(cleanPrivateChannels);\n      this.componentConnector.manager.cleanAllChannels();\n    }\n  }, {\n    key: \"initEventChannels\",\n    value: function initEventChannels(node, externalEvents) {\n      externalEvents.forEach(function (eventName) {\n        var prefix = this.getEventChannelPrefix();\n        var channelName = prefix + eventName;\n        var channel = this.componentConnector.manager.get(channelName);\n        var source = fromEvent(node, eventName);\n        source.subscribe(function (event) {\n          channel.next(event);\n        });\n      }.bind(this));\n    }\n  }, {\n    key: \"subscribeToEvent\",\n    value: function subscribeToEvent(node, eventName, callback) {\n      var prefix = this.getEventChannelPrefix();\n      var channelName = prefix + eventName;\n      var subscriptor = this.componentConnector.getSubscriptor(node);\n      var channel = this.componentConnector.manager.get(channelName);\n      callback.node = node;\n      subscriptor.subscribe(channel, callback);\n    }\n  }]);\n\n  return BridgeChannelManager;\n}();\n/**\n * BridgeChannelManager definition\n */\n\n\n/* harmony default export */ var bridge_channels = (bridge_channels_BridgeChannelManager);\n// CONCATENATED MODULE: ./src/core/manager/action-channels.js\nfunction action_channels_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction action_channels_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction action_channels_createClass(Constructor, protoProps, staticProps) { if (protoProps) action_channels_defineProperties(Constructor.prototype, protoProps); if (staticProps) action_channels_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar action_channels_externalEventsCodes = constants.externalEventsCodes;\n/**\n * Class to define core private channels behavior\n */\n\nvar action_channels_ActionChannelManager = /*#__PURE__*/function () {\n  function ActionChannelManager(bridge) {\n    action_channels_classCallCheck(this, ActionChannelManager);\n\n    this.bridge = bridge;\n    this.PageManager = bridge.PageManager;\n    this.ChannelManager = bridge.BridgeChannelManager;\n    this.TemplateManager = bridge.TemplateManager;\n  }\n\n  action_channels_createClass(ActionChannelManager, [{\n    key: \"subscribeAll\",\n    value: function subscribeAll() {\n      var _this = this;\n\n      this.ChannelManager.getBridgeChannel('config').subscribe(function (evt) {\n        return _this._configSubscriptor(evt);\n      });\n      this.ChannelManager.getBridgeChannel('locales').subscribe(function (evt) {\n        return _this._localesSubscriptor(evt);\n      });\n      this.ChannelManager.getBridgeChannel('logout').subscribe(function (evt) {\n        return _this._logoutSubscriptor(evt);\n      });\n    }\n  }, {\n    key: \"_isAllowedProperty\",\n    value: function _isAllowedProperty(prop) {\n      return typeof this.bridge[prop] !== 'function';\n    }\n  }, {\n    key: \"_configSubscriptor\",\n    value: function _configSubscriptor(evt) {\n      var _this2 = this;\n\n      var TEMPLATE_REGISTERED = action_channels_externalEventsCodes.TEMPLATE_REGISTERED;\n      var selected = this.TemplateManager.selected;\n\n      if (evt.detail) {\n        for (var prop in evt.detail) {\n          if (evt.detail.hasOwnProperty(prop)) {\n            if (this._isAllowedProperty(prop)) {\n              this.bridge[prop] = evt.detail[prop];\n            }\n          }\n        }\n\n        if (evt.detail.app || evt.detail.pagesPath) {\n          this.PageManager.clear();\n          this.TemplateManager.removeTemplates(selected, this.bridge.crossContainerId);\n          manager_events.once(TEMPLATE_REGISTERED, function () {\n            return _this2.TemplateManager.removeTemplate(selected);\n          });\n        }\n      }\n    }\n  }, {\n    key: \"_localesSubscriptor\",\n    value: function _localesSubscriptor(evt) {\n      if (window.I18nMsg && evt.detail && evt.detail.lang) {\n        window.I18nMsg.lang = evt.detail.lang;\n      }\n    }\n  }, {\n    key: \"_logoutSubscriptor\",\n    value: function _logoutSubscriptor() {\n      this.bridge.logout();\n      this.subscribeAll();\n    }\n  }]);\n\n  return ActionChannelManager;\n}();\n\n/* harmony default export */ var action_channels = (action_channels_ActionChannelManager);\n// CONCATENATED MODULE: ./src/core/composer/composer-engine-proxy.js\nfunction composer_engine_proxy_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction composer_engine_proxy_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction composer_engine_proxy_createClass(Constructor, protoProps, staticProps) { if (protoProps) composer_engine_proxy_defineProperties(Constructor.prototype, protoProps); if (staticProps) composer_engine_proxy_defineProperties(Constructor, staticProps); return Constructor; }\n\nvar ComposerEngineProxy = /*#__PURE__*/function () {\n  /**\n   * Creates an instance of ComposerPageBuilder.\n    * @param {ComponentConnector} componentConnector\n   */\n  function ComposerEngineProxy(componentConnector, composerEngine) {\n    composer_engine_proxy_classCallCheck(this, ComposerEngineProxy);\n\n    this.componentConnector = componentConnector;\n    this.composerEngine = composerEngine;\n    this.segments = [];\n    this.customGroups = [];\n    this.normalizedCustomGroups = [];\n  }\n  /**\n   * Initializes the composerEngine setting the initial parameters\n   * and subscribing to the channel that will receive the parameters.\n   *\n   * @param {Object} initialParams has this structure:\n   *  {\n   *    segments: [ segmentId1, segmentId2, ..., segmentIdN],\n   *    customGroups: [ {name: n1, value: v1}, ..., {name: n2, value: v2}]\n   *  }\n   *\n   */\n\n\n  composer_engine_proxy_createClass(ComposerEngineProxy, [{\n    key: \"init\",\n    value: function init(initialParams) {\n      var _this = this;\n\n      this.initialParams = initialParams || {};\n      this.addParams(this.initialParams);\n      this.componentConnector.get(this.getComposerEngineChannelName()).subscribe(function (evt) {\n        return _this.handleFeatureFlags(evt);\n      });\n    }\n    /**\n     * @returns {String} the name of the channel used to pass the parameters to the composerEngine\n     */\n\n  }, {\n    key: \"getComposerEngineChannelName\",\n    value: function getComposerEngineChannelName() {\n      return '__composer_engine';\n    }\n    /**\n     * It processes the new parameters that are placed in the composerEngine's channel\n     *\n     * @param {Event} evt\n     */\n\n  }, {\n    key: \"handleFeatureFlags\",\n    value: function handleFeatureFlags(evt) {\n      var params = evt.detail;\n      this.addParams(params);\n    }\n    /**\n     * Adds parameters to use with composerEngine\n     *\n     * @param {Object} params has this structure:\n     * {\n     *  segments: [ segmentId1, segmentId2, ..., segmentIdN],\n     *  customGroups: [ {name: n1, value: v1}, ..., {name: n2, value: v2}]\n     * }\n     */\n\n  }, {\n    key: \"addParams\",\n    value: function addParams(params) {\n      this.addSegments(params.segments);\n      this.addCustomGroups(params.customGroups);\n    }\n    /**\n     * Adds the segment ids passed in segmentList.\n     * It only adds the new segments.\n     *\n     * @param {Array<String>} segmentList\n     */\n\n  }, {\n    key: \"addSegments\",\n    value: function addSegments(segmentList) {\n      var _this2 = this;\n\n      if (segmentList) {\n        segmentList.forEach(function (segmentId) {\n          if (_this2.segments.indexOf(segmentId) === -1) {\n            _this2.segments.push(segmentId);\n          }\n        });\n      }\n    }\n    /**\n     * Adds the custom groups passed in customGroupList\n     * It only adds the new groups.\n     *\n     * @param {Array<{name, value}>} customGroupList\n     */\n\n  }, {\n    key: \"addCustomGroups\",\n    value: function addCustomGroups(customGroupList) {\n      var _this3 = this;\n\n      if (customGroupList) {\n        customGroupList.forEach(function (aCustomGroup) {\n          var existingGroup = _this3.customGroups.find(function (element) {\n            return element.name === aCustomGroup.name;\n          });\n\n          if (!existingGroup) {\n            _this3.customGroups.push(aCustomGroup);\n          } else {\n            if (!existingGroup.isConstant) {\n              existingGroup.value = aCustomGroup.value;\n            }\n          }\n        });\n      }\n\n      this.normalizedCustomGroups = this.normalizeCustomGroups(this.customGroups);\n    }\n    /**\n     * It converts the key/value pair of a customGroup into a String with the format\n     * used by Composer Engine\n     *\n     * @param {Array<{name, value}>} customGroups\n     * @returns\n     */\n\n  }, {\n    key: \"normalizeCustomGroups\",\n    value: function normalizeCustomGroups(customGroups) {\n      var _this4 = this;\n\n      return customGroups.map(function (group) {\n        return _this4.composerEngine.customGroup(group.name, JSON.stringify(group.value));\n      });\n    }\n    /**\n     * It gets the page using the feature flag parameters\n     *\n     * @param {String} pageName\n     */\n\n  }, {\n    key: \"getPage\",\n    value: function getPage(pageName) {\n      return this.composerEngine.getPageForAll(pageName, this.segments, this.normalizedCustomGroups);\n    }\n    /**\n     * Clears all parameters and sets the initial ones.\n     *\n     */\n\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.segments = [];\n      this.customGroups = [];\n      this.init(this.initialParams);\n    }\n  }]);\n\n  return ComposerEngineProxy;\n}();\n\n/* harmony default export */ var composer_engine_proxy = (ComposerEngineProxy);\n// EXTERNAL MODULE: ./node_modules/cells-semaas-adapter/dist/cells-semaas-adapter.js\nvar cells_semaas_adapter = __webpack_require__(4);\nvar cells_semaas_adapter_default = /*#__PURE__*/__webpack_require__.n(cells_semaas_adapter);\n\n// EXTERNAL MODULE: ./node_modules/es5-dot-prop/index.js\nvar es5_dot_prop = __webpack_require__(1);\nvar es5_dot_prop_default = /*#__PURE__*/__webpack_require__.n(es5_dot_prop);\n\n// CONCATENATED MODULE: ./src/core/monitoring.js\nfunction monitoring_extends() { monitoring_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return monitoring_extends.apply(this, arguments); }\n\nfunction monitoring_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction monitoring_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction monitoring_createClass(Constructor, protoProps, staticProps) { if (protoProps) monitoring_defineProperties(Constructor.prototype, protoProps); if (staticProps) monitoring_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar monitoring_get = es5_dot_prop_default.a.get,\n    set = es5_dot_prop_default.a.set;\nvar _Constants$monitoring = constants.monitoring.SEMAAS,\n    monitoring_mrId = _Constants$monitoring.mrId,\n    monitoring_nameSpace = _Constants$monitoring.nameSpace,\n    identifier = _Constants$monitoring.identifier,\n    consumerId = _Constants$monitoring.consumerId,\n    policy = _Constants$monitoring.policy,\n    monitoring_externalEventsCodes = constants.externalEventsCodes; // const flattenObject = (object, separator = '=', join = ', ') => Object.keys(object).map(key => `${key}${separator}${object[key]}`).join(join);\n\nvar monitoring_PAGE_READY = monitoring_externalEventsCodes.PAGE_READY,\n    monitoring_PARSE_ROUTE = monitoring_externalEventsCodes.PARSE_ROUTE,\n    monitoring_AFTER_PUBLISH = monitoring_externalEventsCodes.AFTER_PUBLISH,\n    monitoring_NAV_REQUEST = monitoring_externalEventsCodes.NAV_REQUEST,\n    monitoring_BEFORE_SET_ATTR_TO_NODE = monitoring_externalEventsCodes.BEFORE_SET_ATTR_TO_NODE,\n    monitoring_AFTER_SET_ATTR_TO_NODE = monitoring_externalEventsCodes.AFTER_SET_ATTR_TO_NODE,\n    monitoring_BEFORE_CREATE_NODE = monitoring_externalEventsCodes.BEFORE_CREATE_NODE,\n    monitoring_AFTER_CREATE_NODE = monitoring_externalEventsCodes.AFTER_CREATE_NODE,\n    monitoring_BEFORE_IMPORT = monitoring_externalEventsCodes.BEFORE_IMPORT,\n    monitoring_AFTER_IMPORT = monitoring_externalEventsCodes.AFTER_IMPORT,\n    monitoring_PAGE_REQUEST = monitoring_externalEventsCodes.PAGE_REQUEST,\n    monitoring_PAGE_RESPONSE = monitoring_externalEventsCodes.PAGE_RESPONSE,\n    monitoring_DATA_LOAD = monitoring_externalEventsCodes.DATA_LOAD,\n    monitoring_TEMPLATE_TRANSITION_END = monitoring_externalEventsCodes.TEMPLATE_TRANSITION_END,\n    monitoring_TRACK_EVENT = monitoring_externalEventsCodes.TRACK_EVENT,\n    monitoring_TEMPLATE_REGISTERED = monitoring_externalEventsCodes.TEMPLATE_REGISTERED,\n    monitoring_ROUTER_BACKSTEP = monitoring_externalEventsCodes.ROUTER_BACKSTEP,\n    monitoring_LOG_EVENT = monitoring_externalEventsCodes.LOG_EVENT;\n\nvar monitoring_Monitoring = /*#__PURE__*/function () {\n  function Monitoring(bridge) {\n    monitoring_classCallCheck(this, Monitoring);\n\n    this.bridge = null;\n    this.application = null;\n    var _bridge$semaas = bridge.semaas,\n        semaas = _bridge$semaas === void 0 ? {} : _bridge$semaas,\n        logs = bridge.logs;\n\n    if (logs) {\n      var monitorArchitecture = false; // Boolean(semaas && semaas.architecture);\n\n      var applicationSemaasConfiguration = this.getApplicationConfiguration(semaas);\n      this.application = this.initilizeSEMaaSAdapter(applicationSemaasConfiguration);\n\n      if (monitorArchitecture) {\n        var bridgeSemaasConfiguration = this.getBridgeConfiguration(semaas);\n        this.bridge = this.initilizeSEMaaSAdapter(bridgeSemaasConfiguration);\n      }\n    }\n  }\n\n  monitoring_createClass(Monitoring, [{\n    key: \"getBridgeConfiguration\",\n    value: function getBridgeConfiguration(semaasConfiguration) {\n      var tsec2JWTEndpoint = semaasConfiguration.tsec2JWTEndpoint,\n          region = semaasConfiguration.region,\n          dnsTld = semaasConfiguration.dnsTld,\n          version = semaasConfiguration.version;\n      return {\n        policy: policy,\n        // bridge constant\n        mrId: monitoring_mrId,\n        // bridge constant\n        nameSpace: monitoring_nameSpace,\n        // bridge constant\n        identifier: identifier,\n        // bridge constant\n        consumerId: consumerId,\n        // bridge constant\n        tsec2JWTEndpoint: tsec2JWTEndpoint,\n        // configuration object,\n        region: region,\n        // configuration object\n        dnsTld: dnsTld,\n        // configuration object\n        version: version // configuration object\n\n      };\n    }\n  }, {\n    key: \"getApplicationConfiguration\",\n    value: function getApplicationConfiguration(semaasConfiguration) {\n      var tsec2JWTEndpoint = semaasConfiguration.tsec2JWTEndpoint,\n          policy = semaasConfiguration.policy,\n          mrId = semaasConfiguration.mrId,\n          nameSpace = semaasConfiguration.nameSpace,\n          consumerId = semaasConfiguration.consumerId,\n          region = semaasConfiguration.region,\n          dnsTld = semaasConfiguration.dnsTld,\n          version = semaasConfiguration.version;\n      return {\n        policy: policy,\n        // configuration object\n        mrId: mrId,\n        // configuration object\n        nameSpace: nameSpace,\n        // configuration object\n        identifier: 'application',\n        // application constant\n        consumerId: consumerId,\n        // configuration object\n        tsec2JWTEndpoint: tsec2JWTEndpoint,\n        // configuration object\n        region: region,\n        // configuration object\n        dnsTld: dnsTld,\n        // configuration object\n        version: version // configuration object\n\n      };\n    }\n  }, {\n    key: \"initilizeSEMaaSAdapter\",\n    value: function initilizeSEMaaSAdapter(configuration) {\n      return new cells_semaas_adapter_default.a(configuration);\n    }\n  }, {\n    key: \"logBridge\",\n    value: function logBridge(log) {\n      this.bridge.log(log);\n    }\n  }, {\n    key: \"logApplication\",\n    value: function logApplication(log) {\n      this.application.log(log);\n    }\n  }, {\n    key: \"ingest\",\n    value: function ingest(spans) {\n      this.application.ingest(spans);\n    }\n  }, {\n    key: \"createSpan\",\n    value: function createSpan(data) {\n      return this.application && this.application.createSpan(data);\n    }\n  }, {\n    key: \"createUUID\",\n    value: function createUUID() {\n      return this.application && this.application.createUUID();\n    }\n  }, {\n    key: \"hasBridgeLoggingEnabled\",\n    value: function hasBridgeLoggingEnabled() {\n      return !!this.bridge;\n    }\n  }, {\n    key: \"hasApplicationLoggingEnabled\",\n    value: function hasApplicationLoggingEnabled() {\n      return !!this.application;\n    }\n  }, {\n    key: \"buildLog\",\n    value: function buildLog(eventName, data) {\n      var detail = data.detail;\n      var DEFAULT_LOG = {\n        message: \"cells-bridge::\".concat(eventName),\n        properties: {}\n      };\n\n      var log = monitoring_extends({}, detail, DEFAULT_LOG);\n\n      switch (eventName) {\n        case monitoring_PAGE_READY:\n          {\n            var page = data.page,\n                components = data.components;\n            log.properties = {\n              page: page,\n              components: components\n            };\n            break;\n          }\n\n        case monitoring_PARSE_ROUTE:\n          {\n            var name = data.name,\n                params = data.params,\n                pattern = data.pattern; //const normalizedParams = flattenObject(params);\n\n            log.properties = {\n              route: name,\n              //params: normalizedParams,\n              params: params,\n              pattern: pattern\n            };\n            break;\n          }\n\n        case monitoring_NAV_REQUEST:\n          {\n            var event = data.event,\n                _detail = data.detail;\n            var _page = _detail.page;\n            var _params = event.detail; //const normalizedParams = flattenObject(params);\n            //trace.description = `Page: ${page}, params: ${normalizedParams}`;\n\n            log.properties = {\n              page: _page,\n              params: _params\n            };\n            break;\n          }\n\n        case monitoring_PAGE_REQUEST:\n          {\n            var _params2 = data.params,\n                url = data.url;\n            log.properties = {\n              params: _params2,\n              url: url\n            };\n            break;\n          }\n\n        case monitoring_PAGE_RESPONSE:\n          {\n            log.properties = monitoring_extends({}, data);\n            break;\n          }\n        // Special case.\n        // We canalize the log message through the rest of bridge events - as we need to deflate data from channels\n\n        case monitoring_LOG_EVENT:\n          {\n            var _detail2 = data.detail,\n                _event = data.event;\n            var message = _detail2.message,\n                properties = _detail2.properties;\n            var eventDetail = _event.detail;\n            log.message = message;\n            log.properties = this.unflattenData(properties, eventDetail); // unflatten(properties, event)\n\n            break;\n          }\n\n        case monitoring_AFTER_PUBLISH:\n        case monitoring_BEFORE_SET_ATTR_TO_NODE:\n        case monitoring_AFTER_SET_ATTR_TO_NODE:\n        case monitoring_BEFORE_CREATE_NODE:\n        case monitoring_AFTER_CREATE_NODE:\n        case monitoring_BEFORE_IMPORT:\n        case monitoring_AFTER_IMPORT:\n        case monitoring_DATA_LOAD:\n        case monitoring_TEMPLATE_TRANSITION_END:\n        case monitoring_TRACK_EVENT:\n        case monitoring_TEMPLATE_REGISTERED:\n        case monitoring_ROUTER_BACKSTEP:\n          break;\n      }\n\n      return log;\n    }\n  }, {\n    key: \"isBridgeLoggableEvent\",\n    value: function isBridgeLoggableEvent(eventName) {\n      var LOGGABLE_EVENTS = [monitoring_PAGE_READY, monitoring_PARSE_ROUTE, monitoring_NAV_REQUEST, monitoring_PAGE_REQUEST, monitoring_PAGE_RESPONSE];\n      return LOGGABLE_EVENTS.includes(eventName);\n    }\n  }, {\n    key: \"unflattenData\",\n    value: function unflattenData(properties, values) {\n      var result = {};\n      Object.keys(properties).forEach(function (key) {\n        var property = properties[key];\n        var value = null;\n\n        if (property instanceof Object) {\n          var valuePath = property.bind;\n          value = monitoring_get(values, valuePath);\n        } else {\n          value = property;\n        }\n\n        set(result, key, value);\n      });\n      return result;\n    }\n  }]);\n\n  return Monitoring;\n}();\n\n\n// CONCATENATED MODULE: ./src/core/featureflag/feature-flag-component.js\nfunction feature_flag_component_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction feature_flag_component_extends() { feature_flag_component_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return feature_flag_component_extends.apply(this, arguments); }\n\n\nfunction defaultChangedCallback(fn) {\n  if (typeof fn === 'function') {\n    _defaultCallbackElement = fn;\n  }\n}\nfunction extend(cellsComponent, bridge) {\n  var extraConnections = _defaultConnections();\n\n  var spec = cellsComponent.spec;\n  var nodeFFCallback = cellsComponent.node[BRIDGE_BIND_KEY] || _defaultCallbackElement;\n  Object.defineProperty(cellsComponent.node, BRIDGE_BIND_KEY, {\n    value: function value() {\n      return _nodeFFCallbackWrap(cellsComponent, bridge, nodeFFCallback);\n    }\n  }); // update connections with new connection of FeatureFlag\n\n  if (spec.connections && spec.connections[\"in\"]) {\n    feature_flag_component_extends(spec.connections[\"in\"], extraConnections[\"in\"]);\n  } else if (spec.connections) {\n    feature_flag_component_extends(spec.connections, extraConnections);\n  } else {\n    spec.connections = extraConnections;\n  } // set last value in collection. These is used in \"ComponentConnector\" when publish in output channel from events\n\n\n  lastValue.set(cellsComponent.node, cellsComponent.node[BRIDGE_BIND_KEY]());\n  return cellsComponent;\n}\n/* harmony default export */ var feature_flag_component = ({\n  extend: extend,\n  defaultChangedCallback: defaultChangedCallback,\n  BRIDGE_CHANNEL_KEY: BRIDGE_CHANNEL_KEY\n}); // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \n// . . . . .. . . . . .. . . . .Private. . . . .. . . . .  . . . . . . .\n// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \n\nvar _defaultCallbackElement = _nodeFFCalback_toggleVisibility;\n\nfunction _defaultConnections() {\n  return {\n    \"in\": feature_flag_component_defineProperty({}, BRIDGE_CHANNEL_KEY, {\n      bind: BRIDGE_BIND_KEY\n    })\n  };\n}\n\n;\n\nfunction _nodeFFCalback_toggleVisibility(fFValue, cellsComponent) {\n  cellsComponent.node.style.visibility = fFValue ? 'initial' : 'hidden';\n  return !!fFValue;\n}\n\nfunction _nodeFFCallbackWrap(cellsComponent, _ref, fFCallback) {\n  var featureFlagCollection = _ref.featureFlagCollection,\n      ComponentConnector = _ref.ComponentConnector;\n\n  var _ffValue = featureFlagCollection.value(cellsComponent.spec.featureFlag);\n\n  var _ffValueResult = fFCallback.call(cellsComponent.node, _ffValue, cellsComponent) === false ? false : true;\n\n  var _connections = cellsComponent.spec.connections;\n\n  if (_ffValueResult) {\n    ComponentConnector._updateInConnections(cellsComponent.node, _connections[\"in\"]);\n  } else if (ComponentConnector.subscriptors.has(cellsComponent.node)) {\n    var inConnections = Object.keys(_connections[\"in\"]).filter(function (k) {\n      return k !== BRIDGE_CHANNEL_KEY;\n    });\n    ComponentConnector.unsubscribe(inConnections, cellsComponent.node);\n  } // set last value in collection. These is used in \"ComponentConnector\" when publish in output channel from events\n\n\n  lastValue.set(cellsComponent.node, _ffValueResult);\n  return _ffValueResult;\n}\n// CONCATENATED MODULE: ./src/core/manager/post-message.js\nfunction post_message_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction post_message_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction post_message_createClass(Constructor, protoProps, staticProps) { if (protoProps) post_message_defineProperties(Constructor.prototype, protoProps); if (staticProps) post_message_defineProperties(Constructor, staticProps); return Constructor; }\n\nvar PostMessageManager = /*#__PURE__*/function () {\n  function PostMessageManager(bridge) {\n    post_message_classCallCheck(this, PostMessageManager);\n\n    if (!bridge.postMessageTargetOrigin) {\n      this.enabled = false;\n    } else {\n      if (bridge.postMessageTargetOrigin === '*') {\n        this.enabled = false;\n        console.warn(\"For security reasons postMessageTargetOrigin can't be the wildcard '*'. See docs for more info. \");\n      } else {\n        this.enabled = true;\n        this.postMessageTargetOrigin = bridge.postMessageTargetOrigin;\n      }\n    }\n\n    this.componentConnector = bridge.ComponentConnector;\n    this.bridgeChannelManager = bridge.BridgeChannelManager;\n  }\n  /**\n   * Handles the postMessage events sent to this window from its parent.\n   * It transforms them into channels __bridge_post_message_{your-event-name} including the payload, to do so the postMessage must be:\n   * {\n   *  \"event\" : \"your-event-name\",\n   *  \"detail\" : <any>\n   * }\n   * Creates and listens to the private channel __bridge_ch_send_post_message to send postMessages to parent window.\n   */\n\n\n  post_message_createClass(PostMessageManager, [{\n    key: \"setupPostMessages\",\n    value: function setupPostMessages() {\n      var _this = this;\n\n      if (this.enabled) {\n        window.addEventListener('message', function (_ref) {\n          var data = _ref.data;\n\n          if (data.event) {\n            var channel = _this.bridgeChannelManager.getPostMessageChannel(data.event);\n\n            var evt = _this.componentConnector.createEvent(data.event, data.detail);\n\n            channel.next(evt);\n          }\n        });\n\n        this._sendPostMessage({\n          event: '__bridge-ready'\n        });\n\n        this.bridgeChannelManager.getBridgeChannel('send_post_message').subscribe(function (evt) {\n          return _this._sendPostMessage(evt.detail);\n        });\n      }\n    }\n  }, {\n    key: \"_sendPostMessage\",\n    value: function _sendPostMessage(evt) {\n      window.parent && window.parent.postMessage({\n        eventName: evt.event,\n        eventDetail: evt.detail\n      }, this.postMessageTargetOrigin);\n    }\n  }]);\n\n  return PostMessageManager;\n}();\n\n/* harmony default export */ var post_message = (PostMessageManager);\n// CONCATENATED MODULE: ./src/core/bridge.js\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction bridge_extends() { bridge_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return bridge_extends.apply(this, arguments); }\n\nfunction bridge_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { bridge_typeof = function _typeof(obj) { return typeof obj; }; } else { bridge_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return bridge_typeof(obj); }\n\nfunction bridge_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction bridge_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction bridge_createClass(Constructor, protoProps, staticProps) { if (protoProps) bridge_defineProperties(Constructor.prototype, protoProps); if (staticProps) bridge_defineProperties(Constructor, staticProps); return Constructor; }\n\n// eslint-disable-next-line no-unused-vars\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar bridge_dasherize = utils.dasherize,\n    bridge_camelize = utils.camelize;\nvar bridge_bindingCodes = constants.bindingCodes,\n    bridge_binding = constants.binding,\n    bridge_componentsPath = constants.componentsPath,\n    bridge_composerEndpoint = constants.composerEndpoint,\n    bridge_externalEvents = constants.externalEvents,\n    bridge_externalEventsCodes = constants.externalEventsCodes,\n    DEFAULT_INITIAL_TEMPLATE = constants.initialTemplate,\n    DEFAULT_PAGES_PATH = constants.pagesPath,\n    bridge_prplCodes = constants.prplCodes,\n    bridge_prpl = constants.prpl,\n    bridge_preRenderState = constants.preRenderState,\n    bridge_renderEngines = constants.renderEngines;\nvar ALWAYS = bridge_binding.DEFAULT;\nvar DEFER = bridge_prpl.DEFAULT;\nvar coreInstances = 0;\nvar globalChannel = {}; // @TODO: Agregar los imports y eliminar los `new this.*`\n// @TODO: Revisar los mtodos que manipulan templates. Quizs deban ser responsabilidad del TemplateManager\n\nvar bridge_CellsBridge = /*#__PURE__*/function () {\n  /**\n  * Binding Type\n  *\n  * 'always'      => Register all components of all views. Never unregister them.\n  * 'delayed'     => Like 'always' but waits for idle to start the animation.\n  * 'ui'          => Register only ui and cross components of all views. Never\n  *                  unregister them. Datamanagers are only connected when the\n  *                  animation of the current view finishes.\n  * 'currentview' => Register all components of the current view when the\n  *                  animation finishes.\n  *\n  * @type {String}\n  */\n\n  /**\n   *\n   * @type {sting}\n   *\n   *  none => Don't use bundled pages\n   *  defer => Use bundled pages. It renders the page once every component has been loaded.\n   *  progressive => Use bundled pages. It renders the page inmediatelly while its component are loading.\n   *  hero => Use bundled pages. It renders the page inmediatelly while its component are loading using priorities.\n   */\n\n  /**\n  * Pages Cache\n  *\n  * Saves page definitions into localstorage.\n  *\n  * @type {Boolean}\n  */\n\n  /**\n  * PubSub Context\n  *\n  * 'global'   => Notifies all components of all bridge instances.\n  * 'local'    => Notifies components created by the current bridge instance.\n  *\n  * @type {String}\n  */\n\n  /**\n   * URL Components Path\n   *\n   * URL path to load components.\n   *\n   * @type {String}\n   */\n\n  /**\n  * URL templates Path\n  *\n  * URL path to load templates.\n  *\n  * @type {String}\n  */\n\n  /**\n  * Cross container node Id\n  *\n  * @type {String}\n  */\n\n  /**\n  * Prints debug info\n  *\n  * @type {Boolean}\n  */\n\n  /**\n  * Proactive Cache.\n  * Loads future pages definition.\n  *\n  * @type {Boolean}\n  */\n\n  /**\n  * Proactive Render\n  * Render future pages.\n  *\n  * @type {Boolean}\n  */\n\n  /**\n  * Prefix for LocalStorage keys\n  *\n  * @type {String}\n  */\n\n  /**\n  * Lib version.\n  *\n  * @type {string}\n  */\n\n  /**\n  * Max number of views\n  *\n  * Keeps this number of template alive.\n  *\n  * @type {Number}\n  */\n\n  /**\n   * The name of the initial template that gets rendered\n   *\n   * @type {String}\n   */\n\n  /**\n   *  The node where the template will be rendered\n   */\n\n  /**\n  * Events to expose\n  *\n  *\n  * @type {Array}\n  */\n\n  /**\n   * The lists of routes that are rendered through a WebComponent.\n   *\n   * @type {Array}\n   */\n\n  /**\n   * The path to the folder that contains the components that renders a route.\n   *\n   * @type {String}\n   */\n\n  /**\n   * The list of templates that are remote and need to be fetched from a remote server\n   * @type {Array}\n   */\n\n  /**\n   * If it is true, the Bridge will use the Composer Engine to get the json\n   * pages (composer mocks)\n   * @type {Boolean}\n   */\n\n  /**\n   * Json that contains the App definition.\n   * This is required by Composer Engine.\n   *\n   * @type {JSON}\n   */\n  function CellsBridge(config) {\n    var _this = this;\n\n    bridge_classCallCheck(this, CellsBridge);\n\n    this.ComponentConnector = null;\n    this.DomManager = null;\n    this.ImportManager = null;\n    this.PageManager = null;\n    this.Router = null;\n    this.TemplateManager = null;\n    this.Sanitizer = null;\n    this.BridgeChannelManager = null;\n    this.binding = ALWAYS;\n    this.prplLevel = DEFER;\n    this.cache = true;\n    this.channel = 'global';\n    this.componentsPath = bridge_componentsPath;\n    this.templatesPath = '';\n    this.crossContainerId = '__cross';\n    this.debug = true;\n    this.preCache = false;\n    this.preRender = false;\n    this.storagePrefix = '__bridge-';\n    this.version = '3.12.0';\n    this.viewLimit = 1000;\n    this.initialTemplate = DEFAULT_INITIAL_TEMPLATE;\n    this.__mainNodeElement = null;\n    this.externalEvents = bridge_externalEvents;\n    this.pages = [];\n    this.pagesPath = DEFAULT_PAGES_PATH;\n    this.remoteTemplates = [];\n    this.useComposerEngine = false;\n    this.appJson = '';\n    this.appId = '';\n    this.composerEndpoint = bridge_composerEndpoint;\n    this.templatesPath = '';\n    this.monitoring = null;\n    this.logs = false;\n    this.navRequestListener = null;\n    var NAV_REQUEST = bridge_externalEventsCodes.NAV_REQUEST,\n        ROUTER_BACKSTEP = bridge_externalEventsCodes.ROUTER_BACKSTEP;\n\n    if (!config || bridge_typeof(config) !== 'object') {\n      config = {};\n    }\n\n    config.prplLevel = this._normalizePrplLevel(config.prplLevel);\n    this.preRenderingPages = {};\n    var dependencies = config.dependencies;\n    delete config.dependencies;\n\n    bridge_extends(this, config);\n\n    this._initDependencies(dependencies);\n\n    if (this.channel === 'global') {\n      this.ComponentConnector.manager.channels = globalChannel;\n    }\n\n    if (this.useComposerEngine) {\n      this._initComposerEngine();\n    }\n\n    if (!this.mainNode) {\n      console.warn('You should indicate the main node of your app');\n    } else {\n      this._plugExternalEvents();\n    }\n\n    if (config.featureFlag) {\n      if (config.featureFlag.subscribe) {\n        this.featureFlagCollection.subscribe(config.featureFlag.subscribe);\n      }\n\n      if (config.featureFlag.defaultChangedCallback) {\n        feature_flag_component.defaultChangedCallback(config.featureFlag.defaultChangedCallback);\n      }\n\n      if (config.featureFlag.defaultFeatures) {\n        this.featureFlagCollection.update({\n          features: config.featureFlag.defaultFeatures\n        });\n      }\n\n      if (config.featureFlag.src) {\n        fetch(config.featureFlag.src).then(function (response) {\n          return response.json();\n        }).then(function (response) {\n          return _this.featureFlagCollection.update(response);\n        });\n      }\n    }\n\n    this.id = coreInstances++;\n\n    this._initCrossComponents();\n\n    if (this.cache) {\n      this.PageManager.persistent = true;\n    }\n\n    if (this.generateRequestUrl) {\n      console.assert(typeof this.generateRequestUrl === 'function', 'generateRequestUrl has to be a function');\n      this.PageManager.generateRequestUrl = this.generateRequestUrl;\n    }\n\n    if (this.onPageDefinitionNotFound) {\n      console.assert(typeof this.onPageDefinitionNotFound === 'function', 'onPageDefinitionNotFound has to be a function');\n      this.PageManager.onPageDefinitionNotFound = this.onPageDefinitionNotFound;\n    }\n\n    window.$core = window.$core || [];\n    /* istanbul ignore else */\n\n    if (this.debug) {\n      window.$core.push(this);\n      this.printDebugInfo();\n    } else {\n      window.$core.push({\n        // monitoring\n        log: function log(_log2) {\n          return _this.log(_log2);\n        },\n        ingest: function ingest(spans) {\n          return _this.ingest(spans);\n        },\n        createSpan: function createSpan(data) {\n          return _this.createSpan(data);\n        },\n        createUUID: function createUUID() {\n          return _this.createUUID();\n        },\n        // bridge\n        logout: function logout() {\n          return _this.logout();\n        },\n        subscribeToEvent: function subscribeToEvent(eventName, callback) {\n          return _this.subscribeToEvent(eventName, callback);\n        },\n        registerInConnection: function registerInConnection(channel, node, callback) {\n          return _this.registerInConnection(channel, node, callback);\n        },\n        unsubscribe: function unsubscribe(channels, node) {\n          return _this.unsubscribe(channels, node);\n        },\n        registerOutConnection: function registerOutConnection(channelName, node, bindName) {\n          return _this.registerOutConnection(channelName, node, bindName);\n        },\n        publish: function publish(channelName, value, options) {\n          return _this.publish(channelName, value, options);\n        },\n        navigate: function navigate(page, params) {\n          return _this.navigate(page, params);\n        },\n        // analytics\n        trackEvent: function trackEvent(data) {\n          return _this.trackEvent(data);\n        },\n        // native\n        navigateToNative: function navigateToNative(page, params) {\n          return _this.navigateToNative(page, params);\n        },\n        backStep: function backStep() {\n          return _this.backStep();\n        }\n      });\n    }\n\n    window.cells = window.$core[0];\n    this.BridgeChannelManager.initAppContextChannel();\n    this.BridgeChannelManager.getCancelledBackNavigationChannel();\n    this.ActionChannelManager.subscribeAll(); // Bridge is ready - execute queued bridge commands\n\n    this._executePendingBridgeQueue();\n\n    if (this.logs) {\n      this._logBridgeReady();\n    } // 1. Listen for route changes\n    // @TODO: Revisar este binding de un mtodo de otro objeto a otro objeto\n\n\n    this.Router.handler = function () {\n      return _this.routeHandler();\n    };\n\n    this.Router.addRoutes(this.routes);\n\n    this._initSkipNavigations();\n\n    this.Router.start();\n\n    this.navRequestListener = function (info) {\n      if (_this.Router.hashIsDirty) {\n        window.location.hash = \"#!\";\n      }\n\n      var event = info.event;\n      var navigationDetail = info.detail;\n      var page = navigationDetail.page;\n      var params = navigationDetail.params;\n      var skipHistory = navigationDetail.skipHistory;\n      var cleanUntil = navigationDetail.cleanUntil;\n      var replace = navigationDetail.replace || false;\n      var p = {};\n\n      if (!page && navigationDetail.paramPage && event.detail) {\n        page = event.detail[navigationDetail.paramPage];\n      }\n\n      if (event.detail && params) {\n        for (var param in params) {\n          if (params.hasOwnProperty(param)) {\n            p[params[param]] = event.detail[param];\n          }\n        }\n      }\n\n      if (cleanUntil) {\n        _this.Router.clearStackUntil(cleanUntil);\n      }\n\n      _this.Router.go(page, p, replace, skipHistory);\n\n      bridge_extends(_this, config);\n    };\n\n    manager_events.on(NAV_REQUEST, this.navRequestListener);\n    manager_events.on(ROUTER_BACKSTEP, function (evt) {\n      return _this.handleBack(evt);\n    });\n    this.PostMessageManager.setupPostMessages();\n  }\n  /**\n   * Performs the go back action. This method is overriden by the CellsNativeBridge\n   *\n   * @return {Object} the executed navigation, an object with properties:\n   *  - from\n   *  - to\n   */\n\n\n  bridge_createClass(CellsBridge, [{\n    key: \"goBack\",\n    value: function goBack() {\n      return this.Router.back();\n    }\n    /**\n     * This method is executed when the event router-backstep is fired.\n     * It calls the hook method for handling backward navigations and if that method\n     * allows the continuation, it does the navegation. Otherwise it will cancel the navigation\n     * and publish the response in the channel __bridge_cancelled_back_navigation.\n     */\n\n  }, {\n    key: \"handleBack\",\n    value: function handleBack() {\n      this.goBack();\n    }\n    /**\n     * Execute queued bridge commands due to delayed instance of bridge and\n     * premature execution of commands.\n     *\n     * @method\n     * @private\n     */\n\n  }, {\n    key: \"_executePendingBridgeQueue\",\n    value: function _executePendingBridgeQueue() {\n      if (!window.cellsBridgeQueue || !window.cellsBridgeQueue.length) {\n        return;\n      }\n\n      for (var i = 0; i < window.cellsBridgeQueue.length; i++) {\n        var queuedItem = window.cellsBridgeQueue[i];\n        var command = queuedItem.command,\n            parameters = queuedItem.parameters;\n        var queuedCommand = this[command];\n\n        if (!queuedCommand) {\n          console.log(\"WARNING: Invalid cells bridge command execution: \".concat(command, \" (QUEUE).\"));\n          return;\n        }\n\n        console.log(\"Executing queued command \".concat(command, \".\"));\n        queuedCommand.apply(this, parameters);\n      }\n\n      delete window.cellsBridgeQueue;\n    }\n  }, {\n    key: \"_logBridgeReady\",\n    value: function _logBridgeReady() {\n      var appId = this.appId,\n          version = this.version,\n          binding = this.binding,\n          prplLevel = this.prplLevel,\n          cache = this.cache,\n          preCache = this.preCache,\n          preRender = this.preRender;\n      var message = \"cells-bridge::ready\";\n      var properties = {\n        appId: appId,\n        version: version,\n        binding: binding,\n        href: window.location.href,\n        prplLevel: prplLevel,\n        cache: cache,\n        preCache: preCache,\n        preRender: preRender\n      };\n      var log = {\n        message: message,\n        properties: properties\n      };\n      this.logBridge(log);\n    }\n  }, {\n    key: \"_initSkipNavigations\",\n    value: function _initSkipNavigations() {\n      if (this.skipNavigations && this.skipNavigations.length > 0) {\n        for (var i = 0; i < this.skipNavigations.length; i++) {\n          this.skipNavigations[i].skipHistory = true;\n        }\n\n        this.Router.addSkipNavigations(this.skipNavigations);\n      }\n    }\n  }, {\n    key: \"_normalizePrplLevel\",\n    value: function _normalizePrplLevel(prplLevelCode) {\n      var prplList = bridge_prpl.VALUES;\n      var normalizedCode;\n\n      if (prplList.indexOf(prplLevelCode) > -1) {\n        normalizedCode = prplLevelCode;\n      } else {\n        normalizedCode = prplList[prplLevelCode] || DEFER;\n      }\n\n      return normalizedCode;\n    }\n  }, {\n    key: \"_dispatchEvent\",\n    value: function _dispatchEvent(name, payload) {\n      var mainNode = this.getMainNode();\n      var event = payload ? new CustomEvent(name, {\n        detail: payload\n      }) : new CustomEvent(name);\n      mainNode.dispatchEvent(event);\n    }\n  }, {\n    key: \"_plugExternalEvents\",\n    value: function _plugExternalEvents() {\n      var _this2 = this;\n\n      var len = this.externalEvents.length;\n      var mainNode = this.getMainNode();\n\n      if (mainNode) {\n        var _loop = function _loop(i) {\n          var eventName = _this2.externalEvents[i];\n          manager_events.on(eventName, function (data) {\n            _this2._dispatchEvent(eventName, data);\n\n            if (_this2.logs) {\n              _this2.monitor(eventName, data);\n            }\n          });\n        };\n\n        for (var i = 0; i < len; i++) {\n          _loop(i);\n        }\n\n        this._initEventChannels();\n      } else {\n        console.warn('The defined main node does not exist');\n      }\n    }\n    /**\n     * Send analytics data event to main node.\n     * Cells Analytics Collector (Adobe / Target) are listening for main node event's and interept & process them.\n     *\n     * @param {Object} data Analytics info.\n     */\n\n  }, {\n    key: \"trackEvent\",\n    value: function trackEvent(data) {\n      var TRACK_EVENT = bridge_externalEventsCodes.TRACK_EVENT; // We just emit a TRACK_EVENT event, modeled as an out connection (we respect normal analytics flow)\n\n      manager_events.emit(TRACK_EVENT, {\n        detail: data\n      });\n    }\n  }, {\n    key: \"monitor\",\n    value: function monitor(eventName, data) {\n      var LOG_EVENT = bridge_externalEventsCodes.LOG_EVENT;\n      var isApplicationLogEvent = eventName === LOG_EVENT;\n      var isLoggable = isApplicationLogEvent || this.isBridgeLoggableEvent(eventName);\n\n      if (isLoggable) {\n        var log = this.monitoring.buildLog(eventName, data);\n        var method = isApplicationLogEvent ? 'log' : 'logBridge';\n        this[method](log);\n      }\n    }\n  }, {\n    key: \"isBridgeLoggableEvent\",\n    value: function isBridgeLoggableEvent(eventName) {\n      return this.monitoring.isBridgeLoggableEvent(eventName);\n    }\n  }, {\n    key: \"log\",\n    value: function log(_log) {\n      this.hasApplicationLoggingEnabled() && this.monitoring.logApplication(_log);\n    }\n  }, {\n    key: \"logBridge\",\n    value: function logBridge(log) {\n      this.hasBridgeLoggingEnabled() && this.monitoring.logBridge(log);\n    }\n  }, {\n    key: \"ingest\",\n    value: function ingest(spans) {\n      this.hasApplicationLoggingEnabled() && this.monitoring.ingest(spans);\n    }\n  }, {\n    key: \"createSpan\",\n    value: function createSpan(data) {\n      if (!this.hasApplicationLoggingEnabled()) {\n        return {\n          start: function start() {},\n          finish: function finish() {}\n        };\n      }\n\n      return this.monitoring.createSpan(data);\n    }\n  }, {\n    key: \"createUUID\",\n    value: function createUUID() {\n      return this.monitoring.createUUID();\n    }\n  }, {\n    key: \"hasBridgeLoggingEnabled\",\n    value: function hasBridgeLoggingEnabled() {\n      return this.monitoring.hasBridgeLoggingEnabled();\n    }\n  }, {\n    key: \"hasApplicationLoggingEnabled\",\n    value: function hasApplicationLoggingEnabled() {\n      return this.monitoring.hasApplicationLoggingEnabled();\n    }\n  }, {\n    key: \"_initEventChannels\",\n    value: function _initEventChannels() {\n      var mainNode = this.getMainNode();\n      this.BridgeChannelManager.initEventChannels(mainNode, this.externalEvents);\n\n      this._addInitialSubscribersToEvents();\n    }\n  }, {\n    key: \"_addInitialSubscribersToEvents\",\n    value: function _addInitialSubscribersToEvents() {\n      if (this.eventSubscriptions && this.eventSubscriptions.length > 0) {\n        this._subscribeToEvents(this.eventSubscriptions);\n      }\n    }\n  }, {\n    key: \"_subscribeToEvents\",\n    value: function _subscribeToEvents(eventSubscriptions) {\n      var _this3 = this;\n\n      eventSubscriptions.forEach(function (subscription) {\n        var event = subscription.event,\n            callback = subscription.callback;\n\n        _this3.subscribeToEvent(event, callback);\n      });\n    }\n    /**\n     * Initialization of cross components container.\n     * Check if cross component container exists. Otherwise, it will be created.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_initCrossComponents\",\n    value: function _initCrossComponents() {\n      var crossContainerTemplateId = this.TemplateManager.parseTemplateId(this.crossContainerId);\n      var crossContainer = this.TemplateManager.get(crossContainerTemplateId);\n      var crossContainerElement = document.getElementById(crossContainerTemplateId); // no cross container registered on memory\n\n      if (!crossContainer) {\n        if (!crossContainerElement) {\n          // no html element for cross container, we build it from scratch\n          crossContainer = this.TemplateManager.create(this.crossContainerId, {\n            tagName: 'div'\n          });\n          document.body.appendChild(crossContainer.node);\n        } else {\n          // html element found. we register it\n          this.TemplateManager.register(this.crossContainerId, crossContainerElement);\n        }\n      }\n    }\n  }, {\n    key: \"_initDependencies\",\n    value: function _initDependencies(dependencies) {\n      dependencies = bridge_extends({\n        ComponentConnector: component_connector,\n        DomManager: dom,\n        ImportManager: manager_import,\n        TemplateManager: manager_template,\n        PageManager: manager_page,\n        Router: router_Router,\n        Sanitizer: CellsBridgeComposerSanitizer,\n        BridgeChannelManager: bridge_channels,\n        ActionChannelManager: action_channels,\n        monitoring: monitoring_Monitoring,\n        featureFlagCollection: FeatureFlagCollection,\n        PostMessageManager: post_message\n      }, dependencies);\n\n      for (var dependence in dependencies) {\n        if (dependencies.hasOwnProperty(dependence)) {\n          this[dependence] = new dependencies[dependence](this);\n        }\n      }\n    }\n  }, {\n    key: \"_initComposerEngine\",\n    value: function _initComposerEngine() {\n      /* global composerEngine */\n      this.composerEngine = new composer_engine_proxy(this.ComponentConnector.manager, composerEngine);\n      this.composerEngine.init();\n      this.PageManager.composerEngine = this.composerEngine;\n    }\n  }, {\n    key: \"_createCellsComponent\",\n    value: function _createCellsComponent(spec, context) {\n      var cmp = new CellsBridgeComponent(spec, context);\n\n      if (spec.featureFlag) {\n        feature_flag_component.extend(cmp, this);\n      }\n\n      return cmp;\n    }\n  }, {\n    key: \"createCCComponent\",\n    value: function createCCComponent(spec) {\n      var container = this.TemplateManager.get(this.crossContainerId);\n      var node = container.node.querySelector(spec.tagName);\n\n      if (!node) {\n        var cmp = this._createCellsComponent(spec, this);\n\n        cmp.__parentTemplate = container;\n        this.ComponentConnector.register(cmp.node, cmp.spec.connections);\n        return cmp;\n      } else {\n        this.ComponentConnector.progressiveRegister(node, spec.connections);\n      }\n    }\n  }, {\n    key: \"createUIComponent\",\n    value: function createUIComponent(spec) {\n      var ALWAYS = bridge_bindingCodes.ALWAYS,\n          DELAYED = bridge_bindingCodes.DELAYED,\n          UI = bridge_bindingCodes.UI;\n      var bindingType = this.binding;\n\n      var cmp = this._createCellsComponent(spec, this);\n\n      if (bindingType === ALWAYS || bindingType === DELAYED || bindingType === UI) {\n        this.ComponentConnector.register(cmp.node, cmp.connections);\n      }\n\n      return cmp;\n    }\n  }, {\n    key: \"createDMComponent\",\n    value: function createDMComponent(spec) {\n      var ALWAYS = bridge_bindingCodes.ALWAYS,\n          DELAYED = bridge_bindingCodes.DELAYED;\n      var bindingType = this.binding;\n\n      var cmp = this._createCellsComponent(spec, this);\n\n      if (bindingType === ALWAYS || bindingType === DELAYED) {\n        this.ComponentConnector.register(cmp.node, cmp.connections);\n      }\n\n      return cmp;\n    }\n  }, {\n    key: \"_createLocalComponent\",\n    value: function _createLocalComponent(type, items, template) {\n      var collection = [];\n\n      for (var i = 0, l = items.length; i < l; i++) {\n        var spec = items[i];\n        var cmp = this['create' + type + 'Component'](spec);\n\n        if (cmp) {\n          cmp.__parentTemplate = cmp.__parentTemplate || template;\n          collection.push(cmp);\n        }\n      }\n\n      return collection;\n    }\n  }, {\n    key: \"createComponentsByType\",\n    value: function createComponentsByType(collection, template) {\n      var itemsToInject = [];\n      var sortedList = ['CC', 'UI', 'DM'];\n\n      for (var j = 0, k = sortedList.length; j < k; j++) {\n        var type = sortedList[j];\n        var items = collection[type];\n        itemsToInject = itemsToInject.concat(this._createLocalComponent(type, items, template));\n      }\n\n      return itemsToInject;\n    }\n  }, {\n    key: \"_createComponents\",\n    value: function _createComponents(response, template) {\n      var _this4 = this;\n\n      var isPreRendering = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var PAGE_READY = bridge_externalEventsCodes.PAGE_READY;\n      var page = response.page;\n      var options = this;\n      var collection = this.Sanitizer.split(response.components);\n      var components = this.createComponentsByType(collection, template);\n      var unresolvedComponents = [];\n      var templateParents = [];\n\n      for (var i = 0, l = components.length; i < l; i++) {\n        // 9. Sets default attributes\n        components[i].setProps();\n        var component = components[i];\n        var parentName = component.__parentTemplate.name;\n\n        if (!templateParents[parentName]) {\n          templateParents[parentName] = this.TemplateManager.get(parentName);\n        } // 9.1 Append components to template\n\n\n        templateParents[parentName].append(component);\n\n        if (component.isUnresolved()) {\n          unresolvedComponents.push(component);\n        }\n      }\n\n      manager_events.emit(PAGE_READY, {\n        page: page,\n        components: response.components.map(function (c) {\n          return c.tagName;\n        }).join(', ')\n      });\n\n      switch (this.prplLevel) {\n        case bridge_prplCodes.NONE:\n        case bridge_prplCodes.DEFER:\n          this.ImportManager.loadComponent(unresolvedComponents, options.componentsPath).then(function () {\n            _this4.selectTemplate(page, isPreRendering);\n          });\n          break;\n\n        case bridge_prplCodes.PROGRESSIVE:\n          this.ImportManager.loadComponent(unresolvedComponents, options.componentsPath);\n          break;\n\n        case bridge_prplCodes.HERO:\n          this.selectTemplate(page, isPreRendering);\n          this.ImportManager.loadComponentByPriority(unresolvedComponents, options.componentsPath);\n          break;\n      }\n    }\n  }, {\n    key: \"createPageFromWebComponent\",\n    value: function createPageFromWebComponent(name) {\n      var componentName = \"\".concat(name, \"-page\");\n      var node = this.TemplateManager.getNode(name);\n      this.BridgeChannelManager.getPrivate(name);\n\n      if (!node) {\n        node = this.TemplateManager.createFromComponent(name, componentName);\n\n        if (node.isUnresolved() && node.node.updateComplete === undefined) {\n          // is not LitElement so it must be a PolymerElement\n          return this.loadPolymerWebComponent(name);\n        }\n      }\n\n      return Promise.resolve();\n    }\n  }, {\n    key: \"_isLocalTemplate\",\n    value: function _isLocalTemplate(templateName) {\n      var isLocal = true;\n\n      if (this.composerEndpoint && this.remoteTemplates) {\n        isLocal = this.remoteTemplates.indexOf(templateName) === -1;\n      }\n\n      return isLocal;\n    }\n  }, {\n    key: \"createTemplate\",\n    value: function createTemplate(response) {\n      var _this5 = this;\n\n      var isPreRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var spec = response;\n      var name = response.page;\n      var node = this.TemplateManager.getNode(name);\n      var useComposerEngineForThisPage = this.composerEngine && !this.PageManager._isLocalComposer(name);\n      this.BridgeChannelManager.getPrivate(name);\n\n      if (!isPreRendering && this.preRenderingPages[name]) {\n        this.preRenderingPages[name] = bridge_preRenderState.REQUESTED;\n        return;\n      } // Template is cached\n\n\n      if (node && !useComposerEngineForThisPage) {\n        this.selectTemplate(name, isPreRendering);\n      } else {\n        // Template not cached and has definition\n        if (spec && spec.template) {\n          if (this.prplLevel === bridge_prplCodes.DEFER && this._isLocalTemplate(name)) {\n            // Review this: need check if template is LitElement to avoid load html bundle\n            if (this.onlyLitElements) {\n              this._createTemplateFromSpec(name, spec, isPreRendering);\n            } else {\n              this.ImportManager.loadBundleForTemplate(this.componentsPath, name).then(function () {\n                _this5._createTemplateFromSpec(name, spec, isPreRendering);\n              });\n            }\n          } else {\n            this._createTemplateFromSpec(name, spec, isPreRendering);\n          }\n        }\n      }\n\n      this._preRender(response, isPreRendering);\n    }\n  }, {\n    key: \"_preRender\",\n    value: function _preRender(response, isPreRendering) {\n      var _this6 = this;\n\n      if ((this.preCache === true || this.preRender === true) && response.pages) {\n        for (var page in response.pages) {\n          if (response.pages.hasOwnProperty(page)) {\n            var pageAlreadyLoaded = page === name || this.TemplateManager.cache[page];\n\n            if (pageAlreadyLoaded) {\n              continue;\n            }\n\n            if (this.preRender && isPreRendering === false) {\n              this.preRenderingPages[page] = bridge_preRenderState.WORKING;\n            }\n\n            this.loadTemplate(page).then(function (templateResponse) {\n              if (_this6.preRender && isPreRendering === false) {\n                var doPreRender = true;\n\n                if (templateResponse.page) {\n                  _this6._idleCallback(function () {\n                    return _this6.createTemplate(templateResponse, doPreRender);\n                  });\n                } else {\n                  console.warn('Missing page. ', templateResponse);\n                }\n              }\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_createTemplateFromSpec\",\n    value: function _createTemplateFromSpec(name, spec) {\n      var _this7 = this;\n\n      var isPreRendering = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      // 4. Creates the new template\n      var template = this.TemplateManager.create(name, spec.template, isPreRendering);\n\n      if (this.prplLevel === bridge_prplCodes.PROGRESSIVE) {\n        this.selectTemplate(name, isPreRendering);\n      }\n\n      this.ComponentConnector.register(template.node, template.connections); // Add new routes in router\n\n      if (spec.pages) {\n        this.Router.addRoutes(spec.pages);\n      } // 5. Import it when doesn't exists\n\n\n      if (template.isUnresolved()) {\n        switch (this.prplLevel) {\n          case bridge_prplCodes.NONE:\n          case bridge_prplCodes.DEFER:\n            this.ImportManager.loadComponent(template, this.componentsPath).then(function () {\n              _this7._createComponents(spec, template, isPreRendering);\n            });\n            break;\n\n          case bridge_prplCodes.PROGRESSIVE:\n          case bridge_prplCodes.HERO:\n            this._createComponents(spec, template, isPreRendering);\n\n            break;\n        }\n      } else {\n        this._createComponents(spec, template, isPreRendering);\n      }\n    }\n    /**\n    * Id for template node\n    *\n    * @param  {String} name Template name\n    *\n    * @return {String}\n    */\n\n  }, {\n    key: \"parseTemplateId\",\n    value: function parseTemplateId(name) {\n      return 'cells-template-' + name.replace(/\\./g, '-');\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(name, value) {\n      name = bridge_camelize('parse-' + name);\n      return typeof this[name] === 'function' ? this[name](value) : value;\n    }\n  }, {\n    key: \"printDebugInfo\",\n    value: function printDebugInfo() {\n      var getColor = function getColor(option, color) {\n        var hexColor = option ? color : '#b0bec5';\n        return \"background:\".concat(hexColor, \"; color:#fff; padding:2px 4px; margin-right: 5px;\");\n      };\n\n      console.log(\"%cbridge version: \".concat(this.version, \" %cbinding: \").concat(this.binding, \" %cprplLevel: \").concat(this.prplLevel, \" %ccache: \").concat(this.cache, \" %cpreCache: \").concat(this.preCache, \" %cpreRender: \").concat(this.preRender, \" %clogs: \").concat(this.logs), getColor(this.version, '#003f8d'), getColor(this.binding, '#0065ba'), getColor(this.prplLevel, '#008ff2'), getColor(this.cache, '#0093e2'), getColor(this.preCache, '#00aeeb'), getColor(this.preRender, '#41cef8'), //#00aeeb\n      getColor(this.logs, '#0025ad') //#00aeeb\n      );\n\n      if (this.id > 0) {\n        console.log(\"%cWARNING: There are \".concat(this.id + 1, \" simultaneous instances of the Bridge running.\"), getColor(this.id, '#FF0000'));\n      }\n    }\n  }, {\n    key: \"routeHandler\",\n    value: function routeHandler() {\n      var PARSE_ROUTE = bridge_externalEventsCodes.PARSE_ROUTE;\n      var route = this.Router.currentRoute;\n      manager_events.emit(PARSE_ROUTE, route); // 2. Load a new page when route changes\n\n      this._handleRouteLoading(route); // 3. Publish URL params to global params.\n\n\n      for (var param in route.params) {\n        if (route.params.hasOwnProperty(param)) {\n          var eventData = {\n            detail: {\n              value: route.params[param]\n            },\n            type: bridge_dasherize(param) + '-changed'\n          };\n          this.ComponentConnector.manager.get(param).next(eventData);\n        }\n      }\n    }\n    /**\n     * Determines if given route maps to a component.\n     *\n     * @param  {Object}  route  Route object.\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"isRoutableComponent\",\n    value: function isRoutableComponent(route) {\n      return this.pages.indexOf(route.name) >= 0;\n    }\n  }, {\n    key: \"loadTemplate\",\n    value: function loadTemplate(name, params) {\n      var cache = this.cache,\n          method = this.method,\n          body = this.body,\n          headers = this.headers,\n          app = this.app,\n          templates = this.templatesPath;\n      var options = {\n        cache: cache,\n        params: params,\n        method: method,\n        body: body,\n        headers: headers\n      };\n      var config = {\n        app: app,\n        templates: templates\n      };\n      return this.PageManager.get(name, options, config);\n    } // @TODO DRY -> sanitizer lo usa tambin\n\n  }, {\n    key: \"loadPolymerWebComponent\",\n    value: function loadPolymerWebComponent(name) {\n      var path = Array(2).fill(\"\".concat(name, \"-page\")).join('/');\n      var component = {\n        spec: {\n          path: \"\".concat(path, \".html\")\n        }\n      };\n      return this.ImportManager.loadComponent(component, this.pagesPath);\n    }\n  }, {\n    key: \"_handleRouteLoading\",\n    value: function _handleRouteLoading(route) {\n      var _this8 = this;\n\n      if (this.isRoutableComponent(route)) {\n        this.createPageFromWebComponent(route.name).then(function () {\n          return _this8.selectPage(route.name, route.params);\n        });\n      } else {\n        this.loadTemplate(route.name, route.params).then(function (response) {\n          return _this8.createTemplate(response);\n        });\n      }\n    }\n  }, {\n    key: \"registerCurrentTemplate\",\n    value: function registerCurrentTemplate(currentTemplate, previousTemplate) {\n      var TEMPLATE_REGISTERED = bridge_externalEventsCodes.TEMPLATE_REGISTERED;\n      var UI = bridge_bindingCodes.UI;\n      var options = this;\n\n      if (previousTemplate && previousTemplate !== currentTemplate) {\n        this.unregisterChildren(previousTemplate, options.binding === UI ? 'DM' : null);\n      }\n\n      this.registerChildren(currentTemplate, options.binding === UI ? 'DM' : null);\n\n      this._updateChannels(previousTemplate, currentTemplate);\n\n      manager_events.emit(TEMPLATE_REGISTERED, {\n        template: currentTemplate.name\n      });\n    } // this function MAY BE OVERRIDE on native bridge - not required due to internal router updateing the context\n\n  }, {\n    key: \"_updateChannels\",\n    value: function _updateChannels(previousTemplate, currentTemplate) {\n      if (this.BridgeChannelManager) {\n        var oldName = previousTemplate ? previousTemplate.name : undefined;\n        this.BridgeChannelManager.updateAppContext(oldName, currentTemplate.name);\n        this.BridgeChannelManager.initPrivateChannel(oldName, currentTemplate.name);\n      }\n    }\n  }, {\n    key: \"registerChildren\",\n    value: function registerChildren(template, type) {\n      for (var index = 0; index < template.children.length; index++) {\n        var component = template.children[index];\n\n        if (type && type === component.type || !type) {\n          this.ComponentConnector.register(component.node, component.connections);\n        }\n      }\n    }\n  }, {\n    key: \"unregisterChildren\",\n    value: function unregisterChildren(template, type) {\n      for (var index = 0; index < template.children.length; index++) {\n        var component = template.children[index];\n\n        if (type && type === component.type || !type) {\n          this.ComponentConnector.unregister(component.node);\n        }\n      }\n    }\n  }, {\n    key: \"registerInConnection\",\n    value: function registerInConnection(channelName, node, callback) {\n      this.ComponentConnector.addSubscription(channelName, node, callback);\n    }\n  }, {\n    key: \"registerOutConnection\",\n    value: function registerOutConnection(channelName, htmlElement, bindName) {\n      this.ComponentConnector.addPublication(channelName, htmlElement, bindName);\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(channels, node) {\n      this.ComponentConnector.unsubscribe(channels, node);\n    }\n  }, {\n    key: \"publish\",\n    value: function publish(channelName, value, options) {\n      this.ComponentConnector.publish(channelName, value);\n    }\n  }, {\n    key: \"navigate\",\n    value: function navigate(page, params) {\n      this.Router.go(page, params);\n    } // dummy methods only for native override\n\n  }, {\n    key: \"navigateToNative\",\n    value: function navigateToNative(page, params) {}\n  }, {\n    key: \"backStep\",\n    value: function backStep() {}\n  }, {\n    key: \"_waitRenderComplete\",\n    value: function _waitRenderComplete(template) {\n      return template.node.updateComplete || Promise.resolve();\n    }\n  }, {\n    key: \"selectPage\",\n    value: function selectPage(name, params) {\n      var _this9 = this;\n\n      var TEMPLATE_REGISTERED = bridge_externalEventsCodes.TEMPLATE_REGISTERED;\n      var template = this.TemplateManager.get(name);\n      var currentTemplate = this.TemplateManager.get(this.TemplateManager.selected);\n      var oldTemplateName = currentTemplate ? currentTemplate.name : null;\n\n      if (this.onRender) {\n        this.onRender(template.node);\n      }\n\n      _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this9._waitRenderComplete(template);\n\n              case 2:\n                _this9._handleParams(template.node, params);\n\n                _this9.TemplateManager.select(name, _this9.BridgeChannelManager, _this9.binding);\n\n                if (_this9.BridgeChannelManager) {\n                  _this9.BridgeChannelManager.updateAppContext(oldTemplateName, name);\n\n                  _this9.BridgeChannelManager.initPrivateChannel(oldTemplateName, name);\n                }\n\n                manager_events.emit(TEMPLATE_REGISTERED, {\n                  template: name\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }, {\n    key: \"_handleParams\",\n    value: function _handleParams(node, params) {\n      var shouldBindParams = node.params && Object.keys(params).length > 0;\n\n      if (shouldBindParams) {\n        node.params = params;\n      }\n    }\n  }, {\n    key: \"selectTemplate\",\n    value: function selectTemplate(name) {\n      var _this10 = this;\n\n      var isPreRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var TEMPLATE_TRANSITION_END = bridge_externalEventsCodes.TEMPLATE_TRANSITION_END;\n      var CURRENTVIEW = bridge_bindingCodes.CURRENTVIEW,\n          UI = bridge_bindingCodes.UI,\n          DELAYED = bridge_bindingCodes.DELAYED;\n      var options = this;\n      var template = this.TemplateManager.get(name);\n      var shouldRender = isPreRendering !== true || this.preRenderingPages[name] === bridge_preRenderState.REQUESTED;\n\n      if ((options.binding === CURRENTVIEW || options.binding === UI) && shouldRender) {\n        // COMPROBAR 5 VECES\n        var currentTemplate = this.TemplateManager.get(this.TemplateManager.selected);\n\n        var onTemplateAnimationFinishes = function onTemplateAnimationFinishes() {\n          return _this10.registerCurrentTemplate(template, currentTemplate);\n        };\n\n        if (template.node.animationCompleteEvent) {\n          manager_events.listenToOnce(template.node, template.node.animationCompleteEvent, onTemplateAnimationFinishes);\n        } else {\n          manager_events.once(TEMPLATE_TRANSITION_END, onTemplateAnimationFinishes);\n        }\n      }\n\n      if (options.onRender) {\n        if (template.fixedChildren.length > 0) {\n          options.onRender(template.node, template.fixedChildren);\n        } else {\n          options.onRender(template.node);\n        }\n      } // 10. Shows the template created if it is not pre rendering or\n      // if it's a pre-rendered page that has been requested\n\n\n      if (isPreRendering) {\n        delete this.preRenderingPages[name];\n      }\n\n      if (shouldRender) {\n        var animateTemplate = function animateTemplate() {\n          return _this10.TemplateManager.select(name, _this10.BridgeChannelManager, options.binding);\n        };\n\n        if (options.binding === DELAYED) {\n          this._idleCallback(animateTemplate);\n        } else {\n          animateTemplate();\n        }\n      }\n    }\n  }, {\n    key: \"_idleCallback\",\n    value: function _idleCallback(fn) {\n      this.BridgeChannelManager.getIdleCallbackChannel().subscribe(fn);\n    }\n    /**\n     *\n     * It subscribe the main node to an event channel.\n     *\n     * @param {*} eventName is the name of the event to subscribe\n     * @param {*} callback is the function to call when the event channel is activated with a new value\n     */\n\n  }, {\n    key: \"subscribeToEvent\",\n    value: function subscribeToEvent(eventName, callback) {\n      if (this.externalEvents.indexOf(eventName) < 0) {\n        console.warn('Trying to subscribe to a non existing event: ', eventName);\n        return;\n      }\n\n      if (typeof callback !== 'function') {\n        console.warn('You must provide a function callback to subscribe to the event: ', eventName);\n        return;\n      }\n\n      var mainNode = this.getMainNode();\n      this.BridgeChannelManager.subscribeToEvent(mainNode, eventName, callback);\n    }\n  }, {\n    key: \"getMainNode\",\n    value: function getMainNode() {\n      if (!this.__mainNodeElement) {\n        this.__mainNodeElement = document.querySelector('#' + this.mainNode);\n      }\n\n      return this.__mainNodeElement;\n    }\n  }, {\n    key: \"_resetBridgeChannels\",\n    value: function _resetBridgeChannels() {\n      var cleanPrivateChannels = true;\n      this.BridgeChannelManager.resetBridgeChannels(this.getMainNode(), cleanPrivateChannels);\n    }\n    /**\n     *\n     * Performs a logout action. It resets all channels, removes templates from DOM\n     * and redirects to the initial page\n     *\n     */\n\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      if (this.TemplateManager.selected === this.initialTemplate) {\n        return;\n      } // clean up current page\n\n\n      this.BridgeChannelManager.publishPrivatePageStatus(this.TemplateManager.selected, false);\n\n      this._resetBridgeChannels();\n\n      this.TemplateManager.removeTemplateChildrens(this.crossContainerId);\n      this.TemplateManager.removeTemplates(undefined, this.crossContainerId);\n\n      this._initEventChannels();\n\n      if (this.composerEngine) {\n        this.composerEngine.reset();\n      }\n\n      this.Router.init();\n      this.Router.go(this.initialTemplate);\n    }\n  }]);\n\n  return CellsBridge;\n}();\n\n/* harmony default export */ var core_bridge = (bridge_CellsBridge);\n// CONCATENATED MODULE: ./src/polymer/component-connector.js\nfunction polymer_component_connector_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction polymer_component_connector_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction polymer_component_connector_createClass(Constructor, protoProps, staticProps) { if (protoProps) polymer_component_connector_defineProperties(Constructor.prototype, protoProps); if (staticProps) polymer_component_connector_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction component_connector_possibleConstructorReturn(self, call) { if (call && (component_connector_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return component_connector_assertThisInitialized(self); }\n\nfunction component_connector_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction component_connector_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { component_connector_get = Reflect.get; } else { component_connector_get = function _get(target, property, receiver) { var base = component_connector_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return component_connector_get(target, property, receiver || target); }\n\nfunction component_connector_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = component_connector_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction component_connector_getPrototypeOf(o) { component_connector_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return component_connector_getPrototypeOf(o); }\n\nfunction component_connector_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) component_connector_setPrototypeOf(subClass, superClass); }\n\nfunction component_connector_setPrototypeOf(o, p) { component_connector_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return component_connector_setPrototypeOf(o, p); }\n\nfunction component_connector_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { component_connector_typeof = function _typeof(obj) { return typeof obj; }; } else { component_connector_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return component_connector_typeof(obj); }\n\n\n\nvar _dashToCamelCase = function _dashToCamelCase(input) {\n  return input.toLowerCase().replace(/-(.)/g, function (match, group1) {\n    return group1.toUpperCase();\n  });\n};\n\nvar _getProperyChangedName = function _getProperyChangedName(name) {\n  var propertyName;\n  var EVENT_CHANGED = '-changed';\n\n  if (name.indexOf(EVENT_CHANGED, name.length - EVENT_CHANGED.length) !== -1) {\n    propertyName = name.slice(0, -EVENT_CHANGED.length);\n    propertyName = _dashToCamelCase(propertyName);\n  }\n\n  return propertyName;\n}; // Hell to test:\n\n\nvar _parseActionInEvent = function _parseActionInEvent(evt, targetPath, target, litElement) {\n  var path;\n  var value; // Check if event is because of property changed.\n\n  var propertyName = _getProperyChangedName(evt.type);\n\n  if (propertyName && evt.detail && evt.detail.hasOwnProperty('value')) {\n    value = evt.detail.value;\n    targetPath = targetPath || propertyName;\n\n    if (evt.detail.path) {\n      path = evt.detail.path.replace(propertyName, targetPath);\n    } else {\n      path = targetPath;\n    }\n  } else {\n    path = targetPath;\n    value = evt.detail;\n  }\n\n  if (target !== undefined && target.is === undefined && component_connector_typeof(value) === 'object') {\n    if (Polymer && Polymer.Element === undefined && !litElement) {\n      value = JSON.stringify(value);\n    } else {\n      /* istanbul ignore else */\n      if ((Polymer && Polymer.Element && target instanceof Polymer.Element) === false && !litElement) {\n        value = JSON.stringify(value);\n      }\n    }\n  }\n\n  return {\n    path: path,\n    value: value,\n    property: targetPath\n  };\n};\n\nvar CellsPolymerComponentConnector = /*#__PURE__*/function (_CellsComponentConnec) {\n  component_connector_inherits(CellsPolymerComponentConnector, _CellsComponentConnec);\n\n  function CellsPolymerComponentConnector() {\n    polymer_component_connector_classCallCheck(this, CellsPolymerComponentConnector);\n\n    return component_connector_possibleConstructorReturn(this, component_connector_getPrototypeOf(CellsPolymerComponentConnector).apply(this, arguments));\n  }\n\n  polymer_component_connector_createClass(CellsPolymerComponentConnector, [{\n    key: \"wrapCallback\",\n    value: function wrapCallback(node, bindName) {\n      return function (evt) {\n        var _idleCallback = function _idleCallback(fn) {\n          setTimeout(function () {\n            if ('requestIdleCallback' in window) {\n              window.requestIdleCallback(fn);\n            } else {\n              setTimeout(fn, 1);\n            }\n          }, 100);\n        };\n\n        var checkDispatchActionType = function (mutations, observerObject) {\n          var isPolymerElement = this._isPolymerElement(node);\n\n          var isLitElement = this._isLitElement(node);\n          /* istanbul ignore else */\n\n\n          if (isPolymerElement || isLitElement) {\n            if (typeof bindName === 'function') {\n              this._dispatchActionFunction(evt, node, bindName);\n            } else {\n              if (typeof node[bindName] === 'function') {\n                this._dispatchActionFunction(evt, node, bindName);\n              } else {\n                this._dispatchActionProperty(evt, node, bindName, isLitElement);\n              }\n            }\n            /* istanbul ignore else */\n\n\n            if (observerObject) {\n              observerObject.disconnect();\n            }\n          } else {\n            _idleCallback(checkDispatchActionType);\n          }\n        }.bind(this);\n\n        if (this._isPolymerElement(node) || this._isLitElement(node)) {\n          checkDispatchActionType();\n        } else {\n          var observer = new MutationObserver(checkDispatchActionType);\n          var config = {\n            attributes: false,\n            childList: true,\n            characterData: true\n          };\n          observer.observe(node, config);\n\n          _idleCallback(checkDispatchActionType, 100);\n        }\n      }.bind(this);\n    }\n    /**\n     * Return the version of Polymer instance if the node is a Polymer element.\n     * Return -1 if if the node is not a Polymer element.\n     *\n     * @param {Element} node\n     */\n\n  }, {\n    key: \"_whichPolymerVersion\",\n    value: function _whichPolymerVersion(node) {\n      var version = -1;\n\n      if (Polymer && Polymer.Element !== undefined && (node instanceof Polymer.Element || node instanceof Polymer.LegacyElementMixin)) {\n        version = 2;\n      } else {\n        /* istanbul ignore else */\n        if (node.__isPolymerInstance__ !== undefined) {\n          version = 1;\n        }\n      }\n\n      return version;\n    }\n    /**\n     * Return true if the node is instance of a Polymer element, otherwise return false.\n     *\n     * @param {Element} node\n     */\n\n  }, {\n    key: \"_isPolymerElement\",\n    value: function _isPolymerElement(node) {\n      return this._whichPolymerVersion(node) > 0;\n    }\n  }, {\n    key: \"_isLitElement\",\n    value: function _isLitElement(node) {\n      var tagName = node.tagName;\n      var normalizedTagName = tagName.toLowerCase();\n      var _window = window,\n          customElements = _window.customElements;\n      return customElements && !!customElements.get(normalizedTagName);\n    }\n    /**\n     * Returns true if the event has reached the node that is listening the event\n     *\n     * @param {Event} event\n     */\n\n  }, {\n    key: \"_isEventAtTarget\",\n    value: function _isEventAtTarget(event) {\n      var atTarget;\n\n      if (\n      /** For Polymer 2 **/\n      Polymer && Polymer.Settings && (Polymer.Settings.hasShadow === false ||\n      /** For Polymer 2 **/\n      Polymer.Settings.useShadow === false)) {\n        var normalizedEvent = Polymer.dom(event);\n        atTarget = normalizedEvent.localTarget === event.currentTarget;\n      } else {\n        atTarget = component_connector_get(component_connector_getPrototypeOf(CellsPolymerComponentConnector.prototype), \"_isEventAtTarget\", this).call(this, event);\n      }\n\n      return atTarget;\n    }\n  }, {\n    key: \"_dispatchActionFunction\",\n    value: function _dispatchActionFunction(evt, target, method) {\n      var propertyName = _getProperyChangedName(evt.type);\n\n      var payload;\n\n      if (propertyName && evt.detail && evt.detail.hasOwnProperty('value')) {\n        if (Polymer && Polymer.dom(evt).rootTarget) {\n          payload = Polymer.dom(evt).rootTarget[propertyName];\n        } else {\n          payload = evt.detail.value;\n        }\n      } else {\n        payload = evt.detail;\n      } //TODO: Review to see if we actually want to show this warning.\n\n\n      if (this.bridge && this.bridge.debug && this.bridge.parsePayload && ('' + target[method]).indexOf('.data') > -1) {\n        payload = this.bridge.parsePayload(evt.detail);\n        console.warn('%c' + target.tagName + '%c is using an incompatible payload data in ' + method, 'background: #ff9800; color: white; padding: 4px 4px 4px 10px', 'background: #ff9800; color: rgba(255,255,255,0.9); padding: 4px 10px 4px 0');\n      }\n\n      if (typeof method === 'function') {\n        method(payload);\n      } else {\n        target[method](payload);\n      }\n    }\n  }, {\n    key: \"_getTargetProperties\",\n    value: function _getTargetProperties(target) {\n      var props;\n\n      if (target.constructor.config) {\n        props = target.constructor.config.properties;\n      } else if (target.constructor._properties) {\n        props = target.constructor._properties;\n      }\n\n      return props;\n    }\n  }, {\n    key: \"_dispatchActionProperty\",\n    value: function _dispatchActionProperty(evt, target, property, litElement) {\n      var info;\n\n      var data = _parseActionInEvent(evt, property, target, litElement); //check if it's a LitElement\n\n\n      if (target.updateComplete instanceof Promise && typeof target.render === 'function') {\n        //return target[data.property] = target.constructor._classProperties.get(data.property).type(data.value);\n        return target[data.property] = data.value;\n      }\n\n      if (target && target.constructor._finalize) {\n        var isProperty = target.constructor.properties[data.property];\n\n        if (isProperty) {\n          target[data.property] = data.value;\n          return;\n        } else {\n          return this._handleAttribute(target, data);\n        }\n      } //check if target is an instance of Polymer Element to check if is a polymer 2 element\n\n\n      if (target && target.getPropertyInfo || Polymer.Element !== undefined && target instanceof Polymer.Element === false) {\n        if (target.getPropertyInfo) {\n          info = target.getPropertyInfo(data.property);\n        } else {\n          info = this._getTargetProperties(target)[data.property];\n        }\n        /* istanbul ignore else */\n\n\n        if (info && info.defined && !info.readOnly && !info.computed) {\n          return target.set(data.path, data.value);\n        }\n      } //check if target is an instance of Polymer Element to check if is a polymer 2 element\n\n\n      if (target && target.getPropertyInfo === undefined || Polymer.Element !== undefined && target instanceof Polymer.Element === false) {\n        info = this._getTargetProperties(target) !== undefined ? this._getTargetProperties(target)[data.property] : undefined;\n        /* istanbul ignore else */\n\n        if (info && !info.readOnly && !info.computed) {\n          return target.set(data.path, data.value);\n        }\n      }\n\n      return this._handleAttribute(target, data);\n    }\n  }, {\n    key: \"_handleAttribute\",\n    value: function _handleAttribute(target, _ref) {\n      var value = _ref.value,\n          path = _ref.path;\n\n      // check if target property is a boolean one and current value is false.\n      // it expects to remove the attribute (as it's a boolean one)\n      if (typeof value === 'boolean' && !value) {\n        return target.removeAttribute(path);\n      }\n\n      return target.setAttribute(path, value);\n    }\n  }, {\n    key: \"register\",\n    value: function register(node, connections) {\n      component_connector_get(component_connector_getPrototypeOf(CellsPolymerComponentConnector.prototype), \"register\", this).call(this, node, connections);\n\n      if (!node || !connections) {\n        return;\n      }\n\n      if (node.__isCellsConnected) {\n        return;\n      }\n      /* istanbul ignore else */\n\n\n      if (connections[\"in\"]) {\n        for (var action in connections[\"in\"]) {\n          if (connections[\"in\"].hasOwnProperty(action)) {\n            /* istanbul ignore else */\n            if (this.manager.get(action)._events[0]) {\n              /* istanbul ignore else */\n              if (connections.ignoreAttr) {\n                connections.ignoreAttr.push(connections[\"in\"][action].bind);\n              } else {\n                connections.ignoreAttr = [connections[\"in\"][action].bind];\n              }\n            }\n          }\n        }\n      }\n      /* istanbul ignore else */\n\n\n      if (connections.out) {\n        for (var _action in connections.out) {\n          if (connections.out.hasOwnProperty(_action)) {\n            var attrName = _getProperyChangedName(connections.out[_action].bind);\n\n            var polymerVersion = this._whichPolymerVersion(node);\n\n            if (polymerVersion === 2) {\n              /* istanbul ignore else */\n              if (attrName && node.__data && !this.manager.get(_action)._events[0]) {\n                /* istanbul ignore else */\n                if (node && node._hasReadOnlyEffect) {\n                  /* istanbul ignore else */\n                  if (!node._hasReadOnlyEffect(attrName) && !node._hasComputedEffect(attrName)) {\n                    var oldValue = node[attrName];\n                    node.__data[attrName] = undefined;\n                    node[attrName] = oldValue;\n                  }\n                }\n              }\n            } else {\n              /* istanbul ignore else */\n              if (attrName && node.__data__ && !this.manager.get(_action)._events[0]) {\n                /* istanbul ignore else */\n                if (node && node.getPropertyInfo) {\n                  var info = node.getPropertyInfo(attrName);\n                  /* istanbul ignore else */\n\n                  if (info.defined && !info.readOnly && !info.computed) {\n                    var _oldValue = node[attrName]; // remove polymer internal current value to trigger model changes\n\n                    node.__data__[attrName] = undefined;\n                    node[attrName] = _oldValue;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n\n      node.__isCellsConnected = true;\n    }\n  }]);\n\n  return CellsPolymerComponentConnector;\n}(component_connector);\n\n\n// CONCATENATED MODULE: ./src/polymer/resolution-checker.js\nfunction isPolymerElementUnresolved(node) {\n  var isCustomElement = node.tagName.indexOf('-') > -1;\n  var isPolymer1 = node.__isPolymerInstance__ === true;\n  var isPolymer2 = Polymer.Element !== undefined && node instanceof Polymer.Element || Polymer.ElementMixin !== undefined && node instanceof Polymer.ElementMixin || Polymer.LegacyElementMixin !== undefined && node instanceof Polymer.LegacyElementMixin || node.is !== undefined && node.ready !== undefined && node.notifyPath !== undefined;\n  var isLitElement = node.updateComplete instanceof Promise && typeof node.render === 'function';\n  return isCustomElement && !isPolymer1 && !isPolymer2 && !isLitElement;\n}\n/* harmony default export */ var resolution_checker = ({\n  isPolymerElementUnresolved: isPolymerElementUnresolved\n});\n// CONCATENATED MODULE: ./src/polymer/template.js\nfunction polymer_template_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { polymer_template_typeof = function _typeof(obj) { return typeof obj; }; } else { polymer_template_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return polymer_template_typeof(obj); }\n\nfunction polymer_template_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction polymer_template_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction polymer_template_createClass(Constructor, protoProps, staticProps) { if (protoProps) polymer_template_defineProperties(Constructor.prototype, protoProps); if (staticProps) polymer_template_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction polymer_template_possibleConstructorReturn(self, call) { if (call && (polymer_template_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return polymer_template_assertThisInitialized(self); }\n\nfunction polymer_template_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction polymer_template_getPrototypeOf(o) { polymer_template_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return polymer_template_getPrototypeOf(o); }\n\nfunction polymer_template_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) polymer_template_setPrototypeOf(subClass, superClass); }\n\nfunction polymer_template_setPrototypeOf(o, p) { polymer_template_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return polymer_template_setPrototypeOf(o, p); }\n\n\n\n\nvar template_PolymerTemplate = /*#__PURE__*/function (_CellsBridgeTemplate) {\n  polymer_template_inherits(PolymerTemplate, _CellsBridgeTemplate);\n\n  function PolymerTemplate() {\n    polymer_template_classCallCheck(this, PolymerTemplate);\n\n    return polymer_template_possibleConstructorReturn(this, polymer_template_getPrototypeOf(PolymerTemplate).apply(this, arguments));\n  }\n\n  polymer_template_createClass(PolymerTemplate, [{\n    key: \"isUnresolved\",\n    value: function isUnresolved() {\n      return isPolymerElementUnresolved(this.node);\n    }\n  }]);\n\n  return PolymerTemplate;\n}(CellsBridgeTemplate);\n\n\n// CONCATENATED MODULE: ./src/polymer/manager/template.js\nfunction manager_template_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { manager_template_typeof = function _typeof(obj) { return typeof obj; }; } else { manager_template_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return manager_template_typeof(obj); }\n\nfunction polymer_manager_template_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction polymer_manager_template_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction polymer_manager_template_createClass(Constructor, protoProps, staticProps) { if (protoProps) polymer_manager_template_defineProperties(Constructor.prototype, protoProps); if (staticProps) polymer_manager_template_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction manager_template_possibleConstructorReturn(self, call) { if (call && (manager_template_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return manager_template_assertThisInitialized(self); }\n\nfunction manager_template_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction manager_template_getPrototypeOf(o) { manager_template_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return manager_template_getPrototypeOf(o); }\n\nfunction manager_template_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) manager_template_setPrototypeOf(subClass, superClass); }\n\nfunction manager_template_setPrototypeOf(o, p) { manager_template_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return manager_template_setPrototypeOf(o, p); }\n\n\n\n\nvar template_PolymerTemplateManager = /*#__PURE__*/function (_CellsManagerTemplate) {\n  manager_template_inherits(PolymerTemplateManager, _CellsManagerTemplate);\n\n  function PolymerTemplateManager() {\n    polymer_manager_template_classCallCheck(this, PolymerTemplateManager);\n\n    return manager_template_possibleConstructorReturn(this, manager_template_getPrototypeOf(PolymerTemplateManager).apply(this, arguments));\n  }\n\n  polymer_manager_template_createClass(PolymerTemplateManager, [{\n    key: \"_createCellsTemplate\",\n    value: function _createCellsTemplate(name, spec) {\n      var cellsTemplate = new template_PolymerTemplate(spec);\n\n      var cellsTemplateConfig = this._createCellsTemplateConfig(name);\n\n      cellsTemplate.config(cellsTemplateConfig);\n      return cellsTemplate;\n    }\n  }, {\n    key: \"_createCellsTemplateConfig\",\n    value: function _createCellsTemplateConfig(name) {\n      return {\n        name: name,\n        template: {\n          id: this.parseTemplateId(name),\n          name: this.parseTemplateName(name)\n        }\n      };\n    }\n  }]);\n\n  return PolymerTemplateManager;\n}(manager_template);\n\n\n// CONCATENATED MODULE: ./src/polymer/component.js\nfunction polymer_component_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { polymer_component_typeof = function _typeof(obj) { return typeof obj; }; } else { polymer_component_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return polymer_component_typeof(obj); }\n\nfunction polymer_component_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction polymer_component_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction polymer_component_createClass(Constructor, protoProps, staticProps) { if (protoProps) polymer_component_defineProperties(Constructor.prototype, protoProps); if (staticProps) polymer_component_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction polymer_component_possibleConstructorReturn(self, call) { if (call && (polymer_component_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return polymer_component_assertThisInitialized(self); }\n\nfunction polymer_component_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction polymer_component_getPrototypeOf(o) { polymer_component_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return polymer_component_getPrototypeOf(o); }\n\nfunction polymer_component_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) polymer_component_setPrototypeOf(subClass, superClass); }\n\nfunction polymer_component_setPrototypeOf(o, p) { polymer_component_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return polymer_component_setPrototypeOf(o, p); }\n\n\n\n\nvar component_PolymerComponent = /*#__PURE__*/function (_CellsBridgeComponent) {\n  polymer_component_inherits(PolymerComponent, _CellsBridgeComponent);\n\n  function PolymerComponent() {\n    polymer_component_classCallCheck(this, PolymerComponent);\n\n    return polymer_component_possibleConstructorReturn(this, polymer_component_getPrototypeOf(PolymerComponent).apply(this, arguments));\n  }\n\n  polymer_component_createClass(PolymerComponent, [{\n    key: \"isUnresolved\",\n    value: function isUnresolved() {\n      return isPolymerElementUnresolved(this.node);\n    }\n  }]);\n\n  return PolymerComponent;\n}(CellsBridgeComponent);\n\n\n// CONCATENATED MODULE: ./src/polymer/bridge.js\nfunction polymer_bridge_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { polymer_bridge_typeof = function _typeof(obj) { return typeof obj; }; } else { polymer_bridge_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return polymer_bridge_typeof(obj); }\n\nfunction polymer_bridge_extends() { polymer_bridge_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return polymer_bridge_extends.apply(this, arguments); }\n\nfunction polymer_bridge_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction polymer_bridge_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction polymer_bridge_createClass(Constructor, protoProps, staticProps) { if (protoProps) polymer_bridge_defineProperties(Constructor.prototype, protoProps); if (staticProps) polymer_bridge_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction bridge_possibleConstructorReturn(self, call) { if (call && (polymer_bridge_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return bridge_assertThisInitialized(self); }\n\nfunction bridge_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction bridge_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { bridge_get = Reflect.get; } else { bridge_get = function _get(target, property, receiver) { var base = bridge_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return bridge_get(target, property, receiver || target); }\n\nfunction bridge_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = bridge_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction bridge_getPrototypeOf(o) { bridge_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return bridge_getPrototypeOf(o); }\n\nfunction bridge_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) bridge_setPrototypeOf(subClass, superClass); }\n\nfunction bridge_setPrototypeOf(o, p) { bridge_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return bridge_setPrototypeOf(o, p); }\n\n\n\n\n\n\n\nvar bridge_CellsPolymerBridge = /*#__PURE__*/function (_CellsBridge) {\n  bridge_inherits(CellsPolymerBridge, _CellsBridge);\n\n  function CellsPolymerBridge(config) {\n    var _this;\n\n    polymer_bridge_classCallCheck(this, CellsPolymerBridge);\n\n    _this = bridge_possibleConstructorReturn(this, bridge_getPrototypeOf(CellsPolymerBridge).call(this, config));\n\n    if (Polymer && config.avoidPolymerEventCache === true) {\n      var origGetEvent = Polymer.Base._getEvent;\n\n      Polymer.Base._getEvent = function (type, bubbles, cancelable) {\n        return origGetEvent(type, bubbles, cancelable, false);\n      };\n    }\n\n    return _this;\n  }\n\n  polymer_bridge_createClass(CellsPolymerBridge, [{\n    key: \"_initDependencies\",\n    value: function _initDependencies(dependencies) {\n      dependencies = polymer_bridge_extends({\n        ComponentConnector: CellsPolymerComponentConnector,\n        TemplateManager: template_PolymerTemplateManager\n      }, dependencies);\n\n      bridge_get(bridge_getPrototypeOf(CellsPolymerBridge.prototype), \"_initDependencies\", this).call(this, dependencies);\n    }\n  }, {\n    key: \"_createCellsComponent\",\n    value: function _createCellsComponent(spec, context) {\n      var cmp = new component_PolymerComponent(spec, context);\n\n      if (spec.featureFlag) {\n        feature_flag_component.extend(cmp, this);\n      }\n\n      return cmp;\n    }\n  }]);\n\n  return CellsPolymerBridge;\n}(core_bridge);\n\n\n// CONCATENATED MODULE: ./src/native/constants.js\n/**\n * @constant\n * @desc Operations between NATIVE and HTML bridges\n * @type {Object}\n * @property {String}  SYNC_CHANNELS_DATA         - Sync channels\n * @property {String}  RESET_CHANNELS_DATA        - Reset channels\n * @property {Object}  NATIVE                     - From NATIVE TO HTML\n * @property {String}  NATIVE.BACK_STEP           - Back\n * @property {String}  NATIVE.NAVIGATION          - Navigate\n * @property {String}  NATIVE.RESET_WEBVIEW       - Performs a Logout\n * @property {Object}  HTML                       - From HTML to NATIVE\n * @property {String}  HTML.BACK_STEP             - Back\n * @property {String}  HTML.NAVIGATION            - Navigate\n */\nvar OPERATIONS = {\n  SYNC_CHANNELS_DATA: 'channels',\n  RESET_CHANNELS_DATA: 'reset-channels',\n  NATIVE: {\n    BACK_STEP: 'back',\n    NAVIGATION: 'nav',\n    RESET_WEBVIEW: 'reset-webview',\n    LOGOUT: 'logout',\n    UPDATE_SKIP_NAVIGATIONS: 'skip-nav'\n  },\n  HTML: {\n    BACK_STEP: 'pop',\n    NAVIGATION: 'push',\n    NAVIGATION_AND_REPLACE: 'popAndPush',\n    BRIDGE_READY: 'bridgeReady',\n    PAGE_LOADED: 'pageLoaded',\n    PAGE_UNLOADED: 'pageUnloaded'\n  }\n};\nvar EVENTS = {\n  /**\n   * HTML -> Native channel sync\n   * @event NATIVE_CHANNEL_SYNC\n   */\n  NATIVE_CHANNEL_SYNC: 'native-channel-sync',\n\n  /**\n   * Native back navigation request event.\n   * @event NATIVE_BACKSTEP_REQUEST\n   */\n  NATIVE_BACKSTEP_REQUEST: 'native-backstep-request',\n\n  /**\n   * Native navigation request event.\n   * @event NATIVE_NAVIGATION_REQUEST\n   * @type {object}\n   * @property {Event} event - Indicates the page to navigate.\n   * @property {Object} detail - Indicates the page to navigate.\n   * @property {String} detail.page - Indicates the page to navigate.\n   */\n  NATIVE_NAVIGATION_REQUEST: 'native-nav-request',\n\n  /**\n   * Internal cells-bridge navigation event.\n   * @event INTERNAL_ROUTER_NAVIGATION\n   * @type {object}\n   * @property {Event} event - Indicates the page to navigate.\n   * @property {Object} detail - Indicates the page to navigate.\n   * @property {String} detail.page - Indicates the page to navigate.\n   */\n  INTERNAL_ROUTER_NAVIGATION: 'nav-request',\n\n  /**\n   * Internal cells-native-bridge back navigation request event.\n   * @event INTERNAL_ROUTER_BACKSTEP\n   * @type {object}\n   * @property {String} page - Indicates the page to navigate.\n   */\n  INTERNAL_ROUTER_BACKSTEP: 'backstep',\n\n  /**\n   * Internal cells-native-bridge back navigation request event from native page.\n   * @event INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE\n   * @type {object}\n   * @property {String} page - Indicates the page to navigate.\n   */\n  INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE: 'backstep-from-native',\n\n  /**\n   * Back Request from native event\n   * @event ROUTER_BACKSTEP\n   * @type {object}\n    * @property {Boolean} paylwillAppearoad - Androis flag Web will be shown.\n   */\n  ROUTER_BACKSTEP: 'backstep-request',\n\n  /**\n   * Navigation request from native event.\n   * @event ROUTER_NAVIGATION\n   * @type {object}\n   * @property {String} page - Name of the page to natigate.\n   */\n  ROUTER_NAVIGATION: 'external-nav-request',\n\n  /**\n   * Request from native event to reset the web view.\n   * @event RESET_WEBVIEW\n   */\n  RESET_WEBVIEW: 'reset-webview',\n\n  /**\n   *  request from native event.\n   * @event NATIVE_LOGOUT\n   */\n  NATIVE_LOGOUT: 'native-logout',\n\n  /**\n   *  request from native event.\n   * @event UPDATE_SKIP_NAVIGATIONS\n   */\n  UPDATE_SKIP_NAVIGATIONS: 'update-skip-navigations',\n\n  /**\n   * Channels syncronization from native event.\n   * @event SYNC_CHANNELS_DATA\n   * @type {object}\n   * @property {Channel[]} channels - Array of channels to sync.\n   */\n  SYNC_CHANNELS_DATA: 'sync-channels-data',\n  PRIVATE: {\n    SYNC_CHANNELS_DATA: '__cells-data-sync',\n    ROUTER_NAVIGATION: '__cells-nav-request'\n  }\n};\n/**\n * @constant\n * @desc Keys of declared Objects\n * @type {Object}\n * @property {String}  NATIVE_CHANNEL - Key of the native connector\n */\n\nvar KEYS = {\n  NATIVE_CHANNEL: 'NativeBridge',\n  NATIVE_PLUGIN_CHANNEL: 'PluginBridge'\n};\n/**\n * @constant\n * @desc Prefixes used in cells-native-bridge\n * @type {Object}\n * @property {String}  NATIVE_ROUTE - Prefix of native routes in Routers\n * @property {String}  PRIVATE_CHANNEL - Prefix of private channels in ComponentConnector\n */\n\nvar PREFIX = {\n  NATIVE_ROUTE: 'cells-native-route:',\n  PRIVATE_CHANNEL: '__bridge_'\n};\nvar PLUGIN_RESPONSE_STATUS = {\n  SUCCESS: 0,\n  ERROR: 1\n};\nvar PLUGIN_RESPONSE_CALLBACKS = {\n  SUCCESS_ACCESSOR: 'success',\n  FAIL_ACCESSOR: 'fail'\n};\n/* harmony default export */ var native_constants = ({\n  OPERATIONS: OPERATIONS,\n  EVENTS: EVENTS,\n  KEYS: KEYS,\n  PREFIX: PREFIX,\n  PLUGIN_RESPONSE_STATUS: PLUGIN_RESPONSE_STATUS,\n  PLUGIN_RESPONSE_CALLBACKS: PLUGIN_RESPONSE_CALLBACKS\n});\n/**\n * @typedef {Object} Channel\n * @property {String} name - The channel name\n * @property {any} payload - The channel content\n */\n\n/**\n * @typedef {Object} Link\n * @property {Link} page - The page name\n */\n\n/**\n * @typedef {Object} Connection\n * @property {Link} link - The web link definition\n * @property {Link} nativeLink - The native link definition\n */\n// CONCATENATED MODULE: ./src/native/component-connector.js\nfunction native_component_connector_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { native_component_connector_typeof = function _typeof(obj) { return typeof obj; }; } else { native_component_connector_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return native_component_connector_typeof(obj); }\n\nfunction native_component_connector_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction native_component_connector_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction native_component_connector_createClass(Constructor, protoProps, staticProps) { if (protoProps) native_component_connector_defineProperties(Constructor.prototype, protoProps); if (staticProps) native_component_connector_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction native_component_connector_possibleConstructorReturn(self, call) { if (call && (native_component_connector_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return native_component_connector_assertThisInitialized(self); }\n\nfunction native_component_connector_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction native_component_connector_getPrototypeOf(o) { native_component_connector_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return native_component_connector_getPrototypeOf(o); }\n\nfunction native_component_connector_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) native_component_connector_setPrototypeOf(subClass, superClass); }\n\nfunction native_component_connector_setPrototypeOf(o, p) { native_component_connector_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return native_component_connector_setPrototypeOf(o, p); }\n\n\n\n\nvar PRIVATE_EVENTS = EVENTS.PRIVATE;\n/**\n * Class to connect components throuhg the Pub/Sub\n * @extends CellsPolymerComponentConnector\n */\n\nvar component_connector_CellsNativeComponentConnector = /*#__PURE__*/function (_CellsPolymerComponen) {\n  native_component_connector_inherits(CellsNativeComponentConnector, _CellsPolymerComponen);\n\n  function CellsNativeComponentConnector() {\n    native_component_connector_classCallCheck(this, CellsNativeComponentConnector);\n\n    return native_component_connector_possibleConstructorReturn(this, native_component_connector_getPrototypeOf(CellsNativeComponentConnector).apply(this, arguments));\n  }\n\n  native_component_connector_createClass(CellsNativeComponentConnector, [{\n    key: \"handleI18n\",\n    value: function handleI18n(cb) {\n      this.manager.get(\"\".concat(this.getNativeEventChannelPrefix(), \"locales\")).subscribe(cb);\n    }\n  }, {\n    key: \"handleConfig\",\n    value: function handleConfig(cb) {\n      this.manager.get(\"\".concat(this.getNativeEventChannelPrefix(), \"config\")).subscribe(cb);\n    }\n  }, {\n    key: \"handleAppLoad\",\n    value: function handleAppLoad(cb) {\n      this.manager.get(\"\".concat(this.getNativeEventChannelPrefix(), \"app_loaded\")).subscribe(cb);\n    }\n  }, {\n    key: \"handleAppContextChange\",\n    value: function handleAppContextChange(cb) {\n      this.manager.get(this.getAppContextChannelName()).subscribe(cb);\n    }\n  }, {\n    key: \"getNativeEventChannelPrefix\",\n    value: function getNativeEventChannelPrefix() {\n      return '__native_bridge_evt_';\n    }\n  }, {\n    key: \"getAppContextChannelName\",\n    value: function getAppContextChannelName() {\n      return '__bridge_app';\n    }\n    /**\n     * Get all valid public channels from bridge channel manager.\n     *\n     * @return {Channel[]} Array of public channels with valid value.\n     */\n\n  }, {\n    key: \"getChannels\",\n    value: function getChannels() {\n      //@TODO: getPublicChannels\n      var publicChannels = this._getPublicChannels(this.manager.channels);\n\n      return publicChannels.filter(this._isValidChannel.bind(this));\n    }\n  }, {\n    key: \"getChannel\",\n    value: function getChannel(channelName) {\n      return this._getChannel(channelName, this.manager.channels);\n    }\n    /**\n     * Get all valid channels from bridge channel manager.\n     *\n     * @return {Channel[]} Array of channels with valid value.\n     */\n\n  }, {\n    key: \"getAllChannels\",\n    value: function getAllChannels() {\n      var channels = this._getChannels(this.manager.channels);\n\n      return channels.filter(this._isValidChannel.bind(this));\n    }\n    /**\n     * Get all channels from given channels string array.\n     *\n     * @param  {Array} channels Channel names array.\n     * @return {Array}          Channels object array.\n     */\n\n  }, {\n    key: \"_getChannels\",\n    value: function _getChannels(channels) {\n      var _this = this;\n\n      var channelNames = Object.keys(channels);\n      return channelNames.map(function (channelName) {\n        return _this._getChannel(channelName, channels);\n      });\n    }\n    /**\n     * Get all public channels from given channels string array.\n     *\n     * @param  {Array} channels Channel names array.\n     * @return {Array}          Channels object array.\n     */\n\n  }, {\n    key: \"_getPublicChannels\",\n    value: function _getPublicChannels(channels) {\n      var _this2 = this;\n\n      var channelNames = Object.keys(channels);\n      var publicChannels = channelNames.filter(this._isPublicChannel);\n      return publicChannels.map(function (channelName) {\n        return _this2._getChannel(channelName, channels);\n      });\n    }\n    /**\n     * Decides if given channel name is a public channel.\n     *\n     * @param  {String}  channelName Name of channel.\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"_isPublicChannel\",\n    value: function _isPublicChannel(channelName) {\n      return !channelName.startsWith(PREFIX.PRIVATE_CHANNEL);\n    }\n    /**\n     * Get channel object based on given channel name and channels array.\n     *\n     * @param  {String} channelName Channel name.\n     * @param  {Array} channels     Array of channels.\n     * @return {Object}             Channel object.\n     */\n\n  }, {\n    key: \"_getChannel\",\n    value: function _getChannel(channelName, channels) {\n      var channel = channels[channelName];\n      return {\n        name: channelName,\n        payload: this._getChannelPayload(channel)\n      };\n    }\n    /**\n     * Gets payload from given channel.\n     *\n     * @param  {Object} channel Channel objet.\n     * @return {Object}         Channel payload.\n     */\n\n  }, {\n    key: \"_getChannelPayload\",\n    value: function _getChannelPayload(channel) {\n      return channel._events[0] && channel._events[0].detail;\n    }\n    /**\n     * Decides if given channel object is a valid channel: Has payload, has content, and is not an HTML Element.\n     *\n     * @param  {Object}  channel Channel object.\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"_isValidChannel\",\n    value: function _isValidChannel(channel) {\n      return this._hasPayload(channel) && !this._hasForbiddenPayload(channel) && this._hasContent(channel) && !this._isHTMLElement(channel);\n    }\n    /**\n     * Decides if given channel object has payload.\n     *\n     * @param  {Object}  channel Channel object.\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"_hasPayload\",\n    value: function _hasPayload(channel) {\n      return channel.payload;\n    }\n    /**\n     * Decides if given channel object has content.\n     *\n     * @param  {Object}  channel Channel object.\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"_hasContent\",\n    value: function _hasContent(channel) {\n      return !channel.payload.constructor === Object || Object.keys(channel.payload).length > 0;\n    }\n    /**\n     * Decides if given object has any forbidden properties inside payload.\n     * Example: 'sourceEvent', 'preventer', from a click event, that handles to\n     * circular reference excepction while doing data sync.\n     *\n     * @param  {Object}  channel Object to analyze.\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"_hasForbiddenPayload\",\n    value: function _hasForbiddenPayload(channel) {\n      var FORBIDDEN_PAYLOAD_PROPERTIES = ['sourceEvent', 'preventer'];\n      var properties = Object.keys(channel.payload);\n      return Array.prototype.includes.apply(properties, FORBIDDEN_PAYLOAD_PROPERTIES);\n    }\n    /**\n     * Decides if given object is an HTML Element.\n     *\n     * @param  {Object}  detail Object to analyze.\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"_isHTMLElement\",\n    value: function _isHTMLElement(channel) {\n      return channel.payload.node || channel.payload instanceof HTMLElement;\n    }\n    /**\n     * Run through all given channels and performs a sync operation in the Pub/Sub.\n     *\n     * @param {Array} channels Array of channels name to sync.\n     */\n\n  }, {\n    key: \"syncChannels\",\n    value: function syncChannels(channels) {\n      channels.forEach(this._syncChannel.bind(this));\n    }\n    /**\n     * Run through all channels and performs a sync operation in the Pub/Sub.\n     *\n     * @param {Array} channels Array of channels name to sync.\n     */\n\n  }, {\n    key: \"syncAllChannels\",\n    value: function syncAllChannels() {\n      this.getAllChannels().forEach(this._syncChannel.bind(this));\n    }\n    /**\n     * Recovers channel observer object from manager based on channel name and fires a SYNC_CHANNELS_DATA event.\n     *\n     * @param  {String} channelName Channel name to sync.\n     */\n\n  }, {\n    key: \"_syncChannel\",\n    value: function _syncChannel(channel) {\n      var channelName = channel.name;\n      var detail = channel.payload;\n      var observer = this.manager.get(channelName);\n      observer.next(new CustomEvent(PRIVATE_EVENTS.SYNC_CHANNELS_DATA, {\n        detail: detail\n      }));\n    }\n    /**\n     * Function called by base component connector allowing extension of json events.\n     *\n     * @param {Event} event\n     * @param {Connection} connection - Connection to check\n     */\n\n  }, {\n    key: \"wrapEventHandler\",\n    value: function wrapEventHandler(event, connection, channel) {\n      if (!connection) {\n        return;\n      }\n\n      if (connection.nativeLink) {\n        manager_events.emit(EVENTS.NATIVE_NAVIGATION_REQUEST, {\n          event: event,\n          detail: connection.nativeLink\n        });\n      }\n\n      if (connection.hasOwnProperty('forward-to-native')) {\n        manager_events.emit(EVENTS.NATIVE_CHANNEL_SYNC, {\n          event: event,\n          detail: channel.name\n        });\n      }\n    }\n  }]);\n\n  return CellsNativeComponentConnector;\n}(CellsPolymerComponentConnector);\n\n/* harmony default export */ var native_component_connector = (component_connector_CellsNativeComponentConnector);\n// CONCATENATED MODULE: ./src/native/manager/operation.js\nfunction operation_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction operation_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction operation_createClass(Constructor, protoProps, staticProps) { if (protoProps) operation_defineProperties(Constructor.prototype, protoProps); if (staticProps) operation_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n/**\n * Class to execute native operations\n */\n\nvar operation_NativeOperationManager = /*#__PURE__*/function () {\n  function NativeOperationManager() {\n    operation_classCallCheck(this, NativeOperationManager);\n  }\n\n  operation_createClass(NativeOperationManager, [{\n    key: \"execute\",\n\n    /**\n     * Execute a native operation\n     *\n     * @param {String} operation - operation name (must match with defined in constants)\n     * @param {Object} payload - payload of the operation\n     * @emits ROUTER_BACKSTEP\n     * @emits ROUTER_NAVIGATION\n     * @emits SYNC_CHANNELS_DATA\n     */\n    value: function execute(operation, payload) {\n      var SYNC_CHANNELS_DATA = OPERATIONS.SYNC_CHANNELS_DATA,\n          _OPERATIONS$NATIVE = OPERATIONS.NATIVE,\n          BACK_STEP = _OPERATIONS$NATIVE.BACK_STEP,\n          NAVIGATION = _OPERATIONS$NATIVE.NAVIGATION,\n          RESET_WEBVIEW = _OPERATIONS$NATIVE.RESET_WEBVIEW,\n          LOGOUT = _OPERATIONS$NATIVE.LOGOUT,\n          UPDATE_SKIP_NAVIGATIONS = _OPERATIONS$NATIVE.UPDATE_SKIP_NAVIGATIONS;\n\n      if (!operation) {\n        return;\n      }\n\n      if (operation === SYNC_CHANNELS_DATA) {\n        this._executeSyncChannelsData(payload);\n      } else if (operation === BACK_STEP) {\n        this._executeBackStep(payload);\n      } else if (operation === NAVIGATION) {\n        this._executeNavigation(payload);\n      } else if (operation === RESET_WEBVIEW) {\n        this._executeResetWebview();\n      } else if (operation === LOGOUT) {\n        this._executeLogout();\n      } else if (operation === UPDATE_SKIP_NAVIGATIONS) {\n        this._executeUpdateSkipNavigations(payload);\n      } else {\n        console.log(\"Unkown operation received from native message: \".concat(JSON.stringify({\n          operation: operation,\n          payload: payload\n        })));\n      }\n    }\n    /**\n     * Gets channels from given payload and emits a SYNC_CHANNELS_DATA event.\n     * @private\n     * @param  {Object} payload Object containing channels to sync.\n     */\n\n  }, {\n    key: \"_executeSyncChannelsData\",\n    value: function _executeSyncChannelsData(payload) {\n      var channels = this._getChannelsFromPayload(payload);\n\n      manager_events.emit(EVENTS.SYNC_CHANNELS_DATA, {\n        channels: channels\n      });\n    }\n    /**\n     * Extracts channels from given payload, normalizes them on an array,\n     * and maps them to desired format.\n     * @private\n     * @param  {Object} payload Object containing channels data.\n     * @return {Array}          Array of channels.\n     */\n\n  }, {\n    key: \"_getChannelsFromPayload\",\n    value: function _getChannelsFromPayload(payload) {\n      var channelsData = payload.channels;\n\n      if (!Array.isArray(channelsData)) {\n        channelsData = [channelsData];\n      }\n\n      return channelsData.map(this._mapChannel);\n    }\n    /**\n     * Map given channel object to needed bridge channel format.\n     * @private\n     * @param  {String} channelName    Channel name.\n     * @param  {Object} channelPayload Channel payload.\n     *\n     * @return {Object}                Channel object in desired format.\n     */\n\n  }, {\n    key: \"_mapChannel\",\n    value: function _mapChannel(_ref) {\n      var channelName = _ref.channelName,\n          channelPayload = _ref.channelPayload;\n      return {\n        name: channelName,\n        payload: channelPayload\n      };\n    }\n    /**\n     * Emites a ROUTER_BACKSTEP event with given payload.\n     * @private\n     * @param  {Object} payload Operation payload.\n     */\n\n  }, {\n    key: \"_executeBackStep\",\n    value: function _executeBackStep(payload) {\n      manager_events.emit(EVENTS.ROUTER_BACKSTEP, payload);\n    }\n    /**\n     * Emits a ROUTER_NAVIGATION event with given payload.\n     * @private\n     * @param  {Object} payload Operation payload.\n     */\n\n  }, {\n    key: \"_executeNavigation\",\n    value: function _executeNavigation(payload) {\n      manager_events.emit(EVENTS.ROUTER_NAVIGATION, payload);\n    }\n    /**\n     * Emits a RESET_WEBVIEW event.\n     */\n\n  }, {\n    key: \"_executeResetWebview\",\n    value: function _executeResetWebview() {\n      manager_events.emit(EVENTS.RESET_WEBVIEW);\n    }\n    /**\n     * Emits a Logout event.\n     */\n\n  }, {\n    key: \"_executeLogout\",\n    value: function _executeLogout() {\n      manager_events.emit(EVENTS.NATIVE_LOGOUT);\n    }\n    /**\n     * Updates\n     *\n     * @param {Object} payload contains navigations to add to (or remove from) skipNavigations\n     */\n\n  }, {\n    key: \"_executeUpdateSkipNavigations\",\n    value: function _executeUpdateSkipNavigations(payload) {\n      manager_events.emit(EVENTS.UPDATE_SKIP_NAVIGATIONS, payload);\n    }\n  }]);\n\n  return NativeOperationManager;\n}();\n\n/* harmony default export */ var manager_operation = (operation_NativeOperationManager);\n// CONCATENATED MODULE: ./src/native/manager/plugin.js\nfunction plugin_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction plugin_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction plugin_createClass(Constructor, protoProps, staticProps) { if (protoProps) plugin_defineProperties(Constructor.prototype, protoProps); if (staticProps) plugin_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n/**\n * Class to manage communication with native plugins\n */\n\nvar plugin_CellsNativePluginManager = /*#__PURE__*/function () {\n  plugin_createClass(CellsNativePluginManager, [{\n    key: \"source\",\n\n    /**\n     * Reference to Native Plugin JS Interface inside window.\n     *\n     * @return {Object} Plugin JS Interface.\n     */\n    get: function get() {\n      return window[KEYS.NATIVE_PLUGIN_CHANNEL];\n    }\n    /**\n     * Initialize Plugin Manager\n     */\n\n  }]);\n\n  function CellsNativePluginManager() {\n    plugin_classCallCheck(this, CellsNativePluginManager);\n\n    this._callbacks = {};\n    console.log('CellsPluginManager()');\n    this.init();\n  }\n\n  plugin_createClass(CellsNativePluginManager, [{\n    key: \"init\",\n    value: function init() {\n      this._prepareCellsNativeBridgeNameSpace();\n    }\n    /**\n     *\n     * Prepares cells native bridge namespace inside windows object, exposing only\n     * needy functions from plugin manager.\n     * @private\n     */\n\n  }, {\n    key: \"_prepareCellsNativeBridgeNameSpace\",\n    value: function _prepareCellsNativeBridgeNameSpace() {\n      window.CellsNativePlugins = window.CellsNativePlugins || {};\n      window.CellsNativePlugins.pluginManager = {\n        execute: this._executePlugin.bind(this),\n        pluginResponse: this._processPluginResponse.bind(this)\n      };\n    }\n    /**\n     * Executes a native plugin with given configuration.\n     * For this, we create a unique PID and store the plugin execution with given\n     * callbacks for later execution including native plugin result.\n     * Then, it creates a execute plugin message with previous PID to send over the native bridge.\n     * @private\n     * @param  {Function}   success Success callback to be invoked after native plugin execution (if it's a success result)\n     * @param  {Function}   fail    Fail callback to be invoked after native plugin execution (if it's a fail result)\n     * @param  {String}     plugin  Plugin to be invoked.\n     * @param  {String}     action  Plugin method to invoke.\n     * @param  {Object}     payload Payload to be sent on plugin invocation.\n     */\n\n  }, {\n    key: \"_executePlugin\",\n    value: function _executePlugin(success, fail, plugin, action, payload) {\n      var pluginPID = this._createUUID();\n\n      var pluginMessage = this._createPluginMessage(pluginPID, plugin, action, payload);\n\n      this._storeCallback(pluginPID, success, fail);\n\n      this._sendMessage(pluginMessage);\n    }\n    /**\n     * Executes success or failure plugin callback based on associated stored plugin invocation.\n     * Deletes associated plugin execution callbacks.\n     * @private\n     * @param  {String}         callbackId  Executed plugin ID\n     * @param  {String|Object}  response    String to be deserialized or raw object containing status and payload based on plugin execution result.\n     */\n\n  }, {\n    key: \"_processPluginResponse\",\n    value: function _processPluginResponse(callbackId, response) {\n      var SUCCESS = PLUGIN_RESPONSE_STATUS.SUCCESS;\n      var SUCCESS_ACCESSOR = PLUGIN_RESPONSE_CALLBACKS.SUCCESS_ACCESSOR,\n          FAIL_ACCESSOR = PLUGIN_RESPONSE_CALLBACKS.FAIL_ACCESSOR;\n\n      var result = this._normalizePluginResponse(response);\n\n      var status = result.status,\n          payload = result.payload;\n      var accessor = status == SUCCESS ? SUCCESS_ACCESSOR : FAIL_ACCESSOR;\n      var callback = this._callbacks[callbackId][accessor];\n      callback(payload);\n      delete this._callbacks[callbackId];\n    }\n    /**\n     * Normalizes plugin response based on it's type.\n     * @private\n     * @param  {String|Object}  response    String to be deserialized or raw object containing status and payload based on plugin execution result.\n     * @return {Object}         Plugin response object. Contains {status, payload}.\n     */\n\n  }, {\n    key: \"_normalizePluginResponse\",\n    value: function _normalizePluginResponse(response) {\n      return typeof response === 'string' ? JSON.parse(response) : response;\n    }\n    /**\n     * Creates a random v4 UUID.\n     * Taken from https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript/2117523#2117523\n     * @private\n     * @return {String} v4 random UUID.\n     */\n\n  }, {\n    key: \"_createUUID\",\n    value: function _createUUID() {\n      return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, function (c) {\n        return (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16);\n      });\n    }\n    /**\n     * Creates a plugin message object based on given parameters.\n     * @private\n     * @param  {String} id      Plugin execution unique proccess identifier.\n     * @param  {String} plugin  Plugin name.\n     * @param  {String} action  Plugin method to be invoked.\n     * @param  {Object} payload Payload to send on plugin method invocation.\n     * @return {Object}         Object containing information needed to execute a native plugin.\n     */\n\n  }, {\n    key: \"_createPluginMessage\",\n    value: function _createPluginMessage(id, plugin, action, payload) {\n      return {\n        id: id,\n        pluginId: plugin,\n        actionId: action,\n        payload: payload\n      };\n    }\n    /**\n     * Stores given success and fail callbacks as properties on an object inside\n     * _callbacks with given pluginPID as key for later retrieval.\n     * @private\n     * @param  {String}   pluginPID Plugin execution unique proccess identifier.\n     * @param  {Function} success   Success callback to be invoked after native plugin execution (if it's a success result)\n     * @param  {Function} fail      Fail callback to be invoked after native plugin execution (if it's a fail result)\n     */\n\n  }, {\n    key: \"_storeCallback\",\n    value: function _storeCallback(pluginPID, success, fail) {\n      this._callbacks[pluginPID] = {\n        success: success,\n        fail: fail\n      };\n    }\n    /**\n     * Send given message over the bridge.\n     * @private\n     * @param  {Object} message Message object containing information needed to execute a native plugin.\n     */\n\n  }, {\n    key: \"_sendMessage\",\n    value: function _sendMessage(message) {\n      this.source.postMessage(JSON.stringify(message));\n    }\n  }]);\n\n  return CellsNativePluginManager;\n}();\n\n/* harmony default export */ var manager_plugin = (plugin_CellsNativePluginManager);\n// CONCATENATED MODULE: ./src/native/native-manager.js\nfunction native_manager_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction native_manager_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction native_manager_createClass(Constructor, protoProps, staticProps) { if (protoProps) native_manager_defineProperties(Constructor.prototype, protoProps); if (staticProps) native_manager_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n/**\n * Class to manage native  in/out connections\n */\n\nvar native_manager_CellsNativeManager = /*#__PURE__*/function () {\n  native_manager_createClass(CellsNativeManager, [{\n    key: \"source\",\n\n    /**\n     * Get the source to communicate with native bridge\n     *\n     * @return {Object} The source.\n     */\n    get: function get() {\n      return window[KEYS.NATIVE_CHANNEL];\n    }\n    /**\n     * Operation manager to execute native operations\n     * @type {NativeOperationManager}\n     */\n\n  }]);\n\n  /**\n   * Initialize operationManager\n   */\n  function CellsNativeManager() {\n    native_manager_classCallCheck(this, CellsNativeManager);\n\n    this.operationManager = null;\n    this.pluginManager = null;\n    console.log('CellsNativeManager()');\n    this.init();\n  }\n  /**\n   * Attach listeners to listen events from native\n   */\n\n\n  native_manager_createClass(CellsNativeManager, [{\n    key: \"init\",\n    value: function init() {\n      console.log(\"CellsNativeBridge::init(\".concat(name, \")\"));\n      this.operationManager = new manager_operation();\n      this.pluginManager = new manager_plugin();\n\n      this._attachEventListeners();\n    }\n  }, {\n    key: \"_attachEventListeners\",\n    value: function _attachEventListeners() {\n      window.addEventListener('message', this._processMessage.bind(this));\n    }\n    /**\n     * HTML -> NATIVO\n     */\n\n    /**\n     * Send to native bridge a message to navigate to page passed\n     * @param {String} pageName   - Name of the page to navigate\n     * @param {Object} pageParams - Params of the page to navigate\n     * @param {Boolean} replace   - Replace navigation stack with given page\n     */\n\n  }, {\n    key: \"sendNavigationMessage\",\n    value: function sendNavigationMessage(pageName, pageParams) {\n      var replace = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      console.log(\"CellsNativeManager::sendNavigationMessage(\".concat(pageName, \", \").concat(pageParams, \", \").concat(replace, \")\"));\n\n      var navigationMessage = this._createNavigationMessage(pageName, pageParams, replace);\n\n      this._sendMessage(navigationMessage);\n    }\n    /**\n     * Send to native bridge a message to perform a back operation\n     */\n\n  }, {\n    key: \"sendBackstepMessage\",\n    value: function sendBackstepMessage() {\n      console.log(\"CellsNativeManager::sendBackstepMessage()\");\n\n      var backStepMessage = this._createBackStepMessage();\n\n      this._sendMessage(backStepMessage);\n    }\n    /**\n     * Send to native bridge a message to sync channels information\n     * @param {Channel[]} channelsData - Array of channel data\n     */\n\n  }, {\n    key: \"sendSyncChannelsDataMessage\",\n    value: function sendSyncChannelsDataMessage(data) {\n      console.log('CellsNativeManager::sendSyncChannelsDataMessage with data = ', data);\n      var channels = data.map(this._mapChannel);\n\n      var syncChannelsDataMessage = this._createSyncChannelsDataMessage(channels);\n\n      this._sendMessage(syncChannelsDataMessage);\n    }\n  }, {\n    key: \"sendBridgeReadyMessage\",\n    value: function sendBridgeReadyMessage() {\n      var bridgeReadyMessage = this._createBridgeReadyMessage();\n\n      this._sendMessage(bridgeReadyMessage);\n    }\n  }, {\n    key: \"sendPageStatusMessage\",\n    value: function sendPageStatusMessage(page, loaded) {\n      var pageMessage = this._createPageStatusMessage(page, loaded);\n\n      this._sendMessage(pageMessage);\n    }\n  }, {\n    key: \"_mapChannel\",\n    value: function _mapChannel(_ref) {\n      var name = _ref.name,\n          payload = _ref.payload;\n      return {\n        channelName: name,\n        channelPayload: payload\n      };\n    }\n  }, {\n    key: \"resetChannels\",\n    value: function resetChannels() {\n      console.log(\"CellsNativeManager::resetChannels()\");\n\n      var resetChannelsMessage = this._createResetChannelsMessage();\n\n      this._sendMessage(resetChannelsMessage);\n    }\n  }, {\n    key: \"_createBackStepMessage\",\n    value: function _createBackStepMessage() {\n      var BACK_STEP = OPERATIONS.HTML.BACK_STEP;\n      return {\n        op: BACK_STEP,\n        payload: {}\n      };\n    }\n  }, {\n    key: \"_createPageStatusMessage\",\n    value: function _createPageStatusMessage(pageName, loaded) {\n      return {\n        op: loaded ? OPERATIONS.HTML.PAGE_LOADED : OPERATIONS.HTML.PAGE_UNLOADED,\n        payload: {\n          page: pageName\n        }\n      };\n    }\n  }, {\n    key: \"_createNavigationMessage\",\n    value: function _createNavigationMessage(pageName, pageParams, replace) {\n      var _OPERATIONS$HTML = OPERATIONS.HTML,\n          NAVIGATION = _OPERATIONS$HTML.NAVIGATION,\n          NAVIGATION_AND_REPLACE = _OPERATIONS$HTML.NAVIGATION_AND_REPLACE;\n      return {\n        op: replace ? NAVIGATION_AND_REPLACE : NAVIGATION,\n        payload: {\n          page: pageName,\n          params: pageParams\n        }\n      };\n    }\n  }, {\n    key: \"_createSyncChannelsDataMessage\",\n    value: function _createSyncChannelsDataMessage(channelsData) {\n      var SYNC_CHANNELS_DATA = OPERATIONS.SYNC_CHANNELS_DATA;\n      return {\n        op: SYNC_CHANNELS_DATA,\n        payloadChannel: channelsData\n      };\n    }\n  }, {\n    key: \"_createBridgeReadyMessage\",\n    value: function _createBridgeReadyMessage() {\n      var BRIDGE_READY = OPERATIONS.HTML.BRIDGE_READY;\n      return {\n        op: BRIDGE_READY,\n        payload: {}\n      };\n    }\n  }, {\n    key: \"_createResetChannelsMessage\",\n    value: function _createResetChannelsMessage() {\n      var RESET_CHANNELS_DATA = OPERATIONS.RESET_CHANNELS_DATA;\n      return {\n        op: RESET_CHANNELS_DATA,\n        payload: {}\n      };\n    }\n  }, {\n    key: \"_sendMessage\",\n    value: function _sendMessage(message) {\n      if (this.source) {\n        this.source.postMessage(JSON.stringify(message));\n      }\n    }\n    /**\n     * Listener of native messages, use operationManager to execute operations\n     * @param {Event} evt - event received from native\n     */\n\n  }, {\n    key: \"_processMessage\",\n    value: function _processMessage(evt) {\n      var rawMessage = this._parseMessage(evt.data);\n\n      var _this$_mapMessage = this._mapMessage(rawMessage),\n          operation = _this$_mapMessage.operation,\n          payload = _this$_mapMessage.payload;\n\n      this.operationManager.execute(operation, payload);\n    }\n  }, {\n    key: \"_parseMessage\",\n    value: function _parseMessage(data) {\n      var parsedData = {};\n\n      try {\n        parsedData = typeof data === 'string' ? JSON.parse(data) : {};\n      } catch (error) {\n        console.error(\"Cannot parse native message '\".concat(data, \"'\\n\\t\").concat(error.message));\n      }\n\n      return parsedData;\n    }\n  }, {\n    key: \"_mapMessage\",\n    value: function _mapMessage(rawMessage) {\n      var op = rawMessage.op,\n          payload = rawMessage.payload;\n      return {\n        operation: op,\n        payload: payload\n      };\n    }\n  }]);\n\n  return CellsNativeManager;\n}();\n\n/* harmony default export */ var native_manager = (native_manager_CellsNativeManager);\n// CONCATENATED MODULE: ./src/native/router.js\nfunction native_router_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { native_router_typeof = function _typeof(obj) { return typeof obj; }; } else { native_router_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return native_router_typeof(obj); }\n\nfunction router_extends() { router_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return router_extends.apply(this, arguments); }\n\nfunction native_router_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction native_router_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction native_router_createClass(Constructor, protoProps, staticProps) { if (protoProps) native_router_defineProperties(Constructor.prototype, protoProps); if (staticProps) native_router_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction native_router_possibleConstructorReturn(self, call) { if (call && (native_router_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return native_router_assertThisInitialized(self); }\n\nfunction native_router_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction router_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { router_get = Reflect.get; } else { router_get = function _get(target, property, receiver) { var base = router_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return router_get(target, property, receiver || target); }\n\nfunction router_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = native_router_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction native_router_getPrototypeOf(o) { native_router_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return native_router_getPrototypeOf(o); }\n\nfunction native_router_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) native_router_setPrototypeOf(subClass, superClass); }\n\nfunction native_router_setPrototypeOf(o, p) { native_router_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return native_router_setPrototypeOf(o, p); }\n\n\n\n\n/**\n * Class to manage stack of routes and navigate\n * @extends CellsRouter\n */\n\nvar router_CellsNativeRouter = /*#__PURE__*/function (_CellsRouter) {\n  native_router_inherits(CellsNativeRouter, _CellsRouter);\n\n  function CellsNativeRouter() {\n    var _this;\n\n    native_router_classCallCheck(this, CellsNativeRouter);\n\n    _this = native_router_possibleConstructorReturn(this, native_router_getPrototypeOf(CellsNativeRouter).call(this));\n\n    _this.init();\n\n    return _this;\n  }\n  /**\n   * Initialize router stack.\n   * Clear stack and add first native route\n   */\n\n\n  native_router_createClass(CellsNativeRouter, [{\n    key: \"init\",\n    value: function init() {\n      var initialRoute = this.navigationStack.createRoute(\"\".concat(PREFIX.NATIVE_ROUTE, \"init\"));\n\n      this._clearStack();\n\n      this.navigationStack.push(initialRoute);\n    }\n    /**\n     * Add or replace a route to the route stack.\n     *\n     * @param {Object} route - Route object.\n     * @param {Boolean} replace - Indicates if given route will replace last route.\n     * @param {Boolean} native - Indicates if given route is native.\n     */\n\n  }, {\n    key: \"manageStack\",\n    value: function manageStack(route) {\n      var replace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _native = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var navigation = {};\n      var name = route.page;\n      var _route$options = route.options,\n          options = _route$options === void 0 ? {} : _route$options;\n      var lastRouteName = (this.getLastRoute() || {}).page;\n      var cleanNavigationStack = options.cleanNavigationStack || false;\n      var cleanUntil = options.cleanUntil || false;\n      navigation.from = this.getLastRoute();\n      navigation.to = route;\n\n      if (name !== lastRouteName) {\n        var path = (_native ? PREFIX.NATIVE_ROUTE : '') + name;\n\n        var routeToAppend = router_extends({}, route, {\n          page: path\n        });\n\n        if (cleanNavigationStack) {\n          this._clearStack();\n        } else if (cleanUntil) {\n          this.clearStackUntil(cleanUntil);\n        } //options are not usefull inside route stack\n\n\n        delete routeToAppend.options;\n\n        if (replace) {\n          this.navigationStack.replaceRoute(routeToAppend);\n        } else {\n          this.navigationStack.push(routeToAppend);\n        }\n      } else {\n        console.log(\"manageStack::UPDATE PRIVATE CHANNEL. FROM WEB TO NATIVE. WEB PAGE MUST BE ????: \", lastRouteName, '->', name);\n      }\n\n      return navigation;\n    }\n  }, {\n    key: \"addSkipNavigation\",\n    value: function addSkipNavigation(nav) {\n      console.log('Router:addSkipNavigation', nav);\n      this.navigationStack.addSkipNavigation(nav);\n    }\n  }, {\n    key: \"_wait\",\n    value: function _wait(pauseInMiliseconds) {\n      var startTime = new Date();\n      var elapsedTime = null;\n\n      do {\n        elapsedTime = new Date();\n      } while (elapsedTime - startTime < pauseInMiliseconds);\n    }\n    /**\n     * Perform a back operation over the router stack and emit and event and/or navigate to corresponding page.\n     *\n     * @emits NATIVE_BACKSTEP_REQUEST\n     * @emits INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE\n     */\n\n  }, {\n    key: \"back\",\n    value: function back() {\n      var navigation = {};\n\n      if (this.navigationStack.length > 1) {\n        var fromRoute = this.navigationStack.pop();\n        var auxFromRoute = fromRoute;\n        var backRoute = this.getLastRoute();\n        console.log('back::', fromRoute, backRoute);\n\n        while (this.navigationStack.isSkipNavigation({\n          from: auxFromRoute.page,\n          to: backRoute.page\n        }) && this.navigationStack.length > 1) {\n          console.log('back::skipped -> ', auxFromRoute, backRoute);\n          auxFromRoute = this.navigationStack.pop();\n\n          if (this.navigationStack.length > 0) {\n            backRoute = this.getLastRoute();\n          }\n        }\n\n        var isCommingBackFromNativeRoute = this.isNativeRoute(fromRoute);\n        var isGoingBackToNativeRoute = this.isNativeRoute(backRoute);\n        var page = backRoute.page.replace(PREFIX.NATIVE_ROUTE, '');\n        var params = backRoute.params;\n        navigation.from = fromRoute;\n        navigation.to = backRoute;\n\n        if (isGoingBackToNativeRoute) {\n          manager_events.emit(EVENTS.NATIVE_BACKSTEP_REQUEST, {\n            page: page\n          });\n        } else if (isCommingBackFromNativeRoute) {\n          manager_events.emit(EVENTS.INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE, {\n            page: page\n          });\n        }\n\n        if (!isGoingBackToNativeRoute) {\n          router_get(native_router_getPrototypeOf(CellsNativeRouter.prototype), \"go\", this).call(this, page, params);\n        } else {\n          this._wait(800);\n        }\n      } else {\n        navigation.from = this.getLastRoute();\n        navigation.to = this.getLastRoute();\n      }\n\n      return navigation;\n    }\n    /**\n     * Check if given route is a native route.\n     *\n     * @param {Object} route - Route to check\n     * @returns {Boolean}\n     */\n\n  }, {\n    key: \"isNativeRoute\",\n    value: function isNativeRoute(route) {\n      var page = route.page;\n      return page && page.startsWith(PREFIX.NATIVE_ROUTE);\n    }\n  }, {\n    key: \"invalidateLocationHash\",\n    value: function invalidateLocationHash() {\n      this.locationHash(\"\");\n    }\n  }, {\n    key: \"locationHash\",\n    value: function locationHash(path) {\n      console.log('locationHash: ', path);\n      Promise.resolve().then(function () {\n        return setTimeout(function () {\n          console.log('pr locationHash: ', path);\n          location.hash = '#!' + path;\n        }, 100);\n      });\n    }\n  }, {\n    key: \"createRoute\",\n    value: function createRoute(page) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return {\n        page: page,\n        params: params\n      };\n    }\n  }]);\n\n  return CellsNativeRouter;\n}(router_Router);\n\n/* harmony default export */ var router = (router_CellsNativeRouter);\n// CONCATENATED MODULE: ./src/native/manager/template.js\nfunction native_manager_template_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { native_manager_template_typeof = function _typeof(obj) { return typeof obj; }; } else { native_manager_template_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return native_manager_template_typeof(obj); }\n\nfunction native_manager_template_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction native_manager_template_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction native_manager_template_createClass(Constructor, protoProps, staticProps) { if (protoProps) native_manager_template_defineProperties(Constructor.prototype, protoProps); if (staticProps) native_manager_template_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction native_manager_template_possibleConstructorReturn(self, call) { if (call && (native_manager_template_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return native_manager_template_assertThisInitialized(self); }\n\nfunction native_manager_template_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction native_manager_template_getPrototypeOf(o) { native_manager_template_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return native_manager_template_getPrototypeOf(o); }\n\nfunction native_manager_template_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) native_manager_template_setPrototypeOf(subClass, superClass); }\n\nfunction native_manager_template_setPrototypeOf(o, p) { native_manager_template_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return native_manager_template_setPrototypeOf(o, p); }\n\n\n/**\n * Class to manage cells templates\n * @extends PolymerTemplateManager\n */\n\nvar CellsNativeTemplateManager = /*#__PURE__*/function (_PolymerTemplateManag) {\n  native_manager_template_inherits(CellsNativeTemplateManager, _PolymerTemplateManag);\n\n  function CellsNativeTemplateManager() {\n    native_manager_template_classCallCheck(this, CellsNativeTemplateManager);\n\n    return native_manager_template_possibleConstructorReturn(this, native_manager_template_getPrototypeOf(CellsNativeTemplateManager).apply(this, arguments));\n  }\n\n  native_manager_template_createClass(CellsNativeTemplateManager, [{\n    key: \"cacheSelected\",\n\n    /**\n     * Search selected template in cache array and cache it\n     */\n    value: function cacheSelected() {\n      var template = this.cache[this.selected];\n      var cache = this.cache;\n\n      if (template) {\n        for (var tplName in cache) {\n          if (cache.hasOwnProperty(tplName)) {\n            if (tplName !== template.name) {\n              cache[tplName].cache();\n              cache[tplName].resetNextNavigation();\n            }\n          }\n        }\n\n        this.selected = null;\n        template[\"native\"]();\n      }\n    }\n    /**\n     * Select a template from the cache\n     * @param {String} name - Temaplate name to select\n     */\n\n  }, {\n    key: \"selectTemplate\",\n    value: function selectTemplate(name) {\n      var template = this.cache[name];\n\n      if (template && template.node.getAttribute('state') === 'native') {\n        this.selected = name;\n        template.activate();\n      }\n    }\n  }]);\n\n  return CellsNativeTemplateManager;\n}(template_PolymerTemplateManager);\n\n/* harmony default export */ var native_manager_template = (CellsNativeTemplateManager);\n// CONCATENATED MODULE: ./src/native/manager/bridge-channels.js\nfunction bridge_channels_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { bridge_channels_typeof = function _typeof(obj) { return typeof obj; }; } else { bridge_channels_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return bridge_channels_typeof(obj); }\n\nfunction manager_bridge_channels_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction manager_bridge_channels_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction manager_bridge_channels_createClass(Constructor, protoProps, staticProps) { if (protoProps) manager_bridge_channels_defineProperties(Constructor.prototype, protoProps); if (staticProps) manager_bridge_channels_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction bridge_channels_possibleConstructorReturn(self, call) { if (call && (bridge_channels_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return bridge_channels_assertThisInitialized(self); }\n\nfunction bridge_channels_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction bridge_channels_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { bridge_channels_get = Reflect.get; } else { bridge_channels_get = function _get(target, property, receiver) { var base = bridge_channels_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return bridge_channels_get(target, property, receiver || target); }\n\nfunction bridge_channels_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = bridge_channels_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction bridge_channels_getPrototypeOf(o) { bridge_channels_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return bridge_channels_getPrototypeOf(o); }\n\nfunction bridge_channels_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) bridge_channels_setPrototypeOf(subClass, superClass); }\n\nfunction bridge_channels_setPrototypeOf(o, p) { bridge_channels_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return bridge_channels_setPrototypeOf(o, p); }\n\n\n\nvar NativeBridgeChannelManager = /*#__PURE__*/function (_BridgeChannelManager) {\n  bridge_channels_inherits(NativeBridgeChannelManager, _BridgeChannelManager);\n\n  function NativeBridgeChannelManager() {\n    manager_bridge_channels_classCallCheck(this, NativeBridgeChannelManager);\n\n    return bridge_channels_possibleConstructorReturn(this, bridge_channels_getPrototypeOf(NativeBridgeChannelManager).apply(this, arguments));\n  }\n\n  manager_bridge_channels_createClass(NativeBridgeChannelManager, [{\n    key: \"initPrivateChannel\",\n\n    /**\n     * Initializes the private chanel for the given page.\n     *\n     * @param {String} pageName\n     *\n     */\n    value: function initPrivateChannel(oldPageName, newPageName) {\n      var normalizedOldPageName = oldPageName || 'cells-native-route:init';\n      var normalizedNewPageName = newPageName || 'cells-native-route:init';\n\n      if (normalizedOldPageName === normalizedNewPageName) {\n        return;\n      }\n\n      if (this.appState && this.appState.from === normalizedOldPageName && this.appState.to === normalizedNewPageName) {\n        return;\n      }\n\n      bridge_channels_get(bridge_channels_getPrototypeOf(NativeBridgeChannelManager.prototype), \"initPrivateChannel\", this).call(this, oldPageName, newPageName);\n\n      this.appState = {\n        from: normalizedOldPageName,\n        to: normalizedNewPageName\n      };\n    }\n  }]);\n\n  return NativeBridgeChannelManager;\n}(bridge_channels);\n/**\n * NativeBridgeChannelManager definition\n */\n\n\n/* harmony default export */ var manager_bridge_channels = (NativeBridgeChannelManager);\n// CONCATENATED MODULE: ./src/native/bridge.js\nfunction native_bridge_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { native_bridge_typeof = function _typeof(obj) { return typeof obj; }; } else { native_bridge_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return native_bridge_typeof(obj); }\n\nfunction native_bridge_extends() { native_bridge_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return native_bridge_extends.apply(this, arguments); }\n\nfunction native_bridge_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction native_bridge_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction native_bridge_createClass(Constructor, protoProps, staticProps) { if (protoProps) native_bridge_defineProperties(Constructor.prototype, protoProps); if (staticProps) native_bridge_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction native_bridge_possibleConstructorReturn(self, call) { if (call && (native_bridge_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return native_bridge_assertThisInitialized(self); }\n\nfunction native_bridge_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction native_bridge_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { native_bridge_get = Reflect.get; } else { native_bridge_get = function _get(target, property, receiver) { var base = native_bridge_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return native_bridge_get(target, property, receiver || target); }\n\nfunction native_bridge_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = native_bridge_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction native_bridge_getPrototypeOf(o) { native_bridge_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return native_bridge_getPrototypeOf(o); }\n\nfunction native_bridge_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) native_bridge_setPrototypeOf(subClass, superClass); }\n\nfunction native_bridge_setPrototypeOf(o, p) { native_bridge_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return native_bridge_setPrototypeOf(o, p); }\n\n\n\n\n\n\n\n\n\n\nvar native_bridge_bindingCodes = constants.bindingCodes,\n    native_bridge_externalEventsCodes = constants.externalEventsCodes;\nvar bridge_PRIVATE_EVENTS = EVENTS.PRIVATE;\nvar WAIT_UNTIL_NEXT_LOGOUT = 5000;\n/**\n * Class to create cells-native-bridge component\n *\n * @extends CellsPolymerBridge\n */\n\nvar bridge_CellsNativeBridge = /*#__PURE__*/function (_CellsPolymerBridge) {\n  native_bridge_inherits(CellsNativeBridge, _CellsPolymerBridge);\n\n  function CellsNativeBridge() {\n    var _this;\n\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    native_bridge_classCallCheck(this, CellsNativeBridge);\n\n    console.log('CellsNativeBridge()');\n    _this = native_bridge_possibleConstructorReturn(this, native_bridge_getPrototypeOf(CellsNativeBridge).call(this, config));\n    _this._initialRouteHandled = false;\n    _this._shouldInitPrivateEvents = false;\n\n    _this._initEvents();\n\n    _this._initComponentConnector();\n\n    _this._doPreRender(config);\n\n    _this._notifyBridgeReady();\n\n    _this._lastLogoutTime = 0;\n    return _this;\n  }\n\n  native_bridge_createClass(CellsNativeBridge, [{\n    key: \"_initDependencies\",\n    value: function _initDependencies(dependencies) {\n      console.log('CellsNativeBridge::_initDependencies()');\n      dependencies = native_bridge_extends({\n        NativeManager: native_manager,\n        ComponentConnector: native_component_connector,\n        Router: router,\n        TemplateManager: native_manager_template,\n        BridgeChannelManager: manager_bridge_channels\n      }, dependencies);\n\n      native_bridge_get(native_bridge_getPrototypeOf(CellsNativeBridge.prototype), \"_initDependencies\", this).call(this, dependencies);\n    }\n  }, {\n    key: \"publish\",\n    value: function publish(channelName, value) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      native_bridge_get(native_bridge_getPrototypeOf(CellsNativeBridge.prototype), \"publish\", this).call(this, channelName, value);\n\n      var _this$_parsePublishOp = this._parsePublishOptions(options),\n          forwardToNative = _this$_parsePublishOp.forwardToNative;\n\n      if (forwardToNative) {\n        this._handleSyncDataToNative({\n          detail: channelName\n        });\n      }\n    }\n  }, {\n    key: \"_parsePublishOptions\",\n    value: function _parsePublishOptions(_ref) {\n      var _ref$forwardToNative = _ref.forwardToNative,\n          forwardToNative = _ref$forwardToNative === void 0 ? false : _ref$forwardToNative;\n      return {\n        forwardToNative: forwardToNative\n      };\n    }\n  }, {\n    key: \"navigateToNative\",\n    value: function navigateToNative(page, params) {\n      var NATIVE_NAVIGATION_REQUEST = EVENTS.NATIVE_NAVIGATION_REQUEST;\n      manager_events.emit(NATIVE_NAVIGATION_REQUEST, {\n        event: {},\n        detail: {\n          page: page,\n          params: params\n        }\n      });\n    }\n  }, {\n    key: \"backStep\",\n    value: function backStep() {\n      var ROUTER_BACKSTEP = native_bridge_externalEventsCodes.ROUTER_BACKSTEP;\n      manager_events.emit(ROUTER_BACKSTEP, {\n        event: {},\n        detail: {}\n      });\n    }\n  }, {\n    key: \"resetRouter\",\n    value: function resetRouter() {\n      var _this2 = this;\n\n      manager_events.removeListener('nav-request', this.navRequestListener);\n      this.Router = new router(this);\n\n      this.Router.handler = function () {\n        return _this2.routeHandler();\n      };\n\n      this.Router.addRoutes(this.routes);\n\n      this._initSkipNavigations();\n\n      this.Router.start();\n      this.Router.hashIsDirty = false;\n      manager_events.on('nav-request', this.navRequestListener);\n    }\n  }, {\n    key: \"routeHandler\",\n    value: function routeHandler() {\n      native_bridge_get(native_bridge_getPrototypeOf(CellsNativeBridge.prototype), \"routeHandler\", this).call(this);\n\n      if (!this._initialRouteHandled) {\n        var _this$Router$currentR = this.Router.currentRoute,\n            name = _this$Router$currentR.name,\n            params = _this$Router$currentR.params;\n        var route = this.Router.createRoute(name, params);\n        this.handleForward(route);\n        this._initialRouteHandled = true;\n        console.log('CellsNativeBridge::routeHandler()', route);\n      }\n    }\n  }, {\n    key: \"_cacheSelected\",\n    value: function _cacheSelected() {\n      this.TemplateManager.cacheSelected();\n      this.Router.currentRoute = this.Router.navigationStack.createRoute(PREFIX.NATIVE_ROUTE + 'init');\n    }\n  }, {\n    key: \"resetWebView\",\n    value: function resetWebView() {\n      this._shouldInitPrivateEvents = true;\n      this.Router.init(); //this.TemplateManager.cacheSelected();\n\n      this._cacheSelected();\n\n      this._resetBridgeChannels();\n\n      this._removeTemplates();\n\n      this._resetEventSubscriptions();\n    }\n  }, {\n    key: \"canDoLogout\",\n    value: function canDoLogout() {\n      var now = new Date().getTime();\n      var elapsedMillisecondsSinceLastTimeLogout = this._lastLogoutTime > 0 ? now - this._lastLogoutTime : now;\n      return elapsedMillisecondsSinceLastTimeLogout > WAIT_UNTIL_NEXT_LOGOUT;\n    }\n  }, {\n    key: \"logoutDueToNativeRequest\",\n    value: function logoutDueToNativeRequest() {\n      if (this.canDoLogout()) {\n        this._lastLogoutTime = new Date().getTime();\n\n        this._resetBridgeChannels();\n\n        this._removeTemplates();\n\n        this.TemplateManager.selected = \"\";\n\n        this._resetEventSubscriptions();\n\n        this.Router.invalidateLocationHash();\n        this.Router.hashIsDirty = true;\n        this._initialRouteHandled = false;\n        this._shouldInitPrivateEvents = false;\n\n        this._initComponentConnector(); //this.Router.init();\n\n\n        if (this.preRenderConfig) {\n          this._preRender(this.preRenderConfig, false);\n        }\n\n        this.resetRouter();\n      }\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      var initialPos = this.initialTemplate.indexOf(PREFIX.NATIVE_ROUTE);\n      var goToNative = initialPos === 0;\n      var initialTemplate = goToNative ? this.initialTemplate.substring(PREFIX.NATIVE_ROUTE.length) : this.initialTemplate;\n\n      this._resetBridgeChannels();\n\n      this._removeTemplates();\n\n      this.Router.init();\n\n      if (goToNative) {\n        var route = {\n          page: initialTemplate,\n          options: {\n            cleanNavigationStack: true\n          }\n        };\n        this._shouldInitPrivateEvents = true;\n        this.handleForward(route, false, true);\n        this.NativeManager.sendNavigationMessage(route.page, {}, true); //this.TemplateManager.cacheSelected();\n\n        this._cacheSelected();\n      } else {\n        this.Router.go(initialTemplate);\n      }\n\n      this._resetEventSubscriptions();\n\n      this._initComponentConnector();\n    }\n  }, {\n    key: \"_removeTemplates\",\n    value: function _removeTemplates() {\n      this.TemplateManager.removeTemplateChildrens(this.crossContainerId);\n      this.TemplateManager.removeTemplates(this.initialTemplate, this.crossContainerId);\n      this.TemplateManager.removeTemplate(this.initialTemplate);\n    }\n  }, {\n    key: \"_resetEventSubscriptions\",\n    value: function _resetEventSubscriptions() {\n      this._addInitialSubscribersToEvents(); //this.ComponentConnector.handleI18n();\n\n    }\n  }, {\n    key: \"_onConfigChange\",\n    value: function _onConfigChange(evt) {\n      if (window.AppConfig && evt.detail) {\n        for (var prop in evt.detail) {\n          if (evt.detail.hasOwnProperty(prop)) {\n            if ('config' === prop) {\n              window.AppConfig.app = evt.detail[prop];\n            } else {\n              window.AppConfig[prop] = evt.detail[prop];\n            }\n          }\n        }\n\n        this.PageManager.storage.clear();\n\n        this._removeTemplates();\n\n        this.routeHandler();\n      }\n    }\n  }, {\n    key: \"_onLocaleChange\",\n    value: function _onLocaleChange(evt) {\n      if (window.I18nMsg && evt.detail && evt.detail.lang) {\n        window.I18nMsg.lang = evt.detail.lang;\n      }\n    }\n  }, {\n    key: \"_initEvents\",\n    value: function _initEvents() {\n      var _this3 = this;\n\n      // sync channels\n      manager_events.on(EVENTS.SYNC_CHANNELS_DATA, function (data) {\n        return _this3._handleNativeSyncChannelsData(data);\n      }); // HTML navigation\n\n      manager_events.on(EVENTS.ROUTER_NAVIGATION, function (info) {\n        return _this3._handleNavigationRequest(info);\n      });\n      manager_events.on(EVENTS.ROUTER_BACKSTEP, function (info) {\n        return _this3._handleBackRequest(info);\n      });\n      manager_events.on(EVENTS.RESET_WEBVIEW, function () {\n        return _this3.resetWebView();\n      });\n      manager_events.on(EVENTS.NATIVE_LOGOUT, function () {\n        return _this3.logoutDueToNativeRequest();\n      });\n      manager_events.on(EVENTS.UPDATE_SKIP_NAVIGATIONS, function (info) {\n        return _this3.updateSkipNavigations(info);\n      }); // Internal Navigation\n\n      manager_events.on(EVENTS.INTERNAL_ROUTER_NAVIGATION, function (info) {\n        return _this3._handleNavigationStack(info);\n      });\n      manager_events.on(EVENTS.INTERNAL_ROUTER_BACKSTEP, function () {\n        return _this3.handleBack({\n          type: EVENTS.INTERNAL_ROUTER_BACKSTEP\n        });\n      });\n      manager_events.on(EVENTS.INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE, function (info) {\n        return _this3._handleBackRequestFromNative(info);\n      }); // NATIVE navigation\n\n      manager_events.on(EVENTS.NATIVE_NAVIGATION_REQUEST, function (info) {\n        return _this3._handleNativeNavRequest(info);\n      });\n      manager_events.on(EVENTS.NATIVE_BACKSTEP_REQUEST, function () {\n        return _this3._handleNativeBack();\n      }); // NATIVE INTEROP\n\n      manager_events.on(EVENTS.NATIVE_CHANNEL_SYNC, function (info) {\n        return _this3._handleSyncDataToNative(info);\n      });\n    }\n  }, {\n    key: \"_initComponentConnector\",\n    value: function _initComponentConnector() {\n      this.ComponentConnector.handleI18n(this._onLocaleChange.bind(this));\n      this.ComponentConnector.handleConfig(this._onConfigChange.bind(this));\n      this.ComponentConnector.handleAppContextChange(this._onAppContextChanged.bind(this));\n    }\n  }, {\n    key: \"_doPreRender\",\n    value: function _doPreRender(config) {\n      if (config.initialPreRender) {\n        var preRenderConfig = {\n          pages: config.initialPreRender\n        };\n        this.preRenderConfig = preRenderConfig;\n\n        this._preRender(preRenderConfig, false);\n      }\n    }\n  }, {\n    key: \"_onAppContextChanged\",\n    value: function _onAppContextChanged(evt) {\n      var contextInfo = evt.detail.value;\n\n      if (contextInfo.fromPage) {\n        this.NativeManager.sendPageStatusMessage(contextInfo.currentPage, true);\n        this.NativeManager.sendPageStatusMessage(contextInfo.fromPage, false);\n      }\n    }\n  }, {\n    key: \"_notifyBridgeReady\",\n    value: function _notifyBridgeReady() {\n      this.NativeManager.sendBridgeReadyMessage();\n    }\n    /**\n     * @private\n     * @emits INTERNAL_ROUTER_BACKSTEP\n     */\n\n  }, {\n    key: \"_handleBackRequest\",\n    value: function _handleBackRequest() {\n      var detail = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      console.log('CellsNativeBridge::_handleBackRequest()');\n      var route = this.Router.getLastRoute();\n      /** FIXME: Workaround to manage Android back.\n       * To get Android 'back' message from Native to HTML is needed\n       * to manage this flag to avoid doing back when app is resumed.\n      */\n\n      if (!detail.willAppear || this.Router.isNativeRoute(route)) {\n        manager_events.emit(EVENTS.INTERNAL_ROUTER_BACKSTEP);\n      }\n    }\n  }, {\n    key: \"registerCurrentTemplate\",\n    value: function registerCurrentTemplate(currentTemplate, previousTemplate) {\n      var initialRoute = PREFIX.NATIVE_ROUTE + 'init';\n      var TEMPLATE_REGISTERED = native_bridge_externalEventsCodes.TEMPLATE_REGISTERED;\n      var UI = native_bridge_bindingCodes.UI;\n      var options = this;\n\n      if (this._isNewStateIsEqualToOldState(currentTemplate.name, (previousTemplate || {}).name)) {\n        return;\n      }\n      /*\n      console.log('registerCurrentTemplate COMPARE', this.appState);\n      const initialRoute = PREFIX.NATIVE_ROUTE + 'init';\n      const currentTemplateName = currentTemplate.name;\n      const previousTemplateName = (previousTemplate||{}).name;\n       const previousTemplateIsInitialPage = previousTemplateName === initialRoute || previousTemplateName === undefined;\n      const previousStatePageWasInitialPage = (this.appState||{}).previousPage === initialRoute || (this.appState||{}).previousPage === undefined;\n       if (this.appState &&\n          this.appState.currentPage === currentTemplateName\n          && (this.appState.previousPage === previousTemplateName || (previousStatePageWasInitialPage===previousTemplateIsInitialPage)) ) {\n        console.log('registerCurrentTemplate skip', currentTemplateName, previousTemplateName);\n        return;\n      }\n       this.appState = { currentPage: currentTemplateName, previousPage: previousTemplateName };\n      */\n\n\n      if (previousTemplate && previousTemplate !== currentTemplate && initialRoute !== previousTemplate.name) {\n        this.unregisterChildren(previousTemplate, options.binding === UI ? 'DM' : null);\n      }\n\n      this.registerChildren(currentTemplate, options.binding === UI ? 'DM' : null);\n\n      this._updateChannels(previousTemplate, currentTemplate);\n\n      manager_events.emit(TEMPLATE_REGISTERED, {\n        template: currentTemplate.name\n      });\n    }\n  }, {\n    key: \"_handleBackRequestFromNative\",\n    value: function _handleBackRequestFromNative(detail) {\n      console.log('CellsNativeBridge::_handleBackRequestFromNative()');\n      var pageName = detail.page;\n      this.TemplateManager.selectTemplate(pageName);\n    }\n    /**\n     * @private\n     * @emits INTERNAL_ROUTER_NAVIGATION\n     */\n\n  }, {\n    key: \"_handleNavigationRequest\",\n    value: function _handleNavigationRequest(detail) {\n      var pageName = detail.page;\n      console.log('_handleNavigationRequest : to ', pageName);\n      var event = new CustomEvent(bridge_PRIVATE_EVENTS.ROUTER_NAVIGATION, {\n        detail: this._prepareNavigationParams(detail),\n        bubbles: true,\n        composed: true\n      });\n\n      if (this._shouldInitPrivateEvents) {\n        this._shouldInitPrivateEvents = false;\n        this.routeHandler();\n      }\n\n      this.TemplateManager.selectTemplate(pageName);\n      manager_events.emit(EVENTS.INTERNAL_ROUTER_NAVIGATION, {\n        detail: detail,\n        event: event\n      });\n      console.log(\"_handleNavigationRequest : to NATIVE : \".concat(pageName));\n    }\n  }, {\n    key: \"_prepareNavigationParams\",\n    value: function _prepareNavigationParams() {\n      var detail = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var result = native_bridge_extends({}, detail);\n\n      for (var key in result.params) {\n        if (result.params.hasOwnProperty(key)) {\n          result[key] = result.params[key];\n          result.params[key] = key;\n        }\n      }\n\n      return result;\n    }\n  }, {\n    key: \"_handleNavigationStack\",\n    value: function _handleNavigationStack(info) {\n      console.log(\"INFO \", info);\n\n      var route = this._unflattenRouteFromEvent(info); //@TODO PLACE INTO ROUTER\n\n\n      var options = info.detail.options || {};\n      console.log('_handleNavigationStack options.skipHistory :', options.skipHistory);\n      console.log('_handleNavigationStack :from', this.Router.getLastRoute().page, route.page);\n\n      if (options.skipHistory === true || options.skipHistory === false) {\n        this.Router.addSkipNavigation({\n          from: info.detail.page,\n          to: this.Router.getLastRoute().page,\n          skipHistory: options.skipHistory\n        });\n      } //this.Router.manageStack(route, route.replace);\n\n\n      this.handleForward(route, route.replace);\n    }\n  }, {\n    key: \"_isNewStateIsEqualToOldState\",\n    value: function _isNewStateIsEqualToOldState(currentTemplateName, previousTemplateName) {\n      console.log('_isNewStateIsEqualToOldState COMPARE', this.appState);\n      var initialRoute = PREFIX.NATIVE_ROUTE + 'init'; //const currentTemplateName = currentTemplate.name;\n      //const previousTemplateName = (previousTemplate||{}).name;\n\n      var previousTemplateIsInitialPage = previousTemplateName === initialRoute || previousTemplateName === undefined;\n      var previousStatePageWasInitialPage = (this.appState || {}).previousPage === initialRoute || (this.appState || {}).previousPage === undefined;\n      var isSameState = this.appState && this.appState.currentPage === currentTemplateName && (this.appState.previousPage === previousTemplateName || previousStatePageWasInitialPage === previousTemplateIsInitialPage);\n      console.log('_isNewStateIsEqualToOldState skip=', isSameState);\n      return isSameState;\n    } // this function MAY BE OVERRIDE on native bridge - not required due to internal router behavior\n    // BUT it's required to trigger updateAppContext\n\n  }, {\n    key: \"_updateChannels\",\n    value: function _updateChannels(previousTemplate, currentTemplate) {\n      if (this.BridgeChannelManager) {\n        var oldName = previousTemplate ? previousTemplate.name : undefined;\n        var newName = currentTemplate.name;\n        var navigation = {\n          from: {\n            page: oldName\n          },\n          to: {\n            page: newName\n          }\n        };\n        var privateChannelsAlreadyInitialized = this.shouldInitPrivateEvents(navigation);\n\n        if (!privateChannelsAlreadyInitialized && oldName !== newName) {\n          this.BridgeChannelManager.initPrivateChannel(oldName, newName);\n          this.BridgeChannelManager.updateAppContext(oldName, newName);\n        }\n      }\n    }\n  }, {\n    key: \"shouldInitPrivateEvents\",\n    value: function shouldInitPrivateEvents(navigation) {\n      return this.Router.isNativeRoute(navigation.from) || this.Router.isNativeRoute(navigation.to);\n    }\n  }, {\n    key: \"updatePrivateChannels\",\n    value: function updatePrivateChannels(oldRoute, newRoute) {\n      if (this.BridgeChannelManager) {\n        var oldPage = oldRoute ? oldRoute.page : undefined;\n        this.BridgeChannelManager.updateAppContext(oldPage, newRoute.page);\n        this.BridgeChannelManager.initPrivateChannel(oldPage, newRoute.page);\n      }\n    }\n  }, {\n    key: \"handlePrivateChannelsForNavigation\",\n    value: function handlePrivateChannelsForNavigation(navigation) {\n      if (this.shouldInitPrivateEvents(navigation)) {\n        this.updatePrivateChannels(navigation.from, navigation.to);\n      }\n    }\n    /**\n     * This method is executed before a backward navigation so it can be used to\n     * decide if the navigation can continue or must be cancelled. So it's a hook\n     * that applications can override. The default implementation always return { continue: true }\n     *\n     * @param {Object} backNavigation an object representing the backward navigation with the properties:\n     *   - currentPage\n     *   - backToPage\n     *\n     * @return {Object} an object that must contain the property continue with a boolean value:\n     * if continue is true, the bridge will perfom the backward navigation;\n     * otherwise it will cancel the navigation and the returned object will be\n     * published in the channel __bridge_cancelled_back_navigation\n     *\n     */\n\n  }, {\n    key: \"onNativeBackStepRequest\",\n    value: function onNativeBackStepRequest()\n    /*backNavigation*/\n    {\n      return {\n        \"continue\": true\n      };\n    }\n    /**\n     * Execution of the hook onBackStepRequest wrapped in a promise\n     *\n     * @param {Object} backNavigation an object representing the backward navigation with the properties:\n     *   - currentPage\n     *   - backToPage\n     * It will be passed to the hook function onBackStepRequest\n     *\n     * @return {Promise} a promise with the result of the execution of the hook onBackStepRequest\n     */\n\n  }, {\n    key: \"_doBeforeBack\",\n    value: function _doBeforeBack(backNavigation) {\n      return Promise.resolve(this.onNativeBackStepRequest(backNavigation));\n    }\n  }, {\n    key: \"goBack\",\n    value: function goBack() {\n      var navigation = native_bridge_get(native_bridge_getPrototypeOf(CellsNativeBridge.prototype), \"goBack\", this).call(this);\n\n      this.handlePrivateChannelsForNavigation(navigation);\n      return navigation;\n    }\n    /**\n     * This method is executed when the event router-backstep is fired.\n     * It calls the hook method for handling backward navigations and if that method\n     * allows the continuation, it does the navegation. Otherwise it will cancel the navigation\n     * and publish the response in the channel __bridge_cancelled_back_navigation.\n     */\n\n  }, {\n    key: \"handleBack\",\n    value: function handleBack(evt) {\n      var _this4 = this;\n\n      var lastNavigation = this.Router.navigationStack.lastNavigation();\n      var backNavigation = {\n        currentPage: lastNavigation.to,\n        backToPage: lastNavigation.from\n      };\n\n      if (evt.type === EVENTS.INTERNAL_ROUTER_BACKSTEP) {\n        this._doBeforeBack(backNavigation).then(function (result) {\n          if (result[\"continue\"] === true) {\n            _this4.goBack();\n          } else {\n            result.cancelledNavigation = backNavigation;\n\n            _this4.BridgeChannelManager.publishCancelledBackNavigation(result);\n          }\n        });\n      } else {\n        this.goBack();\n      }\n    }\n  }, {\n    key: \"handleForward\",\n    value: function handleForward(route) {\n      var replace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _native = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var navigation = this.Router.manageStack(route, replace, _native);\n      this.handlePrivateChannelsForNavigation(navigation);\n    }\n    /**\n     * Unflattes route from given event object.\n     * @private\n     * @param  {Object} info Event info.\n     * @return {Object}      Unflatted route.\n     */\n\n  }, {\n    key: \"_unflattenRouteFromEvent\",\n    value: function _unflattenRouteFromEvent(info) {\n      var detail = info.detail;\n      var page = detail.page,\n          params = detail.params,\n          _detail$cleanNavigati = detail.cleanNavigationStack,\n          cleanNavigationStack = _detail$cleanNavigati === void 0 ? false : _detail$cleanNavigati,\n          _detail$cleanUntil = detail.cleanUntil,\n          cleanUntil = _detail$cleanUntil === void 0 ? false : _detail$cleanUntil,\n          _detail$replace = detail.replace,\n          replace = _detail$replace === void 0 ? false : _detail$replace;\n      var paramsValues = info.event.detail;\n      var options = {};\n      var route = {\n        page: page,\n        params: this._unflattenRouteParams(params, paramsValues, true),\n        replace: replace\n      };\n\n      if (cleanNavigationStack) {\n        options.cleanNavigationStack = cleanNavigationStack;\n      }\n\n      if (cleanUntil) {\n        options.cleanUntil = cleanUntil;\n      }\n\n      if (Object.keys(options).length > 0) {\n        route.options = options;\n      }\n\n      return route;\n    }\n    /**\n     * Unflattes route params based on given param object list and given param values.\n     * @private\n     * @param   {Object}  [list={}]                     Object including params names on object keys.\n     * @param   {Object}  [values={}]                   Object containing key/value properties with params values.\n     * @param   {Boolean} [swapParamsDefinition=false]  Flag indicating if final params object should gather property names based on value property of list params.\n     * @return {Object}                                 Object containing unflatten params based on list & values.\n     */\n\n  }, {\n    key: \"_unflattenRouteParams\",\n    value: function _unflattenRouteParams() {\n      var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var values = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var swapParamsDefinition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var params = {};\n      Object.keys(list).forEach(function (param) {\n        var targetProperty = swapParamsDefinition ? list[param] : param;\n        var valueProperty = values[param];\n\n        if (valueProperty) {\n          params[targetProperty] = valueProperty;\n        } else {\n          console.error(\"Error trying to unflat value from param \".concat(param, \" - value is not presented on value list (\").concat(JSON.stringify(values), \")\"));\n        }\n      });\n      return params;\n    }\n  }, {\n    key: \"_handleSyncDataToNative\",\n    value: function _handleSyncDataToNative(info) {\n      var channelName = info.detail;\n      var channel = this.ComponentConnector.getChannel(channelName);\n      this.NativeManager.sendSyncChannelsDataMessage([channel]);\n    }\n  }, {\n    key: \"_handleNativeNavRequest\",\n    value: function _handleNativeNavRequest(info) {\n      console.log('CellsNativeBridge::_handleNativeNavRequest()');\n\n      var route = this._unflattenNavigationData(info);\n\n      var resetChannels = route.resetChannels || false;\n\n      if (!resetChannels) {\n        this._syncChannelsToNative();\n      } else {\n        this.NativeManager.resetChannels();\n      } //this.Router.manageStack(route, false, true);\n\n\n      this.handleForward(route, false, true);\n      this.NativeManager.sendNavigationMessage(route.page, route.params);\n      this.TemplateManager.cacheSelected(); //this._cacheSelected();\n    }\n  }, {\n    key: \"_unflattenNavigationData\",\n    value: function _unflattenNavigationData(info) {\n      //@TODO REFACTOR SPR - _unflattenRouteFromEvent params & options\n      var eventPayload = info.event.detail;\n\n      var route = native_bridge_extends({}, info.detail);\n\n      var _route$cleanNavigatio = route.cleanNavigationStack,\n          cleanNavigationStack = _route$cleanNavigatio === void 0 ? false : _route$cleanNavigatio,\n          _route$cleanUntil = route.cleanUntil,\n          cleanUntil = _route$cleanUntil === void 0 ? false : _route$cleanUntil;\n      var routeParams = route.params;\n      var options = {};\n\n      var pageParams = this._unflattenRouteParams(routeParams, eventPayload, true);\n\n      if (pageParams) {\n        route.params = pageParams;\n      }\n\n      if (cleanNavigationStack) {\n        options.cleanNavigationStack = cleanNavigationStack;\n      }\n\n      if (cleanUntil) {\n        options.cleanUntil = cleanUntil;\n      }\n\n      if (Object.keys(options).length > 0) {\n        route.options = options;\n      }\n\n      return route;\n    }\n  }, {\n    key: \"_handleNativeBack\",\n    value: function _handleNativeBack() {\n      console.log('CellsNativeBridge::_handleNativeBack()');\n\n      this._syncChannelsToNative();\n\n      this.NativeManager.sendBackstepMessage();\n\n      this._cacheSelected();\n    }\n  }, {\n    key: \"updateSkipNavigations\",\n    value: function updateSkipNavigations(info) {\n      var _this5 = this;\n\n      var navigations = info.navigations;\n      navigations.forEach(function (nav) {\n        _this5.Router.addSkipNavigation(nav);\n      });\n    }\n  }, {\n    key: \"_handleNativeSyncChannelsData\",\n    value: function _handleNativeSyncChannelsData(payload) {\n      console.log('CellsNativeBridge::_handleNativeSyncChannelsData()');\n      this.ComponentConnector.syncChannels(payload.channels);\n    }\n  }, {\n    key: \"_syncChannelsToNative\",\n    value: function _syncChannelsToNative() {\n      var channels = this.ComponentConnector.getChannels();\n      this.NativeManager.sendSyncChannelsDataMessage(channels);\n    }\n  }]);\n\n  return CellsNativeBridge;\n}(bridge_CellsPolymerBridge);\n\n/* harmony default export */ var native_bridge = (bridge_CellsNativeBridge);\n// CONCATENATED MODULE: ./src/index.js\n// BUILD_TARGET import statement is replaced by NormalModuleReplacementPlugin at build time with desireed target.\n// Possible values: core, native, polymer.\n\n\n // TARGETS and BUILD_TARGET are injected through Webpack DefinePlugin,\n\nvar TARGET_NAMESPACE = {\"native\":{\"windowExport\":\"CellsNativeBridge\",\"library\":\"cellsNative\",\"file\":\"cells-native-bridge\",\"version\":\"0.11.0\"},\"polymer\":{\"windowExport\":\"CellsPolymerBridge\",\"library\":\"cellsPolymer\",\"file\":\"cells-polymer-bridge\",\"version\":\"3.5.0\"},\"core\":{\"windowExport\":\"CellsBridge\",\"library\":\"cells\",\"file\":\"cells-bridge\",\"version\":\"1.0.0\"}}[\"native\"] || {\"native\":{\"windowExport\":\"CellsNativeBridge\",\"library\":\"cellsNative\",\"file\":\"cells-native-bridge\",\"version\":\"0.11.0\"},\"polymer\":{\"windowExport\":\"CellsPolymerBridge\",\"library\":\"cellsPolymer\",\"file\":\"cells-polymer-bridge\",\"version\":\"3.5.0\"},\"core\":{\"windowExport\":\"CellsBridge\",\"library\":\"cells\",\"file\":\"cells-bridge\",\"version\":\"1.0.0\"}}['core'];\nvar windowExport = TARGET_NAMESPACE.windowExport; // We expose Bridge to Browsers\n\nwindow[windowExport] = native_bridge;\n\n/***/ })\n/******/ ]);\n});"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n","'use strict';\nvar isObj = require('is-obj');\n\nfunction getPathSegments(path) {\n\tvar pathArr = path.split('.');\n\tvar parts = [];\n\n\tfor (var i = 0; i < pathArr.length; i++) {\n\t\tvar p = pathArr[i];\n\n\t\twhile (p[p.length - 1] === '\\\\' && pathArr[i + 1] !== undefined) {\n\t\t\tp = p.slice(0, -1) + '.';\n\t\t\tp += pathArr[++i];\n\t\t}\n\n\t\tparts.push(p);\n\t}\n\n\treturn parts;\n}\n\nmodule.exports = {\n\tget: function (obj, path, value) {\n\t\tif (!isObj(obj) || typeof path !== 'string') {\n\t\t\treturn value === undefined ? obj : value;\n\t\t}\n\n\t\tvar pathArr = getPathSegments(path);\n\n\t\tfor (var i = 0; i < pathArr.length; i++) {\n\t\t\tif (!Object.prototype.propertyIsEnumerable.call(obj, pathArr[i])) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tobj = obj[pathArr[i]];\n\n\t\t\tif (obj === undefined || obj === null) {\n\t\t\t\t// `obj` is either `undefined` or `null` so we want to stop the loop, and\n\t\t\t\t// if this is not the last bit of the path, and\n\t\t\t\t// if it did't return `undefined`\n\t\t\t\t// it would return `null` if `obj` is `null`\n\t\t\t\t// but we want `get({foo: null}, 'foo.bar')` to equal `undefined`, or the supplied value, not `null`\n\t\t\t\tif (i !== pathArr.length - 1) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\tset: function (obj, path, value) {\n\t\tif (!isObj(obj) || typeof path !== 'string') {\n\t\t\treturn;\n\t\t}\n\n\t\tvar pathArr = getPathSegments(path);\n\n\t\tfor (var i = 0; i < pathArr.length; i++) {\n\t\t\tvar p = pathArr[i];\n\n\t\t\tif (!isObj(obj[p])) {\n\t\t\t\tobj[p] = {};\n\t\t\t}\n\n\t\t\tif (i === pathArr.length - 1) {\n\t\t\t\tobj[p] = value;\n\t\t\t}\n\n\t\t\tobj = obj[p];\n\t\t}\n\t},\n\n\tdelete: function (obj, path) {\n\t\tif (!isObj(obj) || typeof path !== 'string') {\n\t\t\treturn;\n\t\t}\n\n\t\tvar pathArr = getPathSegments(path);\n\n\t\tfor (var i = 0; i < pathArr.length; i++) {\n\t\t\tvar p = pathArr[i];\n\n\t\t\tif (i === pathArr.length - 1) {\n\t\t\t\tdelete obj[p];\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tobj = obj[p];\n\n\t\t\tif (!isObj(obj)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t},\n\n\thas: function (obj, path) {\n\t\tif (!isObj(obj) || typeof path !== 'string') {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar pathArr = getPathSegments(path);\n\n\t\tfor (var i = 0; i < pathArr.length; i++) {\n\t\t\tif (isObj(obj)) {\n\t\t\t\tif (!(pathArr[i] in obj)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tobj = obj[pathArr[i]];\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.SEMaaS = factory());\n}(this, (function () { 'use strict';\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  };\n\n  var asyncToGenerator = function (fn) {\n    return function () {\n      var gen = fn.apply(this, arguments);\n      return new Promise(function (resolve, reject) {\n        function step(key, arg) {\n          try {\n            var info = gen[key](arg);\n            var value = info.value;\n          } catch (error) {\n            reject(error);\n            return;\n          }\n\n          if (info.done) {\n            resolve(value);\n          } else {\n            return Promise.resolve(value).then(function (value) {\n              step(\"next\", value);\n            }, function (err) {\n              step(\"throw\", err);\n            });\n          }\n        }\n\n        return step(\"next\");\n      });\n    };\n  };\n\n  var classCallCheck = function (instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  };\n\n  var createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var defineProperty = function (obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  };\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  var toConsumableArray = function (arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n      return arr2;\n    } else {\n      return Array.from(arr);\n    }\n  };\n\n  /**\n   * Copyright (c) 2014-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n  !function (global) {\n\n    var Op = Object.prototype;\n    var hasOwn = Op.hasOwnProperty;\n    var undefined; // More compressible than void 0.\n    var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n    var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n    var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n    var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n    var inModule = (typeof module === \"undefined\" ? \"undefined\" : _typeof(module)) === \"object\";\n    var runtime = global.regeneratorRuntime;\n    if (runtime) {\n      if (inModule) {\n        // If regeneratorRuntime is defined globally and we're in a module,\n        // make the exports object identical to regeneratorRuntime.\n        module.exports = runtime;\n      }\n      // Don't bother evaluating the rest of this file if the runtime was\n      // already defined globally.\n      return;\n    }\n\n    // Define the runtime globally (as expected by generated code) as either\n    // module.exports (if we're in a module) or a new, empty object.\n    runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n    function wrap(innerFn, outerFn, self, tryLocsList) {\n      // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n      var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n      var generator = Object.create(protoGenerator.prototype);\n      var context = new Context(tryLocsList || []);\n\n      // The ._invoke method unifies the implementations of the .next,\n      // .throw, and .return methods.\n      generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n      return generator;\n    }\n    runtime.wrap = wrap;\n\n    // Try/catch helper to minimize deoptimizations. Returns a completion\n    // record like context.tryEntries[i].completion. This interface could\n    // have been (and was previously) designed to take a closure to be\n    // invoked without arguments, but in all the cases we care about we\n    // already have an existing method we want to call, so there's no need\n    // to create a new function object. We can even get away with assuming\n    // the method takes exactly one argument, since that happens to be true\n    // in every case, so we don't have to touch the arguments object. The\n    // only additional allocation required is the completion record, which\n    // has a stable shape and so hopefully should be cheap to allocate.\n    function tryCatch(fn, obj, arg) {\n      try {\n        return { type: \"normal\", arg: fn.call(obj, arg) };\n      } catch (err) {\n        return { type: \"throw\", arg: err };\n      }\n    }\n\n    var GenStateSuspendedStart = \"suspendedStart\";\n    var GenStateSuspendedYield = \"suspendedYield\";\n    var GenStateExecuting = \"executing\";\n    var GenStateCompleted = \"completed\";\n\n    // Returning this object from the innerFn has the same effect as\n    // breaking out of the dispatch switch statement.\n    var ContinueSentinel = {};\n\n    // Dummy constructor functions that we use as the .constructor and\n    // .constructor.prototype properties for functions that return Generator\n    // objects. For full spec compliance, you may wish to configure your\n    // minifier not to mangle the names of these two functions.\n    function Generator() {}\n    function GeneratorFunction() {}\n    function GeneratorFunctionPrototype() {}\n\n    // This is a polyfill for %IteratorPrototype% for environments that\n    // don't natively support it.\n    var IteratorPrototype = {};\n    IteratorPrototype[iteratorSymbol] = function () {\n      return this;\n    };\n\n    var getProto = Object.getPrototypeOf;\n    var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n    if (NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n      // This environment has a native %IteratorPrototype%; use it instead\n      // of the polyfill.\n      IteratorPrototype = NativeIteratorPrototype;\n    }\n\n    var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n    GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n    GeneratorFunctionPrototype.constructor = GeneratorFunction;\n    GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\";\n\n    // Helper for defining the .next, .throw, and .return methods of the\n    // Iterator interface in terms of a single ._invoke method.\n    function defineIteratorMethods(prototype) {\n      [\"next\", \"throw\", \"return\"].forEach(function (method) {\n        prototype[method] = function (arg) {\n          return this._invoke(method, arg);\n        };\n      });\n    }\n\n    runtime.isGeneratorFunction = function (genFun) {\n      var ctor = typeof genFun === \"function\" && genFun.constructor;\n      return ctor ? ctor === GeneratorFunction ||\n      // For the native GeneratorFunction constructor, the best we can\n      // do is to check its .name property.\n      (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n    };\n\n    runtime.mark = function (genFun) {\n      if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n      } else {\n        genFun.__proto__ = GeneratorFunctionPrototype;\n        if (!(toStringTagSymbol in genFun)) {\n          genFun[toStringTagSymbol] = \"GeneratorFunction\";\n        }\n      }\n      genFun.prototype = Object.create(Gp);\n      return genFun;\n    };\n\n    // Within the body of any async function, `await x` is transformed to\n    // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n    // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n    // meant to be awaited.\n    runtime.awrap = function (arg) {\n      return { __await: arg };\n    };\n\n    function AsyncIterator(generator) {\n      function invoke(method, arg, resolve, reject) {\n        var record = tryCatch(generator[method], generator, arg);\n        if (record.type === \"throw\") {\n          reject(record.arg);\n        } else {\n          var result = record.arg;\n          var value = result.value;\n          if (value && (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\" && hasOwn.call(value, \"__await\")) {\n            return Promise.resolve(value.__await).then(function (value) {\n              invoke(\"next\", value, resolve, reject);\n            }, function (err) {\n              invoke(\"throw\", err, resolve, reject);\n            });\n          }\n\n          return Promise.resolve(value).then(function (unwrapped) {\n            // When a yielded Promise is resolved, its final value becomes\n            // the .value of the Promise<{value,done}> result for the\n            // current iteration. If the Promise is rejected, however, the\n            // result for this iteration will be rejected with the same\n            // reason. Note that rejections of yielded Promises are not\n            // thrown back into the generator function, as is the case\n            // when an awaited Promise is rejected. This difference in\n            // behavior between yield and await is important, because it\n            // allows the consumer to decide what to do with the yielded\n            // rejection (swallow it and continue, manually .throw it back\n            // into the generator, abandon iteration, whatever). With\n            // await, by contrast, there is no opportunity to examine the\n            // rejection reason outside the generator function, so the\n            // only option is to throw it from the await expression, and\n            // let the generator function handle the exception.\n            result.value = unwrapped;\n            resolve(result);\n          }, reject);\n        }\n      }\n\n      var previousPromise;\n\n      function enqueue(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new Promise(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n\n        return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(callInvokeWithMethodAndArg,\n        // Avoid propagating failures to Promises returned by later\n        // invocations of the iterator.\n        callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n\n      // Define the unified helper method that is used to implement .next,\n      // .throw, and .return (see defineIteratorMethods).\n      this._invoke = enqueue;\n    }\n\n    defineIteratorMethods(AsyncIterator.prototype);\n    AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n      return this;\n    };\n    runtime.AsyncIterator = AsyncIterator;\n\n    // Note that simple async functions are implemented on top of\n    // AsyncIterator objects; they just return a Promise for the value of\n    // the final result produced by the iterator.\n    runtime.async = function (innerFn, outerFn, self, tryLocsList) {\n      var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n\n      return runtime.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function (result) {\n        return result.done ? result.value : iter.next();\n      });\n    };\n\n    function makeInvokeMethod(innerFn, self, context) {\n      var state = GenStateSuspendedStart;\n\n      return function invoke(method, arg) {\n        if (state === GenStateExecuting) {\n          throw new Error(\"Generator is already running\");\n        }\n\n        if (state === GenStateCompleted) {\n          if (method === \"throw\") {\n            throw arg;\n          }\n\n          // Be forgiving, per 25.3.3.3.3 of the spec:\n          // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n          return doneResult();\n        }\n\n        context.method = method;\n        context.arg = arg;\n\n        while (true) {\n          var delegate = context.delegate;\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (context.method === \"next\") {\n            // Setting context._sent for legacy support of Babel's\n            // function.sent implementation.\n            context.sent = context._sent = context.arg;\n          } else if (context.method === \"throw\") {\n            if (state === GenStateSuspendedStart) {\n              state = GenStateCompleted;\n              throw context.arg;\n            }\n\n            context.dispatchException(context.arg);\n          } else if (context.method === \"return\") {\n            context.abrupt(\"return\", context.arg);\n          }\n\n          state = GenStateExecuting;\n\n          var record = tryCatch(innerFn, self, context);\n          if (record.type === \"normal\") {\n            // If an exception is thrown from innerFn, we leave state ===\n            // GenStateExecuting and loop back for another invocation.\n            state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n            if (record.arg === ContinueSentinel) {\n              continue;\n            }\n\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          } else if (record.type === \"throw\") {\n            state = GenStateCompleted;\n            // Dispatch the exception by looping back around to the\n            // context.dispatchException(context.arg) call above.\n            context.method = \"throw\";\n            context.arg = record.arg;\n          }\n        }\n      };\n    }\n\n    // Call delegate.iterator[context.method](context.arg) and handle the\n    // result, either by returning a { value, done } result from the\n    // delegate iterator, or by modifying context.method and context.arg,\n    // setting context.delegate to null, and returning the ContinueSentinel.\n    function maybeInvokeDelegate(delegate, context) {\n      var method = delegate.iterator[context.method];\n      if (method === undefined) {\n        // A .throw or .return when the delegate iterator has no .throw\n        // method always terminates the yield* loop.\n        context.delegate = null;\n\n        if (context.method === \"throw\") {\n          if (delegate.iterator.return) {\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            context.method = \"return\";\n            context.arg = undefined;\n            maybeInvokeDelegate(delegate, context);\n\n            if (context.method === \"throw\") {\n              // If maybeInvokeDelegate(context) changed context.method from\n              // \"return\" to \"throw\", let that override the TypeError below.\n              return ContinueSentinel;\n            }\n          }\n\n          context.method = \"throw\";\n          context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n        }\n\n        return ContinueSentinel;\n      }\n\n      var record = tryCatch(method, delegate.iterator, context.arg);\n\n      if (record.type === \"throw\") {\n        context.method = \"throw\";\n        context.arg = record.arg;\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n\n      var info = record.arg;\n\n      if (!info) {\n        context.method = \"throw\";\n        context.arg = new TypeError(\"iterator result is not an object\");\n        context.delegate = null;\n        return ContinueSentinel;\n      }\n\n      if (info.done) {\n        // Assign the result of the finished delegate to the temporary\n        // variable specified by delegate.resultName (see delegateYield).\n        context[delegate.resultName] = info.value;\n\n        // Resume execution at the desired location (see delegateYield).\n        context.next = delegate.nextLoc;\n\n        // If context.method was \"throw\" but the delegate handled the\n        // exception, let the outer generator proceed normally. If\n        // context.method was \"next\", forget context.arg since it has been\n        // \"consumed\" by the delegate iterator. If context.method was\n        // \"return\", allow the original .return call to continue in the\n        // outer generator.\n        if (context.method !== \"return\") {\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n      } else {\n        // Re-yield the result returned by the delegate method.\n        return info;\n      }\n\n      // The delegate iterator is finished, so forget it and continue with\n      // the outer generator.\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    // Define Generator.prototype.{next,throw,return} in terms of the\n    // unified ._invoke helper method.\n    defineIteratorMethods(Gp);\n\n    Gp[toStringTagSymbol] = \"Generator\";\n\n    // A Generator should always return itself as the iterator object when the\n    // @@iterator function is called on it. Some browsers' implementations of the\n    // iterator prototype chain incorrectly implement this, causing the Generator\n    // object to not be returned from this call. This ensures that doesn't happen.\n    // See https://github.com/facebook/regenerator/issues/274 for more details.\n    Gp[iteratorSymbol] = function () {\n      return this;\n    };\n\n    Gp.toString = function () {\n      return \"[object Generator]\";\n    };\n\n    function pushTryEntry(locs) {\n      var entry = { tryLoc: locs[0] };\n\n      if (1 in locs) {\n        entry.catchLoc = locs[1];\n      }\n\n      if (2 in locs) {\n        entry.finallyLoc = locs[2];\n        entry.afterLoc = locs[3];\n      }\n\n      this.tryEntries.push(entry);\n    }\n\n    function resetTryEntry(entry) {\n      var record = entry.completion || {};\n      record.type = \"normal\";\n      delete record.arg;\n      entry.completion = record;\n    }\n\n    function Context(tryLocsList) {\n      // The root entry object (effectively a try statement without a catch\n      // or a finally block) gives us a place to store values thrown from\n      // locations where there is no enclosing try statement.\n      this.tryEntries = [{ tryLoc: \"root\" }];\n      tryLocsList.forEach(pushTryEntry, this);\n      this.reset(true);\n    }\n\n    runtime.keys = function (object) {\n      var keys = [];\n      for (var key in object) {\n        keys.push(key);\n      }\n      keys.reverse();\n\n      // Rather than returning an object with a next method, we keep\n      // things simple and return the next function itself.\n      return function next() {\n        while (keys.length) {\n          var key = keys.pop();\n          if (key in object) {\n            next.value = key;\n            next.done = false;\n            return next;\n          }\n        }\n\n        // To avoid creating an additional object, we just hang the .value\n        // and .done properties off the next function object itself. This\n        // also ensures that the minifier will not anonymize the function.\n        next.done = true;\n        return next;\n      };\n    };\n\n    function values(iterable) {\n      if (iterable) {\n        var iteratorMethod = iterable[iteratorSymbol];\n        if (iteratorMethod) {\n          return iteratorMethod.call(iterable);\n        }\n\n        if (typeof iterable.next === \"function\") {\n          return iterable;\n        }\n\n        if (!isNaN(iterable.length)) {\n          var i = -1,\n              next = function next() {\n            while (++i < iterable.length) {\n              if (hasOwn.call(iterable, i)) {\n                next.value = iterable[i];\n                next.done = false;\n                return next;\n              }\n            }\n\n            next.value = undefined;\n            next.done = true;\n\n            return next;\n          };\n\n          return next.next = next;\n        }\n      }\n\n      // Return an iterator with no values.\n      return { next: doneResult };\n    }\n    runtime.values = values;\n\n    function doneResult() {\n      return { value: undefined, done: true };\n    }\n\n    Context.prototype = {\n      constructor: Context,\n\n      reset: function reset(skipTempReset) {\n        this.prev = 0;\n        this.next = 0;\n        // Resetting context._sent for legacy support of Babel's\n        // function.sent implementation.\n        this.sent = this._sent = undefined;\n        this.done = false;\n        this.delegate = null;\n\n        this.method = \"next\";\n        this.arg = undefined;\n\n        this.tryEntries.forEach(resetTryEntry);\n\n        if (!skipTempReset) {\n          for (var name in this) {\n            // Not sure about the optimal order of these conditions:\n            if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n              this[name] = undefined;\n            }\n          }\n        }\n      },\n\n      stop: function stop() {\n        this.done = true;\n\n        var rootEntry = this.tryEntries[0];\n        var rootRecord = rootEntry.completion;\n        if (rootRecord.type === \"throw\") {\n          throw rootRecord.arg;\n        }\n\n        return this.rval;\n      },\n\n      dispatchException: function dispatchException(exception) {\n        if (this.done) {\n          throw exception;\n        }\n\n        var context = this;\n        function handle(loc, caught) {\n          record.type = \"throw\";\n          record.arg = exception;\n          context.next = loc;\n\n          if (caught) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            context.method = \"next\";\n            context.arg = undefined;\n          }\n\n          return !!caught;\n        }\n\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          var record = entry.completion;\n\n          if (entry.tryLoc === \"root\") {\n            // Exception thrown outside of any try block that could handle\n            // it, so set the completion value of the entire function to\n            // throw the exception.\n            return handle(\"end\");\n          }\n\n          if (entry.tryLoc <= this.prev) {\n            var hasCatch = hasOwn.call(entry, \"catchLoc\");\n            var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n            if (hasCatch && hasFinally) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              } else if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else if (hasCatch) {\n              if (this.prev < entry.catchLoc) {\n                return handle(entry.catchLoc, true);\n              }\n            } else if (hasFinally) {\n              if (this.prev < entry.finallyLoc) {\n                return handle(entry.finallyLoc);\n              }\n            } else {\n              throw new Error(\"try statement without catch or finally\");\n            }\n          }\n        }\n      },\n\n      abrupt: function abrupt(type, arg) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n            var finallyEntry = entry;\n            break;\n          }\n        }\n\n        if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n          // Ignore the finally entry if control is not jumping to a\n          // location outside the try/catch block.\n          finallyEntry = null;\n        }\n\n        var record = finallyEntry ? finallyEntry.completion : {};\n        record.type = type;\n        record.arg = arg;\n\n        if (finallyEntry) {\n          this.method = \"next\";\n          this.next = finallyEntry.finallyLoc;\n          return ContinueSentinel;\n        }\n\n        return this.complete(record);\n      },\n\n      complete: function complete(record, afterLoc) {\n        if (record.type === \"throw\") {\n          throw record.arg;\n        }\n\n        if (record.type === \"break\" || record.type === \"continue\") {\n          this.next = record.arg;\n        } else if (record.type === \"return\") {\n          this.rval = this.arg = record.arg;\n          this.method = \"return\";\n          this.next = \"end\";\n        } else if (record.type === \"normal\" && afterLoc) {\n          this.next = afterLoc;\n        }\n\n        return ContinueSentinel;\n      },\n\n      finish: function finish(finallyLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.finallyLoc === finallyLoc) {\n            this.complete(entry.completion, entry.afterLoc);\n            resetTryEntry(entry);\n            return ContinueSentinel;\n          }\n        }\n      },\n\n      \"catch\": function _catch(tryLoc) {\n        for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n          var entry = this.tryEntries[i];\n          if (entry.tryLoc === tryLoc) {\n            var record = entry.completion;\n            if (record.type === \"throw\") {\n              var thrown = record.arg;\n              resetTryEntry(entry);\n            }\n            return thrown;\n          }\n        }\n\n        // The context.catch method must only be called with a location\n        // argument that corresponds to a known catch block.\n        throw new Error(\"illegal catch attempt\");\n      },\n\n      delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n        this.delegate = {\n          iterator: values(iterable),\n          resultName: resultName,\n          nextLoc: nextLoc\n        };\n\n        if (this.method === \"next\") {\n          // Deliberately forget the last sent value so that we don't\n          // accidentally pass it on to the delegate.\n          this.arg = undefined;\n        }\n\n        return ContinueSentinel;\n      }\n    };\n  }(\n  // In sloppy mode, unbound `this` refers to the global object, fallback to\n  // Function constructor if we're in global strict mode. That is sadly a form\n  // of indirect eval which violates Content Security Policy.\n  function () {\n    return this;\n  }() || Function(\"return this\")());\n\n  var SEMAAS_REQUIRED_FIELDS = ['consumerId', 'policy', 'mrId', 'nameSpace', 'region', 'dnsTld', 'tsec2JWTEndpoint'];\n\n  var SEMAAS = {\n    DEFAULT_ADAPTER_IDENTIFIER: 'application',\n    DEFAULT_ADAPTER_VERSION: 'v1',\n    REQUIRED_FIELDS: SEMAAS_REQUIRED_FIELDS,\n    ALLOWED_FIELDS: [].concat(SEMAAS_REQUIRED_FIELDS, ['identifier', 'version'])\n  };\n\n  var buildServiceUri = function buildServiceUri(codename) {\n    return function (region, dnsTld, version) {\n      return 'https://' + codename + '.' + [region, dnsTld].filter(Boolean).join('.') + '/' + version;\n    };\n  };\n\n  var RHO = {\n    HOST: buildServiceUri('rho'),\n    ALLOWED_FIELDS: ['mrId', 'spanId', 'startDate', 'finishDate', 'name', 'parentSpan', 'traceId', 'properties', 'duration', 'recordDate'],\n    REQUIRED_FIELDS: []\n  };\n\n  var OMEGA = {\n    HOST: buildServiceUri('omega'),\n    DEFAULT_LOG_LEVEL: 'DEBUG',\n    ALLOWED_FIELDS: ['mrId', 'spanId', 'traceId', 'creationDate', 'level', 'message', 'properties'],\n    MAXIMUM_BULK_SIZE: 1000,\n    REQUIRED_FIELDS: []\n  };\n\n  // const TSEC2JWT = {\n  //   HOST: environment => `https://tsec2jwt.smlb.${environment}.meigas.cloud/v1/Token`,\n  // };\n\n  var Constants = {\n    SEMAAS: SEMAAS,\n    RHO: RHO,\n    OMEGA: OMEGA\n    // TSEC2JWT,\n  };\n\n  // credits to GeenenTijd/dotify\n  // https://github.com/GeenenTijd/dotify/blob/master/dotify.js\n  var dotify = function dotify(obj) {\n    var SEPARATOR_KEY = '_';\n    var res = {};\n    var recurse = function recurse(obj, current) {\n      Object.keys(obj).forEach(function (key) {\n        var value = obj[key];\n        var newKey = current ? current + SEPARATOR_KEY + key : key; // joined key with dot\n        if (value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object') {\n          recurse(value, newKey); // it's a nested object, so do it again\n        } else {\n          res[newKey] = value; // it's not an object, so set the property\n        }\n      });\n    };\n\n    recurse(obj);\n    return res;\n  };\n  var sanitizeObj = function sanitizeObj(obj, allowedFields) {\n    var result = _extends({}, obj);\n\n    Object.keys(result).forEach(function (prop) {\n      if (!allowedFields.includes(prop)) {\n        delete result[prop];\n      }\n    });\n\n    if (result.properties) {\n      result.properties = dotify(result.properties);\n    }\n\n    return result;\n  };\n  var hasProperty = function hasProperty(obj) {\n    return function (field) {\n      return Object.prototype.hasOwnProperty.call(obj, field) && !!obj[field];\n    };\n  };\n  var hasProperties = function hasProperties(obj, expectedFields) {\n    return expectedFields.every(hasProperty(obj));\n  };\n  var groupBy = function groupBy(items, value) {\n    return items.reduce(function (prev, current) {\n      var key = value instanceof Function ? value(current) : current[value];\n      var itemsContainingKey = prev.find(function (r) {\n        return r && r.key === key;\n      });\n\n      if (itemsContainingKey) {\n        itemsContainingKey.values.push(current);\n      } else {\n        prev.push({ key: key, values: [current] });\n      }\n\n      return prev;\n    }, []);\n  };\n  var createUUID = function createUUID() {\n    var s = [];\n    var hexDigits = '0123456789abcdef';\n    for (var i = 0; i < 36; i++) {\n      s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n    }\n    s[14] = '4'; // bits 12-15 of the time_hi_and_version field to 0010\n    s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n    s[8] = s[13] = s[18] = s[23] = '-';\n\n    var uuid = s.join('');\n    return uuid;\n  };\n\n  var Utils = {\n    dotify: dotify,\n    sanitizeObj: sanitizeObj,\n    hasProperty: hasProperty,\n    hasProperties: hasProperties,\n    groupBy: groupBy,\n    createUUID: createUUID\n  };\n\n  var OMEGA$1 = Constants.OMEGA;\n  var DEFAULT_LOG_LEVEL = OMEGA$1.DEFAULT_LOG_LEVEL,\n      ALLOWED_FIELDS = OMEGA$1.ALLOWED_FIELDS;\n  var sanitizeObj$1 = Utils.sanitizeObj;\n\n  var Omega = function () {\n    function Omega(mrId) {\n      classCallCheck(this, Omega);\n      this.mrId = null;\n\n      this.mrId = mrId;\n    }\n\n    // @TODO renombrar a normalizeLog? buildLog?\n    /*static*/\n\n    createClass(Omega, [{\n      key: 'createLog',\n      value: function createLog(obj) {\n        var mrId = this.mrId;\n\n        var sanitizedData = sanitizeObj$1(obj, ALLOWED_FIELDS);\n        var DEFAULT_LOG = {\n          mrId: mrId,\n          creationDate: Date.now() * 1000000,\n          level: DEFAULT_LOG_LEVEL\n        };\n\n        return _extends({}, DEFAULT_LOG, sanitizedData);\n      }\n    }]);\n    return Omega;\n  }();\n\n  var RHO$1 = Constants.RHO;\n  var ALLOWED_FIELDS$1 = RHO$1.ALLOWED_FIELDS;\n  var sanitizeObj$2 = Utils.sanitizeObj,\n      _createUUID = Utils.createUUID;\n\n  var Span = function () {\n    function Span(config) {\n      classCallCheck(this, Span);\n      this.spanId = null;\n\n      this.initialize(config);\n    }\n\n    createClass(Span, [{\n      key: 'initialize',\n      value: function initialize(config) {\n        var _this = this;\n\n        ALLOWED_FIELDS$1.forEach(function (field) {\n          if (config[field]) {\n            _this[field] = config[field];\n          }\n        });\n\n        this.spanId = _createUUID();\n        this.start();\n      }\n    }, {\n      key: 'start',\n      value: function start() {\n        this.startDate = Date.now() * 1000000;\n      }\n    }, {\n      key: 'finish',\n      value: function finish() {\n        this.finishDate = Date.now() * 1000000;\n      }\n    }]);\n    return Span;\n  }();\n\n  var Rho = function () {\n    function Rho(mrId) {\n      classCallCheck(this, Rho);\n      this.mrId = null;\n\n      this.mrId = mrId;\n    }\n\n    createClass(Rho, [{\n      key: 'createUUID',\n      value: function createUUID() {\n        return _createUUID();\n      }\n    }, {\n      key: 'createSpan',\n      value: function createSpan(rawData, childSpanPrefix) {\n        var DEFAULT_MR_ID = this.mrId;\n        var _rawData$mrId = rawData.mrId,\n            mrId = _rawData$mrId === undefined ? DEFAULT_MR_ID : _rawData$mrId,\n            parentSpan = rawData.parentSpan;\n\n        var normalizedParentSpan = this.getParentSpan(parentSpan, mrId, childSpanPrefix);\n        var data = _extends({}, rawData, {\n          mrId: mrId,\n          parentSpan: normalizedParentSpan\n        });\n        var span = new Span(data);\n\n        return span;\n      }\n    }, {\n      key: 'buildSpans',\n      value: function buildSpans(data) {\n        var iterableData = Array.isArray(data) ? [].concat(toConsumableArray(data)) : [data];\n\n        return iterableData.map(function (item) {\n          return sanitizeObj$2(item, ALLOWED_FIELDS$1);\n        });\n      }\n    }, {\n      key: 'getParentSpan',\n      value: function getParentSpan(parentSpan, mrId, childSpanPrefix) {\n        if (!parentSpan) {\n          return null;\n        }\n\n        return [childSpanPrefix, mrId, 'spans', parentSpan].join('/');\n      }\n    }]);\n    return Rho;\n  }();\n\n  var Adapters = {\n    Omega: Omega,\n    Rho: Rho\n  };\n\n  function request(method) {\n    var _this = this;\n\n    return function () {\n      var _ref = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(options) {\n        var url, body, headers, configuration, response, result;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                url = options.url, body = options.body, headers = options.headers;\n                configuration = {\n                  method: method,\n                  body: JSON.stringify(body),\n                  headers: {\n                    'content-type': 'application/json'\n                  }\n                };\n\n\n                if (headers) {\n                  Object.keys(headers).forEach(function (header) {\n                    var headerValue = headers[header];\n\n                    configuration.headers[header] = headerValue;\n                  });\n                }\n\n                // OJO!!!\n                // Interceptar aqu errores\n                _context.next = 5;\n                return fetch(url, configuration);\n\n              case 5:\n                response = _context.sent;\n\n                if (response.ok) {\n                  _context.next = 8;\n                  break;\n                }\n\n                return _context.abrupt('return', null);\n\n              case 8:\n                result = {};\n                _context.prev = 9;\n                _context.next = 12;\n                return response.json();\n\n              case 12:\n                result = _context.sent;\n                _context.next = 17;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context['catch'](9);\n\n              case 17:\n                return _context.abrupt('return', result);\n\n              case 18:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, _this, [[9, 15]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  var METHODS = {\n    GET: request('get'),\n    POST: request('post')\n  };\n\n  var Connector = function () {\n    function Connector() {\n      classCallCheck(this, Connector);\n    }\n\n    createClass(Connector, null, [{\n      key: 'get',\n      value: function () {\n        var _ref2 = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(url, headers) {\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  return _context2.abrupt('return', METHODS.GET({ url: url, headers: headers }));\n\n                case 1:\n                case 'end':\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function get$$1(_x2, _x3) {\n          return _ref2.apply(this, arguments);\n        }\n\n        return get$$1;\n      }()\n    }, {\n      key: 'post',\n      value: function () {\n        var _ref3 = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(url, body, headers) {\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  return _context3.abrupt('return', METHODS.POST({ url: url, body: body, headers: headers }));\n\n                case 1:\n                case 'end':\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n\n        function post(_x4, _x5, _x6) {\n          return _ref3.apply(this, arguments);\n        }\n\n        return post;\n      }()\n    }]);\n    return Connector;\n  }();\n\n  /** Default debounce duration (in ms) */\n  var DEFAULT_DEBOUNCE_DURATION = 500;\n\n  /** Decorates a class method so that it is debounced by the specified duration */\n  function outerDecorator(duration) {\n    return function innerDecorator(target, key, descriptor) {\n      return {\n        configurable: true,\n        enumerable: descriptor.enumerable,\n        get: function getter() {\n          // Attach this function to the instance (not the class)\n          Object.defineProperty(this, key, {\n            configurable: true,\n            enumerable: descriptor.enumerable,\n            value: debounce(descriptor.value, duration)\n          });\n\n          return this[key];\n        }\n      };\n    };\n  }\n\n  /** Debounces the specified function and returns a wrapper function */\n  function debounce(method) {\n    var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : DEFAULT_DEBOUNCE_DURATION;\n\n    var timeoutId = void 0;\n\n    function debounceWrapper() {\n      var _this = this;\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      debounceWrapper.clear();\n\n      timeoutId = setTimeout(function () {\n        timeoutId = null;\n        method.apply(_this, args);\n      }, duration);\n    }\n\n    debounceWrapper.clear = function () {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n        timeoutId = null;\n      }\n    };\n\n    return debounceWrapper;\n  }\n\n  var decorate = function decorate(decorators) {\n    return function (obj, prop, descriptor) {\n      var fn = descriptor.value;\n\n      decorators.slice().reverse().forEach(function (decorator) {\n        return fn = decorator(fn);\n      });\n\n      return _extends({}, descriptor, {\n        value: fn\n      });\n    };\n  };\n\n  var Decorators = {\n    outerDecorator: outerDecorator,\n    decorate: decorate\n  };\n\n  var groupBy$1 = Utils.groupBy;\n\n\n  var MAXIMUM_BULK_SIZE = 1000;\n\n  var Queue = function () {\n\n    // maximumBulkSize = null;\n\n    function Queue(identifier) {\n      classCallCheck(this, Queue);\n      this.items = [];\n      this.identifier = null;\n\n      this.identifier = identifier;\n    }\n\n    createClass(Queue, [{\n      key: 'add',\n      value: function add(endpoint, data) {\n        var _this = this;\n\n        var iterableData = Array.isArray(data) ? [].concat(toConsumableArray(data)) : [data];\n\n        iterableData.forEach(function (item) {\n          var operation = {\n            data: item,\n            endpoint: endpoint\n          };\n\n          _this.items.push(operation);\n        });\n      }\n    }, {\n      key: 'dump',\n      value: function dump() /*maximumBulkSize*/{\n        if (!this.any()) {\n          return null;\n        }\n\n        var queueGroupedByEndpoint = groupBy$1(this.items, 'endpoint');\n        var firstQueueGroup = queueGroupedByEndpoint[0].values;\n\n        var bulk = firstQueueGroup.slice(0, MAXIMUM_BULK_SIZE);\n        var newQueue = this.items.filter(function (item) {\n          return !bulk.includes(item);\n        });\n\n        console.log('Dumping ' + bulk.length + ' items from ' + this.identifier + ' queue (' + this.items.length + ')...');\n\n        this.items = newQueue;\n\n        return bulk;\n      }\n    }, {\n      key: 'any',\n      value: function any() {\n        return this.items !== null && this.items.length > 0;\n      }\n    }]);\n    return Queue;\n  }();\n\n  var _dec, _class;\n\n  function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n    var desc = {};\n    Object['ke' + 'ys'](descriptor).forEach(function (key) {\n      desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n      desc.writable = true;\n    }\n\n    desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n      return decorator(target, property, desc) || desc;\n    }, desc);\n\n    if (context && desc.initializer !== void 0) {\n      desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n      desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n      Object['define' + 'Property'](target, property, desc);\n      desc = null;\n    }\n\n    return desc;\n  }\n\n  var Omega$1 = Adapters.Omega,\n      Rho$1 = Adapters.Rho;\n  var _Constants$SEMAAS = Constants.SEMAAS,\n      REQUIRED_FIELDS = _Constants$SEMAAS.REQUIRED_FIELDS,\n      ALLOWED_FIELDS$2 = _Constants$SEMAAS.ALLOWED_FIELDS,\n      DEFAULT_ADAPTER_IDENTIFIER = _Constants$SEMAAS.DEFAULT_ADAPTER_IDENTIFIER,\n      DEFAULT_ADAPTER_VERSION = _Constants$SEMAAS.DEFAULT_ADAPTER_VERSION,\n      OMEGA_HOST = Constants.OMEGA.HOST,\n      RHO_HOST = Constants.RHO.HOST;\n  var hasProperties$1 = Utils.hasProperties;\n  var outerDecorator$1 = Decorators.outerDecorator;\n  var SEMaaS = (_dec = outerDecorator$1(5000), (_class = function () {\n\n    // properties that belong to semaas life cycle and rely on configurable properties\n    function SEMaaS(config) {\n      classCallCheck(this, SEMaaS);\n      this.nameSpace = null;\n      this.identifier = DEFAULT_ADAPTER_IDENTIFIER;\n      this.mrId = null;\n      this.consumerId = null;\n      this.policy = null;\n      this.region = null;\n      this.dnsTld = null;\n      this.version = DEFAULT_ADAPTER_VERSION;\n      this.tsec2JWTEndpoint = null;\n      this.apiKey = null;\n      this.omega = null;\n      this.rho = null;\n      this.queue = null;\n\n      this.setup(config);\n    }\n\n    // composition entitys\n\n    // configurable properties by constructor\n\n\n    createClass(SEMaaS, [{\n      key: 'setup',\n      value: function setup(config) {\n        if (!config || !this.validateConfig(config, REQUIRED_FIELDS)) {\n          throw new Error('Invalid setup for SEMaaS adapter (' + this.identifier + '). Required fields: ' + REQUIRED_FIELDS.join(', ') + '.');\n        }\n\n        this.initialize(config);\n      }\n    }, {\n      key: 'validateConfig',\n      value: function validateConfig(config, expectedFields) {\n        return hasProperties$1(config, expectedFields);\n      }\n    }, {\n      key: 'initialize',\n      value: function initialize(config) {\n        var _this = this;\n\n        ALLOWED_FIELDS$2.forEach(function (field) {\n          if (config[field]) {\n            _this[field] = config[field];\n          }\n        });\n\n        var nameSpace = this.nameSpace,\n            identifier = this.identifier,\n            mrId = this.mrId,\n            tsec2JWTEndpoint = this.tsec2JWTEndpoint,\n            region = this.region,\n            dnsTld = this.dnsTld,\n            version = this.version;\n\n\n        this.omega = new Omega$1(mrId);\n        this.rho = new Rho$1(mrId);\n        this.queue = new Queue(identifier);\n\n        console.info('SEMaaS adapter for ' + region + ' (TSEC: ' + tsec2JWTEndpoint + ') [' + dnsTld + ' - ' + version + '] (' + identifier + ' - ns: ' + nameSpace + ', mrId: ' + mrId + ') successfully initialized.');\n      }\n    }, {\n      key: 'log',\n      value: function log(obj) {\n        var data = this.omega.createLog(obj);\n\n        this.enqueue(this.omegaEndpoint, data);\n      }\n    }, {\n      key: 'ingest',\n      value: function ingest(spans) {\n        var data = this.rho.buildSpans(spans);\n\n        this.enqueue(this.rhoEndpoint, data);\n      }\n    }, {\n      key: 'createSpan',\n      value: function createSpan(data) {\n        var span = this.rho.createSpan(data, this.prefixForChildSpan);\n\n        return span;\n      }\n    }, {\n      key: 'createUUID',\n      value: function createUUID() {\n        var UUID = this.rho.createUUID();\n\n        return UUID;\n      }\n    }, {\n      key: 'send',\n      value: function () {\n        var _ref = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(url, body, headers) {\n          var result;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  result = void 0;\n                  _context.prev = 1;\n                  _context.next = 4;\n                  return Connector.post(url, body, headers);\n\n                case 4:\n                  result = _context.sent;\n                  _context.next = 9;\n                  break;\n\n                case 7:\n                  _context.prev = 7;\n                  _context.t0 = _context['catch'](1);\n\n                case 9:\n\n                  if (!result) {\n                    console.log('There was a problem while sending data to SEMaaS - operation will be queued.');\n\n                    this.enqueue(url, body);\n                  }\n\n                  return _context.abrupt('return', result);\n\n                case 11:\n                case 'end':\n                  return _context.stop();\n              }\n            }\n          }, _callee, this, [[1, 7]]);\n        }));\n\n        function send(_x, _x2, _x3) {\n          return _ref.apply(this, arguments);\n        }\n\n        return send;\n      }()\n    }, {\n      key: 'enqueue',\n      value: function enqueue(url, body) {\n        this.queue.add(url, body);\n        this.flush();\n      }\n\n      // @decorate([tsec2jwt, outerDecorator(5000)])\n\n    }, {\n      key: 'flush',\n      value: function () {\n        var _ref2 = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n          var _this2 = this;\n\n          var validApiKey, bulk, endpoint, apiKey, body, headers;\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return this.ensureValidApiKey();\n\n                case 2:\n                  validApiKey = _context2.sent;\n\n                  if (validApiKey) {\n                    _context2.next = 6;\n                    break;\n                  }\n\n                  console.log('No valid API Key for SEMaaS adapter (' + this.identifier + ') - aborting operation');\n                  return _context2.abrupt('return');\n\n                case 6:\n                  bulk = this.queue.dump();\n\n                  if (bulk) {\n                    _context2.next = 10;\n                    break;\n                  }\n\n                  console.log('Empty queue for SEMaaS adapter (' + this.identifier + ')');\n                  return _context2.abrupt('return');\n\n                case 10:\n                  endpoint = bulk[0].endpoint;\n                  apiKey = this.apiKey;\n\n\n                  console.log('Sending queued batch ' + endpoint + ' - ' + apiKey);\n\n                  body = bulk.map(function (operation) {\n                    return operation.data;\n                  });\n                  headers = this.buildApiHeaders();\n\n                  // if bulk send is OK, and there are more items, we try to flush the buffer\n\n                  this.send(endpoint, body, headers).then(function () {\n                    return _this2.queue.any() && _this2.flush();\n                  });\n\n                case 16:\n                case 'end':\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function flush() {\n          return _ref2.apply(this, arguments);\n        }\n\n        return flush;\n      }()\n    }, {\n      key: 'ensureValidApiKey',\n      value: function () {\n        var _ref3 = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (!this.hasApiKey) {\n                    _context3.next = 5;\n                    break;\n                  }\n\n                  console.log('ApiKey OK -> next()');\n                  return _context3.abrupt('return', true);\n\n                case 5:\n                  if (!this.hasCredentials) {\n                    _context3.next = 8;\n                    break;\n                  }\n\n                  console.log('ApiKey KO, Credentials OK -> getApiKey()');\n                  return _context3.abrupt('return', this.getApiKey());\n\n                case 8:\n\n                  console.log('No ApiKey && No Credentials -> KO');\n                  return _context3.abrupt('return', false);\n\n                case 10:\n                case 'end':\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, this);\n        }));\n\n        function ensureValidApiKey() {\n          return _ref3.apply(this, arguments);\n        }\n\n        return ensureValidApiKey;\n      }()\n    }, {\n      key: 'buildApiHeaders',\n      value: function buildApiHeaders() {\n        var key = void 0;\n        var value = void 0;\n\n        switch (this.version.toLowerCase()) {\n          case 'v1':\n            key = 'Authorization';\n            value = 'Bearer ' + this.apiKey;\n            break;\n          default:\n            key = 'Api-Key';\n            value = 'jwt ' + this.apiKey;\n            break;\n        }\n\n        return defineProperty({}, key, value);\n      }\n    }, {\n      key: 'getApiKey',\n      value: function () {\n        var _ref5 = asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n          var consumerId, policy, tsec2JWTEndpoint, headers, host, result, accessToken;\n          return regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  consumerId = this.consumerId, policy = this.policy, tsec2JWTEndpoint = this.tsec2JWTEndpoint;\n                  headers = {\n                    'x-consumer-id': consumerId,\n                    'x-tsec-token': window.sessionStorage.getItem('tsec'),\n                    'x-validation-policy': policy\n                  };\n                  host = tsec2JWTEndpoint;\n                  _context4.next = 5;\n                  return Connector.get(host, headers);\n\n                case 5:\n                  result = _context4.sent;\n\n                  if (result) {\n                    _context4.next = 8;\n                    break;\n                  }\n\n                  return _context4.abrupt('return', null);\n\n                case 8:\n                  accessToken = result.accessToken;\n\n\n                  this.apiKey = accessToken;\n                  return _context4.abrupt('return', accessToken);\n\n                case 11:\n                case 'end':\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, this);\n        }));\n\n        function getApiKey() {\n          return _ref5.apply(this, arguments);\n        }\n\n        return getApiKey;\n      }()\n    }, {\n      key: 'getEndpoint',\n      value: function getEndpoint(host) {\n        var region = this.region,\n            dnsTld = this.dnsTld,\n            version = this.version;\n\n\n        return host(region, dnsTld, version);\n      }\n    }, {\n      key: 'hasApiKey',\n      get: function get$$1() {\n        // @TODO aadir lgica recuperacin + persistencia sessionStorage jwt\n        return !!this.apiKey;\n      }\n    }, {\n      key: 'hasCredentials',\n      get: function get$$1() {\n        return !!this.consumerId && !!this.policy && !!this.tsec;\n      }\n    }, {\n      key: 'initialized',\n      get: function get$$1() {\n        return !!this.omega && !!this.rho;\n      }\n    }, {\n      key: 'omegaEndpoint',\n      get: function get$$1() {\n        var nameSpace = this.nameSpace;\n\n        var host = this.getEndpoint(OMEGA_HOST);\n\n        return host + '/ns/' + nameSpace + '/logs';\n      }\n    }, {\n      key: 'rhoEndpoint',\n      get: function get$$1() {\n        var nameSpace = this.nameSpace;\n\n        var host = this.getEndpoint(RHO_HOST);\n\n        return host + '/ns/' + nameSpace + '/spans';\n      }\n    }, {\n      key: 'prefixForChildSpan',\n      get: function get$$1() {\n        return 'ns/' + this.nameSpace + '/mrs';\n      }\n    }, {\n      key: 'tsec',\n      get: function get$$1() {\n        return window.sessionStorage.getItem('tsec');\n      }\n    }]);\n    return SEMaaS;\n  }(), (_applyDecoratedDescriptor(_class.prototype, 'flush', [_dec], Object.getOwnPropertyDescriptor(_class.prototype, 'flush'), _class.prototype)), _class));\n\n  return SEMaaS;\n\n})));\n//# sourceMappingURL=cells-semaas-adapter.js.map\n","if (!Object.values) {\n\tObject.values = function values(obj) {\n    return Object.keys(obj).map(function (key) {\n  \t\treturn obj[key];\n  \t});\n\t};\n}\n\nif (!Object.entries) {\n  Object.entries = function( obj ){\n    var ownProps = Object.keys( obj ),\n        i = ownProps.length,\n        resArray = new Array(i); // preallocate the Array\n    while (i--)\n      resArray[i] = [ownProps[i], obj[ownProps[i]]];\n\n    return resArray;\n  };\n}\n\nif (!String.prototype.endsWith) {\n  String.prototype.endsWith = function(searchString, position) {\n      var subjectString = this.toString();\n      if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n        position = subjectString.length;\n      }\n      position -= searchString.length;\n      var lastIndex = subjectString.indexOf(searchString, position);\n      return lastIndex !== -1 && lastIndex === position;\n  };\n}\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\nmodule.exports = function (x) {\n\tvar type = typeof x;\n\treturn x !== null && (type === 'object' || type === 'function');\n};\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nexport function canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=canReportError.js.map\n","/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function noop() { }\n//# sourceMappingURL=noop.js.map\n","/** PURE_IMPORTS_START _noop PURE_IMPORTS_END */\nimport { noop } from './noop';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n","/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexport { MapOperator };\nvar MapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=map.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nvar toString = /*@__PURE__*/ (function () { return Object.prototype.toString; })();\nexport function fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n    }\n    return new Observable(function (subscriber) {\n        function handler(e) {\n            if (arguments.length > 1) {\n                subscriber.next(Array.prototype.slice.call(arguments));\n            }\n            else {\n                subscriber.next(e);\n            }\n        }\n        setupSubscription(target, eventName, handler, subscriber, options);\n    });\n}\nfunction setupSubscription(sourceObj, eventName, handler, subscriber, options) {\n    var unsubscribe;\n    if (isEventTarget(sourceObj)) {\n        var source_1 = sourceObj;\n        sourceObj.addEventListener(eventName, handler, options);\n        unsubscribe = function () { return source_1.removeEventListener(eventName, handler, options); };\n    }\n    else if (isJQueryStyleEventEmitter(sourceObj)) {\n        var source_2 = sourceObj;\n        sourceObj.on(eventName, handler);\n        unsubscribe = function () { return source_2.off(eventName, handler); };\n    }\n    else if (isNodeStyleEventEmitter(sourceObj)) {\n        var source_3 = sourceObj;\n        sourceObj.addListener(eventName, handler);\n        unsubscribe = function () { return source_3.removeListener(eventName, handler); };\n    }\n    else if (sourceObj && sourceObj.length) {\n        for (var i = 0, len = sourceObj.length; i < len; i++) {\n            setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n        }\n    }\n    else {\n        throw new TypeError('Invalid event target');\n    }\n    subscriber.add(unsubscribe);\n}\nfunction isNodeStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.addListener === 'function' && typeof sourceObj.removeListener === 'function';\n}\nfunction isJQueryStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.on === 'function' && typeof sourceObj.off === 'function';\n}\nfunction isEventTarget(sourceObj) {\n    return sourceObj && typeof sourceObj.addEventListener === 'function' && typeof sourceObj.removeEventListener === 'function';\n}\n//# sourceMappingURL=fromEvent.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport var EMPTY = /*@__PURE__*/ new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n//# sourceMappingURL=isScheduler.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeToArray } from '../util/subscribeToArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return scheduleArray(input, scheduler);\n    }\n}\n//# sourceMappingURL=fromArray.js.map\n","/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { isScheduler } from '../util/isScheduler';\nimport { fromArray } from './fromArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n        return scheduleArray(args, scheduler);\n    }\n    else {\n        return fromArray(args);\n    }\n}\n//# sourceMappingURL=of.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n//# sourceMappingURL=throwError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = /*@__PURE__*/ getSymbolIterator();\nexport var $$iterator = iterator;\n//# sourceMappingURL=iterator.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isPromise(value) {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n//# sourceMappingURL=isPromise.js.map\n","/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo,_Observable PURE_IMPORTS_END */\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeTo } from './subscribeTo';\nimport { Observable } from '../Observable';\nexport function subscribeToResult(outerSubscriber, result, outerValue, outerIndex, innerSubscriber) {\n    if (innerSubscriber === void 0) {\n        innerSubscriber = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    }\n    if (innerSubscriber.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable) {\n        return result.subscribe(innerSubscriber);\n    }\n    return subscribeTo(result)(innerSubscriber);\n}\n//# sourceMappingURL=subscribeToResult.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function scheduleObservable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            var observable = input[Symbol_observable]();\n            sub.add(observable.subscribe({\n                next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function schedulePromise(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            return input.then(function (value) {\n                sub.add(scheduler.schedule(function () {\n                    subscriber.next(value);\n                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                }));\n            }, function (err) {\n                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n            });\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=schedulePromise.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_iterator PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function scheduleIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var iterator;\n        sub.add(function () {\n            if (iterator && typeof iterator.return === 'function') {\n                iterator.return();\n            }\n        });\n        sub.add(scheduler.schedule(function () {\n            iterator = input[Symbol_iterator]();\n            sub.add(scheduler.schedule(function () {\n                if (subscriber.closed) {\n                    return;\n                }\n                var value;\n                var done;\n                try {\n                    var result = iterator.next();\n                    value = result.value;\n                    done = result.done;\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                    this.schedule();\n                }\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function isInteropObservable(input) {\n    return input && typeof input[Symbol_observable] === 'function';\n}\n//# sourceMappingURL=isInteropObservable.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function isIterable(input) {\n    return input && typeof input[Symbol_iterator] === 'function';\n}\n//# sourceMappingURL=isIterable.js.map\n","/** PURE_IMPORTS_START _scheduleObservable,_schedulePromise,_scheduleArray,_scheduleIterable,_util_isInteropObservable,_util_isPromise,_util_isArrayLike,_util_isIterable PURE_IMPORTS_END */\nimport { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        else if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return scheduleIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n//# sourceMappingURL=scheduled.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeTo,_scheduled_scheduled PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeTo } from '../util/subscribeTo';\nimport { scheduled } from '../scheduled/scheduled';\nexport function from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable) {\n            return input;\n        }\n        return new Observable(subscribeTo(input));\n    }\n    else {\n        return scheduled(input, scheduler);\n    }\n}\n//# sourceMappingURL=from.js.map\n","/** PURE_IMPORTS_START tslib,_util_subscribeToResult,_OuterSubscriber,_InnerSubscriber,_map,_observable_from PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { map } from './map';\nimport { from } from '../observable/from';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /*@__PURE__*/ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\nexport { MergeMapOperator };\nvar MergeMapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result, value, index);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish, value, index) {\n        var innerSubscriber = new InnerSubscriber(this, value, index);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        var innerSubscription = subscribeToResult(this, ish, undefined, undefined, innerSubscriber);\n        if (innerSubscription !== innerSubscriber) {\n            destination.add(innerSubscription);\n        }\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n        this.unsubscribe();\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(OuterSubscriber));\nexport { MergeMapSubscriber };\n//# sourceMappingURL=mergeMap.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map\n","/** PURE_IMPORTS_START _mergeMap,_util_identity PURE_IMPORTS_END */\nimport { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isScheduler,_operators_mergeAll,_fromArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isScheduler } from '../util/isScheduler';\nimport { mergeAll } from '../operators/mergeAll';\nimport { fromArray } from './fromArray';\nexport function merge() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var concurrent = Number.POSITIVE_INFINITY;\n    var scheduler = null;\n    var last = observables[observables.length - 1];\n    if (isScheduler(last)) {\n        scheduler = observables.pop();\n        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n            concurrent = observables.pop();\n        }\n    }\n    else if (typeof last === 'number') {\n        concurrent = observables.pop();\n    }\n    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n        return observables[0];\n    }\n    return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\n//# sourceMappingURL=merge.js.map\n","/** PURE_IMPORTS_START _mergeAll PURE_IMPORTS_END */\nimport { mergeAll } from './mergeAll';\nexport function concatAll() {\n    return mergeAll(1);\n}\n//# sourceMappingURL=concatAll.js.map\n","/** PURE_IMPORTS_START _of,_operators_concatAll PURE_IMPORTS_END */\nimport { of } from './of';\nimport { concatAll } from '../operators/concatAll';\nexport function concat() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    return concatAll()(of.apply(void 0, observables));\n}\n//# sourceMappingURL=concat.js.map\n","/** PURE_IMPORTS_START _observable_concat,_util_isScheduler PURE_IMPORTS_END */\nimport { concat } from '../observable/concat';\nimport { isScheduler } from '../util/isScheduler';\nexport function startWith() {\n    var array = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        array[_i] = arguments[_i];\n    }\n    var scheduler = array[array.length - 1];\n    if (isScheduler(scheduler)) {\n        array.pop();\n        return function (source) { return concat(array, source, scheduler); };\n    }\n    else {\n        return function (source) { return concat(array, source); };\n    }\n}\n//# sourceMappingURL=startWith.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function distinctUntilChanged(compare, keySelector) {\n    return function (source) { return source.lift(new DistinctUntilChangedOperator(compare, keySelector)); };\n}\nvar DistinctUntilChangedOperator = /*@__PURE__*/ (function () {\n    function DistinctUntilChangedOperator(compare, keySelector) {\n        this.compare = compare;\n        this.keySelector = keySelector;\n    }\n    DistinctUntilChangedOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DistinctUntilChangedSubscriber(subscriber, this.compare, this.keySelector));\n    };\n    return DistinctUntilChangedOperator;\n}());\nvar DistinctUntilChangedSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DistinctUntilChangedSubscriber, _super);\n    function DistinctUntilChangedSubscriber(destination, compare, keySelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.hasKey = false;\n        if (typeof compare === 'function') {\n            _this.compare = compare;\n        }\n        return _this;\n    }\n    DistinctUntilChangedSubscriber.prototype.compare = function (x, y) {\n        return x === y;\n    };\n    DistinctUntilChangedSubscriber.prototype._next = function (value) {\n        var key;\n        try {\n            var keySelector = this.keySelector;\n            key = keySelector ? keySelector(value) : value;\n        }\n        catch (err) {\n            return this.destination.error(err);\n        }\n        var result = false;\n        if (this.hasKey) {\n            try {\n                var compare = this.compare;\n                result = compare(this.key, key);\n            }\n            catch (err) {\n                return this.destination.error(err);\n            }\n        }\n        else {\n            this.hasKey = true;\n        }\n        if (!result) {\n            this.key = key;\n            this.destination.next(value);\n        }\n    };\n    return DistinctUntilChangedSubscriber;\n}(Subscriber));\n//# sourceMappingURL=distinctUntilChanged.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError,_observable_empty PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nexport function take(count) {\n    return function (source) {\n        if (count === 0) {\n            return empty();\n        }\n        else {\n            return source.lift(new TakeOperator(count));\n        }\n    };\n}\nvar TakeOperator = /*@__PURE__*/ (function () {\n    function TakeOperator(total) {\n        this.total = total;\n        if (this.total < 0) {\n            throw new ArgumentOutOfRangeError;\n        }\n    }\n    TakeOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TakeSubscriber(subscriber, this.total));\n    };\n    return TakeOperator;\n}());\nvar TakeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TakeSubscriber, _super);\n    function TakeSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    TakeSubscriber.prototype._next = function (value) {\n        var total = this.total;\n        var count = ++this.count;\n        if (count <= total) {\n            this.destination.next(value);\n            if (count === total) {\n                this.destination.complete();\n                this.unsubscribe();\n            }\n        }\n    };\n    return TakeSubscriber;\n}(Subscriber));\n//# sourceMappingURL=take.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function defaultIfEmpty(defaultValue) {\n    if (defaultValue === void 0) {\n        defaultValue = null;\n    }\n    return function (source) { return source.lift(new DefaultIfEmptyOperator(defaultValue)); };\n}\nvar DefaultIfEmptyOperator = /*@__PURE__*/ (function () {\n    function DefaultIfEmptyOperator(defaultValue) {\n        this.defaultValue = defaultValue;\n    }\n    DefaultIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DefaultIfEmptySubscriber(subscriber, this.defaultValue));\n    };\n    return DefaultIfEmptyOperator;\n}());\nvar DefaultIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DefaultIfEmptySubscriber, _super);\n    function DefaultIfEmptySubscriber(destination, defaultValue) {\n        var _this = _super.call(this, destination) || this;\n        _this.defaultValue = defaultValue;\n        _this.isEmpty = true;\n        return _this;\n    }\n    DefaultIfEmptySubscriber.prototype._next = function (value) {\n        this.isEmpty = false;\n        this.destination.next(value);\n    };\n    DefaultIfEmptySubscriber.prototype._complete = function () {\n        if (this.isEmpty) {\n            this.destination.next(this.defaultValue);\n        }\n        this.destination.complete();\n    };\n    return DefaultIfEmptySubscriber;\n}(Subscriber));\n//# sourceMappingURL=defaultIfEmpty.js.map\n","/** PURE_IMPORTS_START tslib,_util_EmptyError,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { EmptyError } from '../util/EmptyError';\nimport { Subscriber } from '../Subscriber';\nexport function throwIfEmpty(errorFactory) {\n    if (errorFactory === void 0) {\n        errorFactory = defaultErrorFactory;\n    }\n    return function (source) {\n        return source.lift(new ThrowIfEmptyOperator(errorFactory));\n    };\n}\nvar ThrowIfEmptyOperator = /*@__PURE__*/ (function () {\n    function ThrowIfEmptyOperator(errorFactory) {\n        this.errorFactory = errorFactory;\n    }\n    ThrowIfEmptyOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ThrowIfEmptySubscriber(subscriber, this.errorFactory));\n    };\n    return ThrowIfEmptyOperator;\n}());\nvar ThrowIfEmptySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ThrowIfEmptySubscriber, _super);\n    function ThrowIfEmptySubscriber(destination, errorFactory) {\n        var _this = _super.call(this, destination) || this;\n        _this.errorFactory = errorFactory;\n        _this.hasValue = false;\n        return _this;\n    }\n    ThrowIfEmptySubscriber.prototype._next = function (value) {\n        this.hasValue = true;\n        this.destination.next(value);\n    };\n    ThrowIfEmptySubscriber.prototype._complete = function () {\n        if (!this.hasValue) {\n            var err = void 0;\n            try {\n                err = this.errorFactory();\n            }\n            catch (e) {\n                err = e;\n            }\n            this.destination.error(err);\n        }\n        else {\n            return this.destination.complete();\n        }\n    };\n    return ThrowIfEmptySubscriber;\n}(Subscriber));\nfunction defaultErrorFactory() {\n    return new EmptyError();\n}\n//# sourceMappingURL=throwIfEmpty.js.map\n","/** PURE_IMPORTS_START _util_EmptyError,_filter,_take,_defaultIfEmpty,_throwIfEmpty,_util_identity PURE_IMPORTS_END */\nimport { EmptyError } from '../util/EmptyError';\nimport { filter } from './filter';\nimport { take } from './take';\nimport { defaultIfEmpty } from './defaultIfEmpty';\nimport { throwIfEmpty } from './throwIfEmpty';\nimport { identity } from '../util/identity';\nexport function first(predicate, defaultValue) {\n    var hasDefaultValue = arguments.length >= 2;\n    return function (source) { return source.pipe(predicate ? filter(function (v, i) { return predicate(v, i, source); }) : identity, take(1), hasDefaultValue ? defaultIfEmpty(defaultValue) : throwIfEmpty(function () { return new EmptyError(); })); };\n}\n//# sourceMappingURL=first.js.map\n","\nimport { BRIDGE_CHANNEL_KEY, BRIDGE_BIND_KEY, lastValue } from './feature-flag-collection';\n\nexport function defaultChangedCallback(fn) {\n  if(typeof fn === 'function') {\n    _defaultCallbackElement = fn;\n  }\n}\n\nexport function extend(cellsComponent, bridge) {\n  let extraConnections = _defaultConnections();\n  let spec = cellsComponent.spec;\n  let nodeFFCallback = cellsComponent.node[BRIDGE_BIND_KEY] || _defaultCallbackElement;\n  Object.defineProperty(cellsComponent.node, BRIDGE_BIND_KEY, {\n    value: () => _nodeFFCallbackWrap(cellsComponent, bridge, nodeFFCallback)\n  });\n  // update connections with new connection of FeatureFlag\n  if(spec.connections && spec.connections.in) {\n    Object.assign(spec.connections.in, extraConnections.in)\n  } else if(spec.connections) {\n    Object.assign(spec.connections, extraConnections)\n  } else {\n    spec.connections = extraConnections;\n  }\n\n  // set last value in collection. These is used in \"ComponentConnector\" when publish in output channel from events\n  lastValue.set(cellsComponent.node, cellsComponent.node[BRIDGE_BIND_KEY]());\n\n  return cellsComponent;\n}\n\nexport default { extend, defaultChangedCallback, BRIDGE_CHANNEL_KEY };\n\n// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \n// . . . . .. . . . . .. . . . .Private. . . . .. . . . .  . . . . . . .\n// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - \n\nlet _defaultCallbackElement = _nodeFFCalback_toggleVisibility;\n\nfunction _defaultConnections () {\n  return {\n    in : {\n      [BRIDGE_CHANNEL_KEY]: {\n        bind: BRIDGE_BIND_KEY\n      }\n    }\n  }\n};\n\nfunction _nodeFFCalback_toggleVisibility(fFValue, cellsComponent) {\n  cellsComponent.node.style.visibility = fFValue ? 'initial' : 'hidden';\n  return !!fFValue;\n}\n\nfunction _nodeFFCallbackWrap(cellsComponent, {featureFlagCollection, ComponentConnector}, fFCallback) {\n  const _ffValue = featureFlagCollection.value(cellsComponent.spec.featureFlag);\n  const _ffValueResult = fFCallback.call(cellsComponent.node, _ffValue, cellsComponent) === false ? false : true;\n  const _connections = cellsComponent.spec.connections\n\n\n  if(_ffValueResult) {\n    ComponentConnector._updateInConnections(cellsComponent.node, _connections.in)\n  } else if(ComponentConnector.subscriptors.has(cellsComponent.node)){\n    let inConnections = Object.keys(_connections.in)\n      .filter(k => k !== BRIDGE_CHANNEL_KEY);\n    ComponentConnector.unsubscribe(inConnections, cellsComponent.node);\n  }\n\n  // set last value in collection. These is used in \"ComponentConnector\" when publish in output channel from events\n  lastValue.set(cellsComponent.node, _ffValueResult);\n\n  return _ffValueResult\n}\n","export function isPolymerElementUnresolved(node) {\n  const isCustomElement = node.tagName.indexOf('-') > -1 ;\n  const isPolymer1 = node.__isPolymerInstance__ === true;\n  const isPolymer2 = (\n    (Polymer.Element !== undefined && node instanceof Polymer.Element) ||\n    (Polymer.ElementMixin !== undefined && node instanceof Polymer.ElementMixin) ||\n    (Polymer.LegacyElementMixin !== undefined && node instanceof Polymer.LegacyElementMixin) ||\n    (node.is !== undefined && node.ready !== undefined && node.notifyPath !== undefined)\n  );\n  const isLitElement = node.updateComplete instanceof Promise && typeof node.render === 'function';\n\n  return isCustomElement && !isPolymer1 && !isPolymer2 && !isLitElement;\n}\n\nexport default {\n  isPolymerElementUnresolved\n};\n","import EventEmitter from 'events';\n\nconst maxNumListeners = 20;\n\nclass CustomEventEmitter extends EventEmitter {\n  listenToOnce(node, name, callback) {\n    var fn = function () {\n      callback();\n      node.removeEventListener(name, fn);\n    }.bind(this);\n    node.addEventListener(name, fn);\n  }\n}\n\nconst eventManager = new CustomEventEmitter();\n\neventManager.setMaxListeners(maxNumListeners);\n\nexport default eventManager;\n\n\n","/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */\nimport { empty } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nexport var NotificationKind;\n/*@__PURE__*/ (function (NotificationKind) {\n    NotificationKind[\"NEXT\"] = \"N\";\n    NotificationKind[\"ERROR\"] = \"E\";\n    NotificationKind[\"COMPLETE\"] = \"C\";\n})(NotificationKind || (NotificationKind = {}));\nvar Notification = /*@__PURE__*/ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\nexport { Notification };\n//# sourceMappingURL=Notification.js.map\n","// binding\n\nexport const bindingCodes = {\n  ALWAYS: \"always\",\n  DELAYED: \"delayed\",\n  UI: \"ui\",\n  CURRENTVIEW: \"currentview\"\n};\n\nexport const binding = {\n  DEFAULT: bindingCodes.ALWAYS,\n  VALUES: Object.values(bindingCodes)\n};\n\n// external events\n\nexport const externalEventsCodes = {\n  PAGE_READY: \"page-ready\",\n  PARSE_ROUTE: \"parse-route\",\n  AFTER_PUBLISH: \"after-publish\",\n  NAV_REQUEST: \"nav-request\",\n  BEFORE_SET_ATTR_TO_NODE: \"before-set-attr-to-node\",\n  AFTER_SET_ATTR_TO_NODE: \"after-set-attr-to-node\",\n  BEFORE_CREATE_NODE: \"before-create-node\",\n  AFTER_CREATE_NODE: \"after-create-node\",\n  BEFORE_IMPORT: \"before-import\",\n  AFTER_IMPORT: \"after-import\",\n  PAGE_REQUEST: \"page-request\",\n  PAGE_RESPONSE: \"page-response\",\n  DATA_LOAD: \"data-load\",\n  TEMPLATE_TRANSITION_END: \"template-transition-end\",\n  TRACK_EVENT: \"track-event\",\n  TEMPLATE_REGISTERED: \"template-registered\",\n  ROUTER_BACKSTEP: \"router-backstep\",\n  LOG_EVENT: \"log-event\"\n};\n\nexport const externalEvents = Object.values(externalEventsCodes);\n\n// componentsPath\n\nexport const componentsPath = \"./bower_components/\";\n\n// composerEndpoint\n\nexport const composerEndpoint = \"./composerMocks/\";\n\n// deployEndpoint\n\nexport const deployEndpoint = \"\";\n\n// initialTemplate\n\nexport const initialTemplate = \"login\";\n\n// monitoring config\n\n// const mrId = 'web';\nconst mrId = 'core';\n// const nameSpace = 'com.bbva.es.channels';\nconst nameSpace = 'ether.cells';\n\nexport const monitoring = {\n  SEMAAS: {\n    policy: 'ei_bbva_es',\n    mrId,\n    nameSpace,\n    identifier: 'bridge',\n    // consumerId: `${mrId}@${nameSpace}`,\n    consumerId: 'core@ether.cells',\n  },\n};\n\n// pagesPath\n\nexport const pagesPath = \"./pages/\";\n\n// prpl\n\nexport const prplCodes = {\n  NONE: \"none\",\n  DEFER: \"defer\",\n  PROGRESSIVE: \"progressive\",\n  HERO: \"hero\"\n};\n\nexport const prpl = {\n  DEFAULT: prplCodes.DEFER,\n  VALUES: Object.values(prplCodes)\n};\n\nexport const preRenderState = {\n  WORKING: 'working',\n  REQUESTED: 'requested'\n};\n\n// render engines\n\nexport const renderEngines = {\n  litElement: 'litElement'\n};\n\n// default\n\nexport default {\n  bindingCodes,\n  binding,\n  componentsPath,\n  composerEndpoint,\n  deployEndpoint,\n  externalEvents,\n  externalEventsCodes,\n  initialTemplate,\n  monitoring,\n  pagesPath,\n  prplCodes,\n  prpl,\n  preRenderState,\n  renderEngines,\n};\n","import eventManager from './events'\nimport Constants from '../constants';\n\nconst { externalEventsCodes } = Constants;\n\nlet CellsManagerDom = class CellsManagerDom  {\n  createComponents(spec) {\n    /* istanbul ignore if */\n    if (!spec) {\n      return;\n    }\n    var elements = [];\n    var i = 0;\n    for (let index = 0; index < spec.length; index++) {\n      const element = spec[index];\n      elements[i] = this.createElement(element.tagName);\n      elements[i].__zone = element.zone;\n      i++;\n    }\n\n    return elements;\n  }\n\n  setAttrs(node, attrs) {\n    const { BEFORE_SET_ATTR_TO_NODE, AFTER_SET_ATTR_TO_NODE } = externalEventsCodes;\n\n    if (attrs && typeof attrs === 'object') {\n      eventManager.emit(BEFORE_SET_ATTR_TO_NODE, node.tagName);\n      Object.assign(node, attrs);\n      eventManager.emit(AFTER_SET_ATTR_TO_NODE, node);\n    }\n  }\n\n  createElement(tagName, properties) {\n    const { BEFORE_CREATE_NODE, AFTER_CREATE_NODE } = externalEventsCodes;\n\n    eventManager.emit(BEFORE_CREATE_NODE, tagName);\n    var node = document.createElement(tagName);\n    eventManager.emit(AFTER_CREATE_NODE, node);\n\n    /* istanbul ignore else */\n    if (properties) {\n      this.setAttrs(node, properties);\n    }\n\n    return node;\n  }\n}\n\nexport default CellsManagerDom;\n","class InMemmoryStorage  {\n  dictionary = {};\n  getItem(key) {\n    return this.dictionary[key] || null;\n  }\n  setItem(key, value) {\n    this.dictionary[key] = value;\n  }\n}\n\nexport default class CellsStorage {\n  prefix = '';\n  persistent = false;\n  internalStorage = new InMemmoryStorage();\n\n  constructor(options) {\n    Object.assign(this, options);\n\n    if (this.persistent) {\n      this.clear();\n    }\n  }\n\n  get storage() {\n    let store;\n    if (this.persistent) {\n      store = window.localStorage;\n    } else {\n      store = window.sessionStorage;\n    }\n    try {\n      store.setItem('_$_', {});\n    } catch (error) {\n      store = this.internalStorage;\n    }\n    return store;\n  }\n\n  getItem(key) {\n    return JSON.parse(this.storage.getItem(this.prefix + key));\n  }\n\n  setItem(key, value) {\n    this.storage.setItem(this.prefix + key, JSON.stringify(value, '', true));\n  }\n\n  clear() {\n    var pattern = new RegExp('^(' + this.prefix + ')');\n\n    for (let key in this.storage) {\n      if(this.storage.hasOwnProperty(key)){\n        if (pattern.test(key)) {\n          this.storage.removeItem(key)\n        }\n      }\n    }\n  }\n}\n","export default class CellsBridgeConnector {\n\n  _get(options, format) {\n    return new Promise(\n      function(resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        if (!options || !options.url) {\n          reject(new Error('URL not defined'));\n          return;\n        }\n        var method = (options.method || '').toUpperCase() || 'GET';\n        xhr.addEventListener('load', (e) => {\n          let xhr = e.target;\n          let status = xhr.status;\n          if ((status >= 200 && status < 300) || (status == 0 && xhr.responseText.length > 0)) {\n            if (format==='json') {\n              resolve(JSON.parse(xhr.response));\n            } else {\n              resolve(xhr.responseText);\n            }\n          } else {\n            reject(new Error(xhr.statusText));\n          }\n        });\n        xhr.addEventListener('error', () => {\n          reject(new Error('Network Error'));\n        });\n        xhr.open(method, options.url);\n        //\n        let headers = options.headers;\n        for (var header in headers) {\n          if (headers.hasOwnProperty(header)) {\n            xhr.setRequestHeader(header, headers[header]);\n          }\n        }\n        xhr.send(options.body);\n      }\n    );\n  }\n\n  getJSON(options) {\n    return this._get(options, 'json');\n  }\n\n  getHTML(options) {\n    return this._get(options, 'html');\n  }\n}\n","// Taken from string.js npm package\n// https://github.com/jprichardson/string.js\n\nexport const dasherize = str => str.trim().replace(/[_\\s]+/g, '-').replace(/([A-Z])/g, '-$1').replace(/-+/g, '-').toLowerCase()\nexport const camelize = str => str.trim().replace(/(-|_|\\s)+(.)?/g, (mathc, sep, c) => c ? c.toUpperCase() : '');\n\nexport default {\n  dasherize,\n  camelize\n};\n","import Utils from './utils';\n\nconst { dasherize } = Utils;\n\n/**\n * Get path for component retrieval based on component definition properties.\n *\n * @param  {Object} componentDefinition Raw component definition.\n * @return {String}                     Path for component retrieval.\n */\nconst getPathFromComponent = componentDefinition => {\n  const { familyPath, tag, tagName } = componentDefinition;\n  const _tag = tag || tagName;\n  const firstPath = familyPath || _tag;\n\n  return `${firstPath}/${_tag}.html`;\n};\n\nexport default class CellsBridgeComposerSanitizer {\n  _buildConfig(component, type = 'UI') {\n    const { type: componentType, tag, tagName, zone, fixed, priority, properties, render, featureFlag } = component;\n    const path = getPathFromComponent(component);\n    const configType = componentType ? componentType.toUpperCase() : type;\n    const config = {\n      type: configType,\n      tagName: tag || tagName,\n      zone,\n      fixed,\n      priority,\n      properties,\n      path,\n      render,\n      featureFlag\n    };\n\n    return this._parseConnections(config);\n  }\n\n  parse(json) {\n    var components = [];\n    const LTRIM_SLASH = /^\\/(\\b)/;\n    components.push(\n      ...this._parseComponentsFromJson(json, 'components', 'UI')\n    );\n    let jsonTemplate = json.template;\n    if (jsonTemplate) {\n      jsonTemplate = this._buildConfig(jsonTemplate, 'TEMPLATE');\n    }\n    let pages = {};\n    let jsonPages = json.pages;\n    /* istanbul ignore if */\n    if (jsonPages) {\n      for (let index = 0; index < Object.keys(jsonPages).length; index++) {\n        const page = Object.keys(jsonPages)[index];\n        pages[page] = '/' + jsonPages[page].url.replace(LTRIM_SLASH, '');\n      }\n    }\n    return {\n      page: json.page,\n      currentPage: json.currentPage || {},\n      template: jsonTemplate,\n      components: components,\n      pages: pages\n    };\n  }\n\n  _parseComponentsFromJson(json, key, type) {\n    const list = [];\n    const components = json[key];\n\n    /* istanbul ignore if */\n    if (Array.isArray(components)) {\n      for (let index = 0; index < components.length; index++) {\n        const component = components[index];\n        list.push(this._buildConfig(component, type));\n      }\n    }\n\n    return list;\n  }\n\n  /**\n   * Extend given component definition object with parsed component connections.\n   *\n   * @private\n   * @method _parseConnections\n   * @param  {Object} rawComponentDefinition  Raw component definition.\n   * @return {Object}                         Component definition including connections.\n   */\n  _parseConnections(rawComponentDefinition) {\n    const componentDefinition = this._normalizeComponentDefinition(rawComponentDefinition);\n    const { properties: { cellsConnections } } = componentDefinition;\n\n    if (!cellsConnections || !Object.keys(cellsConnections).length > 0) {\n      return componentDefinition;\n    }\n\n    const componentDefinitionWithConnections = Object.assign({}, componentDefinition);\n\n    if (cellsConnections.params) {\n      const params = this._parseConnectionsParams(cellsConnections.params);\n\n      /* istanbul ignore if */\n      if (!cellsConnections.in) {\n        cellsConnections.in = {};\n      }\n\n      /* istanbul ignore if */\n      if (!cellsConnections.out) {\n        cellsConnections.out = {};\n      }\n\n      Object.assign(cellsConnections.in, params.in);\n      Object.assign(cellsConnections.out, params.out);\n    }\n\n    componentDefinitionWithConnections.connections = cellsConnections;\n\n    return componentDefinitionWithConnections;\n  }\n\n  /**\n   * Normalizes given raw component definition. Safe-guard method.\n   *\n   * @private\n   * @method _normalizeComponentDefinition\n   * @param  {Object} rawComponentDefinition Raw component definition object.\n   * @return {Object}                        Normalized component definition object.\n   */\n  _normalizeComponentDefinition(rawComponentDefinition) {\n    const DEFAULT_PROPERTIES = { cellsConnections: { in: {}, out: {} } };\n    const componentDefinition = Object.assign({}, rawComponentDefinition);\n\n    componentDefinition.properties = componentDefinition.properties || DEFAULT_PROPERTIES;\n\n    return componentDefinition;\n  }\n\n  /**\n   * Parse params to appropiate connections.\n   *\n   * @private\n   * @method _parseConnectionsParams\n   * @param  {Object} params Params to be parsed.\n   * @return {Object}        Parsed connections.\n   */\n  _parseConnectionsParams(params) {\n    const connections = {\n      in: {},\n      out: {}\n    };\n\n    for (const prop in params) {\n      if(params.hasOwnProperty(prop)){\n        const paramDef = params[prop];\n        const outBind = dasherize(prop) + '-changed';\n  \n        connections.in[paramDef] = this._createConnection(prop);\n        connections.out[paramDef] = this._createConnection(outBind);\n      }\n    }\n\n    return connections;\n  }\n\n  /**\n   * Create connection object based on given parameters.\n   *\n   * @private\n   * @method _createConnection\n   * @param  {String}  bind          Property to bind to.\n   * @param  {Boolean} [global=true] Global flag.\n   * @return {Object}                Connection object.\n   */\n  _createConnection(bind, global = true) {\n    return {\n      bind,\n      global\n    };\n  }\n\n  split(data) {\n    var response;\n    /* istanbul ignore if */\n    if (data) {\n      response = {\n        CC: [],\n        UI: [],\n        DM: []\n      };\n      for (let index = 0; index < data.length; index++) {\n        const item = data[index];\n        response[item.type].push(item);\n      }\n    }\n    return response;\n  }\n}\n","import CellsStorage from './storage';\nimport CellsConnector from '../connector';\nimport CellsSanitizer from '../sanitizer';\nimport eventManager from './events';\nimport Constants from '../constants';\n\nconst { externalEventsCodes } = Constants;\n\n\n/**\n * Class that retrieves pages either from the cache or by fetching them using http requests.\n * This class can handle:\n *  - dynamic pages: the one that are defined in json files.\n *  Also, dynamic pages can be localy located o remotely located.\n *  - static pages: the one that are defined in html files\n *\n * @param {CellsBridge} bridge\n *\n * The constructor receives a CellsBridge that has all the needed configuration:\n *\n * The property 'templatesPath' indicates the path where the local pages are located.\n * It must be defined only if there are local pages.\n *\n * The property 'composerEndpoint' indicates the url where the local pages are located.\n * This url must have the literals '{id}' and '{platform}'. It must be defined only if there are remote pages.\n *\n * The property 'remoteTemplates' is an array that contains the name of the remote templates\n * (just the name, not the extension).\n * It must be defined only if there are remote pages.\n *\n  * The property 'htmlPagesPath' is the path to the folder that contains the html pages.\n *\n * The property 'htmlPages' is an array that contains the name of the static html pages\n * (just the name, not the extension).\n *\n * The property 'appId' is the application's id.\n *\n * The property 'getPlatform' is a function, usually defined in the app.js file, that returns\n * a string indicating the platform that runs the application (for instance: destkop, ios or android).\n */\nlet CellsManagerPage = class CellsManagerPage {\n  constructor(bridge) {\n    this._initCellsPageManager(bridge);\n  }\n\n  _initCellsPageManager(bridge) {\n    const { htmlPagesPath = './pages/', htmlPages, templatesPath, composerEndpoint, remoteTemplates, appId, getPlatform,\n      cache, storagePrefix: prefix,\n      composerEngine, TemplateManager } = bridge;\n    const storage = new CellsStorage({ prefix, persistent: cache });\n    const connector =  new CellsConnector();\n    const sanitizer = new CellsSanitizer();\n\n    Object.assign(this, {\n      storage,\n      htmlPagesPath,\n      htmlPages,\n      templatesPath,\n      composerEndpoint,\n      remoteTemplates,\n      appId,\n      getPlatform,\n      cache,\n      connector,\n      sanitizer,\n      composerEngine,\n      TemplateManager\n    });\n  }\n\n  _remoteTemplate(page) {\n    let replaced = this.composerEndpoint.replace(/{appId}/, this.appId);\n    if (this.getPlatform) {\n      replaced = replaced.replace(/{platform}/, this.getPlatform());\n    }\n    replaced = replaced.replace(/{page}/, page);\n    return replaced;\n  }\n\n  _localTemplate(page) {\n    const endpoint = !this.templatesPath ? this.composerEndpoint : this.templatesPath;\n\n    return `${endpoint}${page}.json`;\n  }\n\n  _isLocalComposer(page) {\n    let result = true;\n    const hasTemplatePath = this.templatesPath && this.templatesPath.length > 0;\n    const hasRemoteTemplates = this.remoteTemplates && this.remoteTemplates.length > 0;\n    // legacy case when there was just composerEndpoint and\n    // it could be a directory or an url\n    const oldWayOnlyCompopserEndpointDefined = this.composerEndpoint && !hasTemplatePath && !hasRemoteTemplates;\n    if (oldWayOnlyCompopserEndpointDefined) {\n      result = this.composerEndpoint.indexOf('http') !== 0;\n    } else {\n      if (this.composerEndpoint && this.remoteTemplates) {\n        result = this.remoteTemplates.indexOf(page) < 0;\n      } else {\n        result = true;\n      }\n    }\n    return result;\n  }\n\n  _renderComposerEndpoint(page) {\n    if (this._isLocalComposer(page)) {\n      return this._localTemplate(page);\n    } else {\n      return this._remoteTemplate(page);\n    }\n  }\n\n  /**\n   * Returns the url needed to retrieve a page. It handles theese cases:\n   *  - page is dynamic (json file) and remote\n   *  - page is dynamic (json file) and local\n   *  - page is static (html file)\n   *\n   * @param {String} page is the name of the page to retrieve\n   */\n  generateRequestUrl(page) {\n    if (this.htmlPages && this.htmlPages.indexOf(page) >= 0) {\n      return this.htmlPagesPath + page + '.html';\n    } else {\n      return this._renderComposerEndpoint(page);\n    }\n  }\n\n  /**\n   * @param {Object} page\n   */\n  // eslint-disable-next-line no-unused-vars\n  onPageDefinitionNotFound(page) {\n    // Overwrite to make something when page definition is not found.\n  }\n\n  clear() {\n    this.storage.clear();\n  }\n\n  /**\n   * Returns a promise that retrieves a dynamic page (json file).\n   * The page may come from the cache or from a http request.\n   *\n   * @param {String} page name\n   * @param {Object} options for http request\n   * @param {Object} configuration\n   */\n  get(page, options, config) {\n    const useComposerEngineForThisPage = this.composerEngine && !this._isLocalComposer(page);\n    let spec;\n\n    if (useComposerEngineForThisPage) {\n      this.TemplateManager.removeTemplate(page);\n      return this._getFromComposerEngine(page, options);\n    } else {\n      spec = this.storage.getItem(page);\n      if (this.cache && spec) {\n        return Promise.resolve(spec);\n      } else {\n        return this._getFromConnector(page, options, config);\n      }\n    }\n  }\n\n  _getFromComposerEngine(page, options) {\n    const response = JSON.parse(this.composerEngine.getPage(page));\n\n    return Promise.resolve(\n      this._onResponse(page, options, response)\n    );\n  }\n\n  _getFromConnector(page, options, config) {\n    const { PAGE_REQUEST } = externalEventsCodes;\n\n    options = options || {};\n    options.url = this.generateRequestUrl(page, options, config);\n\n    eventManager.emit(PAGE_REQUEST, options);\n\n    return this.connector.getJSON(options)\n      .then(response => this._onResponse(page, options, response))\n      .catch(error => {\n        this._onResponseFail(page);\n        console.error(error);\n        return error.message;\n      });\n  }\n\n  /**\n   * Returns a promise that retrieves a static page (html file).\n   * The page comes from a http request.\n   *\n   * @param {String} page name\n   * @param {Object} options for http request\n   */\n  getPage(page, options) {\n    const { PAGE_REQUEST } = externalEventsCodes;\n\n    options = options || {};\n    options.url = this.generateRequestUrl(page);\n\n    eventManager.emit(PAGE_REQUEST, options);\n\n    return this.connector.getHTML(options)\n      .then(response => this._onResponseHTML(page, options, response))\n      .catch(error => {\n        this._onResponseFail(page);\n        console.error(error);\n        return error.message;\n      });\n  }\n\n  //getComponentPage(...)\n\n  _onResponse(page, options, response) {\n    const { PAGE_RESPONSE, DATA_LOAD } = externalEventsCodes;\n\n    response.page = page;\n\n    eventManager.emit(PAGE_RESPONSE, response);\n\n    let sanitizedData = this.sanitizer.parse(response);\n    // sanitizedData = this.bridge.parse('data', sanitizedData);\n\n    this.storage.setItem(page, sanitizedData);\n\n    eventManager.emit(DATA_LOAD, sanitizedData);\n\n    return sanitizedData;\n  }\n\n  _onResponseHTML(page, options, responseText) {\n    const { PAGE_RESPONSE, DATA_LOAD } = externalEventsCodes;\n\n    const response = {\n      page: page,\n      html: responseText\n    };\n\n    eventManager.emit(PAGE_RESPONSE, response);\n\n    const sanitizedData = {\n      page: page,\n      currentPage: {},\n      template: {},\n      components: [],\n      pages: [],\n      html: responseText\n    };\n\n    this.storage.setItem(page, sanitizedData);\n\n    eventManager.emit(DATA_LOAD, sanitizedData);\n\n    return sanitizedData;\n  }\n\n  _onResponseFail(page) {\n    if (this.onPageDefinitionNotFound) {\n      this.onPageDefinitionNotFound(page);\n    }\n\n    return Promise.reject(new Error(`Definition file for page '${page}' not found.`));\n  }\n}\n\nexport default CellsManagerPage;\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {\n    function ObjectUnsubscribedErrorImpl() {\n        Error.call(this);\n        this.message = 'object unsubscribed';\n        this.name = 'ObjectUnsubscribedError';\n        return this;\n    }\n    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ObjectUnsubscribedErrorImpl;\n})();\nexport var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from './Subscription';\nvar SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\nexport { SubjectSubscription };\n//# sourceMappingURL=SubjectSubscription.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map\n","/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Action } from './Action';\nvar AsyncAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar QueueAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\nexport { QueueAction };\n//# sourceMappingURL=QueueAction.js.map\n","var Scheduler = /*@__PURE__*/ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    Scheduler.now = function () { return Date.now(); };\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map\n","/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        _this.active = false;\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar QueueScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\nexport { QueueScheduler };\n//# sourceMappingURL=QueueScheduler.js.map\n","/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */\nimport { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\nexport var queue = /*@__PURE__*/ new QueueScheduler(QueueAction);\n//# sourceMappingURL=queue.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) {\n        delay = 0;\n    }\n    return function observeOnOperatorFunction(source) {\n        return source.lift(new ObserveOnOperator(scheduler, delay));\n    };\n}\nvar ObserveOnOperator = /*@__PURE__*/ (function () {\n    function ObserveOnOperator(scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.scheduler = scheduler;\n        this.delay = delay;\n    }\n    ObserveOnOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n    };\n    return ObserveOnOperator;\n}());\nexport { ObserveOnOperator };\nvar ObserveOnSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        var destination = this.destination;\n        destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n        this.unsubscribe();\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nexport { ObserveOnSubscriber };\nvar ObserveOnMessage = /*@__PURE__*/ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\nexport { ObserveOnMessage };\n//# sourceMappingURL=observeOn.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { queue } from './scheduler/queue';\nimport { Subscription } from './Subscription';\nimport { ObserveOnSubscriber } from './operators/observeOn';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nvar ReplaySubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) {\n            bufferSize = Number.POSITIVE_INFINITY;\n        }\n        if (windowTime === void 0) {\n            windowTime = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\nvar ReplayEvent = /*@__PURE__*/ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n//# sourceMappingURL=ReplaySubject.js.map\n","import { ReplaySubject } from 'rxjs';\n\nconst createChannel = () => {\n  const channel = new ReplaySubject(1);\n\n  const _nextFromSuperClass = channel.next.bind(channel);\n\n  channel.next = function(value) {\n    let generateUUID = function() {\n      let d = new Date().getTime();\n      let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n        let r = (d + Math.random()*16)%16 | 0;\n        return (c=='x' ? r : (r&0x3|0x8)).toString(16);\n      });\n      return uuid;\n    };\n    if (!value.uuid) {\n      value.uuid = generateUUID();\n    }\n    if (!value.time) {\n      value.time = (new Date()).getTime();\n    }\n    _nextFromSuperClass(value);\n  }\n\n  channel.hasObservers = function() {\n    if (this.closed) {\n      throw new Error();\n    }\n\n    return this.observers.length > 0;\n  }\n\n  channel.complete = function() {};\n\n  channel.error = function(error) {\n    this.observers.forEach(function(o) {\n      o.isStopped = false;\n      o.onError(error);\n    });\n  };\n\n  channel.unsubscribe = function(index) {\n    this.observers.splice(index, 1);\n  };\n\n  channel.unsubscribeAll = function() {\n    this.observers.splice(0, this.observers.length);\n  };\n\n  channel.clean = function() {\n    this._events = [];\n    this.observers = [];\n  };\n\n  channel.dispose = function() {\n    this.unsubscribe();\n  };\n\n  return channel;\n}\n\nexport default createChannel;\n","import { Subscription } from 'rxjs';\n\nexport default class Subscriptor {\n  constructor(node) {\n    this.node = node;\n    this.subscriptions = [];\n    this.publications = new Subscription();\n  }\n\n  hasSubscription(channel) {\n    return(this.subscriptions.filter(d => d.channel === channel).length > 0);\n  }\n\n  /**\n   * Publish an event.sss\n   *\n   * @param  {Event} event\n   */\n  publish(event) {\n    this.publications.add(event);\n  }\n\n  makeCallbackWithNoReplay(channel, fn) {\n    if (!fn.node.intervals) {\n      fn.node.intervals = [];\n    }\n    if (!fn.node.ids) {\n      fn.node.ids = [];\n    }\n    let getTimeFromNode = function(node) {\n      return node.intervals[channel.name];\n    };\n    let setTimeForNode = function(node, time) {\n      node.intervals[channel.name] = time;\n    };\n    let getTimeFromChannel = function(channel) {\n      return channel._events.length > 0 ? channel._events[0].time : 1;\n    };\n    let getIdFromNode = function(node) {\n      return node.ids[channel.name];\n    };\n    let setIdForNode = function(node, id) {\n      node.ids[channel.name] = id;\n    };\n    let getIdFromChannel = function(channel) {\n      return channel._events.length > 0 ? channel._events[0].uuid : null;\n    };\n    let fnReplayOff = function() {\n      let lastInterval = getTimeFromChannel(channel);\n      let nodeInterval = getTimeFromNode(fn.node);\n      let lastId = getIdFromChannel(channel);\n      let nodeId = getIdFromNode(fn.node);\n      if (!nodeInterval || nodeInterval < lastInterval ||\n        (nodeInterval === lastInterval && (nodeId != lastId))) {\n        setTimeForNode(fn.node, lastInterval);\n        setIdForNode(fn.node, lastId);\n        return fn.apply(this, arguments);\n      }\n      setTimeForNode(fn.node, lastInterval);\n    }.bind(this);\n    fnReplayOff.node = fn.node;\n    return fnReplayOff;\n  }\n\n  /**\n   * Subscribe to a channel.\n   *\n   * @param  {Channel}   channel  Channel to subscribe\n   * @param  {Function}  fn       Callback function to run when a value from a channel changed\n   */\n  subscribe(channel, fn, previousState) {\n    if (!this.hasSubscription(channel)) {\n      let callback = fn;\n      let subscription;\n      if (previousState === false) {\n        callback = this.makeCallbackWithNoReplay(channel, fn);\n      }\n\n      let pos = this._firstInstanceOfObserver(callback.node, channel);\n      if(pos === -1) {\n        subscription = channel.subscribe(callback);\n        pos = channel.observers.length - 1;\n      } else {\n        subscription = channel.observers[pos];\n      }\n\n      subscription.node = callback.node;\n\n      const subscriptionDetail = {\n        channel: channel,\n        observer:  subscription,\n        subscription: subscription\n      };\n\n      this.subscriptions.push(subscriptionDetail);\n    }\n  }\n\n  /**\n   * Remove all active subscriptions.\n   */\n  unsubscribe(cleanPrivateChannels) {\n    for(var i = this.subscriptions.length - 1; i >= 0; i--) {\n      var subscription = this.subscriptions[i];\n      var channel = subscription.channel;\n      var observer = subscription.observer;\n      var index = channel.observers.indexOf(observer);\n\n      //if(index >= 0 && !channel.name.match(/\\b__bridge_/)) {\n      if(index >= 0) {\n        if (cleanPrivateChannels===true || !channel.name.match(/\\b__bridge_/)) {\n          channel.unsubscribe(index);\n        }\n      }\n      // if(!channel.hasObservers()) {\n      //   channel.clean();\n      // }\n    }\n\n    this.publications.unsubscribe();\n  }\n\n  /**\n   * Returns the position of the first occurrence of the observer's node in the channel.\n   * If the node has none observer registered to the channel, it returns -1.\n   *\n   * @param {node}\n   * @param {channel}\n   */\n  _firstInstanceOfObserver(node, channel) {\n    var pos = -1;\n\n    for(let index = 0; index < channel.observers.length; index++) {\n      if(channel.observers[index].node === node) {\n        pos = index;\n        break;\n      }\n    }\n    return pos;\n  }\n}\n","\n/**\n * Feature Identifier\n * @typedef {String} CellsFeatureKey\n */\n\n/**\n  * Feature black list\n  * @typedef {Array<CellsFeatureKey>} CellsFeatureBlackList\n  */\n\n/**\n * Feature object\n * @typedef {Object} CellsFeature\n * @property {*} defaultValue  Default value of feature\n * @property {*} value         Current value of feature\n * @property {CellsFeatureKey} key      Feature identifier\n * \n */\n\n/**\n * Feature Collection\n * @typedef {Object.<CellsFeatureKey, CellsFeature>} CellsFeatureCollection\n */\n\n /**\n  * Cells Feature Response\n  * @typedef {Object} CellsFeatureResponse\n  * @property {CellsFeatureCollection} features\n  */\n\n/**\n * Channel name of FeatureFlagCollection. Emit data in this channel when collection of FeatureFlag is updated\n * @constant\n * @type {string}\n */\nexport const BRIDGE_CHANNEL_KEY = '__bridge_ch_featureflag';\n\n/**\n * Name of CustomElement method use to evaluate value of FeatureFlag\n * @constant\n * @type {string}\n */\nexport const BRIDGE_BIND_KEY = 'featureFlagChangedCallback';\n\n/**\n * FeatureFlag last value collection by node\n */\n\n export const lastValue = new Map();\n\nexport default class FeatureFlagCollection {\n\n  constructor (bridge) {\n    this._featureCollection = {};\n    this._conector = bridge.ComponentConnector;\n  }\n\n  /**\n   * Deep copy of collection of features flags\n   * @property\n   */\n  get collection () {\n    return JSON.parse(JSON.stringify(this._featureCollection));\n  }\n\n  /**\n   * Get value of feature if is enabled or null is disabled\n   * @method\n   * @param {CellsFeature} feature   Feature with identifier\n   * @returns {*}               Feature value or null if the feature is disabled\n   */\n  value ({key, defaultValue, value}) {\n    let { _featureCollection } = this;\n    if(_featureCollection.hasOwnProperty(key) && _featureCollection[key].hasOwnProperty('value')){\n      return _featureCollection[key].value;\n    } else if (_featureCollection.hasOwnProperty(key) && _featureCollection[key].hasOwnProperty('defaultValue')) {\n      return _featureCollection[key].defaultValue;\n    } else if (value !== undefined){\n      return value;\n    } else {\n      return defaultValue;\n    }\n  }\n\n  /**\n   * Extend collection; if feature is registered, overwrite values\n   * @method\n   * @param {CellsFeatureCollection} featureCollection \n   * @returns {FeatureFlagCollection} this\n   */\n  extend (featureCollection) {\n    Object.assign(this._featureCollection, featureCollection);\n    return this._publish();\n  }\n\n  /**\n   * Register collection of features and add default value of each feature\n   * @method\n   * @param {CellsFeatureCollection} featureCollection \n   * @returns {FeatureFlagCollection} this\n   */\n  register (featureCollection) {\n    Object.entries(featureCollection)\n      .map(([key, {defaultValue}]) => ({[key]: defaultValue}))\n      .forEach(singleFeatureCollection => Object.assign(this._featureCollection, singleFeatureCollection) );\n    \n    return this._publish();\n  }\n\n  /**\n   * @method\n   * @param {CellsFeatureResponse} featureResponse Response of feature service\n   * @returns {FeatureFlagCollection} this\n   */\n  update (featureResponse) {\n    return this.extend(featureResponse.features);\n  };\n\n  subscribe (callback) {\n    if (typeof callback === 'function') {\n      const channel = this._conector.manager.get(BRIDGE_CHANNEL_KEY);\n      this._conector.getSubscriptor(this).subscribe(channel, () => callback(this));\n    }\n\n    return this;\n  }\n\n\n  /**\n   * @private\n   * @returns {FeatureFlagCollection} this\n   */\n  _publish() {\n    const channel = this._conector.manager.get(BRIDGE_CHANNEL_KEY);\n    channel.next(new CustomEvent(BRIDGE_CHANNEL_KEY, {data: this.collection}));\n    return this;\n  }\n}","import { fromEvent } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport eventManager from './manager/events'\nimport { Subscriptor, createChannel } from './state';\nimport Constants from './constants';\nimport {lastValue as FeatureFlagCollection_lastValue,\n  BRIDGE_CHANNEL_KEY as FEATURE_FLAG_CHANNEL_KEY} from './featureflag/feature-flag-collection';\n\nconst { externalEventsCodes } = Constants;\n\n/**\n * Collection of channels.\n */\nvar ChannelManager = function() {\n  this.channels = {}; //*1prototype mixin clone problem\n};\n\nChannelManager.prototype = {\n  channels: null, //{} //*1prototype mixin clone problem\n\n  /**\n   * Gets a channel by name.\n   *\n   * @param  {String} name\n   *\n   * @return {Channel}\n   */\n  get: function(name) {\n    var channel = this.channels[name];\n\n    if(channel == null) {\n      channel = this.create(name);\n    }\n\n    return channel;\n  },\n\n  /**\n   * Gets a channel by name.\n   *\n   * @param  {String} name\n   *\n   * @return {Channel}\n   */\n  getUnsafe: function(name) {\n    return this.channels[name];\n  },\n\n  /**\n   * Creates a channel.\n   *\n   * @param  {String} name Channel name\n   *\n   * @return {Channel}\n   */\n  create: function(name) {\n    const channel = createChannel();\n\n    channel.name = name;\n    this.channels[name] = channel;\n    return channel;\n  },\n\n  /**\n   * Removes a channel from the collection.\n   *\n   * @param  {String} name Name of the channel to remove.\n   */\n  remove: function(name) {\n    delete this.channels[name];\n  },\n\n\n  unregisterAllSubscriptors() {\n    this.ComponentConnector.subscriptors.forEach((v) => {\n      v.subscriptions.forEach(s => s.subscription.unsubscribe());\n    });\n  },\n\n  cleanAllChannels: function() {\n    for (let channelName in this.channels) {\n      if(this.channels.hasOwnProperty(channelName)){\n        this.channels[channelName].clean();\n      }\n    }\n  },\n\n  removeAllChannels: function() {\n    for (let channelName in this.channels) {\n      if(this.channels.hasOwnProperty(channelName)){\n        delete this.channels[channelName];\n      }\n    }\n  },\n\n  /**\n   * Returns true if there is a channel registered with the given name,\n   *\n   * @param {String} name Channel name,\n   *\n   * @return {Boolean}\n   */\n  has: function(name) {\n    return this.channels[name] != null;\n  }\n};\n\n\nlet ComponentConnector = class ComponentConnector {\n  manager = null;\n  subscriptors = null;\n  bridgeChannelsPrefix = null;\n\n  constructor() {\n    this.manager = new ChannelManager();\n    this.subscriptors = new Map();\n    this.bridgeChannelsPrefix = /__bridge_(?!ch)/;\n  }\n\n  getSubscriptor(node) {\n    var subscriptor = this.subscriptors.get(node);\n\n    if(!subscriptor) {\n      subscriptor = new Subscriptor(node);\n      this.subscriptors.set(node, subscriptor);\n    }\n\n    return subscriptor;\n  }\n\n  /**\n   * Register a node in pubsub\n   *\n   * @param  {HTMLElement}  node\n   * @param  {Object}       connections\n   */\n  register(node, connections) {\n    if(node && connections) {\n      this._registerOutConnections(node, connections.out);\n      this._registerInConnections(node, connections.in);\n    }\n  }\n\n  /**\n   * Registesr new connections of a node that may have other connections registered previously.\n   *\n   * @param  {HTMLElement}  node\n   * @param  {Object}       connections\n   */\n  progressiveRegister(node, connections) {\n    if(node && connections) {\n      this._registerOutConnections(node, connections.out);\n      this._updateInConnections(node, connections.in);\n    }\n  }\n\n  _registerInConnections(node, inConnections) {\n    let channelName;\n    let bindName;\n    let previousState;\n\n    if(inConnections) {\n      for(channelName in inConnections) {\n        bindName = inConnections[channelName].bind;\n        previousState = inConnections[channelName].previousState || false;\n        this.addSubscription(channelName, node, bindName, previousState);\n      }\n    }\n  }\n\n  addSubscription(channelName, node, bind, previousState = false) {\n    const callback = this._wrapCallbackWithNode(node, bind);\n    const channel = this.manager.get(channelName); // @TODO ojo!!! CC this.isBridgeChannel(channelName) ? this.manager.getUnsafe(channelName) : this.manager.get(channelName);\n\n    if(channel) {\n      const subscriptor = this.getSubscriptor(node);\n\n      subscriptor.subscribe(channel, callback, previousState);\n    }\n  }\n\n  _updateInConnections(node, inConnections) {\n    let channelName;\n    let bindName;\n    let previousState;\n\n    if(inConnections) {\n      for(channelName in inConnections) {\n        bindName = inConnections[channelName].bind;\n        previousState = inConnections[channelName].previousState || false;\n        this.updateSubscription(channelName, node, bindName, previousState);\n      }\n    }\n  }\n\n  updateSubscription(channelName, node, bind, previousState = false) {\n    const subscriptor = this.getSubscriptor(node);\n\n    if(this.isActiveBridgeChannel(channelName) ||\n      (!this.isActiveBridgeChannel(channelName) && !this.hasSubscriptions(subscriptor, channelName))\n    ) {\n      const channel = this.manager.get(channelName);\n      const callback = this._wrapCallbackWithNode(node, bind);\n\n      subscriptor.subscribe(channel, callback, previousState);\n    }\n  }\n\n  _wrapCallbackWithNode(node, bindName) {\n    let cb = this.wrapCallback(node, bindName);\n    cb.node = node;\n    return cb;\n  }\n\n  _hasPublisher(subscriptor, node, channelName, bindName) {\n    let hasPublisher = false;\n\n    if (subscriptor.publications._subscriptions) {\n      subscriptor.publications._subscriptions.forEach(function(publication){\n        if (publication.node === node &&\n        publication.channelName === channelName &&\n        publication.eventName === bindName) {\n          hasPublisher = true;\n        }\n      });\n    }\n    return hasPublisher;\n  }\n\n  _registerOutConnections(node, outConnections) {\n    let channelName;\n    let bindName;\n\n    if(outConnections) {\n      for(channelName in outConnections) {\n        bindName = outConnections[channelName].bind;\n\n        this.addPublication(channelName, node, bindName, outConnections[channelName]);\n      }\n    }\n  }\n\n  addPublication(channelName, node, bindName, outConnectionDefinition) {\n    if(this.isBridgeChannel(channelName)) {\n      console.warn(`Forbidden operation. You are trying to write to a private channel (${channelName}).`);\n    } else {\n      let subscriptor = this.getSubscriptor(node);\n      let channel = this.manager.get(channelName);\n      let hasPublisher = this._hasPublisher(subscriptor, node, channelName, bindName);\n\n      if (!hasPublisher) {\n        subscriptor.publish(this.wrapEvent(node, bindName, channel, outConnectionDefinition));\n      }\n    }\n  }\n\n  publish(channelName, value) {\n    if(this.isBridgeChannel(channelName)) {\n      console.warn(`Forbidden operation. You are trying to write to a private channel (${channelName}).`);\n    } else {\n      const channel = this.manager.get(channelName);\n      const customEventName = `${channelName}-publish`;\n\n      channel.next(new CustomEvent(customEventName, { detail: value }));\n    }\n  }\n\n  unsubscribe(channels, node) {\n    if(!channels || !node) {\n      return;\n    }\n\n    const normalizedChannels = Array.isArray(channels) ? channels : [channels];\n    const subscriptor = this.subscriptors.get(node);\n    const { subscriptions } = subscriptor;\n    const byChannelName = (subscription) => normalizedChannels.includes(subscription.channel.name);\n    const targetSubscriptions = subscriptions.filter(byChannelName);\n\n    targetSubscriptions.forEach((subscription) => {\n      // @TODO rename\n      // DO NOT LOOK AT ME!!!\n      subscription.subscription.unsubscribe();\n\n      const index = subscriptor.subscriptions.findIndex((e) => e === subscription);\n\n      subscriptor.subscriptions.splice(index, 1);\n    });\n  }\n\n  /**\n   * Unregister a node from pubsub\n   *\n   * @param  {HTMLElement} node\n   */\n  unregister(node, cleanPrivateChannels) {\n    if(!node) {\n      return;\n    }\n\n    var subscriptor = this.subscriptors.get(node);\n\n    if(subscriptor) {\n      subscriptor.unsubscribe(cleanPrivateChannels);\n      this.subscriptors.delete(node);\n    }\n  }\n\n  unregisterAllSubscriptors(cleanPrivateChannels) {\n    this.subscriptors.forEach((v) => {\n      v.subscriptions.forEach(s => s.subscription.unsubscribe(cleanPrivateChannels));\n    });\n  }\n\n  // @TODO unificar con unregister\n  sleep(node) {\n    if(!node) {\n      return;\n    }\n\n    var subscriptor = this.subscriptors.get(node);\n\n    if(subscriptor) {\n      //subscriptor.unsubscribe();\n    }\n  }\n\n  /**\n   * Wrap a callback.\n   *\n   * @param  {HTMLElement/Object} node\n   * @param  {String} bindName Method or property name\n   *\n   * @return {Function}\n   */\n  wrapCallback(node, bindName) {\n    var wrappedCb = function(event) {\n      if (typeof(bindName) === 'function') {\n        bindName(event.detail);\n      } else {\n        if(typeof node[bindName] === 'function') {\n          node[bindName](event.detail);\n        } else {\n          node[bindName] = event.detail;\n        }\n      }\n    };\n\n    return wrappedCb;\n  }\n\n  /**\n   * Returns true if the event has reached the node that is listening the event\n   *\n   * @param {Event} event\n   */\n  _isEventAtTarget(event) {\n    const AT_TARGET = Event.AT_TARGET || Event.prototype.AT_TARGET;\n    return event.eventPhase === AT_TARGET;\n  }\n\n  /**\n   * Wrap an event.\n   *\n   * @param  {HTMLElement} node\n   * @param  {String} eventName\n   * @param  {Channel} channel\n   *\n   * @return {Function}\n   */\n  wrapEvent(node, eventName, channel, connection) {\n    const { AFTER_PUBLISH, NAV_REQUEST, ROUTER_BACKSTEP, TRACK_EVENT, LOG_EVENT } = externalEventsCodes;\n\n    var source = fromEvent(node, eventName);\n\n    // this checking is for components with FeatureFlag configuration\n    if(FeatureFlagCollection_lastValue.has(node)){\n      source = source.pipe(filter(() => FeatureFlagCollection_lastValue.get(node)));\n    }\n    var wrappedListener = source.subscribe(function(event) {\n      if(!this._isEventAtTarget(event)) {\n        // If the event bubbles up from a child element:\n        return;\n      }\n\n      channel.next(event);\n      eventManager.emit(AFTER_PUBLISH, event);\n\n      if(connection && connection.link) {\n        const linkObject = Object.assign({}, connection.link);\n\n        if(connection.link.page){\n          if(connection.link.page.hasOwnProperty('bind')){\n            linkObject.page = event.detail[connection.link.page.bind]\n          }\n        }\n\n        eventManager.emit(NAV_REQUEST, {\n          event: event,\n          detail: linkObject\n        });\n      }\n\n      if (connection && connection.backStep) {\n        eventManager.emit(ROUTER_BACKSTEP, {\n          event: event,\n          detail: {}\n        });\n      }\n\n      if(connection && connection.analytics) {\n        eventManager.emit(TRACK_EVENT, {\n          event: event,\n          detail: connection.analytics\n        });\n      }\n\n      if(connection && connection.log) {\n        eventManager.emit(LOG_EVENT, {\n          event: event,\n          detail: connection.log\n        });\n      }\n\n      if (this.wrapEventHandler) {\n        this.wrapEventHandler(event, connection, channel);\n      }\n    }.bind(this));\n\n    wrappedListener.node = node;\n    wrappedListener.eventName = eventName;\n    wrappedListener.channelName = channel.name;\n\n    return wrappedListener;\n  }\n\n  /**\n   * receive a channel name and change old private values.\n   *\n   * @param  {string} name\n   *\n   */\n  createEvent(name, value) {\n    let evt = new Event(name);\n    evt.detail = { value };\n    return evt;\n  }\n\n  /**\n   * returns true if there's a private channel with the given name\n   *\n   * @param {String} name\n   *\n   * @return {Boolean}\n   */\n  isActiveBridgeChannel(name) {\n    return this.isBridgeChannel(name) && this.manager.getUnsafe(name);\n  }\n\n  /**\n   * returns true if the given name matches a private channel's name\n   *\n   * @param {String} name\n   *\n   * @return {Boolean}\n   */\n  isBridgeChannel(name) {\n    return this.bridgeChannelsPrefix.test(name);\n  }\n\n  /**\n   * returns true if the subscriptor has been subscribed to the given channel.\n   *\n   * @param {Subscriptor} subscriptor\n   * @param {String} channelName\n   *\n   * @return {Boolean}\n   */\n  hasSubscriptions(subscriptor, channelName) {\n    return subscriptor.subscriptions.filter(d => d.channel.name === channelName).length > 0;\n  }\n}\n\n/**\n * ComponentConnector definition\n */\nexport default ComponentConnector;\n","export default class Route {\n  static PARAM = /(?::([^/]+))/g;\n  static TRAILING_SLASHES = /\\/*$/;\n  static _404_PAGE_NAME = '404';\n\n  name = '';\n  pattern = '';\n  regexp = null;\n  redirectPage = null;\n  isAccessible = true; // needed to discriminate between 404 and rest of pages with same pattern\n\n  /**\n   * @private\n   * @param {String} routeName\n   * * @param {String} pattern\n   * @return {Object}\n   */\n  constructor(name, pattern) {\n    this.name = name;\n    this.pattern = pattern;\n    var regexp = pattern\n      .replace(Route.PARAM, '([^/]+)')\n      .replace(Route.TRAILING_SLASHES, '/*');\n    this.regexp = new RegExp('^' + regexp + '$');\n    var parts;\n    var keys = [];\n    while ((parts = Route.PARAM.exec(pattern)) !== null) {\n      keys.push(parts[1]);\n    }\n    this.keys = keys;\n  }\n\n  path(params) {\n    params = params || {};\n    this.params = {};\n    var parts;\n    var path = this.pattern;\n    while ((parts = Route.PARAM.exec(this.pattern)) !== null) {\n      path = path.replace(parts[0], params[parts[1]]);\n      this.params[parts[1]] = params[parts[1]];\n    }\n    var queryParams = [];\n    for (var param in params) {\n      if (!this.params.hasOwnProperty(param)) {\n        queryParams.push(param + '=' + encodeURIComponent(params[param]));\n      }\n    }\n    if (queryParams.length) {\n      path += '?' + queryParams.join('&');\n    }\n    return path;\n  }\n\n  matchPath(path) {\n    return path.match(this.regexp);\n  }\n\n  parsePath(path) {\n    var match = this.matchPath(path);\n    this.params = {};\n    if (match) {\n      var i = 1;\n      var parts;\n      while ((parts = Route.PARAM.exec(this.pattern)) !== null) {\n        this.params[parts[1]] = this._parseParam(match[i]);\n        i++;\n      }\n    }\n  }\n\n  parseQuery(query) {\n    this.query = query;\n    for (var queryParam in this.query) {\n      if(this.query.hasOwnProperty(queryParam)){\n        this.params[queryParam] = this.query[queryParam];\n      }\n    }\n  }\n\n  /**\n   * @return {Boolean}\n   */\n  is404() {\n    return this.name === Route._404_PAGE_NAME;\n  }\n\n  /**\n   * @private\n   * @param {String} value\n   * @return {Boolean}\n   */\n  _isNumber(value) {\n    return parseInt(value) + '' === value || parseFloat(value) + '' === value;\n  }\n\n  /**\n   * @private\n   * @param {String} param\n   * @return {String|Number}\n   */\n  _parseParam(param) {\n    if (this._isNumber(param)) {\n      param = +param;\n    }\n\n    return param;\n  }\n\n  handler() {\n    // Overwrite to make something with the current route\n  }\n\n}\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar InnerSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\nexport { InnerSubscriber };\n//# sourceMappingURL=InnerSubscriber.js.map\n","import Route from './route';\nimport { Subscription, fromEvent, merge } from 'rxjs';\nimport { distinctUntilChanged, map, startWith } from 'rxjs/operators';\nimport eventManager from './manager/events';\nimport NavigationStack from './navigation-stack';\nimport Constants from './constants';\n\nconst { EMPTY } = Subscription;\nconst { externalEventsCodes } = Constants;\n\nlet instance = null;\n\nlet _useHistory = false;\nlet _routes = {};\nlet _disposables;\nlet _currentRoute;\nlet _404Route;\n\n/**\n * @class SerialSubscription\n * Mimics behavior of SerialDisposable in RxJS v4,\n * allows to add only single subscription. If new subscription's added,\n * existing subscription will be unsubscribed.\n *\n * By design of RxJS v5 it is no longer recommended to manage subscription\n * imperatively vis various kind of subscription, reason it only have single\n * kind of composite subscription. This implementation is for interop between\n * existing codebases.\n * @extends {Subscription}\n */\nclass SerialSubscription extends Subscription {\n  constructor() {\n    super();\n    this._currentSubscription = EMPTY;\n  }\n\n  /**\n   * Adds a tear down to be called during the unsubscribe() of this\n   * Subscription.\n   *\n   * If there's existing subscription, it'll be unsubscribed and\n   * removed.\n   *\n   * @param {TeardownLogic} teardown The additional logic to execute on\n   * teardown.\n   * @return {Subscription} Returns the Subscription used or created to be\n   * added to the inner subscriptions list. This Subscription can be used with\n   * `remove()` to remove the passed teardown logic from the inner subscriptions\n   * list.\n   */\n  add(teardown) {\n    if (this.closed) return;\n    if (typeof(teardown) === 'function') teardown = new Subscription(teardown);\n\n    if (this._currentSubscription) {\n      this.remove(this._currentSubscription);\n      this._currentSubscription.unsubscribe();\n      this._currentSubscription = null;\n    }\n\n    super.add(this._currentSubscription = teardown);\n  }\n}\n\nexport default class Router {\n  static SUPPORTS_HISTORY_API = window.history && 'pushState' in window.history;\n\n  static PARAM = /(?::([^/]+))/g;\n  static LTRIM_SLASH = /^\\/(\\b)/;\n  static EMPTY = /^$/;\n\n  static HASH_PREFIX = /^#!?\\/*/;\n  static PATH_PREFIX = /^\\/*/;\n\n  static isNavigationInProgress = false;\n  static hashIsDirty = false;\n\n  navigationStack;\n\n  constructor() {\n    const { TEMPLATE_TRANSITION_END} = externalEventsCodes;\n\n    if (!instance) {\n      instance = this;\n    }\n\n    this.navigationStack = this._createNavigationStack();\n\n    eventManager.on(TEMPLATE_TRANSITION_END, () => {\n      this.isNavigationInProgress = false;\n    });\n\n    return instance;\n  }\n\n  _createNavigationStack() {\n    return new NavigationStack();\n  }\n\n  /**\n   * @param {Boolean} value\n   */\n  set useHistory(value) {\n    /* istanbul ignore else */\n    if (Router.SUPPORTS_HISTORY_API) {\n      _useHistory = value;\n    }\n  }\n\n  get useHistory() {\n    return _useHistory;\n  }\n\n  set routes(routes) {\n    _routes = routes;\n  }\n\n  get routes() {\n    return _routes;\n  }\n\n  get currentRoute() {\n    return _currentRoute;\n  }\n\n  set currentRoute(route) {\n    _currentRoute = route;\n  }\n  /**\n   * @param {Object} route\n   */\n  // eslint-disable-next-line no-unused-vars\n  handler(route) {\n    // Overwrite to make something after all matched routes\n  }\n\n  addRoute(name, pattern) {\n    this.routes[name] = new Route(name, pattern);\n    return this.routes[name];\n  }\n\n  addRoutes(routes) {\n    var __routes = {};\n    for (var routeName in routes) {\n      if(routes.hasOwnProperty(routeName)) {\n        __routes[routeName] = this.addRoute(routeName, routes[routeName]);\n      }\n    }\n    return __routes;\n  }\n\n  addSkipNavigations(skipNavs) {\n    for (let i = 0; i<skipNavs.length; i++) {\n      this.navigationStack.addSkipNavigation(skipNavs[i]);\n    }\n  }\n\n  /**\n   * @private\n   * @return {String}\n   */\n  _getHashPath() {\n    return location.hash\n      .replace(Router.HASH_PREFIX, '/')\n      .replace(Router.EMPTY, '/');\n  }\n\n  /**\n   * @private\n   * @return {Observable}\n   */\n  _observeHashChange() {\n    return fromEvent(window, 'hashchange').pipe(\n      map(this._getHashPath),\n      startWith(this._getHashPath())\n    );\n  }\n\n  /**\n   * @private\n   * @return {String}\n   */\n  _getURLPath() {\n    return location.pathname.replace(Router.PATH_PREFIX, '/');\n  }\n\n  /**\n   * @private\n   * @return {Observable}\n   */\n  _observeStateChange() {\n    return merge(\n      fromEvent(window, 'popstate'),\n      fromEvent(window, 'pushstate')\n    ).pipe(\n      map(this._getURLPath),\n      startWith(this._getURLPath())\n    );\n  }\n\n  /**\n   * @private\n   * @param {String}\n   * @return {Array}\n   */\n  matchRoute(fullPath) {\n    var route;\n    var [path, query] = fullPath.split('?');\n    query = this._parseQuery(query);\n    for (var routeName in this.routes) {\n      if(this.routes.hasOwnProperty(routeName)){\n        route = this.routes[routeName];\n        if ((!route.is404() || route.isAccessible) && route.matchPath(path)) {\n          route.parsePath(path)\n          route.parseQuery(query);\n          return route;\n        }\n      }\n    }\n  }\n\n  _parseQuery(querystr) {\n    const params = {};\n    if (querystr) {\n      // Split into key/value pairs\n      const queries = querystr.split('&');\n      if (queries) {\n        // Convert the array of strings into an object\n        let key, value, i, len = queries.length;\n        for (i = 0; i < len; i++) {\n          [key, value] = queries[i].split('=');\n          params[key] = decodeURIComponent(value);\n        }\n      }\n    }\n    return params;\n  }\n\n  _setup404() {\n    const route404 = this.routes[Route._404_PAGE_NAME];\n\n    // We check if 404 route have a pattern...\n    if (route404 && route404.pattern !== '') {\n      const routeWithSamePattern = this.getRouteWithPattern(route404.pattern);\n\n      // We set redirect page based on, if it's a repeated URL pattern or a unique one.\n      // If it's unique, we set it accesible from the router.\n      // Otherwise, it's going to NOT be accesible from the router (multiple router with same pattern)\n      route404.redirectPage = routeWithSamePattern ? routeWithSamePattern.name : route404.name;\n      route404.isAccessible = !routeWithSamePattern;\n    }\n\n    return route404;\n  }\n\n  getRouteWithPattern(patternToMath) {\n    for (let routeName in this.routes) {\n      if(this.routes.hasOwnProperty(routeName)){\n        let route = this.routes[routeName];\n\n        // we only take care about routes with same patterns that aren't the same\n        if (!route.is404() && route.pattern === patternToMath) {\n          return route;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   *\n   * @return {Subscription}\n   */\n  start() {\n    /* istanbul ignore else */\n    if (!_disposables) {\n      var active = new SerialSubscription();\n\n      _404Route = this._setup404();\n\n      const source = this.useHistory ?\n        this._observeStateChange() :\n        this._observeHashChange();\n\n      const subscription = source.pipe(\n        distinctUntilChanged(),\n        map(this.matchRoute.bind(this)),\n      );\n\n      subscription.forEach(route => {\n        if (!this.hashIsDirty) {\n          if (route) {\n            const currentRouteName = this.currentRoute ? this.currentRoute.name : undefined;\n            const currentRouteParams = this.currentRoute ? this.currentRoute.params : undefined;\n            const routeFrom = this.navigationStack.createRoute(currentRouteName, currentRouteParams);\n            const routeTo = this.navigationStack.createRoute(route.name, route.params);\n            const newRouteName = this.navigationStack.update(routeFrom, routeTo).page;\n            if (newRouteName !== routeTo.page) {\n              this.go(newRouteName, undefined, false);\n              return;\n            }\n            _currentRoute = route;\n            var disposable = new Subscription(() => this.currentRoute);\n            active.add(disposable);\n            this.currentRoute.handler();\n            this.handler(this.currentRoute);\n          } else if (_404Route && _404Route.redirectPage) {\n            this.goReplacing(_404Route.redirectPage);\n          }\n        } else {\n          this.hashIsDirty = false;\n        }\n      });\n\n      _disposables = new Subscription(\n        subscription,\n        active\n      );\n    }\n\n    return _disposables;\n  }\n\n  stop() {\n    if (_disposables) {\n      _disposables.unsubscribe();\n      _disposables = null;\n    }\n    this.isNavigationInProgress = false;\n  }\n\n  destroy() {\n    this.stop();\n    this.routes = {};\n  }\n\n  getPath(routeName, params) {\n    const route = this.routes[routeName];\n    if (route) {\n      return route.path(params);\n    } else {\n      console.error('Wrong route name: %s, valid route names: %s', routeName, Object.keys(this.routes).join(', '));\n    }\n  }\n\n  newNavigation(name) {\n    return {\n      'from': this.currentRoute ? this.currentRoute.name : undefined,\n      'to': name\n    }\n  }\n\n  reverseNavigation(nav) {\n    return {\n      from: nav.to,\n      to: nav.from\n    };\n  }\n\n  go(name, params, replace, skipHistory) {\n    if (this.isNavigationInProgress) {\n      return;\n    }\n\n    if (skipHistory !== undefined) {\n      const newNav = this.newNavigation(name);\n      const reverseNav = this.reverseNavigation(newNav);\n      reverseNav.skipHistory = skipHistory;\n      this.navigationStack.addSkipNavigation(reverseNav);\n    }\n\n    const sanitizedName = name.replace(Router.LTRIM_SLASH, '');\n    const path = this.getPath(sanitizedName, params);\n    if (path !== this._getHashPath()) {\n      this.isNavigationInProgress = true;\n      this.updatePathInBrowser(path, replace);\n    }\n  }\n\n  back() {\n    const navigation = {};\n    if (this.navigationStack.length > 1) {\n      let fromRoute = this.navigationStack.pop();\n      let auxFromRoute = fromRoute;\n      let backRoute = this.getLastRoute();\n\n      while (this.navigationStack.isSkipNavigation({from: auxFromRoute.page, to: backRoute.page}) && this.navigationStack.length>1) {\n        auxFromRoute = this.navigationStack.pop();\n        if (this.navigationStack.length > 0) {\n          backRoute = this.getLastRoute();\n        }\n      }\n\n      const page = backRoute.page;\n      const params = backRoute.params;\n\n      navigation.from = fromRoute;\n      navigation.to = backRoute;\n\n      this.go(page, params);\n    } else {\n      navigation.from = this.getLastRoute();\n      navigation.to = this.getLastRoute();\n    }\n    return navigation;\n  }\n\n  updatePathInBrowser(path, replace) {\n    if (this.useHistory) {\n      if (replace) {\n        this.historyReplaceState(path);\n      } else {\n        this.historyPushState(path);\n      }\n    } else {\n      if (replace) {\n        this.locationReplace(path);\n      } else {\n        this.locationHash(path);\n      }\n    }\n  }\n\n  goReplacing(name, params) {\n    this.go(name, params, true);\n  }\n\n  historyReplaceState(path) {\n    history.replaceState(null, null, path);\n  }\n\n  historyPushState(path) {\n    history.pushState(null, null, path);\n  }\n\n  locationReplace(path) {\n    location.replace('#!' + path);\n  }\n\n  locationHash(path) {\n    location.hash = '#!' + path;\n  }\n\n  /**\n   * Get last route from stack.\n   *\n   * @returns {Object} Last route from stack.\n   */\n  getLastRoute() {\n    return this.navigationStack.top();\n  }\n\n  /**\n   * Initialize router stack.\n   */\n  init() {\n    this._clearStack();\n  }\n\n  /**\n   * Clear the router stack.\n   */\n  _clearStack() {\n    this.navigationStack.clear();\n  }\n\n  /**\n   * Clear the router stack until given page is found on router stack.\n   */\n  clearStackUntil(targetPage) {\n    this.navigationStack.clearUntil(targetPage);\n  }\n}\n","/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */\nimport { hostReportError } from './hostReportError';\nexport var subscribeToPromise = function (promise) {\n    return function (subscriber) {\n        promise.then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, hostReportError);\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToPromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport var subscribeToIterable = function (iterable) {\n    return function (subscriber) {\n        var iterator = iterable[Symbol_iterator]();\n        do {\n            var item = iterator.next();\n            if (item.done) {\n                subscriber.complete();\n                break;\n            }\n            subscriber.next(item.value);\n            if (subscriber.closed) {\n                break;\n            }\n        } while (true);\n        if (typeof iterator.return === 'function') {\n            subscriber.add(function () {\n                if (iterator.return) {\n                    iterator.return();\n                }\n            });\n        }\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToIterable.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeToObservable = function (obj) {\n    return function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (typeof obs.subscribe !== 'function') {\n            throw new TypeError('Provided object does not correctly implement Symbol.observable');\n        }\n        else {\n            return obs.subscribe(subscriber);\n        }\n    };\n};\n//# sourceMappingURL=subscribeToObservable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map\n","/** PURE_IMPORTS_START _subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */\nimport { subscribeToArray } from './subscribeToArray';\nimport { subscribeToPromise } from './subscribeToPromise';\nimport { subscribeToIterable } from './subscribeToIterable';\nimport { subscribeToObservable } from './subscribeToObservable';\nimport { isArrayLike } from './isArrayLike';\nimport { isPromise } from './isPromise';\nimport { isObject } from './isObject';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeTo = function (result) {\n    if (!!result && typeof result[Symbol_observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (!!result && typeof result[Symbol_iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar OuterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\nexport { OuterSubscriber };\n//# sourceMappingURL=OuterSubscriber.js.map\n","export default class NavigationStack {\n  constructor() {\n    this.navStack = [];\n    this.skipNav = {};\n  }\n\n  get length() {\n    return this.navStack.length;\n  }\n\n\n  addSkipNavigation(nav) {\n    if (nav.skipHistory === true || nav.skipHistory === false) {\n      this.skipNav[`${nav.from}:${nav.to}`] = nav.skipHistory;\n    }\n  }\n\n  _reverseNavigation(nav) {\n    return {\n      from: nav.to,\n      to: nav.from\n    };\n  }\n\n  isSkipNavigation(nav) {\n    return this.skipNav[`${nav.from}:${nav.to}`] === true;\n  }\n\n  lastNavigation() {\n    const navCount = this.navStack.length;\n    let from;\n    let to;\n    if (navCount === 1) {\n      to = this.navStack[0];\n    } else if (navCount > 1) {\n      to = this.navStack[navCount-1];\n      from = this.navStack[navCount-2];\n    }\n    return this.createNavigation(from, to);\n  }\n\n  createRoute(page, params = {}) {\n    return {\n      page,\n      params\n    };\n  }\n\n  createNavigation(routeFrom, routeTo) {\n    return {\n      from: routeFrom ? routeFrom.page : undefined,\n      to: routeTo ? routeTo.page : undefined\n    };\n  }\n\n  push(route) {\n    if (!this.top() || this.top().page !== route.page) {\n      this.navStack.push(route);\n    }\n  }\n\n  replace(route) {\n    if (!this.top() || this.top().page !== route.page) {\n      this.navStack[this.navStack.length - 1] = route;\n    }\n  }\n\n  pop() {\n    return this.navStack.pop();\n  }\n\n  top() {\n    return this.navStack.length > 0 ? this.navStack[this.navStack.length - 1] : undefined;\n  }\n\n  isBackwardNavigation(newNav) {\n    const lastNav = this.lastNavigation();\n    return lastNav && newNav.from === lastNav.to && newNav.to === lastNav.from;\n  }\n\n  update(routeFrom, routeTo) {\n    const nav = this.createNavigation(routeFrom, routeTo);\n    if (this.isBackwardNavigation(nav)) {\n      while(this.isSkipNavigation(this._reverseNavigation(this.lastNavigation()))) {\n        this.pop();\n      }\n      this.pop();\n    } else {\n      this.push(routeTo);\n    }\n    return this.top();\n  }\n\n  clear() {\n    this.navStack = [];\n  }\n\n  replaceRoute(route) {\n    if (this.navStack.length > 0) {\n      this.navStack[this.navStack.length - 1] = route;\n    } else {\n      this.push(route);\n    }\n  }\n\n  /**\n   * Clear the router stack until given page is found on router stack.\n   */\n  clearUntil(targetPage) {\n\n    if (this.navStack.find(route=>route.page === targetPage)) {\n      let currentRoute = null;\n      do {\n        currentRoute = this.navStack.pop();\n      } while (currentRoute && currentRoute.page != targetPage);\n    }\n  }\n}\n","import eventManager from './events';\nimport Constants from '../constants';\n\nconst { externalEventsCodes } = Constants;\n\nvar _after = function (times, func) {\n  return function () {\n    if (--times < 1) {\n      return func();\n    }\n  };\n};\n\nlet CellsManagerImport = class CellsManagerImport {\n  _importElement(endPoint, componentPath, callback) {\n    var node = document.createElement('link');\n    node.rel = 'import';\n    node.href = endPoint + componentPath;\n    node.onload = callback;\n    node.onerror = callback;\n    node.setAttribute('async', '');\n\n    document.head.appendChild(node);\n  }\n\n  _importElementPromise(endPoint, componentPath) {\n    return new Promise(resolve => {\n      this._importElement(endPoint, componentPath, resolve);\n    });\n  }\n\n  loadBundleForTemplate(baseUri, pageName, callback) {\n    return new Promise((resolve) => {\n      const finishComponentLoading = () => {\n        if (callback) {\n          callback.call(this);\n        }\n\n        resolve();\n      };\n\n      this._importElement(baseUri, pageName + '.html', finishComponentLoading);\n    });\n  }\n\n  loadComponent(component, baseUri, callback) {\n    const { BEFORE_IMPORT, AFTER_IMPORT } = externalEventsCodes;\n\n    return new Promise((resolve) => {\n      const finishComponentLoading = () => {\n        if (callback) {\n          callback.call(this);\n        }\n\n        resolve();\n      };\n\n      var list = component;\n\n      if (!Array.isArray(list)) {\n        list = [component];\n      }\n\n      if (list.length === 0) {\n        finishComponentLoading();\n        return;\n      }\n\n      eventManager.emit(BEFORE_IMPORT);\n\n      var iCb = _after(list.length, () => {\n        eventManager.emit(AFTER_IMPORT);\n        finishComponentLoading();\n      });\n\n      for (let index = 0; index < list.length; index++) {\n        const item = list[index];\n        this._importElement(baseUri, item.spec.path, iCb);\n      }\n    });\n  }\n\n  loadComponentByPriority(component, baseUri, callback) {\n    const { BEFORE_IMPORT, AFTER_IMPORT } = externalEventsCodes;\n\n    let list = component;\n    if (!Array.isArray(list)) {\n      list = [component];\n    }\n\n    if (list.length === 0) {\n      if (callback) {\n        callback.call(this);\n      }\n      return;\n    }\n\n    let priorityLists = this._createPriorityLists(list);\n\n    eventManager.emit(BEFORE_IMPORT);\n\n    this._chainElementLoading(baseUri, priorityLists, 0).then(() => {\n      eventManager.emit(AFTER_IMPORT);\n      if (callback) {\n        callback.call(this);\n      }\n    });\n  }\n\n  _createSortedArratByPriorityAndUniqueElements(list) {\n    list.sort((a, b) => {\n      let priorityA = (a.priority || 1000);\n      let priorityB = (b.priority || 1000);\n      if (priorityA === priorityB) {\n        return a.spec.path <= b.spec.path ? -1 : 1\n      } else {\n        return priorityA - priorityB;\n      }\n    });\n    return list.filter((elem, pos, arr) => {\n      return pos === 0 || elem.spec.path !== arr[pos - 1].spec.path;\n    });\n  }\n\n  _createPriorityLists(list) {\n    let sortedList = this._createSortedArratByPriorityAndUniqueElements(list);\n    let currentPriority = sortedList[0].priority;\n    let priorityLists = [[]];\n    let pivote = 0;\n    for (let index = 0; index < sortedList.length; index++) {\n      const item = sortedList[index];\n      if (item.priority === currentPriority) {\n        priorityLists[pivote].push(item);\n      } else {\n        currentPriority = item.priority;\n        priorityLists.push([]);\n        pivote = priorityLists.length - 1;\n        priorityLists[pivote].push(item);\n      }\n    }\n    return priorityLists;\n  }\n\n  _chainElementLoading(baseUri, elementPriorityLists, index) {\n    const currentPromises = [];\n\n    if (elementPriorityLists.length === index) {\n      return Promise.resolve();\n    }\n\n    for (let j = 0; j < elementPriorityLists[index].length; j++) {\n      currentPromises.push(this._importElementPromise(baseUri, elementPriorityLists[index][j].spec.path));\n    }\n\n    const count = index + 1; // OJO!!! Si no creamos variable intermedia / scoped, y hacemos count++, siempre coger el valor inicial.\n\n    return Promise.all(currentPromises).then(() => this._chainElementLoading(baseUri, elementPriorityLists, count));\n  }\n}\n\nexport default CellsManagerImport;\n","import CellsBridgeManagerDom from './manager/dom';\nimport Constants from './constants';\n\nconst { renderEngines } = Constants;\n\nexport default class CellsBridgeComponent extends CellsBridgeManagerDom {\n  /**\n   * Componen type. It could be TYPE_UI, TYPE_DM or TYPE_CC.\n   *\n   * @type {String}\n   */\n  type = '';\n\n  spec = null;\n  zone = null;\n  node = null;\n  fixed = null;\n  priority = null;\n  connections = null;\n\n  constructor(spec) {\n    super();\n    // @TODO: Por qu almacenar spec en una propiedad y algunas de sus propiedades en otra.\n    this.spec = spec;\n    this.type = spec.type;\n    this.zone = spec.zone;\n    this.fixed = spec.fixed;\n    this.priority = spec.priority;\n    this.node = this.spec.node ? this.spec.node : this.createElement(this.spec.tagName); // NOT WORKING CellsBridgeComponent\n    this.connections = spec.connections;\n  }\n\n  setProps() {\n    var spec = this.spec;\n    if (spec.connections && spec.connections.ignoreAttr) {\n      for (let index = 0; index < spec.connections.ignoreAttr.length; index++) {\n        const key = spec.connections.ignoreAttr[index];\n        delete spec.properties[key];\n      }\n    }\n\n    this.setAttrs(this.node, spec.properties);\n  }\n\n  isUnresolved() {\n    return this.node.tagName.indexOf('-') > -1 && this.node.constructor === HTMLElement;\n  }\n\n  isLitElement() {\n    return this.spec.render && this.spec.render === renderEngines.litElement;\n  }\n}\n","import CellsComponent from './component';\n\n/**\n * Class for managing templates\n *\n * A template is a component used in Cells apps for managing the components distribution\n *\n * A template has defined zones like app__header or app__main\n * where you can place your components.\n * The property zoneId (in the json page definition file) indicates the zone in wHich the\n * the component is appended.\n *\n * The components added to the template are the template's children. There are two kind of children:\n * the fixed children and the normal children. The normal ones are appended\n * to the asigned zone, the fixed ones are just stored in the fixedChildren property\n * and appended to an especial zone that is fixed.\n *\n * As the class extends from Component it has properties like node which refers to\n * the node the template is attached.\n *\n * The 'state' atributte in the node is used to know the actual state of the template\n * it can be active, cached or inactive.\n */\nexport default class CellsBridgeTemplate extends CellsComponent {\n  /**\n   * children\n   *\n   * a list of all the components in the template (including the fixed ones)\n   *\n   * @type {Array}\n   */\n  children = [];\n  /**\n   * fixedChildren\n   *\n   * a list of the components in the template of type fixed, not attached to the template\n   * but in a special fixed zone\n   *\n   * @type {Array}\n   */\n  fixedChildren = [];\n  /**\n   * type\n   *\n   * indicates the type of this component\n   *\n   * @type {String}\n   */\n  type = 'TEMPLATE';\n\n  /**\n   * returns the zone node in the template identified by the id.\n   *\n   * @param {String} zoneId\n   *\n   * @return {HTMLElement}\n   */\n  getZone(zoneId) {\n    var curTemplate = this.node;\n    var node;\n    if (!zoneId) {\n      node = curTemplate;\n    } else if (curTemplate.$ && curTemplate.$[zoneId]) {\n      node = curTemplate.$[zoneId];\n    } else {\n      node = curTemplate.querySelector('#' + zoneId);\n    }\n    return node || curTemplate;\n  }\n\n  /**\n   * sets the attribute cache in the template node to 'cached'\n   * for not loading the template again the next time the template is used\n   */\n  cache() {\n    this._setAttribute('state', 'cached');\n  }\n\n  /**\n   * sets the attribute cache in the template node to 'active'\n   * so you can know which of the templates in html is the actual one\n   */\n  activate() {\n    this._setAttribute('state', 'active');\n  }\n\n  /**\n   * sets the attribute cache in the template node to 'inactive'\n   * so you can know which of the templates in html are not the actual one\n   */\n  deactivate() {\n    this._setAttribute('state', 'inactive');\n  }\n\n  native() {\n    this._setAttribute('state', 'native');\n  }\n\n  resetNextNavigation() {\n    this._getTemplate(this.node)._nextNavigation = undefined;\n  }\n\n  /**\n   * Set given value to corresponding attribute name of current template.\n   *\n   * @private\n   * @method _setAttribute\n   * @param {String} name  Attribute name.\n   * @param {String} value Attribute value.\n   */\n  _setAttribute(name, value) {\n    const template = this._getTemplate(this.node);\n\n    template.setAttribute(name, value);\n  }\n\n  /**\n   * Returns current template based on node type.\n   * If it's a routable component (page), we retrieve the first child element that matchs with cells-template.\n   * Otherwise, we return directly the node (cells-template).\n   *\n   * @private\n   * @method _getTemplate\n   * @param  {HTMLElement} node Node for template retrieval.\n   * @return {HTMLElement}      Associate template from given node.\n   */\n  _getTemplate(node) {\n    const { tagName } = node;\n    const isPage = tagName.toLowerCase().endsWith('-page');\n\n    return isPage ? this._getCellsTemplateFromShadowRootChildNodes(node) : node;\n  }\n\n  /**\n   * Returns first element from shadowRoot child nodes that matchs 'cells-template'.\n   *\n   * @private\n   * @method _getCellsTemplateFromShadowRootChildNodes\n   * @param  {HTMLElement} node First level component that contains cells-template inside shadowRoot childNodes.\n   * @return {HTMLElement}      Cells template.\n   */\n  _getCellsTemplateFromShadowRootChildNodes(node) {\n    return Array.from(node.shadowRoot.childNodes).find(el => el && el.tagName && el.tagName.toLowerCase().indexOf('cells-template') !== -1);\n  }\n\n  /**\n   * recieves one component or a list of them, gets the new ones and append\n   * them as child in the selected zone of the template\n   *\n   * @param {Array}/{Object} components\n   *\n   * @return {Boolean}\n   */\n  append(components) {\n    /* istanbul ignore else */\n    if (!components) {\n      return;\n    }\n    /* istanbul ignore else */\n    if (components.length === undefined) {\n      components = [components];\n    }\n\n    let newContentComponents = components.filter(component => component.fixed !== true);\n    let newFixedChildren = components.filter(component => component.fixed === true);\n    this.fixedChildren = this.fixedChildren.concat(newFixedChildren);\n    this.children = this.children.concat(components);\n    let zoneCache = [];\n\n\n    for (let index = 0; index < newContentComponents.length; index++) {\n      const component = newContentComponents[index];\n      // for backward compatibility with Polymer 1\n      component.node.setAttribute('data-select', component.zone);\n      // for the use of slots required by Polymer 2\n      component.node.setAttribute('slot', component.zone);\n      if (typeof zoneCache[component.zone] !== 'object') {\n        zoneCache[component.zone] = this.getZone(component.zone);\n      }\n      zoneCache[component.zone].appendChild(component.node);\n    }\n  }\n\n  config(cellsTemplateConfig) {\n    const {\n      name,\n      template: { id: templateId, name: templateName }\n    } = cellsTemplateConfig;\n\n    this.name = name;\n    this.node.id = templateId;\n    this.node.name = templateName;\n\n    this.setProps();\n  }\n}\n","import CellsTemplate from '../template';\nimport eventManager from './events';\nimport Constants from '../constants';\n\nconst { bindingCodes, externalEventsCodes } = Constants;\n\nlet CellsManagerTemplate = class CellsManagerTemplate {\n  cache = {};\n  templates = {};\n  selected = '';\n  locations = [];\n  size = 0;\n  fixedTemplates = ['__cross'];\n\n  constructor(options) {\n    const config = options || {};\n    const persistentPages = config.persistentPages || [];\n\n    this.viewLimit = (config.viewLimit && config.viewLimit >= 1 ? config.viewLimit : 3);\n    this.fixedTemplates = this.fixedTemplates.concat(persistentPages);\n    this.maxSize = this.viewLimit + this.fixedTemplates.length;\n  }\n\n  create(name, spec, isPrerendering = false) {\n    let template = this.get(name);\n\n    if (!template) {\n      template = this._createFromJSON(name, spec);\n      this._storeTemplate(name, template, isPrerendering);\n    }\n\n    return template;\n  }\n\n  /**\n   * Create Bridge Template based on Polymer component.\n   *\n   * @param  {String}       name    [description]\n   * @param  {HTMLElement}  element [description]\n   * @return {CellsBridgeTemplate}         [description]\n   */\n  createFromComponent(name, componentName) {\n    const template = this._createCellsTemplate(name, {tagName: componentName});\n\n    this._storeTemplate(name, template);\n    return template;\n  }\n\n  /**\n   * Register template from existing HTMLElement and stores it on memory.\n   *\n   * @param  {String}               name    Template name.\n   * @param  {HTMLElement}          element Template element (existing DOM element)\n   * @return {CellsBridgeTemplate}          Cells bridge template object.\n   */\n  register(name, element) {\n    const template = this._createFromHTMLElement(name, element);\n\n    this._storeTemplate(name, template);\n    return template;\n  }\n\n  /**\n   * Store given template on memory.\n   *\n   * @param  {String}               name     Template name.\n   * @param  {CellsBridgeTemplate}  template Cells bridge template object.\n   * @paran  {Boolean}              isPrerendering indicate if the page is being pre-rendering\n   */\n  _storeTemplate(name, template, isPrerendering) {\n    const { node } = template;\n\n    if (isPrerendering) {\n      const templateIsNotInFixedTemplates = this.fixedTemplates.indexOf(name) === -1;\n      if (templateIsNotInFixedTemplates) {\n        this.fixedTemplates.push(name);\n        this.maxSize++;\n        const cacheRanOutOfSpaceForNotFixedTemplates = this.maxSize === this.fixedTemplates.length;\n        if (cacheRanOutOfSpaceForNotFixedTemplates) {\n          this.maxSize += this.viewLimit;\n        }\n      }\n    }\n\n    if (this.size >= this.maxSize) {\n      const olderTemplateToDeallocate = this._getOlderRemovableTemplate();\n      if (olderTemplateToDeallocate) {\n        this.removeTemplate(olderTemplateToDeallocate);\n      } else {\n        console.warn('No space left in template cache for template ', name);\n      }\n    }\n\n    this.locations.push(name);\n    this.cache[name] = template;\n    this.templates[name] = node;\n    this.size++;\n  }\n\n  _getOlderRemovableTemplate() {\n    let found = false;\n    let olderRemovableTemplate;\n\n    for(let i=0; !found && i < this.locations.length; i++) {\n      const isNotPersistantPage = this.fixedTemplates.indexOf(this.locations[i]) == -1;\n\n      if (isNotPersistantPage) {\n        olderRemovableTemplate = this.locations[i];\n        found = true;\n      }\n    }\n\n    return olderRemovableTemplate;\n  }\n\n  /**\n   * Create Bridge Template based on existing HTML Element.\n   *\n   * @param  {String}       name    [description]\n   * @param  {HTMLElement}  element [description]\n   * @return {CellsBridgeTemplate}         [description]\n   */\n  _createFromHTMLElement(name, element) {\n    const template = this._createCellsTemplate(name, {node: element});\n\n    return template;\n  }\n\n  _createFromJSON(name, spec) {\n    let template = this._createCellsTemplate(name, spec);\n\n    return template;\n  }\n\n  // OJO!!!!\n  // Debido a a la jerarqua de clases, esto debera ser implementado por cada manager\n  _createCellsTemplate(name, spec) {\n    return new CellsTemplate(name, spec);\n  }\n\n  get(name) {\n    return this.cache[name];\n  }\n\n  getNode(name) {\n    return this.templates[name];\n  }\n\n  parseTemplateName(name) {\n    return name;\n  }\n\n  parseTemplateId(name) {\n    return 'cells-template-' + name.replace(/\\./g, '-');\n  }\n\n  select(name, bridgeChannelManager = undefined, binding = 'always') {\n    const { TEMPLATE_TRANSITION_END } = externalEventsCodes;\n    const { CURRENTVIEW, UI } = bindingCodes;\n    var template = this.get(name);\n    let cache = this.cache;\n    let oldPageName;\n\n    for (let tplName in cache) {\n      if(cache.hasOwnProperty(tplName)){\n        if (tplName === this.selected) {\n          oldPageName = tplName;\n          cache[tplName].deactivate();\n        } else if (name !== tplName) {\n          cache[tplName].cache();\n        }\n      }\n    }\n\n    this.selected = name;\n    template.activate();\n\n    if(bridgeChannelManager && binding !== CURRENTVIEW && binding !== UI){\n      bridgeChannelManager.updateAppContext(oldPageName, name);\n      bridgeChannelManager.initPrivateChannel(oldPageName, name);\n    }\n\n    eventManager.emit(TEMPLATE_TRANSITION_END, template);\n  }\n\n  /**\n   *\n   * remove one template by name.\n   * it remove the template from html and from the templates and cache nodes\n   *\n   * @param String templateName the name of the  template to remove\n   */\n  removeTemplate(templateName) {\n    if (this.templates[templateName]) {\n      const node = document.querySelector('#' + this.templates[templateName].id);\n      const pos = this.locations.indexOf(templateName);\n      this.locations.splice(pos, 1);\n      node.parentNode.removeChild(node);\n      delete this.templates[templateName];\n      delete this.cache[templateName];\n      this.size--;\n    }\n  }\n\n  /**\n   *\n   * remove all templates except initial one and cross component one.\n   *\n   * @param String initialTemplate the name of the initial template\n   * @param String crossContainerId the name of the cross component template\n   */\n  removeTemplates(initialTemplate, crossContainerId) {\n    for (let templateName in this.templates) {\n      if(this.templates.hasOwnProperty(templateName)){\n        if (templateName !== initialTemplate && templateName !== crossContainerId) {\n          this.removeTemplate(templateName);\n        }\n      }\n    }\n  }\n\n  /**\n   *\n   * remove all children of a template,\n   * it is used, for example, for clear cross component template.\n   *\n   * @param String templateName the name of the  template\n   */\n  removeTemplateChildrens(templateName){\n    let template = this.templates[templateName];\n    if(template && template.children){\n      for (let i = template.children.length - 1; i >= 0; i-- ) {\n        template.removeChild(template.children[i]);\n      }\n    }\n  }\n}\n\nexport default CellsManagerTemplate;\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar EmptyErrorImpl = /*@__PURE__*/ (function () {\n    function EmptyErrorImpl() {\n        Error.call(this);\n        this.message = 'no elements in sequence';\n        this.name = 'EmptyError';\n        return this;\n    }\n    EmptyErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return EmptyErrorImpl;\n})();\nexport var EmptyError = EmptyErrorImpl;\n//# sourceMappingURL=EmptyError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ArgumentOutOfRangeErrorImpl = /*@__PURE__*/ (function () {\n    function ArgumentOutOfRangeErrorImpl() {\n        Error.call(this);\n        this.message = 'argument out of range';\n        this.name = 'ArgumentOutOfRangeError';\n        return this;\n    }\n    ArgumentOutOfRangeErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ArgumentOutOfRangeErrorImpl;\n})();\nexport var ArgumentOutOfRangeError = ArgumentOutOfRangeErrorImpl;\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map\n","import { Observable, fromEvent } from 'rxjs';\nimport { first } from 'rxjs/operators';\n\nlet BridgeChannelManager = class BridgeChannelManager {\n  constructor(bridge) {\n    this.componentConnector = bridge.ComponentConnector;\n    this.privateChannels = new Set();\n  }\n\n  /**\n   * Returns the name of the application context channel.\n   */\n  getAppContextChannelName() {\n    return '__bridge_app';\n  }\n\n  /**\n   * Returns the name of the channels that has cancelations of back navigations.\n   */\n  getCancelledBackNavigationChannelName() {\n    return '__bridge_cancelled_back_navigation';\n  }\n\n  /**\n   * Returns the prefix for private channels.\n   */\n  getPrivateChannelPrefix() {\n    return '__bridge_page_';\n  }\n\n  /**\n   * Returns the prefix for event channels.\n   */\n  getEventChannelPrefix() {\n    return '__bridge_evt_';\n  }\n\n  /**\n   * Returns the prefix for generic channels.\n   */\n  getBridgeChannelPrefix() {\n    return '__bridge_ch_';\n  }\n\n  /**\n   * Returns the prefix for generic channels.\n   */\n  getPostMessageChannelPrefix() {\n    return '__bridge_post_message_';\n  }\n\n  /**\n   * Gets a channel that is for exclusive use of the bridge.\n   * If the channel doesn't exist, it creates one channel with.\n   *\n   * @param name of the channel to retrieve/create\n   *\n   * @return {Channel}\n   *\n   */\n  getBridgeChannel(channelName) {\n    return this.componentConnector.manager.get(this.getBridgeChannelPrefix() +  channelName);\n  }\n\n  getIdleCallbackChannel() {\n    const iddleChannel$ = Observable.create(observer => observer.next(true));\n\n    return iddleChannel$.pipe(first());\n  }\n\n  /**\n   * Gets the application context channel.\n   *\n   * @return {Channel}\n   */\n  getAppContextChannel() {\n    return this.componentConnector.manager.get(this.getAppContextChannelName());\n  }\n\n  /**\n   * Gets the cancelled back navigations channel.\n   *\n   * @return {Channel}\n   */\n  getCancelledBackNavigationChannel() {\n    return this.componentConnector.manager.get(this.getCancelledBackNavigationChannelName());\n  }\n\n  /**\n   * Gets the private channel that corresponds to a page.\n   *\n   * @param  {String} pageName\n   *\n   * @return {Channel}\n   */\n  getPrivate(pageName) {\n    let newName = this.getPrivateChannelPrefix() + pageName;\n    let channel = this.componentConnector.manager.get(newName);\n    this.privateChannels.add(newName);\n    return channel;\n  }\n\n  getPostMessageChannel(eventName){\n    let newName = this.getPostMessageChannelPrefix() + eventName;\n\n    return this.componentConnector.manager.get(newName);\n  }\n\n  /**\n   * Creates and initializes the application context channel.\n   *\n   */\n  initAppContextChannel() {\n    this.getAppContextChannel();\n  }\n\n  /**\n   * Creates and initializes the cancelled back navigation channel.\n   *\n   */\n  initCancelledBackNavigationChannel() {\n    this.getCancelledBackNavigationChannel();\n  }\n\n  /**\n   * Initializes the private chanel for the given page.\n   *\n   * @param {String} pageName\n   *\n   */\n  initPrivateChannel(oldPageName, newPageName) {\n    this.publishPrivatePageStatus(newPageName, true);\n\n    if (oldPageName) {\n      this.publishPrivatePageStatus(oldPageName, false);\n    }\n  }\n\n  /**\n   * Publish the status of a page in its private channel\n   *\n   * @param {String} pageName\n   * @param {Boolean} status is true if the page is active, and false if it is inactive\n   */\n  publishPrivatePageStatus(pageName, status) {\n    const channel = this.getPrivate(pageName);\n    const evt = this.componentConnector.createEvent('page-load', status);\n\n    channel.next(evt);\n  }\n\n  /**\n   * Updates the application context.\n   * Puts in context the information of the current page and previous active page.\n   *\n   * @param {String} oldPage was the previous current page\n   * @param {String} newPage is the page that becomes the current page\n   *\n   */\n  updateAppContext(oldPage, newPage) {\n    const evt = this.componentConnector.createEvent('app-context', {\n      currentPage: newPage,\n      fromPage: oldPage\n    });\n\n    this.getAppContextChannel().next(evt);\n  }\n\n  publishCancelledBackNavigation(navigation) {\n    const evt = this.componentConnector.createEvent('back-nav-cancelled', navigation);\n\n    this.getCancelledBackNavigationChannel().next(evt);\n  }\n\n  /**\n   * returns true if the given name matches a private channel's name\n   *\n   * @param {String} name\n   *\n   * @return {Boolean}\n   */\n  isPrivateChannel(name) {\n    return name.indexOf(this.getPrivateChannelPrefix()) === 0;\n  }\n\n  /**\n   * returns true if there's a private channel with the given name\n   *\n   * @param {String} name\n   *\n   * @return {Boolean}\n   */\n  isActivePrivateChannel(name) {\n    return this.privateChannels.has(name);\n  }\n\n  /**\n   * resets all channels, including the private channels.\n   * It removes all observers and publications.\n   *\n   */\n  resetBridgeChannels(mainNode, cleanPrivateChannels) {\n    let bridgeChannels = Object.keys(this.componentConnector.manager.channels);\n\n    bridgeChannels.forEach(function(chnlName) {\n      let chnl = this.componentConnector.manager.get(chnlName);\n      chnl.clean();\n      chnl.unsubscribeAll();\n    }.bind(this));\n\n    this.componentConnector.unregister(mainNode, cleanPrivateChannels);\n    this.componentConnector.unregisterAllSubscriptors(cleanPrivateChannels);\n    this.componentConnector.manager.cleanAllChannels();\n  }\n\n  initEventChannels(node, externalEvents) {\n    externalEvents.forEach(function(eventName) {\n      let prefix = this.getEventChannelPrefix();\n      let channelName = prefix + eventName;\n      let channel = this.componentConnector.manager.get(channelName);\n      let source = fromEvent(node, eventName);\n      source.subscribe(function(event) {\n        channel.next(event);\n      });\n    }.bind(this));\n  }\n\n  subscribeToEvent(node, eventName, callback) {\n    let prefix = this.getEventChannelPrefix();\n    let channelName = prefix + eventName;\n    let subscriptor = this.componentConnector.getSubscriptor(node);\n    let channel = this.componentConnector.manager.get(channelName);\n    callback.node = node;\n    subscriptor.subscribe(channel, callback);\n  }\n}\n\n/**\n * BridgeChannelManager definition\n */\nexport default BridgeChannelManager;\n","import eventManager from '../manager/events';\nimport Constants from '../constants';\n\nconst { externalEventsCodes } = Constants;\n\n/**\n * Class to define core private channels behavior\n */\nlet ActionChannelManager = class ActionChannelManager {\n  constructor(bridge) {\n    this.bridge = bridge;\n    this.PageManager = bridge.PageManager;\n    this.ChannelManager = bridge.BridgeChannelManager;\n    this.TemplateManager = bridge.TemplateManager;\n  }\n\n  subscribeAll() {\n    this.ChannelManager.getBridgeChannel('config').subscribe(evt => this._configSubscriptor(evt));\n    this.ChannelManager.getBridgeChannel('locales').subscribe(evt => this._localesSubscriptor(evt));\n    this.ChannelManager.getBridgeChannel('logout').subscribe(evt => this._logoutSubscriptor(evt));\n  }\n\n  _isAllowedProperty(prop) {\n    return typeof this.bridge[prop] !== 'function';\n  }\n\n  _configSubscriptor(evt) {\n    const { TEMPLATE_REGISTERED } = externalEventsCodes;\n    const selected = this.TemplateManager.selected;\n\n    if (evt.detail) {\n      for (let prop in evt.detail) {\n        if(evt.detail.hasOwnProperty(prop)) {\n          if(this._isAllowedProperty(prop)) {\n            this.bridge[prop] = evt.detail[prop];\n          }\n        }\n      }\n\n      if (evt.detail.app || evt.detail.pagesPath) {\n        this.PageManager.clear();\n        this.TemplateManager.removeTemplates(selected, this.bridge.crossContainerId);\n        eventManager.once(TEMPLATE_REGISTERED, () => this.TemplateManager.removeTemplate(selected));\n      }\n    }\n  }\n\n  _localesSubscriptor(evt) {\n    if (window.I18nMsg && evt.detail && evt.detail.lang) {\n      window.I18nMsg.lang = evt.detail.lang;\n    }\n  }\n\n  _logoutSubscriptor() {\n    this.bridge.logout();\n    this.subscribeAll();\n  }\n};\n\nexport default ActionChannelManager;\n","let ComposerEngineProxy = class ComposerEngineProxy {\n\n  /**\n   * Creates an instance of ComposerPageBuilder.\n\n   * @param {ComponentConnector} componentConnector\n   */\n  constructor(componentConnector, composerEngine) {\n    this.componentConnector = componentConnector;\n    this.composerEngine = composerEngine;\n    this.segments = [];\n    this.customGroups = [];\n    this.normalizedCustomGroups = [];\n  }\n\n  /**\n   * Initializes the composerEngine setting the initial parameters\n   * and subscribing to the channel that will receive the parameters.\n   *\n   * @param {Object} initialParams has this structure:\n   *  {\n   *    segments: [ segmentId1, segmentId2, ..., segmentIdN],\n   *    customGroups: [ {name: n1, value: v1}, ..., {name: n2, value: v2}]\n   *  }\n   *\n   */\n  init(initialParams) {\n    this.initialParams = initialParams || {};\n    this.addParams(this.initialParams);\n    this.componentConnector.get(this.getComposerEngineChannelName()).subscribe((evt) => this.handleFeatureFlags(evt));\n  }\n\n  /**\n   * @returns {String} the name of the channel used to pass the parameters to the composerEngine\n   */\n  getComposerEngineChannelName() {\n    return '__composer_engine';\n  }\n\n  /**\n   * It processes the new parameters that are placed in the composerEngine's channel\n   *\n   * @param {Event} evt\n   */\n  handleFeatureFlags(evt) {\n    const params = evt.detail;\n    this.addParams(params);\n  }\n\n  /**\n   * Adds parameters to use with composerEngine\n   *\n   * @param {Object} params has this structure:\n   * {\n   *  segments: [ segmentId1, segmentId2, ..., segmentIdN],\n   *  customGroups: [ {name: n1, value: v1}, ..., {name: n2, value: v2}]\n   * }\n   */\n  addParams(params) {\n    this.addSegments(params.segments);\n    this.addCustomGroups(params.customGroups);\n  }\n\n  /**\n   * Adds the segment ids passed in segmentList.\n   * It only adds the new segments.\n   *\n   * @param {Array<String>} segmentList\n   */\n  addSegments(segmentList) {\n    if (segmentList) {\n      segmentList.forEach(segmentId => {\n        if (this.segments.indexOf(segmentId)===-1) {\n          this.segments.push(segmentId);\n        }\n      });\n    }\n  }\n\n  /**\n   * Adds the custom groups passed in customGroupList\n   * It only adds the new groups.\n   *\n   * @param {Array<{name, value}>} customGroupList\n   */\n  addCustomGroups(customGroupList) {\n    if (customGroupList) {\n      customGroupList.forEach(aCustomGroup => {\n        const existingGroup = this.customGroups.find(element => element.name === aCustomGroup.name);\n        if (!existingGroup) {\n          this.customGroups.push(aCustomGroup);\n        } else {\n          if (!existingGroup.isConstant) {\n            existingGroup.value = aCustomGroup.value;\n          }\n        }\n      });\n    }\n    this.normalizedCustomGroups = this.normalizeCustomGroups(this.customGroups);\n  }\n\n  /**\n   * It converts the key/value pair of a customGroup into a String with the format\n   * used by Composer Engine\n   *\n   * @param {Array<{name, value}>} customGroups\n   * @returns\n   */\n  normalizeCustomGroups(customGroups) {\n    return customGroups.map(group => this.composerEngine.customGroup(group.name, JSON.stringify(group.value)));\n  }\n\n  /**\n   * It gets the page using the feature flag parameters\n   *\n   * @param {String} pageName\n   */\n  getPage(pageName) {\n    return this.composerEngine.getPageForAll(\n      pageName,\n      this.segments,\n      this.normalizedCustomGroups\n    );\n  }\n\n  /**\n   * Clears all parameters and sets the initial ones.\n   *\n   */\n  reset() {\n    this.segments = [];\n    this.customGroups = [];\n    this.init(this.initialParams);\n  }\n}\n\nexport default ComposerEngineProxy;\n","import SEMaaS from 'cells-semaas-adapter';\nimport Constants from './constants';\nimport dotProp from 'es5-dot-prop';\n\nconst { get, set } = dotProp;\nconst {\n  monitoring: {\n    SEMAAS: {\n      mrId, nameSpace, identifier, consumerId, policy,\n    },\n  },\n  externalEventsCodes\n} = Constants;\n\n// const flattenObject = (object, separator = '=', join = ', ') => Object.keys(object).map(key => `${key}${separator}${object[key]}`).join(join);\n\nconst {\n  PAGE_READY,\n  PARSE_ROUTE,\n  AFTER_PUBLISH,\n  NAV_REQUEST,\n  BEFORE_SET_ATTR_TO_NODE,\n  AFTER_SET_ATTR_TO_NODE,\n  BEFORE_CREATE_NODE,\n  AFTER_CREATE_NODE,\n  BEFORE_IMPORT,\n  AFTER_IMPORT,\n  PAGE_REQUEST,\n  PAGE_RESPONSE,\n  DATA_LOAD,\n  TEMPLATE_TRANSITION_END,\n  TRACK_EVENT,\n  TEMPLATE_REGISTERED,\n  ROUTER_BACKSTEP,\n  LOG_EVENT\n} = externalEventsCodes;\n\nexport default class Monitoring {\n  bridge = null;\n\n  application = null;\n\n  constructor(bridge) {\n    const { semaas = {}, logs } = bridge;\n\n    if (logs) {\n      const monitorArchitecture = false; // Boolean(semaas && semaas.architecture);\n      const applicationSemaasConfiguration = this.getApplicationConfiguration(semaas);\n\n      this.application = this.initilizeSEMaaSAdapter(applicationSemaasConfiguration);\n\n      if (monitorArchitecture) {\n        const bridgeSemaasConfiguration = this.getBridgeConfiguration(semaas);\n\n        this.bridge = this.initilizeSEMaaSAdapter(bridgeSemaasConfiguration);\n      }\n    }\n  }\n\n  getBridgeConfiguration(semaasConfiguration) {\n    const { tsec2JWTEndpoint, region, dnsTld, version } = semaasConfiguration;\n\n    return {\n      policy,                     // bridge constant\n      mrId,                       // bridge constant\n      nameSpace,                  // bridge constant\n      identifier,                 // bridge constant\n      consumerId,                 // bridge constant\n      tsec2JWTEndpoint,           // configuration object,\n      region,                     // configuration object\n      dnsTld,                     // configuration object\n      version,                    // configuration object\n    };\n  }\n\n  getApplicationConfiguration(semaasConfiguration) {\n    const { tsec2JWTEndpoint, policy, mrId, nameSpace, consumerId, region, dnsTld, version } = semaasConfiguration;\n\n    return {\n      policy,                     // configuration object\n      mrId,                       // configuration object\n      nameSpace,                  // configuration object\n      identifier: 'application',  // application constant\n      consumerId,                 // configuration object\n      tsec2JWTEndpoint,           // configuration object\n      region,                     // configuration object\n      dnsTld,                     // configuration object\n      version,                    // configuration object\n    };\n  }\n\n  initilizeSEMaaSAdapter(configuration) {\n    return new SEMaaS(configuration);\n  }\n\n  logBridge(log) {\n    this.bridge.log(log);\n  }\n\n  logApplication(log) {\n    this.application.log(log);\n  }\n\n  ingest(spans) {\n    this.application.ingest(spans);\n  }\n\n  createSpan(data) {\n    return this.application && this.application.createSpan(data);\n  }\n\n  createUUID() {\n    return this.application && this.application.createUUID();\n  }\n\n  hasBridgeLoggingEnabled() {\n    return !!this.bridge;\n  }\n\n  hasApplicationLoggingEnabled() {\n    return !!this.application;\n  }\n\n  buildLog(eventName, data) {\n    const { detail } = data;\n    const DEFAULT_LOG = {\n      message: `cells-bridge::${eventName}`,\n      properties: {}\n    };\n    const log = Object.assign({}, detail, DEFAULT_LOG);\n\n    switch (eventName) {\n    case PAGE_READY: {\n      const { page, components } = data;\n\n      log.properties = {\n        page,\n        components,\n      };\n      break;\n    }\n    case PARSE_ROUTE: {\n      const { name, params, pattern } = data;\n      //const normalizedParams = flattenObject(params);\n\n      log.properties = {\n        route: name,\n        //params: normalizedParams,\n        params,\n        pattern,\n      };\n      break;\n    }\n    case NAV_REQUEST: {\n      const { event, detail } = data;\n      const { page } = detail;\n      const params = event.detail;\n      //const normalizedParams = flattenObject(params);\n\n      //trace.description = `Page: ${page}, params: ${normalizedParams}`;\n      log.properties = {\n        page,\n        params\n      };\n      break;\n    }\n    case PAGE_REQUEST: {\n      const { params, url } = data;\n\n      log.properties = {\n        params,\n        url\n      };\n\n      break;\n    }\n    case PAGE_RESPONSE: {\n      log.properties = Object.assign({}, data);\n      break;\n    }\n    // Special case.\n    // We canalize the log message through the rest of bridge events - as we need to deflate data from channels\n    case LOG_EVENT: {\n      const { detail, event } = data;\n      const { message, properties } = detail;\n      const { detail: eventDetail } = event;\n\n      log.message = message;\n      log.properties = this.unflattenData(properties, eventDetail); // unflatten(properties, event)\n      break;\n    }\n    case AFTER_PUBLISH:\n    case BEFORE_SET_ATTR_TO_NODE:\n    case AFTER_SET_ATTR_TO_NODE:\n    case BEFORE_CREATE_NODE:\n    case AFTER_CREATE_NODE:\n    case BEFORE_IMPORT:\n    case AFTER_IMPORT:\n    case DATA_LOAD:\n    case TEMPLATE_TRANSITION_END:\n    case TRACK_EVENT:\n    case TEMPLATE_REGISTERED:\n    case ROUTER_BACKSTEP:\n      break;\n    }\n\n    return log;\n  }\n\n  isBridgeLoggableEvent(eventName) {\n    const LOGGABLE_EVENTS = [\n      PAGE_READY,\n      PARSE_ROUTE,\n      NAV_REQUEST,\n      PAGE_REQUEST,\n      PAGE_RESPONSE,\n    ];\n\n    return LOGGABLE_EVENTS.includes(eventName);\n  }\n\n  unflattenData(properties, values) {\n    const result = {};\n\n    Object.keys(properties).forEach(key => {\n      const property = properties[key];\n      let value = null;\n\n      if (property instanceof Object) {\n        const { bind: valuePath } = property;\n\n        value = get(values, valuePath);\n      } else {\n        value = property;\n      }\n\n      set(result, key, value);\n    });\n\n    return result;\n  }\n}\n","let PostMessageManager = class PostMessageManager {\n  constructor(bridge){\n    if (!bridge.postMessageTargetOrigin) {\n      this.enabled = false;\n    } else {\n      if(bridge.postMessageTargetOrigin === '*'){\n        this.enabled = false;\n        console.warn(\"For security reasons postMessageTargetOrigin can't be the wildcard '*'. See docs for more info. \");\n      } else {\n        this.enabled = true;\n        this.postMessageTargetOrigin = bridge.postMessageTargetOrigin;\n      }\n    }\n    this.componentConnector = bridge.ComponentConnector;\n    this.bridgeChannelManager = bridge.BridgeChannelManager;\n  }\n\n  /**\n   * Handles the postMessage events sent to this window from its parent.\n   * It transforms them into channels __bridge_post_message_{your-event-name} including the payload, to do so the postMessage must be:\n   * {\n   *  \"event\" : \"your-event-name\",\n   *  \"detail\" : <any>\n   * }\n   * Creates and listens to the private channel __bridge_ch_send_post_message to send postMessages to parent window.\n   */\n  setupPostMessages() {\n    if(this.enabled) {\n      window.addEventListener('message', ({data}) => {\n        if(data.event){\n          let channel = this.bridgeChannelManager.getPostMessageChannel(data.event);\n          const evt = this.componentConnector.createEvent(data.event, data.detail);\n          channel.next(evt);\n        }\n      });\n      this._sendPostMessage({ event: '__bridge-ready' });\n      this.bridgeChannelManager.getBridgeChannel('send_post_message').subscribe(evt => this._sendPostMessage(evt.detail));\n    }\n  }\n\n  _sendPostMessage(evt) {\n    window.parent && window.parent.postMessage({ eventName: evt.event, eventDetail: evt.detail }, this.postMessageTargetOrigin);\n  }\n}\n\nexport default PostMessageManager;","// eslint-disable-next-line no-unused-vars\nimport ManagerDom from './manager/dom';\nimport ManagerPage from './manager/page';\nimport ComponentConnector from './component-connector';\nimport Router from './router';\nimport Sanitizer from './sanitizer';\nimport eventManager from './manager/events';\nimport ImportManager from './manager/import';\nimport TemplateManager from './manager/template';\nimport Component from './component';\nimport BridgeChannelManager from './manager/bridge-channels';\nimport ActionChannelManager from './manager/action-channels';\nimport Utils from './utils';\nimport Constants from './constants';\nimport ComposerEngineProxy from './composer/composer-engine-proxy';\nimport Monitoring from './monitoring';\nimport FeatureFlagCollection from './featureflag/feature-flag-collection';\nimport FeatureFlagComponent from './featureflag/feature-flag-component';\nimport PostMessageManager from './manager/post-message';\n\nconst { dasherize, camelize } = Utils;\nconst { bindingCodes, binding, componentsPath, composerEndpoint, externalEvents, externalEventsCodes, initialTemplate: DEFAULT_INITIAL_TEMPLATE, pagesPath: DEFAULT_PAGES_PATH, prplCodes, prpl, preRenderState, renderEngines } = Constants;\n\nconst { DEFAULT: ALWAYS } = binding;\nconst { DEFAULT: DEFER } = prpl;\n\nvar coreInstances = 0;\nvar globalChannel = {};\n\n// @TODO: Agregar los imports y eliminar los `new this.*`\n// @TODO: Revisar los mtodos que manipulan templates. Quizs deban ser responsabilidad del TemplateManager\n\nlet CellsBridge = class CellsBridge {\n  ComponentConnector = null;\n  DomManager = null;\n  ImportManager = null;\n  PageManager = null;\n  Router = null;\n  TemplateManager = null;\n  Sanitizer = null;\n  BridgeChannelManager = null;\n\n  /**\n\t * Binding Type\n\t *\n\t * 'always'      => Register all components of all views. Never unregister them.\n\t * 'delayed'     => Like 'always' but waits for idle to start the animation.\n\t * 'ui'          => Register only ui and cross components of all views. Never\n\t *                  unregister them. Datamanagers are only connected when the\n\t *                  animation of the current view finishes.\n\t * 'currentview' => Register all components of the current view when the\n\t *                  animation finishes.\n\t *\n\t * @type {String}\n\t */\n  binding = ALWAYS;\n  /**\n   *\n   * @type {sting}\n   *\n   *  none => Don't use bundled pages\n   *  defer => Use bundled pages. It renders the page once every component has been loaded.\n   *  progressive => Use bundled pages. It renders the page inmediatelly while its component are loading.\n   *  hero => Use bundled pages. It renders the page inmediatelly while its component are loading using priorities.\n   */\n  prplLevel = DEFER;\n  /**\n\t * Pages Cache\n\t *\n\t * Saves page definitions into localstorage.\n\t *\n\t * @type {Boolean}\n\t */\n  cache = true;\n  /**\n\t * PubSub Context\n\t *\n\t * 'global'   => Notifies all components of all bridge instances.\n\t * 'local'    => Notifies components created by the current bridge instance.\n\t *\n\t * @type {String}\n\t */\n  channel = 'global';\n  /**\n   * URL Components Path\n   *\n   * URL path to load components.\n   *\n   * @type {String}\n   */\n  componentsPath = componentsPath;\n  /**\n\t * URL templates Path\n\t *\n\t * URL path to load templates.\n\t *\n\t * @type {String}\n\t */\n  templatesPath = '';\n  /**\n\t * Cross container node Id\n\t *\n\t * @type {String}\n\t */\n  crossContainerId = '__cross';\n  /**\n\t * Prints debug info\n\t *\n\t * @type {Boolean}\n\t */\n  debug = true;\n  /**\n\t * Proactive Cache.\n\t * Loads future pages definition.\n\t *\n\t * @type {Boolean}\n\t */\n  preCache = false;\n  /**\n\t * Proactive Render\n\t * Render future pages.\n\t *\n\t * @type {Boolean}\n\t */\n  preRender = false;\n  /**\n\t * Prefix for LocalStorage keys\n\t *\n\t * @type {String}\n\t */\n  storagePrefix = '__bridge-';\n  /**\n\t * Lib version.\n\t *\n\t * @type {string}\n\t */\n  version = '3.12.0';\n  /**\n\t * Max number of views\n\t *\n\t * Keeps this number of template alive.\n\t *\n\t * @type {Number}\n\t */\n  viewLimit = 1000;\n  /**\n   * The name of the initial template that gets rendered\n   *\n   * @type {String}\n   */\n  initialTemplate = DEFAULT_INITIAL_TEMPLATE;\n  /**\n   *  The node where the template will be rendered\n   */\n  __mainNodeElement = null;\n\n  /**\n\t * Events to expose\n\t *\n\t *\n\t * @type {Array}\n\t */\n  externalEvents = externalEvents;\n\n  /**\n   * The lists of routes that are rendered through a WebComponent.\n   *\n   * @type {Array}\n   */\n  pages = [];\n\n  /**\n   * The path to the folder that contains the components that renders a route.\n   *\n   * @type {String}\n   */\n  pagesPath = DEFAULT_PAGES_PATH;\n\n  /**\n   * The list of templates that are remote and need to be fetched from a remote server\n   * @type {Array}\n   */\n  remoteTemplates = [];\n\n  /**\n   * If it is true, the Bridge will use the Composer Engine to get the json\n   * pages (composer mocks)\n   * @type {Boolean}\n   */\n  useComposerEngine = false;\n\n  /**\n   * Json that contains the App definition.\n   * This is required by Composer Engine.\n   *\n   * @type {JSON}\n   */\n  appJson = '';\n\n  appId = '';\n  composerEndpoint = composerEndpoint;\n  templatesPath = '';\n\n  monitoring = null;\n\n  logs = false;\n  navRequestListener = null;\n\n  constructor(config) {\n    const { NAV_REQUEST, ROUTER_BACKSTEP } = externalEventsCodes;\n\n    if (!config || typeof config !== 'object') {\n      config = {};\n    }\n\n    config.prplLevel = this._normalizePrplLevel(config.prplLevel);\n    this.preRenderingPages = {};\n\n    let dependencies = config.dependencies;\n    delete config.dependencies;\n    Object.assign(this, config);\n\n    this._initDependencies(dependencies);\n\n    if (this.channel === 'global') {\n      this.ComponentConnector.manager.channels = globalChannel;\n    }\n\n    if (this.useComposerEngine) {\n      this._initComposerEngine();\n    }\n\n    if (!this.mainNode) {\n      console.warn('You should indicate the main node of your app');\n    } else {\n      this._plugExternalEvents();\n    }\n\n    if(config.featureFlag) {\n      if(config.featureFlag.subscribe) {\n        this.featureFlagCollection.subscribe(config.featureFlag.subscribe)\n      }\n\n      if(config.featureFlag.defaultChangedCallback) {\n        FeatureFlagComponent.defaultChangedCallback(config.featureFlag.defaultChangedCallback);\n      }\n\n      if(config.featureFlag.defaultFeatures) {\n        this.featureFlagCollection.update({features: config.featureFlag.defaultFeatures})\n      }\n\n      if(config.featureFlag.src) {\n        fetch(config.featureFlag.src)\n          .then(response => response.json())\n          .then(response => this.featureFlagCollection.update(response))\n      }\n    }\n    this.id = coreInstances++;\n    this._initCrossComponents();\n\n    if (this.cache) {\n      this.PageManager.persistent = true;\n    }\n    if (this.generateRequestUrl) {\n      console.assert(\n        typeof this.generateRequestUrl === 'function',\n        'generateRequestUrl has to be a function'\n      );\n      this.PageManager.generateRequestUrl = this.generateRequestUrl;\n    }\n    if (this.onPageDefinitionNotFound) {\n      console.assert(\n        typeof this.onPageDefinitionNotFound === 'function',\n        'onPageDefinitionNotFound has to be a function'\n      );\n      this.PageManager.onPageDefinitionNotFound = this.onPageDefinitionNotFound;\n    }\n\n    window.$core = window.$core || [];\n    /* istanbul ignore else */\n    if (this.debug) {\n      window.$core.push(this);\n      this.printDebugInfo();\n    } else {\n      window.$core.push(\n        {\n          // monitoring\n          log: (log) => this.log(log),\n          ingest: (spans) => this.ingest(spans),\n          createSpan: (data) => this.createSpan(data),\n          createUUID: () => this.createUUID(),\n\n          // bridge\n          logout: () => this.logout(),\n          subscribeToEvent: (eventName, callback) => this.subscribeToEvent(eventName, callback),\n          registerInConnection: (channel, node, callback) => this.registerInConnection(channel, node, callback),\n          unsubscribe: (channels, node) => this.unsubscribe(channels, node),\n          registerOutConnection: (channelName, node, bindName) => this.registerOutConnection(channelName, node, bindName),\n          publish: (channelName, value, options) => this.publish(channelName, value, options),\n          navigate: (page, params) => this.navigate(page, params),\n\n          // analytics\n          trackEvent: (data) => this.trackEvent(data),\n\n          // native\n          navigateToNative: (page, params) => this.navigateToNative(page, params),\n          backStep: () => this.backStep(),\n        }\n      );\n    }\n    window.cells = window.$core[0];\n\n    this.BridgeChannelManager.initAppContextChannel();\n    this.BridgeChannelManager.getCancelledBackNavigationChannel();\n    this.ActionChannelManager.subscribeAll();\n\n    // Bridge is ready - execute queued bridge commands\n    this._executePendingBridgeQueue();\n\n    if (this.logs) {\n      this._logBridgeReady();\n    }\n\n    // 1. Listen for route changes\n    // @TODO: Revisar este binding de un mtodo de otro objeto a otro objeto\n    this.Router.handler = () => this.routeHandler();\n    this.Router.addRoutes(this.routes);\n    this._initSkipNavigations();\n    this.Router.start();\n\n    this.navRequestListener = (info) => {\n      if (this.Router.hashIsDirty) {\n        window.location.hash = \"#!\";\n      }\n      var event = info.event;\n      var navigationDetail = info.detail;\n      var page = navigationDetail.page;\n      var params = navigationDetail.params;\n      var skipHistory = navigationDetail.skipHistory;\n      var cleanUntil = navigationDetail.cleanUntil;\n      var replace = navigationDetail.replace || false;\n      var p = {};\n\n\n      if (!page && navigationDetail.paramPage && event.detail) {\n        page = event.detail[navigationDetail.paramPage];\n      }\n      if (event.detail && params) {\n        for (var param in params) {\n          if (params.hasOwnProperty(param)) {\n            p[params[param]] = event.detail[param];\n          }\n        }\n      }\n\n      if (cleanUntil) {\n        this.Router.clearStackUntil(cleanUntil);\n      }\n\n      this.Router.go(page, p, replace, skipHistory);\n      Object.assign(this, config);\n    }\n\n    eventManager.on(NAV_REQUEST, this.navRequestListener);\n\n    eventManager.on(ROUTER_BACKSTEP, (evt) => this.handleBack(evt));\n\n    this.PostMessageManager.setupPostMessages();\n  }\n\n  /**\n   * Performs the go back action. This method is overriden by the CellsNativeBridge\n   *\n   * @return {Object} the executed navigation, an object with properties:\n   *  - from\n   *  - to\n   */\n  goBack() {\n    return this.Router.back();\n  }\n\n  /**\n   * This method is executed when the event router-backstep is fired.\n   * It calls the hook method for handling backward navigations and if that method\n   * allows the continuation, it does the navegation. Otherwise it will cancel the navigation\n   * and publish the response in the channel __bridge_cancelled_back_navigation.\n   */\n  handleBack() {\n    this.goBack();\n  }\n\n  /**\n   * Execute queued bridge commands due to delayed instance of bridge and\n   * premature execution of commands.\n   *\n   * @method\n   * @private\n   */\n  _executePendingBridgeQueue() {\n    if (!window.cellsBridgeQueue || !window.cellsBridgeQueue.length) {\n      return;\n    }\n\n    for (var i = 0; i < window.cellsBridgeQueue.length; i++) {\n      const queuedItem = window.cellsBridgeQueue[i];\n      const { command, parameters } = queuedItem;\n      const queuedCommand = this[command];\n\n      if (!queuedCommand) {\n        console.log(`WARNING: Invalid cells bridge command execution: ${command} (QUEUE).`);\n        return;\n      }\n\n      console.log(`Executing queued command ${command}.`);\n      queuedCommand.apply(this, parameters);\n    }\n\n    delete window.cellsBridgeQueue;\n  }\n\n  _logBridgeReady() {\n    const { appId, version, binding, prplLevel, cache, preCache, preRender } = this;\n    const message = `cells-bridge::ready`;\n    const properties = {\n      appId,\n      version,\n      binding,\n      href: window.location.href,\n      prplLevel,\n      cache,\n      preCache,\n      preRender\n    };\n    const log = { message, properties };\n\n    this.logBridge(log);\n  }\n\n  _initSkipNavigations() {\n    if (this.skipNavigations && this.skipNavigations.length>0) {\n      for (let i=0; i<this.skipNavigations.length; i++) {\n        this.skipNavigations[i].skipHistory = true;\n      }\n      this.Router.addSkipNavigations(this.skipNavigations);\n    }\n  }\n\n  _normalizePrplLevel(prplLevelCode) {\n    const { VALUES: prplList } = prpl;\n    let normalizedCode;\n\n    if (prplList.indexOf(prplLevelCode) > -1) {\n      normalizedCode = prplLevelCode;\n    } else {\n      normalizedCode = prplList[prplLevelCode] || DEFER;\n    }\n    return normalizedCode;\n  }\n\n  _dispatchEvent(name, payload) {\n    const mainNode = this.getMainNode();\n    const event = (payload) ? new CustomEvent(name, { detail: payload }) : new CustomEvent(name);\n\n    mainNode.dispatchEvent(event);\n  }\n\n  _plugExternalEvents() {\n    let len = this.externalEvents.length;\n    let mainNode = this.getMainNode();\n\n    if (mainNode) {\n      for (let i = 0; i < len; i++) {\n        const eventName = this.externalEvents[i];\n\n        eventManager.on(eventName, (data) => {\n          this._dispatchEvent(eventName, data);\n\n          if (this.logs) {\n            this.monitor(eventName, data);\n          }\n        });\n      }\n      this._initEventChannels();\n    } else {\n      console.warn('The defined main node does not exist');\n    }\n  }\n\n  /**\n   * Send analytics data event to main node.\n   * Cells Analytics Collector (Adobe / Target) are listening for main node event's and interept & process them.\n   *\n   * @param {Object} data Analytics info.\n   */\n  trackEvent(data) {\n    const { TRACK_EVENT } = externalEventsCodes;\n\n    // We just emit a TRACK_EVENT event, modeled as an out connection (we respect normal analytics flow)\n    eventManager.emit(TRACK_EVENT, { detail: data });\n  }\n\n  monitor(eventName, data) {\n    const { LOG_EVENT } = externalEventsCodes;\n    const isApplicationLogEvent = eventName === LOG_EVENT;\n    const isLoggable = isApplicationLogEvent || this.isBridgeLoggableEvent(eventName);\n\n    if (isLoggable) {\n      const log = this.monitoring.buildLog(eventName, data);\n      const method = isApplicationLogEvent ? 'log' : 'logBridge';\n\n      this[method](log);\n    }\n  }\n\n  isBridgeLoggableEvent(eventName) {\n    return this.monitoring.isBridgeLoggableEvent(eventName);\n  }\n\n  log(log) {\n    this.hasApplicationLoggingEnabled() && this.monitoring.logApplication(log);\n  }\n\n  logBridge(log) {\n    this.hasBridgeLoggingEnabled() && this.monitoring.logBridge(log);\n  }\n\n  ingest(spans) {\n    this.hasApplicationLoggingEnabled() && this.monitoring.ingest(spans);\n  }\n\n  createSpan(data) {\n    if (!this.hasApplicationLoggingEnabled()) {\n      return {\n        start() {},\n        finish() {}\n      };\n    }\n\n    return this.monitoring.createSpan(data);\n  }\n\n  createUUID() {\n    return this.monitoring.createUUID();\n  }\n\n  hasBridgeLoggingEnabled() {\n    return this.monitoring.hasBridgeLoggingEnabled();\n  }\n\n  hasApplicationLoggingEnabled() {\n    return this.monitoring.hasApplicationLoggingEnabled();\n  }\n\n  _initEventChannels() {\n    let mainNode = this.getMainNode();\n    this.BridgeChannelManager.initEventChannels(mainNode, this.externalEvents);\n    this._addInitialSubscribersToEvents();\n  }\n\n  _addInitialSubscribersToEvents() {\n    if (this.eventSubscriptions && this.eventSubscriptions.length > 0) {\n      this._subscribeToEvents(this.eventSubscriptions);\n    }\n  }\n\n  _subscribeToEvents(eventSubscriptions) {\n    eventSubscriptions.forEach((subscription) => {\n      const { event, callback } = subscription;\n\n      this.subscribeToEvent(event, callback);\n    });\n  }\n\n  /**\n   * Initialization of cross components container.\n   * Check if cross component container exists. Otherwise, it will be created.\n   *\n   * @private\n   */\n  _initCrossComponents() {\n    const crossContainerTemplateId = this.TemplateManager.parseTemplateId(this.crossContainerId);\n    let crossContainer = this.TemplateManager.get(crossContainerTemplateId);\n    const crossContainerElement = document.getElementById(crossContainerTemplateId);\n\n    // no cross container registered on memory\n    if (!crossContainer) {\n      if (!crossContainerElement) {\n        // no html element for cross container, we build it from scratch\n        crossContainer = this.TemplateManager.create(this.crossContainerId, { tagName: 'div' });\n        document.body.appendChild(crossContainer.node);\n      } else {\n        // html element found. we register it\n        this.TemplateManager.register(this.crossContainerId, crossContainerElement);\n      }\n    }\n  }\n\n  _initDependencies(dependencies) {\n    dependencies = Object.assign(\n      {\n        ComponentConnector: ComponentConnector,\n        DomManager: ManagerDom,\n        ImportManager: ImportManager,\n        TemplateManager: TemplateManager,\n        PageManager: ManagerPage,\n        Router: Router,\n        Sanitizer: Sanitizer,\n        BridgeChannelManager: BridgeChannelManager,\n        ActionChannelManager: ActionChannelManager,\n        monitoring: Monitoring,\n        featureFlagCollection: FeatureFlagCollection,\n        PostMessageManager: PostMessageManager\n      },\n      dependencies\n    );\n    for (let dependence in dependencies) {\n      if (dependencies.hasOwnProperty(dependence)) {\n        this[dependence] = new dependencies[dependence](this);\n      }\n    }\n  }\n\n  _initComposerEngine() {\n    /* global composerEngine */\n    this.composerEngine = new ComposerEngineProxy(this.ComponentConnector.manager, composerEngine);\n    this.composerEngine.init();\n    this.PageManager.composerEngine = this.composerEngine;\n  }\n\n  _createCellsComponent(spec, context) {\n    let cmp = new Component(spec, context);\n    if(spec.featureFlag) {\n      FeatureFlagComponent.extend(cmp, this);\n    }\n    return cmp;\n  }\n\n  createCCComponent(spec) {\n    var container = this.TemplateManager.get(this.crossContainerId);\n    var node = container.node.querySelector(spec.tagName);\n    if (!node) {\n      var cmp = this._createCellsComponent(spec, this);\n      cmp.__parentTemplate = container;\n      this.ComponentConnector.register(cmp.node, cmp.spec.connections);\n      return cmp;\n    } else {\n      this.ComponentConnector.progressiveRegister(node, spec.connections);\n    }\n  }\n\n  createUIComponent(spec) {\n    const { ALWAYS, DELAYED, UI } = bindingCodes;\n    var bindingType = this.binding;\n    var cmp = this._createCellsComponent(spec, this);\n\n    if (bindingType === ALWAYS || bindingType === DELAYED || bindingType === UI) {\n      this.ComponentConnector.register(cmp.node, cmp.connections);\n    }\n    return cmp;\n  }\n\n  createDMComponent(spec) {\n    const { ALWAYS, DELAYED } = bindingCodes;\n    var bindingType = this.binding;\n    var cmp = this._createCellsComponent(spec, this);\n\n    if (bindingType === ALWAYS || bindingType === DELAYED) {\n      this.ComponentConnector.register(cmp.node, cmp.connections);\n    }\n    return cmp;\n  }\n\n  _createLocalComponent(type, items, template) {\n    var collection = [];\n    for (var i = 0, l = items.length; i < l; i++) {\n      var spec = items[i];\n      var cmp = this['create' + type + 'Component'](spec);\n      if (cmp) {\n        cmp.__parentTemplate = cmp.__parentTemplate || template;\n        collection.push(cmp);\n      }\n    }\n    return collection;\n  }\n\n  createComponentsByType(collection, template) {\n    var itemsToInject = [];\n    var sortedList = ['CC', 'UI', 'DM'];\n    for (var j = 0, k = sortedList.length; j < k; j++) {\n      var type = sortedList[j];\n      var items = collection[type];\n      itemsToInject = itemsToInject.concat(this._createLocalComponent(type, items, template));\n    }\n    return itemsToInject;\n  }\n\n  _createComponents(response, template, isPreRendering = false) {\n    const { PAGE_READY } = externalEventsCodes;\n    const { page } = response;\n\n    var options = this;\n    var collection = this.Sanitizer.split(response.components);\n    var components = this.createComponentsByType(collection, template);\n    var unresolvedComponents = [];\n    var templateParents = [];\n\n    for (var i = 0, l = components.length; i < l; i++) {\n      // 9. Sets default attributes\n      components[i].setProps();\n      var component = components[i];\n      var parentName = component.__parentTemplate.name;\n      if (!templateParents[parentName]) {\n        templateParents[parentName] = this.TemplateManager.get(parentName);\n      }\n      // 9.1 Append components to template\n      templateParents[parentName].append(component);\n\n      if (component.isUnresolved()) {\n        unresolvedComponents.push(component);\n      }\n    }\n\n    eventManager.emit(PAGE_READY, { page, components: response.components.map(c => c.tagName).join(', ')});\n\n    switch(this.prplLevel) {\n    case prplCodes.NONE:\n    case prplCodes.DEFER:\n      this.ImportManager.loadComponent(unresolvedComponents, options.componentsPath).then(() => {\n        this.selectTemplate(page, isPreRendering);\n      });\n      break;\n    case prplCodes.PROGRESSIVE:\n      this.ImportManager.loadComponent(unresolvedComponents, options.componentsPath);\n      break;\n    case prplCodes.HERO:\n      this.selectTemplate(page, isPreRendering);\n      this.ImportManager.loadComponentByPriority(unresolvedComponents, options.componentsPath);\n      break;\n    }\n  }\n\n  createPageFromWebComponent(name) {\n    const componentName = `${name}-page`;\n    let node = this.TemplateManager.getNode(name);\n\n    this.BridgeChannelManager.getPrivate(name);\n\n    if (!node) {\n      node = this.TemplateManager.createFromComponent(name, componentName);\n\n      if (node.isUnresolved() && node.node.updateComplete===undefined) {\n        // is not LitElement so it must be a PolymerElement\n        return this.loadPolymerWebComponent(name);\n      }\n    }\n    return Promise.resolve();\n  }\n\n  _isLocalTemplate(templateName) {\n    let isLocal = true;\n    if (this.composerEndpoint && this.remoteTemplates) {\n      isLocal = this.remoteTemplates.indexOf(templateName) === -1;\n    }\n    return isLocal;\n  }\n\n  createTemplate(response, isPreRendering = false) {\n    let spec = response;\n    let name = response.page;\n    let node = this.TemplateManager.getNode(name);\n    let useComposerEngineForThisPage = this.composerEngine && !this.PageManager._isLocalComposer(name);\n    this.BridgeChannelManager.getPrivate(name);\n\n    if (!isPreRendering && this.preRenderingPages[name]) {\n      this.preRenderingPages[name] = preRenderState.REQUESTED;\n      return;\n    }\n\n    // Template is cached\n    if (node && !useComposerEngineForThisPage) {\n      this.selectTemplate(name, isPreRendering);\n    } else {\n      // Template not cached and has definition\n      if (spec && spec.template) {\n        if (this.prplLevel === prplCodes.DEFER && this._isLocalTemplate(name)) {\n          // Review this: need check if template is LitElement to avoid load html bundle\n          if(this.onlyLitElements) {\n            this._createTemplateFromSpec(name, spec, isPreRendering)\n          } else {\n            this.ImportManager.loadBundleForTemplate(this.componentsPath, name).then(() => {\n              this._createTemplateFromSpec(name, spec, isPreRendering)\n            });\n          }\n        } else {\n          this._createTemplateFromSpec(name, spec, isPreRendering);\n        }\n      }\n    }\n    this._preRender(response, isPreRendering);\n  }\n\n  _preRender(response, isPreRendering) {\n    if ((this.preCache === true || this.preRender === true) && response.pages) {\n      for (var page in response.pages) {\n        if(response.pages.hasOwnProperty(page)) {\n          let pageAlreadyLoaded = (page === name || this.TemplateManager.cache[page]);\n          if (pageAlreadyLoaded) {\n            continue;\n          }\n          if (this.preRender && isPreRendering === false) {\n            this.preRenderingPages[page] = preRenderState.WORKING;\n          }\n          this.loadTemplate(page).then(templateResponse => {\n            if (this.preRender && isPreRendering === false) {\n              let doPreRender = true;\n              if (templateResponse.page) {\n                this._idleCallback(() => this.createTemplate(templateResponse, doPreRender));\n              } else {\n                console.warn('Missing page. ', templateResponse);\n              }\n            }\n          });\n        }\n      }\n    }\n  }\n\n  _createTemplateFromSpec(name, spec, isPreRendering = false) {\n    // 4. Creates the new template\n    var template = this.TemplateManager.create(name, spec.template, isPreRendering);\n\n    if (this.prplLevel === prplCodes.PROGRESSIVE) {\n      this.selectTemplate(name, isPreRendering);\n    }\n    this.ComponentConnector.register(template.node, template.connections);\n    // Add new routes in router\n    if (spec.pages) {\n      this.Router.addRoutes(spec.pages);\n    }\n    // 5. Import it when doesn't exists\n    if (template.isUnresolved()) {\n      switch(this.prplLevel) {\n      case prplCodes.NONE:\n      case prplCodes.DEFER:\n        this.ImportManager.loadComponent(template, this.componentsPath).then(() => {\n          this._createComponents(spec, template, isPreRendering);\n        });\n        break;\n      case prplCodes.PROGRESSIVE:\n      case prplCodes.HERO:\n        this._createComponents(spec, template, isPreRendering);\n        break;\n      }\n    } else {\n      this._createComponents(spec, template, isPreRendering);\n    }\n\n  }\n\n  /**\n\t * Id for template node\n\t *\n\t * @param  {String} name Template name\n\t *\n\t * @return {String}\n\t */\n  parseTemplateId(name) {\n    return 'cells-template-' + name.replace(/\\./g, '-');\n  }\n\n  parse(name, value) {\n    name = camelize('parse-' + name);\n    return typeof this[name] === 'function' ?\n      this[name](value) :\n      value;\n  }\n\n  printDebugInfo() {\n    var getColor = function (option, color) {\n      var hexColor = option ?\n        color :\n        '#b0bec5';\n      return `background:${hexColor}; color:#fff; padding:2px 4px; margin-right: 5px;`;\n    };\n    console.log(\n      `%cbridge version: ${this.version} %cbinding: ${this.binding} %cprplLevel: ${this.prplLevel} %ccache: ${this.cache} %cpreCache: ${this.preCache} %cpreRender: ${this.preRender} %clogs: ${this.logs}`,\n      getColor(this.version, '#003f8d'),\n      getColor(this.binding, '#0065ba'),\n      getColor(this.prplLevel, '#008ff2'),\n      getColor(this.cache, '#0093e2'),\n      getColor(this.preCache, '#00aeeb'),\n      getColor(this.preRender, '#41cef8'), //#00aeeb\n      getColor(this.logs, '#0025ad') //#00aeeb\n    );\n\n    if (this.id > 0) {\n      console.log(`%cWARNING: There are ${this.id + 1} simultaneous instances of the Bridge running.`,\n        getColor(this.id, '#FF0000'));\n    }\n  }\n\n  routeHandler() {\n    const { PARSE_ROUTE } = externalEventsCodes;\n    var route = this.Router.currentRoute;\n\n    eventManager.emit(PARSE_ROUTE, route);\n\n    // 2. Load a new page when route changes\n    this._handleRouteLoading(route);\n\n    // 3. Publish URL params to global params.\n    for (let param in route.params) {\n      if (route.params.hasOwnProperty(param)) {\n        let eventData = {\n          detail: {\n            value: route.params[param]\n          },\n          type: dasherize(param) + '-changed'\n        };\n\n        this.ComponentConnector.manager.get(param).next(eventData);\n      }\n    }\n  }\n\n  /**\n   * Determines if given route maps to a component.\n   *\n   * @param  {Object}  route  Route object.\n   * @return {Boolean}\n   */\n  isRoutableComponent(route) {\n    return this.pages.indexOf(route.name) >= 0;\n  }\n\n  loadTemplate(name, params) {\n    const { cache, method, body, headers, app, templatesPath: templates } = this;\n    const options = { cache, params, method, body, headers };\n    const config = { app, templates };\n\n    return this.PageManager.get(name, options, config);\n  }\n\n  // @TODO DRY -> sanitizer lo usa tambin\n  loadPolymerWebComponent(name) {\n    const path = Array(2).fill(`${name}-page`).join('/');\n    const component = { spec: { path: `${path}.html` } };\n\n    return this.ImportManager.loadComponent(component, this.pagesPath);\n  }\n\n  _handleRouteLoading(route) {\n    if (this.isRoutableComponent(route)) {\n      this.createPageFromWebComponent(route.name).then(() => this.selectPage(route.name, route.params));\n    } else {\n      this.loadTemplate(route.name, route.params).then(response => this.createTemplate(response));\n    }\n  }\n\n  registerCurrentTemplate(currentTemplate, previousTemplate) {\n    const { TEMPLATE_REGISTERED } = externalEventsCodes;\n    const { UI } = bindingCodes;\n    var options = this;\n\n    if (previousTemplate && previousTemplate !== currentTemplate) {\n      this.unregisterChildren(previousTemplate, options.binding === UI ? 'DM' : null);\n    }\n    this.registerChildren(currentTemplate, options.binding === UI ? 'DM' : null);\n\n    this._updateChannels(previousTemplate, currentTemplate);\n    eventManager.emit(TEMPLATE_REGISTERED, { template: currentTemplate.name });\n  }\n\n  // this function MAY BE OVERRIDE on native bridge - not required due to internal router updateing the context\n  _updateChannels(previousTemplate, currentTemplate) {\n    if (this.BridgeChannelManager) {\n      var oldName = previousTemplate ? previousTemplate.name : undefined;\n      this.BridgeChannelManager.updateAppContext(oldName, currentTemplate.name);\n      this.BridgeChannelManager.initPrivateChannel(oldName, currentTemplate.name);\n    }\n  }\n\n  registerChildren(template, type) {\n    for (let index = 0; index < template.children.length; index++) {\n      const component = template.children[index];\n      if ((type && type === component.type) || !type) {\n        this.ComponentConnector.register(component.node, component.connections);\n      }\n    }\n  }\n\n  unregisterChildren(template, type) {\n    for (let index = 0; index < template.children.length; index++) {\n      const component = template.children[index];\n      if ((type && type === component.type) || !type) {\n        this.ComponentConnector.unregister(component.node);\n      }\n    }\n  }\n\n  registerInConnection(channelName, node, callback) {\n    this.ComponentConnector.addSubscription(channelName, node, callback);\n  }\n\n  registerOutConnection(channelName, htmlElement, bindName) {\n    this.ComponentConnector.addPublication(channelName, htmlElement, bindName);\n  }\n\n  unsubscribe(channels, node) {\n    this.ComponentConnector.unsubscribe(channels, node);\n  }\n\n  publish(channelName, value, options) {\n    this.ComponentConnector.publish(channelName, value);\n  }\n\n  navigate(page, params) {\n    this.Router.go(page, params);\n  }\n\n  // dummy methods only for native override\n  navigateToNative(page, params) {\n\n  }\n\n  backStep() {\n\n  }\n\n  _waitRenderComplete(template) {\n    return template.node.updateComplete || Promise.resolve();\n  }\n\n  selectPage(name, params) {\n    const { TEMPLATE_REGISTERED } = externalEventsCodes;\n    const template = this.TemplateManager.get(name);\n    const currentTemplate = this.TemplateManager.get(this.TemplateManager.selected);\n    const oldTemplateName = currentTemplate ? currentTemplate.name : null;\n\n    if (this.onRender) {\n      this.onRender(template.node);\n    }\n\n    (async () => {\n      await this._waitRenderComplete(template);\n      this._handleParams(template.node, params);\n      this.TemplateManager.select(name, this.BridgeChannelManager, this.binding);\n\n      if (this.BridgeChannelManager) {\n        this.BridgeChannelManager.updateAppContext(oldTemplateName, name);\n        this.BridgeChannelManager.initPrivateChannel(oldTemplateName, name);\n      }\n\n      eventManager.emit(TEMPLATE_REGISTERED, { template: name });\n    })();\n  }\n\n  _handleParams(node, params) {\n    const shouldBindParams = node.params && Object.keys(params).length > 0;\n\n    if (shouldBindParams) {\n      node.params = params;\n    }\n  }\n\n  selectTemplate(name, isPreRendering = false) {\n    const { TEMPLATE_TRANSITION_END } = externalEventsCodes;\n    const { CURRENTVIEW, UI, DELAYED } = bindingCodes;\n    let options = this;\n    let template = this.TemplateManager.get(name);\n    const shouldRender = isPreRendering !== true || this.preRenderingPages[name] === preRenderState.REQUESTED;\n\n    if ((options.binding === CURRENTVIEW || options.binding === UI) && shouldRender) {\n      // COMPROBAR 5 VECES\n      const currentTemplate = this.TemplateManager.get(this.TemplateManager.selected);\n      const onTemplateAnimationFinishes = () => this.registerCurrentTemplate(template, currentTemplate);\n\n      if (template.node.animationCompleteEvent) {\n        eventManager.listenToOnce(template.node, template.node.animationCompleteEvent, onTemplateAnimationFinishes);\n      } else {\n        eventManager.once(TEMPLATE_TRANSITION_END, onTemplateAnimationFinishes);\n      }\n    }\n    if (options.onRender) {\n      if (template.fixedChildren.length>0) {\n        options.onRender(template.node, template.fixedChildren);\n      } else {\n        options.onRender(template.node);\n      }\n    }\n    // 10. Shows the template created if it is not pre rendering or\n    // if it's a pre-rendered page that has been requested\n    if (isPreRendering) {\n      delete this.preRenderingPages[name];\n    }\n\n    if (shouldRender) {\n      const animateTemplate = () => this.TemplateManager.select(name, this.BridgeChannelManager, options.binding);\n\n      if (options.binding === DELAYED) {\n        this._idleCallback(animateTemplate);\n      } else {\n        animateTemplate();\n      }\n    }\n  }\n\n  _idleCallback(fn) {\n    this.BridgeChannelManager.getIdleCallbackChannel().subscribe(fn);\n  }\n\n  /**\n   *\n   * It subscribe the main node to an event channel.\n   *\n   * @param {*} eventName is the name of the event to subscribe\n   * @param {*} callback is the function to call when the event channel is activated with a new value\n   */\n  subscribeToEvent(eventName, callback) {\n    if (this.externalEvents.indexOf(eventName)<0) {\n      console.warn('Trying to subscribe to a non existing event: ', eventName);\n      return;\n    }\n    if (typeof callback !== 'function') {\n      console.warn('You must provide a function callback to subscribe to the event: ', eventName);\n      return;\n    }\n    let mainNode = this.getMainNode();\n    this.BridgeChannelManager.subscribeToEvent(mainNode, eventName, callback);\n  }\n\n  getMainNode() {\n    if (!this.__mainNodeElement) {\n      this.__mainNodeElement = document.querySelector('#' + this.mainNode);\n    }\n    return this.__mainNodeElement;\n  }\n\n  _resetBridgeChannels() {\n    const cleanPrivateChannels = true;\n    this.BridgeChannelManager.resetBridgeChannels(this.getMainNode(), cleanPrivateChannels);\n  }\n\n  /**\n   *\n   * Performs a logout action. It resets all channels, removes templates from DOM\n   * and redirects to the initial page\n   *\n   */\n  logout() {\n    if (this.TemplateManager.selected === this.initialTemplate) {\n      return;\n    }\n\n    // clean up current page\n    this.BridgeChannelManager.publishPrivatePageStatus(this.TemplateManager.selected, false);\n\n    this._resetBridgeChannels();\n\n    this.TemplateManager.removeTemplateChildrens(this.crossContainerId);\n    this.TemplateManager.removeTemplates(undefined, this.crossContainerId);\n\n    this._initEventChannels();\n\n    if (this.composerEngine) {\n      this.composerEngine.reset();\n    }\n\n    this.Router.init();\n    this.Router.go(this.initialTemplate);\n  }\n}\n\nexport default CellsBridge;","import CellsComponentConnector from '../core/component-connector';\n\nconst _dashToCamelCase = input => {\n  return input.toLowerCase().replace(/-(.)/g, function(match, group1) {\n    return group1.toUpperCase();\n  });\n}\n\nconst _getProperyChangedName = function (name) {\n  let propertyName;\n  const EVENT_CHANGED = '-changed';\n\n  if (name.indexOf(EVENT_CHANGED, name.length - EVENT_CHANGED.length) !== -1) {\n    propertyName = name.slice(0, - EVENT_CHANGED.length);\n    propertyName = _dashToCamelCase(propertyName);\n  }\n\n  return propertyName;\n};\n\n// Hell to test:\nvar _parseActionInEvent = function(evt, targetPath, target, litElement) {\n  var path;\n  var value;\n\n  // Check if event is because of property changed.\n  var propertyName = _getProperyChangedName(evt.type);\n\n  if (propertyName && evt.detail && evt.detail.hasOwnProperty('value')) {\n    value = evt.detail.value;\n    targetPath = targetPath || propertyName;\n\n    if (evt.detail.path) {\n      path = evt.detail.path.replace(propertyName, targetPath);\n    } else {\n      path = targetPath;\n    }\n  } else {\n    path = targetPath;\n    value = evt.detail;\n  }\n\n  if (target !== undefined && target.is === undefined && typeof(value) === 'object') {\n    if (Polymer && Polymer.Element === undefined && !litElement) {\n      value = JSON.stringify(value);\n    } else {\n      /* istanbul ignore else */\n      if ((Polymer && Polymer.Element && target instanceof Polymer.Element) === false && !litElement) {\n        value = JSON.stringify(value);\n      }\n    }\n  }\n\n  return {\n    path: path,\n    value: value,\n    property: targetPath\n  };\n};\n\nexport default class CellsPolymerComponentConnector extends CellsComponentConnector {\n\n  wrapCallback(node, bindName) {\n    return function(evt) {\n      var _idleCallback = function(fn) {\n        setTimeout(\n          function () {\n            if ('requestIdleCallback' in window) {\n              window.requestIdleCallback(fn);\n            } else {\n              setTimeout(fn, 1);\n            }\n          }, 100\n        );\n      }\n\n      var checkDispatchActionType = function(mutations, observerObject) {\n        var isPolymerElement = this._isPolymerElement(node);\n        var isLitElement = this._isLitElement(node);\n\n        /* istanbul ignore else */\n        if (isPolymerElement || isLitElement) {\n          if (typeof(bindName) === 'function') {\n            this._dispatchActionFunction(evt, node, bindName);\n          } else {\n            if (typeof node[bindName] === 'function') {\n              this._dispatchActionFunction(evt, node, bindName);\n            } else {\n              this._dispatchActionProperty(evt, node, bindName, isLitElement);\n            }\n          }\n\n          /* istanbul ignore else */\n          if (observerObject) {\n            observerObject.disconnect();\n          }\n        } else {\n          _idleCallback(checkDispatchActionType);\n        }\n      }.bind(this);\n\n      if (this._isPolymerElement(node) || this._isLitElement(node)) {\n        checkDispatchActionType();\n      } else {\n        var observer = new MutationObserver(checkDispatchActionType);\n        var config = { attributes: false, childList: true, characterData: true };\n        observer.observe(node, config);\n\n        _idleCallback(checkDispatchActionType, 100);\n      }\n    }.bind(this);\n  }\n\n  /**\n   * Return the version of Polymer instance if the node is a Polymer element.\n   * Return -1 if if the node is not a Polymer element.\n   *\n   * @param {Element} node\n   */\n  _whichPolymerVersion(node) {\n    let version = -1;\n    if (Polymer && Polymer.Element !== undefined && (node instanceof Polymer.Element || node instanceof Polymer.LegacyElementMixin)) {\n      version = 2;\n    } else {\n      /* istanbul ignore else */\n      if (node.__isPolymerInstance__ !== undefined) {\n        version = 1;\n      }\n    }\n    return version;\n  }\n\n  /**\n   * Return true if the node is instance of a Polymer element, otherwise return false.\n   *\n   * @param {Element} node\n   */\n  _isPolymerElement(node) {\n    return this._whichPolymerVersion(node) > 0;\n  }\n\n  _isLitElement(node) {\n    const { tagName } = node;\n    const normalizedTagName = tagName.toLowerCase();\n    const { customElements } = window;\n\n    return customElements && !!customElements.get(normalizedTagName);\n  }\n\n  /**\n   * Returns true if the event has reached the node that is listening the event\n   *\n   * @param {Event} event\n   */\n  _isEventAtTarget(event) {\n    var atTarget;\n    if (/** For Polymer 2 **/ Polymer && Polymer.Settings && ( Polymer.Settings.hasShadow === false || /** For Polymer 2 **/ Polymer.Settings.useShadow === false) ) {\n      var normalizedEvent = Polymer.dom(event);\n      atTarget = normalizedEvent.localTarget === event.currentTarget;\n    } else {\n      atTarget = super._isEventAtTarget(event);\n    }\n    return atTarget;\n  }\n\n  _dispatchActionFunction(evt, target, method) {\n    var propertyName = _getProperyChangedName(evt.type);\n    var payload;\n\n    if (propertyName && evt.detail && evt.detail.hasOwnProperty('value')) {\n      if (Polymer && Polymer.dom(evt).rootTarget) {\n        payload = Polymer.dom(evt).rootTarget[propertyName];\n      } else {\n        payload = evt.detail.value;\n      }\n    } else {\n      payload = evt.detail;\n    }\n\n    //TODO: Review to see if we actually want to show this warning.\n    if (this.bridge && this.bridge.debug && this.bridge.parsePayload && ('' + target[method]).indexOf('.data') > -1) {\n      payload = this.bridge.parsePayload(evt.detail);\n      console.warn('%c' + target.tagName + '%c is using an incompatible payload data in ' + method, 'background: #ff9800; color: white; padding: 4px 4px 4px 10px', 'background: #ff9800; color: rgba(255,255,255,0.9); padding: 4px 10px 4px 0');\n    }\n\n    if (typeof(method) === 'function') {\n      method(payload);\n    } else {\n      target[method](payload);\n    }\n  }\n\n  _getTargetProperties(target) {\n    let props;\n\n    if (target.constructor.config) {\n      props = target.constructor.config.properties;\n    } else if (target.constructor._properties) {\n      props = target.constructor._properties\n    }\n\n    return props;\n  }\n\n  _dispatchActionProperty(evt, target, property, litElement) {\n    var info;\n    var data = _parseActionInEvent(evt, property, target, litElement);\n\n    //check if it's a LitElement\n    if (target.updateComplete instanceof Promise && typeof target.render === 'function') {\n      //return target[data.property] = target.constructor._classProperties.get(data.property).type(data.value);\n      return target[data.property] = data.value;\n    }\n\n    if (target && target.constructor._finalize) {\n      var isProperty = target.constructor.properties[data.property];\n\n      if (isProperty) {\n        target[data.property] = data.value;\n        return;\n      } else {\n        return this._handleAttribute(target, data);\n      }\n    }\n\n    //check if target is an instance of Polymer Element to check if is a polymer 2 element\n    if (target && target.getPropertyInfo || Polymer.Element !== undefined && (target instanceof Polymer.Element) === false) {\n      if (target.getPropertyInfo) {\n        info = target.getPropertyInfo(data.property)\n      } else {\n        info = this._getTargetProperties(target)[data.property];\n      }\n\n      /* istanbul ignore else */\n      if (info && info.defined && !info.readOnly && !info.computed) {\n        return target.set(data.path, data.value);\n      }\n    }\n    //check if target is an instance of Polymer Element to check if is a polymer 2 element\n    if (target && target.getPropertyInfo === undefined || Polymer.Element !== undefined && (target instanceof Polymer.Element) === false) {\n      info = this._getTargetProperties(target) !== undefined ? this._getTargetProperties(target)[data.property] : undefined;\n\n      /* istanbul ignore else */\n      if (info && !info.readOnly && !info.computed) {\n        return target.set(data.path, data.value);\n      }\n\n    }\n\n    return this._handleAttribute(target, data);\n  }\n\n  _handleAttribute(target, {value, path}) {\n    // check if target property is a boolean one and current value is false.\n    // it expects to remove the attribute (as it's a boolean one)\n    if (typeof(value) === 'boolean' && !value) {\n      return target.removeAttribute(path);\n    }\n\n    return target.setAttribute(path, value);\n  }\n\n  register(node, connections) {\n    super.register(node, connections);\n\n    if (!node || !connections) {\n      return;\n    }\n\n    if (node.__isCellsConnected) {\n      return;\n    }\n\n    /* istanbul ignore else */\n    if (connections.in) {\n      for (let action in connections.in) {\n        if(connections.in.hasOwnProperty(action)){\n          /* istanbul ignore else */\n          if (this.manager.get(action)._events[0]) {\n            /* istanbul ignore else */\n            if (connections.ignoreAttr) {\n              connections.ignoreAttr.push(connections.in[action].bind);\n            } else {\n              connections.ignoreAttr = [connections.in[action].bind];\n            }\n          }\n        }\n      }\n    }\n\n    /* istanbul ignore else */\n    if (connections.out) {\n      for (let _action in connections.out) {\n        if(connections.out.hasOwnProperty(_action)){\n          let attrName = _getProperyChangedName(connections.out[_action].bind);\n\n          let polymerVersion = this._whichPolymerVersion(node);\n          if (polymerVersion === 2 ) {\n            /* istanbul ignore else */\n            if (attrName && node.__data && !this.manager.get(_action)._events[0]) {\n              /* istanbul ignore else */\n              if (node && node._hasReadOnlyEffect) {\n                /* istanbul ignore else */\n                if (!node._hasReadOnlyEffect(attrName) && !node._hasComputedEffect(attrName)) {\n                  let oldValue = node[attrName];\n                  node.__data[attrName] = undefined;\n                  node[attrName] = oldValue;\n                }\n              }\n            }\n          } else {\n            /* istanbul ignore else */\n            if (attrName && node.__data__ && !this.manager.get(_action)._events[0]) {\n              /* istanbul ignore else */\n              if (node && node.getPropertyInfo) {\n                var info = node.getPropertyInfo(attrName);\n\n                /* istanbul ignore else */\n                if (info.defined && !info.readOnly && !info.computed) {\n                  let oldValue = node[attrName];\n                  // remove polymer internal current value to trigger model changes\n                  node.__data__[attrName] = undefined;\n                  node[attrName] = oldValue;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    node.__isCellsConnected = true;\n  }\n\n}\n","import CellsBridgeTemplate from '../core/template';\nimport { isPolymerElementUnresolved } from './resolution-checker';\n\nexport default class PolymerTemplate extends CellsBridgeTemplate {\n  isUnresolved() {\n    return isPolymerElementUnresolved(this.node);\n  }\n}\n","import CellsManagerTemplate from '../../core/manager/template';\nimport PolymerTemplate from '../template';\n\nexport default class PolymerTemplateManager extends CellsManagerTemplate {\n  _createCellsTemplate(name, spec) {\n    const cellsTemplate = new PolymerTemplate(spec);\n    const cellsTemplateConfig = this._createCellsTemplateConfig(name);\n\n    cellsTemplate.config(cellsTemplateConfig);\n    return cellsTemplate;\n  }\n\n  _createCellsTemplateConfig(name) {\n    return {\n      name,\n      template: {\n        id: this.parseTemplateId(name),\n        name: this.parseTemplateName(name)\n      }\n    };\n  }\n}\n","import CellsBridgeComponent from '../core/component';\nimport { isPolymerElementUnresolved } from './resolution-checker';\n\nexport default class PolymerComponent extends CellsBridgeComponent {\n  isUnresolved() {\n    return isPolymerElementUnresolved(this.node);\n  }\n}\n","import CellsBridge from '../core/bridge';\nimport PolymerComponentConnector from './component-connector';\nimport PolymerTemplateManager from './manager/template';\nimport PolymerComponent from './component';\nimport FeatureFlagComponent from '../core/featureflag/feature-flag-component';\n\nexport default class CellsPolymerBridge extends CellsBridge {\n\n  constructor(config) {\n    super(config);\n\n    if (Polymer && config.avoidPolymerEventCache === true) {\n      var origGetEvent = Polymer.Base._getEvent;\n      Polymer.Base._getEvent = function(type, bubbles, cancelable) {\n        return origGetEvent(type, bubbles, cancelable, false);\n      }\n    }\n  }\n\n  _initDependencies(dependencies) {\n    dependencies = Object.assign(\n      {\n        ComponentConnector: PolymerComponentConnector,\n        TemplateManager: PolymerTemplateManager\n      },\n      dependencies\n    );\n    super._initDependencies(dependencies);\n  }\n\n  _createCellsComponent(spec, context) {\n    let cmp = new PolymerComponent(spec, context);\n    if(spec.featureFlag) {\n      FeatureFlagComponent.extend(cmp, this);\n    }\n    return cmp;\n  }\n}\n","/**\n * @constant\n * @desc Operations between NATIVE and HTML bridges\n * @type {Object}\n * @property {String}  SYNC_CHANNELS_DATA         - Sync channels\n * @property {String}  RESET_CHANNELS_DATA        - Reset channels\n * @property {Object}  NATIVE                     - From NATIVE TO HTML\n * @property {String}  NATIVE.BACK_STEP           - Back\n * @property {String}  NATIVE.NAVIGATION          - Navigate\n * @property {String}  NATIVE.RESET_WEBVIEW       - Performs a Logout\n * @property {Object}  HTML                       - From HTML to NATIVE\n * @property {String}  HTML.BACK_STEP             - Back\n * @property {String}  HTML.NAVIGATION            - Navigate\n */\nexport const OPERATIONS = {\n  SYNC_CHANNELS_DATA: 'channels',\n  RESET_CHANNELS_DATA: 'reset-channels',\n  NATIVE: {\n    BACK_STEP: 'back',\n    NAVIGATION: 'nav',\n    RESET_WEBVIEW: 'reset-webview',\n    LOGOUT: 'logout',\n    UPDATE_SKIP_NAVIGATIONS: 'skip-nav'\n  },\n  HTML: {\n    BACK_STEP: 'pop',\n    NAVIGATION: 'push',\n    NAVIGATION_AND_REPLACE: 'popAndPush',\n    BRIDGE_READY: 'bridgeReady',\n    PAGE_LOADED: 'pageLoaded',\n    PAGE_UNLOADED: 'pageUnloaded'\n  }\n};\n\nexport const EVENTS = {\n  /**\n   * HTML -> Native channel sync\n   * @event NATIVE_CHANNEL_SYNC\n   */\n  NATIVE_CHANNEL_SYNC: 'native-channel-sync',\n  /**\n   * Native back navigation request event.\n   * @event NATIVE_BACKSTEP_REQUEST\n   */\n  NATIVE_BACKSTEP_REQUEST: 'native-backstep-request',\n  /**\n   * Native navigation request event.\n   * @event NATIVE_NAVIGATION_REQUEST\n   * @type {object}\n   * @property {Event} event - Indicates the page to navigate.\n   * @property {Object} detail - Indicates the page to navigate.\n   * @property {String} detail.page - Indicates the page to navigate.\n   */\n  NATIVE_NAVIGATION_REQUEST: 'native-nav-request',\n  /**\n   * Internal cells-bridge navigation event.\n   * @event INTERNAL_ROUTER_NAVIGATION\n   * @type {object}\n   * @property {Event} event - Indicates the page to navigate.\n   * @property {Object} detail - Indicates the page to navigate.\n   * @property {String} detail.page - Indicates the page to navigate.\n   */\n  INTERNAL_ROUTER_NAVIGATION: 'nav-request',\n  /**\n   * Internal cells-native-bridge back navigation request event.\n   * @event INTERNAL_ROUTER_BACKSTEP\n   * @type {object}\n   * @property {String} page - Indicates the page to navigate.\n   */\n  INTERNAL_ROUTER_BACKSTEP: 'backstep',\n  /**\n   * Internal cells-native-bridge back navigation request event from native page.\n   * @event INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE\n   * @type {object}\n   * @property {String} page - Indicates the page to navigate.\n   */\n  INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE: 'backstep-from-native',\n  /**\n   * Back Request from native event\n   * @event ROUTER_BACKSTEP\n   * @type {object}\n    * @property {Boolean} paylwillAppearoad - Androis flag Web will be shown.\n   */\n  ROUTER_BACKSTEP: 'backstep-request',\n  /**\n   * Navigation request from native event.\n   * @event ROUTER_NAVIGATION\n   * @type {object}\n   * @property {String} page - Name of the page to natigate.\n   */\n  ROUTER_NAVIGATION: 'external-nav-request',\n  /**\n   * Request from native event to reset the web view.\n   * @event RESET_WEBVIEW\n   */\n  RESET_WEBVIEW: 'reset-webview',\n  /**\n   *  request from native event.\n   * @event NATIVE_LOGOUT\n   */\n  NATIVE_LOGOUT: 'native-logout',\n  /**\n   *  request from native event.\n   * @event UPDATE_SKIP_NAVIGATIONS\n   */\n  UPDATE_SKIP_NAVIGATIONS: 'update-skip-navigations',\n  /**\n   * Channels syncronization from native event.\n   * @event SYNC_CHANNELS_DATA\n   * @type {object}\n   * @property {Channel[]} channels - Array of channels to sync.\n   */\n  SYNC_CHANNELS_DATA: 'sync-channels-data',\n  PRIVATE: {\n    SYNC_CHANNELS_DATA: '__cells-data-sync',\n    ROUTER_NAVIGATION: '__cells-nav-request'\n  }\n};\n\n/**\n * @constant\n * @desc Keys of declared Objects\n * @type {Object}\n * @property {String}  NATIVE_CHANNEL - Key of the native connector\n */\nexport const KEYS = {\n  NATIVE_CHANNEL: 'NativeBridge',\n  NATIVE_PLUGIN_CHANNEL: 'PluginBridge'\n};\n\n/**\n * @constant\n * @desc Prefixes used in cells-native-bridge\n * @type {Object}\n * @property {String}  NATIVE_ROUTE - Prefix of native routes in Routers\n * @property {String}  PRIVATE_CHANNEL - Prefix of private channels in ComponentConnector\n */\nexport const PREFIX = {\n  NATIVE_ROUTE: 'cells-native-route:',\n  PRIVATE_CHANNEL: '__bridge_'\n};\n\nexport const PLUGIN_RESPONSE_STATUS = {\n  SUCCESS: 0,\n  ERROR: 1\n};\n\nexport const PLUGIN_RESPONSE_CALLBACKS = {\n  SUCCESS_ACCESSOR: 'success',\n  FAIL_ACCESSOR: 'fail'\n};\n\nexport default {\n  OPERATIONS,\n  EVENTS,\n  KEYS,\n  PREFIX,\n  PLUGIN_RESPONSE_STATUS,\n  PLUGIN_RESPONSE_CALLBACKS\n}\n\n/**\n * @typedef {Object} Channel\n * @property {String} name - The channel name\n * @property {any} payload - The channel content\n */\n\n/**\n * @typedef {Object} Link\n * @property {Link} page - The page name\n */\n\n/**\n * @typedef {Object} Connection\n * @property {Link} link - The web link definition\n * @property {Link} nativeLink - The native link definition\n */\n","import CellsPolymerComponentConnector from '../polymer/component-connector';\nimport eventManager from '../core/manager/events';\n\nimport { EVENTS, PREFIX } from './constants';\n\nconst PRIVATE_EVENTS = EVENTS.PRIVATE;\n\n/**\n * Class to connect components throuhg the Pub/Sub\n * @extends CellsPolymerComponentConnector\n */\nlet CellsNativeComponentConnector = class CellsNativeComponentConnector extends CellsPolymerComponentConnector {\n\n  handleI18n(cb) {\n    this.manager.get(`${this.getNativeEventChannelPrefix()}locales`).subscribe(cb);\n  }\n\n  handleConfig(cb) {\n    this.manager.get(`${this.getNativeEventChannelPrefix()}config`).subscribe(cb);\n  }\n\n  handleAppLoad(cb) {\n    this.manager.get(`${this.getNativeEventChannelPrefix()}app_loaded`).subscribe(cb);\n  }\n\n  handleAppContextChange(cb) {\n    this.manager.get(this.getAppContextChannelName()).subscribe(cb);\n  }\n\n  getNativeEventChannelPrefix() {\n    return '__native_bridge_evt_';\n  }\n\n  getAppContextChannelName() {\n    return '__bridge_app';\n  }\n\n  /**\n   * Get all valid public channels from bridge channel manager.\n   *\n   * @return {Channel[]} Array of public channels with valid value.\n   */\n  getChannels() { //@TODO: getPublicChannels\n\n    const publicChannels = this._getPublicChannels(this.manager.channels);\n    return publicChannels.filter(this._isValidChannel.bind(this));\n  }\n\n  getChannel(channelName) {\n\n    return this._getChannel(channelName, this.manager.channels);\n  }\n\n  /**\n   * Get all valid channels from bridge channel manager.\n   *\n   * @return {Channel[]} Array of channels with valid value.\n   */\n  getAllChannels() {\n\n    const channels = this._getChannels(this.manager.channels);\n\n    return channels.filter(this._isValidChannel.bind(this));\n  }\n\n  /**\n   * Get all channels from given channels string array.\n   *\n   * @param  {Array} channels Channel names array.\n   * @return {Array}          Channels object array.\n   */\n  _getChannels(channels) {\n    const channelNames = Object.keys(channels);\n\n    return channelNames.map((channelName) => this._getChannel(channelName, channels));\n  }\n\n  /**\n   * Get all public channels from given channels string array.\n   *\n   * @param  {Array} channels Channel names array.\n   * @return {Array}          Channels object array.\n   */\n  _getPublicChannels(channels) {\n    const channelNames = Object.keys(channels);\n    const publicChannels = channelNames.filter(this._isPublicChannel);\n\n    return publicChannels.map((channelName) => this._getChannel(channelName, channels));\n  }\n\n  /**\n   * Decides if given channel name is a public channel.\n   *\n   * @param  {String}  channelName Name of channel.\n   * @return {Boolean}\n   */\n  _isPublicChannel(channelName) {\n    return !channelName.startsWith(PREFIX.PRIVATE_CHANNEL);\n  }\n\n  /**\n   * Get channel object based on given channel name and channels array.\n   *\n   * @param  {String} channelName Channel name.\n   * @param  {Array} channels     Array of channels.\n   * @return {Object}             Channel object.\n   */\n  _getChannel(channelName, channels) {\n    const channel = channels[channelName];\n\n    return {\n      name: channelName,\n      payload: this._getChannelPayload(channel)\n    };\n  }\n\n  /**\n   * Gets payload from given channel.\n   *\n   * @param  {Object} channel Channel objet.\n   * @return {Object}         Channel payload.\n   */\n  _getChannelPayload(channel) {\n    return channel._events[0] && channel._events[0].detail;\n  }\n\n  /**\n   * Decides if given channel object is a valid channel: Has payload, has content, and is not an HTML Element.\n   *\n   * @param  {Object}  channel Channel object.\n   * @return {Boolean}\n   */\n  _isValidChannel(channel) {\n    return this._hasPayload(channel) && !this._hasForbiddenPayload(channel) && this._hasContent(channel) && !this._isHTMLElement(channel);\n  }\n\n  /**\n   * Decides if given channel object has payload.\n   *\n   * @param  {Object}  channel Channel object.\n   * @return {Boolean}\n   */\n  _hasPayload(channel) {\n    return channel.payload;\n  }\n\n  /**\n   * Decides if given channel object has content.\n   *\n   * @param  {Object}  channel Channel object.\n   * @return {Boolean}\n   */\n  _hasContent(channel) {\n    return !channel.payload.constructor === Object || Object.keys(channel.payload).length > 0;\n  }\n\n  /**\n   * Decides if given object has any forbidden properties inside payload.\n   * Example: 'sourceEvent', 'preventer', from a click event, that handles to\n   * circular reference excepction while doing data sync.\n   *\n   * @param  {Object}  channel Object to analyze.\n   * @return {Boolean}\n   */\n  _hasForbiddenPayload(channel) {\n    const FORBIDDEN_PAYLOAD_PROPERTIES = ['sourceEvent', 'preventer'];\n    const properties = Object.keys(channel.payload);\n\n    return Array.prototype.includes.apply(properties, FORBIDDEN_PAYLOAD_PROPERTIES);\n  }\n\n  /**\n   * Decides if given object is an HTML Element.\n   *\n   * @param  {Object}  detail Object to analyze.\n   * @return {Boolean}\n   */\n  _isHTMLElement(channel) {\n    return channel.payload.node || channel.payload instanceof HTMLElement;\n  }\n\n  /**\n   * Run through all given channels and performs a sync operation in the Pub/Sub.\n   *\n   * @param {Array} channels Array of channels name to sync.\n   */\n  syncChannels(channels) {\n    channels.forEach(this._syncChannel.bind(this));\n  }\n\n  /**\n   * Run through all channels and performs a sync operation in the Pub/Sub.\n   *\n   * @param {Array} channels Array of channels name to sync.\n   */\n  syncAllChannels() {\n    this.getAllChannels().forEach(this._syncChannel.bind(this));\n  }\n\n  /**\n   * Recovers channel observer object from manager based on channel name and fires a SYNC_CHANNELS_DATA event.\n   *\n   * @param  {String} channelName Channel name to sync.\n   */\n  _syncChannel(channel) {\n    const channelName = channel.name;\n    const detail = channel.payload;\n    const observer = this.manager.get(channelName);\n\n    observer.next(new CustomEvent(PRIVATE_EVENTS.SYNC_CHANNELS_DATA, { detail }));\n  }\n\n  /**\n   * Function called by base component connector allowing extension of json events.\n   *\n   * @param {Event} event\n   * @param {Connection} connection - Connection to check\n   */\n  wrapEventHandler(event, connection, channel) {\n    if (!connection) {\n      return;\n    }\n\n    if (connection.nativeLink) {\n      eventManager.emit(EVENTS.NATIVE_NAVIGATION_REQUEST, {\n        event: event,\n        detail: connection.nativeLink\n      });\n    }\n\n    if (connection.hasOwnProperty('forward-to-native')) {\n      eventManager.emit(EVENTS.NATIVE_CHANNEL_SYNC, {\n        event: event,\n        detail: channel.name\n      });\n    }\n  }\n}\n\nexport default CellsNativeComponentConnector;\n","import eventManager from '../../core/manager/events';\n\nimport { EVENTS, OPERATIONS } from '../constants';\n\n/**\n * Class to execute native operations\n */\nlet NativeOperationManager = class NativeOperationManager {\n\n  /**\n   * Execute a native operation\n   *\n   * @param {String} operation - operation name (must match with defined in constants)\n   * @param {Object} payload - payload of the operation\n   * @emits ROUTER_BACKSTEP\n   * @emits ROUTER_NAVIGATION\n   * @emits SYNC_CHANNELS_DATA\n   */\n  execute(operation, payload) {\n    const { SYNC_CHANNELS_DATA, NATIVE: { BACK_STEP, NAVIGATION, RESET_WEBVIEW,\n      LOGOUT, UPDATE_SKIP_NAVIGATIONS } } = OPERATIONS;\n\n    if (!operation) {\n      return;\n    }\n\n    if (operation === SYNC_CHANNELS_DATA) {\n      this._executeSyncChannelsData(payload);\n    } else if (operation === BACK_STEP) {\n      this._executeBackStep(payload);\n    } else if (operation === NAVIGATION) {\n      this._executeNavigation(payload);\n    } else if (operation === RESET_WEBVIEW) {\n      this._executeResetWebview();\n    } else if (operation === LOGOUT) {\n      this._executeLogout();\n    } else if (operation === UPDATE_SKIP_NAVIGATIONS) {\n      this._executeUpdateSkipNavigations(payload);\n    } else {\n      console.log(`Unkown operation received from native message: ${JSON.stringify({operation, payload})}`);\n    }\n  }\n\n  /**\n   * Gets channels from given payload and emits a SYNC_CHANNELS_DATA event.\n   * @private\n   * @param  {Object} payload Object containing channels to sync.\n   */\n  _executeSyncChannelsData(payload) {\n    const channels = this._getChannelsFromPayload(payload);\n\n    eventManager.emit(EVENTS.SYNC_CHANNELS_DATA, { channels });\n  }\n\n  /**\n   * Extracts channels from given payload, normalizes them on an array,\n   * and maps them to desired format.\n   * @private\n   * @param  {Object} payload Object containing channels data.\n   * @return {Array}          Array of channels.\n   */\n  _getChannelsFromPayload(payload) {\n    let channelsData = payload.channels;\n\n    if (!Array.isArray(channelsData)) {\n      channelsData = [channelsData];\n    }\n\n    return channelsData.map(this._mapChannel);\n  }\n\n  /**\n   * Map given channel object to needed bridge channel format.\n   * @private\n   * @param  {String} channelName    Channel name.\n   * @param  {Object} channelPayload Channel payload.\n   *\n   * @return {Object}                Channel object in desired format.\n   */\n  _mapChannel({channelName, channelPayload}) {\n    return {\n      name: channelName,\n      payload: channelPayload\n    };\n  }\n\n  /**\n   * Emites a ROUTER_BACKSTEP event with given payload.\n   * @private\n   * @param  {Object} payload Operation payload.\n   */\n  _executeBackStep(payload) {\n    eventManager.emit(EVENTS.ROUTER_BACKSTEP, payload);\n  }\n\n  /**\n   * Emits a ROUTER_NAVIGATION event with given payload.\n   * @private\n   * @param  {Object} payload Operation payload.\n   */\n  _executeNavigation(payload) {\n    eventManager.emit(EVENTS.ROUTER_NAVIGATION, payload);\n  }\n\n  /**\n   * Emits a RESET_WEBVIEW event.\n   */\n  _executeResetWebview() {\n    eventManager.emit(EVENTS.RESET_WEBVIEW);\n  }\n\n  /**\n   * Emits a Logout event.\n   */\n  _executeLogout(){\n    eventManager.emit(EVENTS.NATIVE_LOGOUT);\n  }\n\n  /**\n   * Updates\n   *\n   * @param {Object} payload contains navigations to add to (or remove from) skipNavigations\n   */\n  _executeUpdateSkipNavigations(payload) {\n    eventManager.emit(EVENTS.UPDATE_SKIP_NAVIGATIONS, payload);\n  }\n}\n\nexport default NativeOperationManager;\n","import { KEYS, PLUGIN_RESPONSE_STATUS, PLUGIN_RESPONSE_CALLBACKS } from '../constants';\n\n/**\n * Class to manage communication with native plugins\n */\nlet CellsNativePluginManager = class CellsNativePluginManager {\n  _callbacks = {};\n\n  /**\n   * Reference to Native Plugin JS Interface inside window.\n   *\n   * @return {Object} Plugin JS Interface.\n   */\n  get source() {\n    return window[KEYS.NATIVE_PLUGIN_CHANNEL];\n  }\n\n  /**\n   * Initialize Plugin Manager\n   */\n  constructor() {\n    console.log('CellsPluginManager()');\n\n    this.init();\n  }\n\n  init() {\n    this._prepareCellsNativeBridgeNameSpace();\n  }\n\n  /**\n   *\n   * Prepares cells native bridge namespace inside windows object, exposing only\n   * needy functions from plugin manager.\n   * @private\n   */\n  _prepareCellsNativeBridgeNameSpace() {\n    window.CellsNativePlugins = window.CellsNativePlugins || {};\n    window.CellsNativePlugins.pluginManager = {\n      execute: this._executePlugin.bind(this),\n      pluginResponse: this._processPluginResponse.bind(this)\n    };\n  }\n\n  /**\n   * Executes a native plugin with given configuration.\n   * For this, we create a unique PID and store the plugin execution with given\n   * callbacks for later execution including native plugin result.\n   * Then, it creates a execute plugin message with previous PID to send over the native bridge.\n   * @private\n   * @param  {Function}   success Success callback to be invoked after native plugin execution (if it's a success result)\n   * @param  {Function}   fail    Fail callback to be invoked after native plugin execution (if it's a fail result)\n   * @param  {String}     plugin  Plugin to be invoked.\n   * @param  {String}     action  Plugin method to invoke.\n   * @param  {Object}     payload Payload to be sent on plugin invocation.\n   */\n  _executePlugin(success, fail, plugin, action, payload) {\n    const pluginPID = this._createUUID();\n    const pluginMessage = this._createPluginMessage(pluginPID, plugin, action, payload);\n\n    this._storeCallback(pluginPID, success, fail);\n    this._sendMessage(pluginMessage);\n  }\n\n  /**\n   * Executes success or failure plugin callback based on associated stored plugin invocation.\n   * Deletes associated plugin execution callbacks.\n   * @private\n   * @param  {String}         callbackId  Executed plugin ID\n   * @param  {String|Object}  response    String to be deserialized or raw object containing status and payload based on plugin execution result.\n   */\n  _processPluginResponse(callbackId, response) {\n    const { SUCCESS } = PLUGIN_RESPONSE_STATUS;\n    const { SUCCESS_ACCESSOR, FAIL_ACCESSOR } = PLUGIN_RESPONSE_CALLBACKS;\n    const result = this._normalizePluginResponse(response);\n    const { status, payload } = result;\n    const accessor = status == SUCCESS ? SUCCESS_ACCESSOR : FAIL_ACCESSOR;\n    const callback = this._callbacks[callbackId][accessor];\n\n    callback(payload);\n\n    delete this._callbacks[callbackId];\n  }\n\n  /**\n   * Normalizes plugin response based on it's type.\n   * @private\n   * @param  {String|Object}  response    String to be deserialized or raw object containing status and payload based on plugin execution result.\n   * @return {Object}         Plugin response object. Contains {status, payload}.\n   */\n  _normalizePluginResponse(response) {\n    return typeof(response) === 'string' ? JSON.parse(response) : response;\n  }\n\n  /**\n   * Creates a random v4 UUID.\n   * Taken from https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript/2117523#2117523\n   * @private\n   * @return {String} v4 random UUID.\n   */\n  _createUUID() {\n    return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n      (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    );\n  }\n\n  /**\n   * Creates a plugin message object based on given parameters.\n   * @private\n   * @param  {String} id      Plugin execution unique proccess identifier.\n   * @param  {String} plugin  Plugin name.\n   * @param  {String} action  Plugin method to be invoked.\n   * @param  {Object} payload Payload to send on plugin method invocation.\n   * @return {Object}         Object containing information needed to execute a native plugin.\n   */\n  _createPluginMessage(id, plugin, action, payload) {\n    return {\n      id,\n      pluginId: plugin,\n      actionId: action,\n      payload: payload\n    };\n  }\n\n  /**\n   * Stores given success and fail callbacks as properties on an object inside\n   * _callbacks with given pluginPID as key for later retrieval.\n   * @private\n   * @param  {String}   pluginPID Plugin execution unique proccess identifier.\n   * @param  {Function} success   Success callback to be invoked after native plugin execution (if it's a success result)\n   * @param  {Function} fail      Fail callback to be invoked after native plugin execution (if it's a fail result)\n   */\n  _storeCallback(pluginPID, success, fail) {\n    this._callbacks[pluginPID] = {\n      success,\n      fail\n    };\n  }\n\n  /**\n   * Send given message over the bridge.\n   * @private\n   * @param  {Object} message Message object containing information needed to execute a native plugin.\n   */\n  _sendMessage(message) {\n    this.source.postMessage(JSON.stringify(message));\n  }\n};\n\nexport default CellsNativePluginManager;\n","import NativeOperationManager from './manager/operation';\nimport CellsNativePluginManager from './manager/plugin';\n\nimport { OPERATIONS, KEYS } from './constants';\n\n/**\n * Class to manage native  in/out connections\n */\nlet CellsNativeManager = class CellsNativeManager {\n  /**\n   * Get the source to communicate with native bridge\n   *\n   * @return {Object} The source.\n   */\n  get source() {\n    return window[KEYS.NATIVE_CHANNEL];\n  }\n\n  /**\n   * Operation manager to execute native operations\n   * @type {NativeOperationManager}\n   */\n  operationManager = null;\n\n  /**\n   * Plugin manager to execute and orchestrate plugin communication.\n   * @type {CellsNativePluginManager}\n   */\n  pluginManager = null;\n\n  /**\n   * Initialize operationManager\n   */\n  constructor() {\n    console.log('CellsNativeManager()');\n\n    this.init();\n  }\n\n  /**\n   * Attach listeners to listen events from native\n   */\n  init() {\n    console.log(`CellsNativeBridge::init(${name})`);\n\n    this.operationManager = new NativeOperationManager();\n    this.pluginManager = new CellsNativePluginManager();\n\n    this._attachEventListeners();\n  }\n\n  _attachEventListeners() {\n    window.addEventListener('message', this._processMessage.bind(this));\n  }\n\n  /**\n   * HTML -> NATIVO\n   */\n\n  /**\n   * Send to native bridge a message to navigate to page passed\n   * @param {String} pageName   - Name of the page to navigate\n   * @param {Object} pageParams - Params of the page to navigate\n   * @param {Boolean} replace   - Replace navigation stack with given page\n   */\n  sendNavigationMessage(pageName, pageParams, replace = false) {\n    console.log(`CellsNativeManager::sendNavigationMessage(${pageName}, ${pageParams}, ${replace})`);\n    const navigationMessage = this._createNavigationMessage(pageName, pageParams, replace);\n\n    this._sendMessage(navigationMessage);\n  }\n\n  /**\n   * Send to native bridge a message to perform a back operation\n   */\n  sendBackstepMessage() {\n    console.log(`CellsNativeManager::sendBackstepMessage()`);\n    const backStepMessage = this._createBackStepMessage();\n\n    this._sendMessage(backStepMessage);\n  }\n\n  /**\n   * Send to native bridge a message to sync channels information\n   * @param {Channel[]} channelsData - Array of channel data\n   */\n  sendSyncChannelsDataMessage(data) {\n    console.log('CellsNativeManager::sendSyncChannelsDataMessage with data = ', data);\n\n    const channels = data.map(this._mapChannel);\n    const syncChannelsDataMessage = this._createSyncChannelsDataMessage(channels);\n\n    this._sendMessage(syncChannelsDataMessage);\n  }\n\n  sendBridgeReadyMessage() {\n    const bridgeReadyMessage = this._createBridgeReadyMessage();\n\n    this._sendMessage(bridgeReadyMessage);\n  }\n\n  sendPageStatusMessage(page, loaded) {\n    const pageMessage = this._createPageStatusMessage(page, loaded);\n\n    this._sendMessage(pageMessage);\n  }\n\n  _mapChannel({name, payload}) {\n    return {\n      channelName: name,\n      channelPayload: payload\n    };\n  }\n\n  resetChannels() {\n    console.log(`CellsNativeManager::resetChannels()`);\n    const resetChannelsMessage = this._createResetChannelsMessage();\n\n    this._sendMessage(resetChannelsMessage);\n  }\n\n  _createBackStepMessage() {\n    const { BACK_STEP } = OPERATIONS.HTML;\n\n    return {\n      op: BACK_STEP,\n      payload: {}\n    };\n  }\n\n  _createPageStatusMessage(pageName, loaded) {\n    return {\n      op: loaded ? OPERATIONS.HTML.PAGE_LOADED : OPERATIONS.HTML.PAGE_UNLOADED,\n      payload: {\n        page: pageName\n      }\n    };\n  }\n\n  _createNavigationMessage(pageName, pageParams, replace) {\n    const { NAVIGATION, NAVIGATION_AND_REPLACE } = OPERATIONS.HTML;\n\n    return {\n      op: replace ? NAVIGATION_AND_REPLACE : NAVIGATION,\n      payload: {\n        page: pageName,\n        params: pageParams\n      }\n    };\n  }\n\n  _createSyncChannelsDataMessage(channelsData) {\n    const { SYNC_CHANNELS_DATA } = OPERATIONS;\n\n    return {\n      op: SYNC_CHANNELS_DATA,\n      payloadChannel: channelsData\n    };\n  }\n\n  _createBridgeReadyMessage() {\n    const { BRIDGE_READY } = OPERATIONS.HTML;\n\n    return {\n      op: BRIDGE_READY,\n      payload: {}\n    };\n  }\n\n  _createResetChannelsMessage() {\n    const { RESET_CHANNELS_DATA } = OPERATIONS;\n\n    return {\n      op: RESET_CHANNELS_DATA,\n      payload: {}\n    };\n  }\n\n  _sendMessage(message) {\n    if (this.source) {\n      this.source.postMessage(JSON.stringify(message));\n    }\n  }\n\n  /**\n   * Listener of native messages, use operationManager to execute operations\n   * @param {Event} evt - event received from native\n   */\n  _processMessage(evt) {\n    const rawMessage = this._parseMessage(evt.data);\n    const { operation, payload } = this._mapMessage(rawMessage);\n\n    this.operationManager.execute(operation, payload);\n  }\n\n  _parseMessage(data) {\n    let parsedData = {};\n\n    try {\n      parsedData = (typeof data === 'string') ? JSON.parse(data) : {};\n    } catch(error) {\n      console.error(`Cannot parse native message '${data}'\\n\\t${error.message}`);\n    }\n\n    return parsedData;\n  }\n\n  _mapMessage(rawMessage) {\n    const { op, payload } = rawMessage;\n\n    return {\n      operation: op,\n      payload\n    };\n  }\n}\n\nexport default CellsNativeManager;\n","import eventManager from '../core/manager/events';\nimport CellsRouter from '../core/router';\n\nimport { EVENTS, PREFIX } from './constants';\n\n/**\n * Class to manage stack of routes and navigate\n * @extends CellsRouter\n */\nlet CellsNativeRouter = class CellsNativeRouter extends CellsRouter {\n\n  constructor() {\n    super();\n    this.init();\n  }\n\n\n  /**\n   * Initialize router stack.\n   * Clear stack and add first native route\n   */\n  init() {\n    const initialRoute = this.navigationStack.createRoute(`${PREFIX.NATIVE_ROUTE}init`);\n    this._clearStack();\n    this.navigationStack.push(initialRoute);\n  }\n\n  /**\n   * Add or replace a route to the route stack.\n   *\n   * @param {Object} route - Route object.\n   * @param {Boolean} replace - Indicates if given route will replace last route.\n   * @param {Boolean} native - Indicates if given route is native.\n   */\n  manageStack(route, replace = false, native = false) {\n    const navigation = {};\n    const name = route.page;\n    const { options = {} } = route;\n    const lastRouteName = (this.getLastRoute() || {}).page;\n    const cleanNavigationStack = options.cleanNavigationStack || false;\n    const cleanUntil = options.cleanUntil || false;\n\n    navigation.from = this.getLastRoute();\n    navigation.to = route;\n    if (name !== lastRouteName) {\n      const path = (native ? PREFIX.NATIVE_ROUTE : '') + name;\n      const routeToAppend = Object.assign({}, route, { page: path });\n\n      if (cleanNavigationStack) {\n        this._clearStack();\n      } else if (cleanUntil) {\n        this.clearStackUntil(cleanUntil);\n      }\n\n      //options are not usefull inside route stack\n      delete routeToAppend.options;\n\n      if (replace) {\n        this.navigationStack.replaceRoute(routeToAppend);\n      } else {\n        this.navigationStack.push(routeToAppend);\n      }\n    } else {\n      console.log(\"manageStack::UPDATE PRIVATE CHANNEL. FROM WEB TO NATIVE. WEB PAGE MUST BE ????: \", lastRouteName, '->', name);\n    }\n\n    return navigation;\n  }\n\n  addSkipNavigation(nav) {\n    console.log('Router:addSkipNavigation', nav);\n    this.navigationStack.addSkipNavigation(nav);\n  }\n\n  _wait(pauseInMiliseconds) {\n    const startTime = new Date();\n    let elapsedTime = null;\n    do {\n      elapsedTime = new Date();\n    } while(elapsedTime-startTime < pauseInMiliseconds);\n  }\n\n  /**\n   * Perform a back operation over the router stack and emit and event and/or navigate to corresponding page.\n   *\n   * @emits NATIVE_BACKSTEP_REQUEST\n   * @emits INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE\n   */\n  back() {\n    const navigation = {};\n    if (this.navigationStack.length > 1) {\n      let fromRoute = this.navigationStack.pop();\n      let auxFromRoute = fromRoute;\n      let backRoute = this.getLastRoute();\n\n      console.log('back::', fromRoute, backRoute);\n\n      while (this.navigationStack.isSkipNavigation({from: auxFromRoute.page, to: backRoute.page}) && this.navigationStack.length>1) {\n        console.log('back::skipped -> ', auxFromRoute, backRoute);\n        auxFromRoute = this.navigationStack.pop();\n        if (this.navigationStack.length > 0) {\n          backRoute = this.getLastRoute();\n        }\n      }\n\n      const isCommingBackFromNativeRoute = this.isNativeRoute(fromRoute);\n      const isGoingBackToNativeRoute = this.isNativeRoute(backRoute);\n      const page = backRoute.page.replace(PREFIX.NATIVE_ROUTE, '');\n      const params = backRoute.params;\n\n      navigation.from = fromRoute;\n      navigation.to = backRoute;\n\n      if (isGoingBackToNativeRoute) {\n        eventManager.emit(EVENTS.NATIVE_BACKSTEP_REQUEST, { page });\n      } else if (isCommingBackFromNativeRoute) {\n        eventManager.emit(EVENTS.INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE, { page });\n      }\n\n      if (!isGoingBackToNativeRoute) {\n        super.go(page, params);\n      } else {\n        this._wait(800);\n      }\n    } else {\n      navigation.from = this.getLastRoute();\n      navigation.to = this.getLastRoute();\n    }\n    return navigation;\n  }\n\n  /**\n   * Check if given route is a native route.\n   *\n   * @param {Object} route - Route to check\n   * @returns {Boolean}\n   */\n  isNativeRoute(route) {\n    const { page } = route;\n\n    return page && page.startsWith(PREFIX.NATIVE_ROUTE);\n  }\n\n  invalidateLocationHash() {\n    this.locationHash(\"\");\n  }\n\n  locationHash(path) {\n    console.log('locationHash: ', path);\n    Promise.resolve().then( () =>\n      setTimeout( () => {\n        console.log('pr locationHash: ', path);\n        location.hash = '#!' + path\n      }, 100));\n  }\n\n  createRoute(page, params = {}) {\n    return {\n      page,\n      params\n    }\n  }\n}\n\nexport default CellsNativeRouter;\n","import PolymerTemplateManager from '../../polymer/manager/template';\n\n/**\n * Class to manage cells templates\n * @extends PolymerTemplateManager\n */\nlet CellsNativeTemplateManager = class CellsNativeTemplateManager extends PolymerTemplateManager {\n\n  /**\n   * Search selected template in cache array and cache it\n   */\n  cacheSelected() {\n    const template = this.cache[this.selected];\n    const cache = this.cache;\n\n    if (template) {\n      for (let tplName in cache) {\n        if(cache.hasOwnProperty(tplName)){\n          if (tplName !== template.name) {\n            cache[tplName].cache();\n            cache[tplName].resetNextNavigation();\n          }\n        }\n      }\n      this.selected = null;\n      template.native();\n    }\n  }\n\n  /**\n   * Select a template from the cache\n   * @param {String} name - Temaplate name to select\n   */\n  selectTemplate(name) {\n    const template = this.cache[name];\n    if (template && (template.node.getAttribute('state') === 'native')) {\n      this.selected = name;\n      template.activate();\n    }\n  }\n}\n\nexport default CellsNativeTemplateManager;\n","import BridgeChannelManager from '../../core/manager/bridge-channels';\n\nlet NativeBridgeChannelManager = class NativeBridgeChannelManager extends BridgeChannelManager {\n\n  /**\n   * Initializes the private chanel for the given page.\n   *\n   * @param {String} pageName\n   *\n   */\n  initPrivateChannel(oldPageName, newPageName) {\n    const normalizedOldPageName = oldPageName||'cells-native-route:init';\n    const normalizedNewPageName = newPageName||'cells-native-route:init';\n    if (normalizedOldPageName === normalizedNewPageName) {\n      return;\n    }\n    if (this.appState &&\n        this.appState.from === normalizedOldPageName &&\n        this.appState.to === normalizedNewPageName) {\n      return;\n    }\n    super.initPrivateChannel(oldPageName, newPageName);\n\n    this.appState = {from: normalizedOldPageName, to: normalizedNewPageName};\n  }\n\n}\n\n/**\n * NativeBridgeChannelManager definition\n */\nexport default NativeBridgeChannelManager;","import CellsPolymerBridge from '../polymer/bridge';\nimport eventManager from '../core/manager/events';\n\nimport CellsNativeComponentConnector from './component-connector';\nimport CellsNativeManager from './native-manager';\nimport CellsNativeRouter from './router';\nimport CellsNativeTemplateManager from './manager/template';\nimport NativeBridgeChannelManager from './manager/bridge-channels';\n\nimport CoreConstants from '../core/constants';\n\nimport { EVENTS, PREFIX } from './constants';\n\nconst { bindingCodes, externalEventsCodes } = CoreConstants;\n\nconst PRIVATE_EVENTS = EVENTS.PRIVATE;\nconst WAIT_UNTIL_NEXT_LOGOUT = 5000;\n\n/**\n * Class to create cells-native-bridge component\n *\n * @extends CellsPolymerBridge\n */\nlet CellsNativeBridge = class CellsNativeBridge extends CellsPolymerBridge {\n  _initialRouteHandled = false;\n  _shouldInitPrivateEvents = false;\n\n  constructor(config = {}) {\n    console.log('CellsNativeBridge()');\n\n    super(config);\n\n    this._initEvents();\n    this._initComponentConnector();\n\n    this._doPreRender(config);\n    this._notifyBridgeReady();\n    this._lastLogoutTime = 0;\n  }\n\n  _initDependencies(dependencies) {\n    console.log('CellsNativeBridge::_initDependencies()');\n\n    dependencies = Object.assign({\n      NativeManager: CellsNativeManager,\n      ComponentConnector: CellsNativeComponentConnector,\n      Router: CellsNativeRouter,\n      TemplateManager: CellsNativeTemplateManager,\n      BridgeChannelManager: NativeBridgeChannelManager\n    }, dependencies);\n\n    super._initDependencies(dependencies);\n  }\n\n  publish(channelName, value, options = {}) {\n    super.publish(channelName, value);\n\n    const { forwardToNative } = this._parsePublishOptions(options);\n\n    if (forwardToNative) {\n      this._handleSyncDataToNative({ detail: channelName });\n    }\n  }\n\n  _parsePublishOptions({\n    forwardToNative = false,\n  }) {\n    return {\n      forwardToNative,\n    };\n  }\n\n  navigateToNative(page, params) {\n    const { NATIVE_NAVIGATION_REQUEST } = EVENTS;\n\n    eventManager.emit(NATIVE_NAVIGATION_REQUEST, {\n      event: {},\n      detail: { page, params }\n    });\n  }\n\n  backStep() {\n    const { ROUTER_BACKSTEP } = externalEventsCodes;\n\n    eventManager.emit(ROUTER_BACKSTEP, {\n      event: {},\n      detail: {}\n    });\n  }\n\n  resetRouter() {\n    eventManager.removeListener('nav-request', this.navRequestListener);\n    this.Router = new CellsNativeRouter(this);\n\n    this.Router.handler = () => this.routeHandler();\n    this.Router.addRoutes(this.routes);\n    this._initSkipNavigations();\n    this.Router.start();\n    this.Router.hashIsDirty = false;\n    eventManager.on('nav-request', this.navRequestListener);\n  }\n\n  routeHandler() {\n    super.routeHandler();\n\n    if (!this._initialRouteHandled) {\n      const { name, params } = this.Router.currentRoute;\n      const route = this.Router.createRoute(name, params);\n\n      this.handleForward(route);\n\n      this._initialRouteHandled = true;\n\n      console.log('CellsNativeBridge::routeHandler()', route);\n    }\n  }\n\n  _cacheSelected() {\n    this.TemplateManager.cacheSelected();\n    this.Router.currentRoute = this.Router.navigationStack.createRoute(PREFIX.NATIVE_ROUTE + 'init');\n  }\n\n  resetWebView() {\n    this._shouldInitPrivateEvents = true;\n    this.Router.init();\n    //this.TemplateManager.cacheSelected();\n    this._cacheSelected();\n    this._resetBridgeChannels();\n    this._removeTemplates();\n    this._resetEventSubscriptions();\n  }\n\n  canDoLogout() {\n    var now = new Date().getTime();\n    var elapsedMillisecondsSinceLastTimeLogout = this._lastLogoutTime > 0 ? now - this._lastLogoutTime : now;\n    return elapsedMillisecondsSinceLastTimeLogout > WAIT_UNTIL_NEXT_LOGOUT;\n  }\n\n  logoutDueToNativeRequest() {\n    if (this.canDoLogout()) {\n      this._lastLogoutTime = new Date().getTime();\n      this._resetBridgeChannels();\n      this._removeTemplates();\n      this.TemplateManager.selected = \"\";\n      this._resetEventSubscriptions();\n\n      this.Router.invalidateLocationHash();\n      this.Router.hashIsDirty = true;\n      this._initialRouteHandled = false;\n      this._shouldInitPrivateEvents = false;\n      this._initComponentConnector();\n      //this.Router.init();\n      if (this.preRenderConfig) {\n        this._preRender(this.preRenderConfig, false);\n      }\n      this.resetRouter();\n    }\n  }\n\n  logout() {\n\n    let initialPos = this.initialTemplate.indexOf(PREFIX.NATIVE_ROUTE);\n    let goToNative = initialPos === 0;\n    let initialTemplate = goToNative ? this.initialTemplate.substring(PREFIX.NATIVE_ROUTE.length) : this.initialTemplate;\n\n    this._resetBridgeChannels();\n    this._removeTemplates();\n    this.Router.init();\n\n    if(goToNative) {\n      let route = {\n        page: initialTemplate,\n        options: {\n          cleanNavigationStack: true\n        }\n      };\n      this._shouldInitPrivateEvents = true;\n      this.handleForward(route, false, true);\n      this.NativeManager.sendNavigationMessage(route.page, {}, true);\n      //this.TemplateManager.cacheSelected();\n      this._cacheSelected();\n    } else {\n      this.Router.go(initialTemplate);\n    }\n    this._resetEventSubscriptions();\n    this._initComponentConnector();\n  }\n\n  _removeTemplates() {\n    this.TemplateManager.removeTemplateChildrens(this.crossContainerId);\n    this.TemplateManager.removeTemplates(this.initialTemplate, this.crossContainerId);\n    this.TemplateManager.removeTemplate(this.initialTemplate);\n  }\n\n  _resetEventSubscriptions() {\n    this._addInitialSubscribersToEvents();\n    //this.ComponentConnector.handleI18n();\n  }\n\n  _onConfigChange(evt) {\n    if (window.AppConfig && evt.detail) {\n      for (let prop in evt.detail) {\n        if(evt.detail.hasOwnProperty(prop)){\n          if ('config' === prop) {\n            window.AppConfig.app = evt.detail[prop];\n          } else {\n            window.AppConfig[prop] = evt.detail[prop];\n          }\n        }\n      }\n      this.PageManager.storage.clear();\n      this._removeTemplates();\n      this.routeHandler();\n    }\n  }\n\n  _onLocaleChange(evt) {\n    if (window.I18nMsg && evt.detail && evt.detail.lang) {\n      window.I18nMsg.lang = evt.detail.lang;\n    }\n  }\n\n  _initEvents() {\n    // sync channels\n    eventManager.on(EVENTS.SYNC_CHANNELS_DATA, (data) => this._handleNativeSyncChannelsData(data));\n\n    // HTML navigation\n    eventManager.on(EVENTS.ROUTER_NAVIGATION, (info) => this._handleNavigationRequest(info));\n    eventManager.on(EVENTS.ROUTER_BACKSTEP, (info) => this._handleBackRequest(info));\n    eventManager.on(EVENTS.RESET_WEBVIEW, () => this.resetWebView());\n    eventManager.on(EVENTS.NATIVE_LOGOUT, () => this.logoutDueToNativeRequest());\n    eventManager.on(EVENTS.UPDATE_SKIP_NAVIGATIONS, (info) => this.updateSkipNavigations(info));\n\n    // Internal Navigation\n    eventManager.on(EVENTS.INTERNAL_ROUTER_NAVIGATION, (info) => this._handleNavigationStack(info));\n    eventManager.on(EVENTS.INTERNAL_ROUTER_BACKSTEP, () => this.handleBack({type: EVENTS.INTERNAL_ROUTER_BACKSTEP}));\n    eventManager.on(EVENTS.INTERNAL_ROUTER_BACKSTEP_FROM_NATIVE, (info) => this._handleBackRequestFromNative(info));\n\n    // NATIVE navigation\n    eventManager.on(EVENTS.NATIVE_NAVIGATION_REQUEST, (info) => this._handleNativeNavRequest(info));\n    eventManager.on(EVENTS.NATIVE_BACKSTEP_REQUEST, () => this._handleNativeBack());\n\n    // NATIVE INTEROP\n    eventManager.on(EVENTS.NATIVE_CHANNEL_SYNC, (info) => this._handleSyncDataToNative(info));\n  }\n\n  _initComponentConnector() {\n    this.ComponentConnector.handleI18n(this._onLocaleChange.bind(this));\n    this.ComponentConnector.handleConfig(this._onConfigChange.bind(this));\n    this.ComponentConnector.handleAppContextChange(this._onAppContextChanged.bind(this));\n  }\n\n  _doPreRender(config) {\n    if (config.initialPreRender) {\n      const preRenderConfig = {\n        pages: config.initialPreRender\n      };\n      this.preRenderConfig = preRenderConfig;\n      this._preRender(preRenderConfig, false);\n    }\n  }\n\n  _onAppContextChanged(evt) {\n    const contextInfo = evt.detail.value;\n\n    if (contextInfo.fromPage) {\n      this.NativeManager.sendPageStatusMessage(contextInfo.currentPage, true);\n      this.NativeManager.sendPageStatusMessage(contextInfo.fromPage, false);\n    }\n  }\n\n  _notifyBridgeReady() {\n    this.NativeManager.sendBridgeReadyMessage();\n  }\n\n  /**\n   * @private\n   * @emits INTERNAL_ROUTER_BACKSTEP\n   */\n  _handleBackRequest(detail = {}) {\n    console.log('CellsNativeBridge::_handleBackRequest()');\n    const route = this.Router.getLastRoute();\n\n    /** FIXME: Workaround to manage Android back.\n     * To get Android 'back' message from Native to HTML is needed\n     * to manage this flag to avoid doing back when app is resumed.\n    */\n    if (!detail.willAppear || this.Router.isNativeRoute(route)) {\n      eventManager.emit(EVENTS.INTERNAL_ROUTER_BACKSTEP);\n    }\n  }\n\n  registerCurrentTemplate(currentTemplate, previousTemplate) {\n    const initialRoute = PREFIX.NATIVE_ROUTE + 'init';\n    const { TEMPLATE_REGISTERED } = externalEventsCodes;\n    const { UI } = bindingCodes;\n    let options = this;\n\n    if (this._isNewStateIsEqualToOldState(currentTemplate.name, (previousTemplate||{}).name)) {\n      return;\n    }\n    /*\n    console.log('registerCurrentTemplate COMPARE', this.appState);\n    const initialRoute = PREFIX.NATIVE_ROUTE + 'init';\n    const currentTemplateName = currentTemplate.name;\n    const previousTemplateName = (previousTemplate||{}).name;\n\n    const previousTemplateIsInitialPage = previousTemplateName === initialRoute || previousTemplateName === undefined;\n    const previousStatePageWasInitialPage = (this.appState||{}).previousPage === initialRoute || (this.appState||{}).previousPage === undefined;\n\n    if (this.appState &&\n        this.appState.currentPage === currentTemplateName\n        && (this.appState.previousPage === previousTemplateName || (previousStatePageWasInitialPage===previousTemplateIsInitialPage)) ) {\n      console.log('registerCurrentTemplate skip', currentTemplateName, previousTemplateName);\n      return;\n    }\n\n    this.appState = { currentPage: currentTemplateName, previousPage: previousTemplateName };\n    */\n\n    if (previousTemplate && previousTemplate !== currentTemplate && initialRoute !== previousTemplate.name) {\n      this.unregisterChildren(previousTemplate, options.binding === UI ? 'DM' : null);\n    }\n    this.registerChildren(currentTemplate, options.binding === UI ? 'DM' : null);\n\n    this._updateChannels(previousTemplate, currentTemplate);\n    eventManager.emit(TEMPLATE_REGISTERED, { template: currentTemplate.name });\n  }\n\n  _handleBackRequestFromNative(detail) {\n    console.log('CellsNativeBridge::_handleBackRequestFromNative()');\n    const pageName = detail.page;\n\n    this.TemplateManager.selectTemplate(pageName);\n  }\n\n  /**\n   * @private\n   * @emits INTERNAL_ROUTER_NAVIGATION\n   */\n  _handleNavigationRequest(detail) {\n    const pageName = detail.page;\n\n    console.log('_handleNavigationRequest : to ', pageName);\n\n    const event = new CustomEvent(PRIVATE_EVENTS.ROUTER_NAVIGATION, {\n      detail: this._prepareNavigationParams(detail),\n      bubbles: true, composed: true\n    });\n\n    if (this._shouldInitPrivateEvents) {\n      this._shouldInitPrivateEvents = false;\n      this.routeHandler();\n    }\n    this.TemplateManager.selectTemplate(pageName);\n    eventManager.emit(EVENTS.INTERNAL_ROUTER_NAVIGATION, { detail, event });\n    console.log(`_handleNavigationRequest : to NATIVE : ${pageName}`);\n  }\n\n  _prepareNavigationParams(detail = {}) {\n    const result = Object.assign({}, detail);\n    for (let key in result.params) {\n      if (result.params.hasOwnProperty(key)) {\n        result[key] = result.params[key];\n        result.params[key] = key;\n      }\n    }\n    return result;\n  }\n\n  _handleNavigationStack(info) {\n    console.log(\"INFO \", info);\n    const route = this._unflattenRouteFromEvent(info); //@TODO PLACE INTO ROUTER\n    const options = info.detail.options || {};\n    console.log('_handleNavigationStack options.skipHistory :', options.skipHistory);\n    console.log('_handleNavigationStack :from', this.Router.getLastRoute().page, route.page);\n\n    if (options.skipHistory === true || options.skipHistory === false) {\n      this.Router.addSkipNavigation(\n        { from        : info.detail.page,\n          to          : this.Router.getLastRoute().page,\n          skipHistory : options.skipHistory\n        }\n      );\n    }\n\n    //this.Router.manageStack(route, route.replace);\n    this.handleForward(route, route.replace);\n  }\n\n  _isNewStateIsEqualToOldState(currentTemplateName, previousTemplateName) {\n    console.log('_isNewStateIsEqualToOldState COMPARE', this.appState);\n    const initialRoute = PREFIX.NATIVE_ROUTE + 'init';\n    //const currentTemplateName = currentTemplate.name;\n    //const previousTemplateName = (previousTemplate||{}).name;\n\n    const previousTemplateIsInitialPage = previousTemplateName === initialRoute || previousTemplateName === undefined;\n    const previousStatePageWasInitialPage = (this.appState||{}).previousPage === initialRoute || (this.appState||{}).previousPage === undefined;\n\n    const isSameState = (this.appState &&\n        this.appState.currentPage === currentTemplateName\n        && (this.appState.previousPage === previousTemplateName || (previousStatePageWasInitialPage===previousTemplateIsInitialPage)));\n    console.log('_isNewStateIsEqualToOldState skip=', isSameState);\n    return isSameState;\n  }\n\n  // this function MAY BE OVERRIDE on native bridge - not required due to internal router behavior\n  // BUT it's required to trigger updateAppContext\n  _updateChannels(previousTemplate, currentTemplate) {\n    if (this.BridgeChannelManager) {\n      const oldName = previousTemplate ? previousTemplate.name : undefined;\n      const newName = currentTemplate.name;\n      const navigation = { from: { page: oldName }, to: {page: newName} };\n      const privateChannelsAlreadyInitialized = this.shouldInitPrivateEvents(navigation);\n\n      if (!privateChannelsAlreadyInitialized && oldName !== newName) {\n        this.BridgeChannelManager.initPrivateChannel(oldName, newName);\n        this.BridgeChannelManager.updateAppContext(oldName, newName);\n      }\n    }\n  }\n\n  shouldInitPrivateEvents(navigation) {\n    return this.Router.isNativeRoute(navigation.from) || this.Router.isNativeRoute(navigation.to);\n  }\n\n  updatePrivateChannels(oldRoute, newRoute) {\n    if (this.BridgeChannelManager) {\n      var oldPage = oldRoute ? oldRoute.page : undefined;\n\n      this.BridgeChannelManager.updateAppContext(oldPage, newRoute.page);\n      this.BridgeChannelManager.initPrivateChannel(oldPage, newRoute.page);\n    }\n  }\n\n  handlePrivateChannelsForNavigation(navigation) {\n    if (this.shouldInitPrivateEvents(navigation)) {\n      this.updatePrivateChannels(navigation.from, navigation.to);\n    }\n  }\n\n  /**\n   * This method is executed before a backward navigation so it can be used to\n   * decide if the navigation can continue or must be cancelled. So it's a hook\n   * that applications can override. The default implementation always return { continue: true }\n   *\n   * @param {Object} backNavigation an object representing the backward navigation with the properties:\n   *   - currentPage\n   *   - backToPage\n   *\n   * @return {Object} an object that must contain the property continue with a boolean value:\n   * if continue is true, the bridge will perfom the backward navigation;\n   * otherwise it will cancel the navigation and the returned object will be\n   * published in the channel __bridge_cancelled_back_navigation\n   *\n   */\n  onNativeBackStepRequest(/*backNavigation*/) {\n    return { continue: true };\n  }\n\n  /**\n   * Execution of the hook onBackStepRequest wrapped in a promise\n   *\n   * @param {Object} backNavigation an object representing the backward navigation with the properties:\n   *   - currentPage\n   *   - backToPage\n   * It will be passed to the hook function onBackStepRequest\n   *\n   * @return {Promise} a promise with the result of the execution of the hook onBackStepRequest\n   */\n  _doBeforeBack(backNavigation) {\n    return Promise.resolve(this.onNativeBackStepRequest(backNavigation));\n  }\n\n  goBack() {\n    const navigation = super.goBack();\n    this.handlePrivateChannelsForNavigation(navigation);\n    return navigation;\n  }\n\n  /**\n   * This method is executed when the event router-backstep is fired.\n   * It calls the hook method for handling backward navigations and if that method\n   * allows the continuation, it does the navegation. Otherwise it will cancel the navigation\n   * and publish the response in the channel __bridge_cancelled_back_navigation.\n   */\n  handleBack(evt) {\n    const lastNavigation = this.Router.navigationStack.lastNavigation();\n    const backNavigation = { currentPage: lastNavigation.to, backToPage: lastNavigation.from };\n    if (evt.type === EVENTS.INTERNAL_ROUTER_BACKSTEP) {\n      this._doBeforeBack(backNavigation).then(result => {\n        if (result.continue === true) {\n          this.goBack();\n        } else {\n          result.cancelledNavigation = backNavigation;\n          this.BridgeChannelManager.publishCancelledBackNavigation(result);\n        }\n      });\n    } else {\n      this.goBack();\n    }\n  }\n\n  handleForward(route, replace = false, native = false) {\n    const navigation = this.Router.manageStack(route, replace, native);\n    this.handlePrivateChannelsForNavigation(navigation);\n  }\n\n  /**\n   * Unflattes route from given event object.\n   * @private\n   * @param  {Object} info Event info.\n   * @return {Object}      Unflatted route.\n   */\n  _unflattenRouteFromEvent(info) {\n    const { detail } = info;\n    const { page, params, cleanNavigationStack = false, cleanUntil = false, replace = false } = detail;\n    const paramsValues = info.event.detail;\n    const options = {};\n    const route = {\n      page,\n      params: this._unflattenRouteParams(params, paramsValues, true),\n      replace\n    };\n\n    if (cleanNavigationStack) {\n      options.cleanNavigationStack = cleanNavigationStack;\n    }\n\n    if (cleanUntil) {\n      options.cleanUntil = cleanUntil;\n    }\n\n    if (Object.keys(options).length > 0) {\n      route.options = options;\n    }\n\n    return route;\n  }\n\n  /**\n   * Unflattes route params based on given param object list and given param values.\n   * @private\n   * @param   {Object}  [list={}]                     Object including params names on object keys.\n   * @param   {Object}  [values={}]                   Object containing key/value properties with params values.\n   * @param   {Boolean} [swapParamsDefinition=false]  Flag indicating if final params object should gather property names based on value property of list params.\n   * @return {Object}                                 Object containing unflatten params based on list & values.\n   */\n  _unflattenRouteParams(list = {}, values = {}, swapParamsDefinition = false) {\n    const params = {};\n\n    Object.keys(list).forEach((param) => {\n      const targetProperty = swapParamsDefinition ? list[param] : param;\n      const valueProperty = values[param];\n\n      if (valueProperty) {\n        params[targetProperty] = valueProperty;\n      } else {\n        console.error(`Error trying to unflat value from param ${param} - value is not presented on value list (${JSON.stringify(values)})`);\n      }\n    });\n\n    return params;\n  }\n\n  _handleSyncDataToNative(info) {\n    const channelName = info.detail;\n    const channel = this.ComponentConnector.getChannel(channelName);\n\n    this.NativeManager.sendSyncChannelsDataMessage([channel]);\n  }\n\n  _handleNativeNavRequest(info) {\n    console.log('CellsNativeBridge::_handleNativeNavRequest()');\n\n    const route = this._unflattenNavigationData(info);\n    const resetChannels = route.resetChannels || false;\n\n    if (!resetChannels) {\n      this._syncChannelsToNative();\n    } else {\n      this.NativeManager.resetChannels();\n    }\n\n    //this.Router.manageStack(route, false, true);\n    this.handleForward(route, false, true);\n    this.NativeManager.sendNavigationMessage(route.page, route.params);\n    this.TemplateManager.cacheSelected();\n    //this._cacheSelected();\n  }\n\n  _unflattenNavigationData(info) { //@TODO REFACTOR SPR - _unflattenRouteFromEvent params & options\n    const eventPayload = info.event.detail;\n\n    const route = Object.assign({}, info.detail);\n    const { cleanNavigationStack = false, cleanUntil = false } = route;\n    const routeParams = route.params;\n    const options = {};\n\n    const pageParams = this._unflattenRouteParams(routeParams, eventPayload, true);\n\n    if (pageParams) {\n      route.params = pageParams;\n    }\n\n    if (cleanNavigationStack) {\n      options.cleanNavigationStack = cleanNavigationStack;\n    }\n\n    if (cleanUntil) {\n      options.cleanUntil = cleanUntil;\n    }\n\n    if (Object.keys(options).length > 0) {\n      route.options = options;\n    }\n\n    return route;\n  }\n\n  _handleNativeBack() {\n    console.log('CellsNativeBridge::_handleNativeBack()');\n    this._syncChannelsToNative();\n    this.NativeManager.sendBackstepMessage();\n    this._cacheSelected();\n  }\n\n  updateSkipNavigations(info) {\n    const navigations = info.navigations;\n    navigations.forEach(nav => {\n      this.Router.addSkipNavigation(nav);\n    });\n  }\n\n  _handleNativeSyncChannelsData(payload) {\n    console.log('CellsNativeBridge::_handleNativeSyncChannelsData()');\n    this.ComponentConnector.syncChannels(payload.channels);\n  }\n\n  _syncChannelsToNative() {\n    const channels = this.ComponentConnector.getChannels();\n    this.NativeManager.sendSyncChannelsDataMessage(channels);\n  }\n}\n\nexport default CellsNativeBridge;\n","// BUILD_TARGET import statement is replaced by NormalModuleReplacementPlugin at build time with desireed target.\n// Possible values: core, native, polymer.\nimport './polyfills';\nimport Bridge from './BUILD_TARGET/bridge';\nimport * as metadata from './core/constants';\n\n// TARGETS and BUILD_TARGET are injected through Webpack DefinePlugin,\nconst TARGET_NAMESPACE = TARGETS[BUILD_TARGET] || TARGETS['core'];\nconst { windowExport } = TARGET_NAMESPACE;\n\n// We expose Bridge to Browsers\nwindow[windowExport] = Bridge;\n"],"sourceRoot":""}