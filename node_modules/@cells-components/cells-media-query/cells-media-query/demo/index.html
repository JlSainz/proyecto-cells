<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>

    <title>cells-media-query demo</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="../build/webcomponents-loader.js"></script>
    <script src="../build/scoping-shim.min.js"></script>
    <script src="../build/apply-shim.min.js"></script>
    <script src="../build/custom-style-interface.min.js"></script>
    <script>
      {
        const _customElementsDefine = window.customElements.define;
        window.customElements.define = (name, cl, conf) => {
          if (!customElements.get(name)) {
            _customElementsDefine.call(window.customElements, name, cl, conf);
          } else {
            console.warn(`${name} has been defined twice`);
          }
        };
      }
    </script>

    <script defer src="../build/component.js"></script>
    <script type="module" crossorigin="use-credentials">
      import '../build/demo-build.js';
    </script>

  </head>
  <body>

    <cells-demo-helper>
      <cells-demo-case heading="Resize the frame">
        <template>

          <style>
            .container {
              max-width: 400px;
              margin: 0 auto;
              background-color: #FFF;
              padding: 24px;
              box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
            }

            .item {
              margin: 8px;
              border: 1px solid #ddd;
            }

            .item .title {
              font-weight: bold;
              font-size: 1.2em;
              background-color: #eee;
              padding: 8px;
            }

            .item[wide-layout] .title {
              float: left;
              margin: 0 8px 4px 0;
              font-size: 1.4em;
            }

            .item .description {
              padding: 8px;
            }

            .item::after {
              content: '';
              display: block;
              clear: both;
            }
          </style>

          <div class="container">

            <cells-media-query query="(min-width: 600px)"></cells-media-query>
            <cells-media-query full query="print"></cells-media-query>

            <div class="item">
              <div class="title">Resize the window</div>
              <div class="description">
                <span class="not-wide">The viewport is less than 600px wide, so the items' titles will not float.</span>
                <span class="wide">The viewport is at least 600px, so the items' titles will float to the left.</span>
                Here's another sentence; it's not very long.
              </div>
            </div>

            <div class="item">
              <div class="title"><code>print</code> example</div>
              <div class="description">
                <a href="https://lit-element.polymer-project.org/">
                  This link's destination is visible when this page is printed.
                </a>
                <span class="print">(https://lit-element.polymer-project.org/)</span>
                This is another sentence which is meant to help fill this box.
              </div>
            </div>

          </div>

          <script type="module">
            const mediaQuery = document.querySelectorAll('cells-media-query')[0];
            const mediaQueryPrint = document.querySelectorAll('cells-media-query')[1];
            const items = document.querySelectorAll('.item');
            const wideText = document.querySelector('.wide');
            const notWideText = document.querySelector('.not-wide');
            const printText = document.querySelector('.print');

            function mediaQueryMatches(value) {
              items.forEach(item => {
                item.toggleAttribute('wide-layout', value);
              });
              wideText.hidden = !value;
              notWideText.hidden = value;
            }
            function printQueryMatches(value) {
              printText.hidden = !value;
            }

            mediaQuery.addEventListener('query-matches-changed', (e) => {
              mediaQueryMatches(e.detail.value);
            });
            mediaQueryPrint.addEventListener('query-matches-changed', (e) => {
              printQueryMatches(e.detail.value);
            });

            mediaQueryMatches(mediaQuery.queryMatches);
            printQueryMatches(mediaQueryPrint.queryMatches);
          </script>

        </template>
      </cells-demo-case>
    </cells-demo-helper>

  </body>
</html>
